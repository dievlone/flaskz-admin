/*! Focus UI v2.3.2 | http://focus-ui.com/ | 2023-01-01 | Licensed to Cisco */
!function(s,f){"use strict";function He(e){return gt(R,e)}function Ke(e,t){We(e)?Fe(e,function(e,t){R.hasOwnProperty(e)||(R[e]=t)}):R.hasOwnProperty(e)||(R[e]=t)}function Je(){this._array=[],this._map={}}function u(e){var n,t=e&&e.forEach?e:[].slice.call(arguments),r=!1,i=("object"==typeof t[0]&&(r=t.length,n=[],t.forEach(function(t){["x","y","z"].forEach(function(e){void 0!==t[e]&&n.push(t[e])})}),t=n),!1),o=t.length;if(r){if(4<r){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==o&&8!==o&&9!==o&&12!==o&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var a=!i&&(9===o||12===o)||e&&e[0]&&void 0!==e[0].z,s=[],l=0,c=(this._3d=a)?3:2;l<o;l+=c){var d={x:t[l],y:t[l+1]};a&&(d.z=t[l+2]),s.push(d)}this.order=s.length-1,this.points=s,r=["x","y"],a&&r.push("z"),this.dims=r,this.dimlen=r.length,function(e){for(var t=e.order,n=e.points,r=p.align(n,{p1:n[0],p2:n[t]}),i=0;i<r.length;i++)if(1e-4<p.abs(r[i].y))return e._linear=!1;e._linear=!0}(this),this._t1=0,this._t2=1,this.update()}function Q(e){this instanceof Q||q.throwError("Instance must be constructed via new"),this.__zid__=q.guid(),this.__props__={},this.__getProps__={},We(e)&&Fe(e,function(e,t){ct(t)?this[e]=t:this.__initSetProperty(e,t)},this)}function e(){this._typeListenersMap=l.create(null)}function P(){this._dispatcher=new e,P.superClass.constructor.apply(this,arguments)}function t(){t.superClass.constructor.apply(this,arguments)}function n(){var e,t;this._dataArrayMap=new Je,e=st(arguments[0])?(t=arguments[0],h.call(arguments,1)):arguments,n.superClass.constructor.apply(this,e),t&&t.forEach(this.add,this)}function Ye(){this._rootArrayMap=new Je,Ye.superClass.constructor.apply(this,arguments)}var r,Ze={},l=s.Object,i=s.Array,o=s.String,Qe=s.document,ee=s.Math,et=s.parseInt,tt=s.parseFloat,te=s.devicePixelRatio||1,a=l.prototype.toString,d=i.prototype.push,h=i.prototype.slice,_=l.keys,g=Qe.createElement.bind(Qe),y=ee.PI,v=ee.pow,ne=ee.sqrt,C=ee.atan2,nt=ee.abs,rt=ee.max,it=ee.min,re=ee.cos,ie=ee.sin,m=ee.acos,b=ee.tan,ot=ee.floor,at=ee.ceil,x=ee.round,w=ee.random,R=("function"!=typeof l.assign&&l.defineProperty(l,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=l(e),r=arguments.length,i=1;i<r;i++){var o=arguments[i];if(null!=o)for(var a in o)l.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])}return n},writable:!0,configurable:!0}),o.prototype.startsWith||(o.prototype.startsWith=function(e,t){t=0<t?0|t:0;return this.substring(t,t+e.length)===e}),o.prototype.endsWith||(o.prototype.endsWith=function(e,t){return(t===f||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&ee.floor(e)===e}),{}),D=(s.FOCUS_UI_DEFAULTS&&l.assign(R,s.FOCUS_UI_DEFAULTS),{capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}}),A=D.capitalize,k="fu_model",S="fu_data",T="fu_provider",L="fu_view",oe="fu_gview",ae="fu_node",se="fu_link",le="fu_group",ce="fu_subview",de="fu_linksubview",E={isArray:function(e){return i.isArray(e)},isString:function(e){return E.isPrimitiveType(e,"String")},isBoolean:function(e){return E.isPrimitiveType(e,"Boolean")},isObject:function(e){return E.isPrimitiveType(e,"Object")},isFunction:function(e){return E.isPrimitiveType(e,"Function")},isNumber:function(e){return E.isPrimitiveType(e,"Number")},isPrimitiveType:function(e,t){return!!t&&(t="[object "+t+"]",a.apply(e)===t)}},st=E.isArray,lt=E.isString,V=E.isBoolean,We=E.isObject,ct=E.isFunction,dt=E.isNumber,O={merge:function(e){for(var t=arguments.length,n=1;n<t;n++)d.apply(e,arguments[n]);return e},each:function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(!1===t.apply(n,[e[i],i]))return},filter:function(e,t,n){return e.filter(t,n)},find:function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(!0===t.apply(n,[e[i],i]))return e[i];return f},removeItem:function(e,t,n){for(var r=e.length,i=0;i<r;i++){var o=e[i];if(!0===t.apply(n,[o,i]))return e.splice(i,1),o}return f},toMap:function(e,t,n){var r={};return ct(t)?e.forEach(function(e){r[t.apply(n,[e])]=e}):e.forEach(function(e){r[e[t]]=e}),r},_removeByItem:function(e,t,n){var r=e.length,i=0;if(!0===n)for(i=r-1;-1<i;i--)e[i]===t&&e.splice(i,1);else for(i=0;i<r;i++)if(e[i]===t)return e.splice(i,1),e;return e}},ht=O.merge,ut=O.each,_t=O.filter,pt=O.find,z=O.removeItem,I=O.toMap,ft=O._removeByItem,M={merge:function(){return l.assign.apply(null,arguments)},deepMerge:function(t){for(var e=arguments.length,n={},r=1;r<e;r++){var i=arguments[r];_(i).forEach(function(e){M.createKVMap(n,e,i[e])})}return _(n).forEach(function(e){M.setDeepValue(t,e,n[e])}),t},getDeepKVMap:function(t){var n={};return _(t).forEach(function(e){M.createKVMap(n,e,t[e])}),n},createKVMap:function(t,e,n){var r;We(n)?(r=e+".",_(n).forEach(function(e){M.createKVMap(t,r+e,n[e])})):t[e]=n},each:function(e,t,n){for(var r=_(e),i=r.length,o=0;o<i;o++){var a=r[o];if(!1===t.apply(n,[a,e[a]]))return}},filter:function(e,t,n){for(var r=_(e),i=r.length,o={},a=0;a<i;a++){var s=r[a],l=e[s];!0===t.apply(n,[s,l])&&(o[s]=l)}return o},getDeepValue:function(e,t,n){var r=t.split(n=n||"."),i=r.length;if(1===i)return e[t];var o=r[0];if(e.hasOwnProperty(o)){var a=e[o],s=i-1;if(We(a))for(var l=1;l<i;){if(o=r[l],!a.hasOwnProperty(o)){a=f;break}if(a=a[o],l!==s&&!We(a)){a=f;break}l++}else a=f}else a=f;return a},setDeepValue:function(e,t,n,r){var i=t.split(r=r||"."),r=i.length;if(1!==r){for(var o=e[l=i[0]],a=(We(o)||(e[l]=o={}),1),s=r-1;a<s;){var l,c=o[l=i[a]];We(c)||(o[l]=c={}),o=c,a++}o[i[s]]=n}else e[t]=n},getValues:function(e){for(var t=_(e),n=t.length,r=[],i=0;i<n;i++)r.push(e[t[i]]);return r}},Ge=(l.values&&(M.getValues=function(e){return l.values(e)}),M.merge),B=M.deepMerge,Fe=M.each,N=M.filter,gt=M.getDeepValue,U=M.setDeepValue,yt=M.getValues,H={i18n_map:l.create(null),i18n_count:0,getLabel:function(e,t){t=H.i18n_map[t||H.getLocal()];if(t){t=gt(t,e);if(null!=t)return t}return""},setLocal:function(e){H.local=e},getLocal:function(){return H.local},add:function(e,t,n){var r=H.i18n_map[e];r?!0===n?We(t)?H.i18n_map[e]=t:(delete H.i18n_map[e],H.i18n_count--):B(r,t):We(t)&&(H.i18n_map[e]=t,0===H.i18n_count&&null==H.local&&H.setLocal(e),H.i18n_count++)}},vt={extend:function(l,e,t){function n(){}n.prototype=e.prototype,l.prototype=new n,(l.prototype.constructor=l).superClass=e.prototype,l.__zsuperClass_=e,t&&Fe(t,function(e,t){if(0===e.indexOf("___z"))if("___zdefaults_"===e)t&&Fe(t,function(e,t){vt.setClassDefault(l,e,t)});else for(var n="",r=("___zsg"===e?n="get":"___zsi"===e&&(n="is"),t.length),i=0;i<r;i++){var o,a,s=t[i];!s||(s=s.trim())&&(o=vt.getSetFuncName(s),a=vt.getGetFuncName(s,n),l.prototype[o]=vt.createSetFunc(s),l.prototype[a]=vt.createGetFunc(s))}else"__className_"===e?(vt.__classNameMap[t]=l).__className_=t:l.prototype[e]=t})},getSetFuncName:function(e){var e=e.split("_"),t="set";return e.forEach(function(e){t+=A(e)}),t},getGetFuncName:function(e,t){var e=e.split("_"),n=t;return e.forEach(function(e){n+=A(e)}),n},createSetFunc:function(t){return function(e){this.setProperty(t,e)}},createGetFunc:function(e){return function(){return this.getProperty(e)}},getClassDefault:function(e,t){var n=e.___zdefaults_;return null!=n&&n.hasOwnProperty(t)?n[t]:e.__zsuperClass_?vt.getClassDefault(e.__zsuperClass_,t):null},setClassDefault:function(e,t,n){var r=e.___zdefaults_;null==r&&(e.___zdefaults_=r={}),r[t]=n},_setClassDefault:function(n,e,t){var r=arguments.length;2===r?Fe(e,function(e,t){vt.setClassDefault(n,e,t)}):2<r&&vt.setClassDefault(n,e,t)},_extendPrototype:function(n,e,t){var r=arguments.length;2===r?Fe(e,function(e,t){n.prototype[e]=t}):2<r&&(n.prototype[e]=t)},__classNameMap:{},createInstance:function(e,t){return(e=e&&(lt(e)?vt.getClassByName(e):e))?2===arguments.length?vt.__createInstance(e,t):new e:null},__createInstance:function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[14]);default:throw new Error("So many parameters(>16) are not supported...")}},getClassByName:function(e){if(vt.__classNameMap.hasOwnProperty(e))return vt.__classNameMap[e];var t=e.split("."),n=t.length,e=null;if(0<n){for(var r=s[t[0]],i=1;r&&i<n;)r=r[t[i]],i++;e=r}return e},newClass:function(e,t,n,r){function i(){i.superClass.constructor.apply(this,arguments),t.apply(this,arguments)}return vt.extend(i,e||l,n),r&&Fe(r,function(e,t){vt.setClassDefault(i,e,t)}),i}},je=vt.extend,W=(je(Je,l,{add:function(e,t,n){if(!0===this.has(e)){var r=this._map[e];if(r===t)return;ft(this._array,r)}this._map[e]=t,3<=arguments.length?this._array.splice(n,0,t):this._array.push(t)},remove:function(e){var t;return!0===this.has(e)&&(t=this._map[e],delete this._map[e],ft(this._array,t)),t},clear:function(){this._array.length=0,this._map={}},has:function(e){return this._map.hasOwnProperty(e)},get:function(e){return this._map[e]},keys:function(){return _(this._map)},size:function(){return this._array.length},toArray:function(e){return!1===e?this._array:ht([],this._array)},eachObject:function(e,t){return Fe(this._map,e,t)},eachArray:function(e,t){return ut(this._array,e,t)},findArray:function(e,t){return pt(this._array,e,t)},filterArray:function(e,t){return _t(this._array,e,t)}}),s.setTimeout),G=s.clearTimeout,Ct={__callLaterListMap:new Je,__callIntervalListMap:new Je,__callRAFIntervalListMap:new Je,callBatch:function(e,t){var n=(t=t||{}).object||t.context||s,r=t.key||"_call_batch_key";return!0!==n[r]&&(n[r]=!0,Ct.callRAFLater(function(){e.apply(t.context),!1!==t.reset&&delete n[r]}),!0)},callLater:function(t,e,n){function r(){var e=r.id;null!=e&&(t.apply(n,[]),Ct.__deleteCallLater(e))}var i=q.guid(),o=(r.id=i,Ct.__setTimeout(r,e));return Ct.__callLaterListMap.add(i,{id:i,timeout_id:o,later_callBack:r,callBack:t,delay:e,context:n}),i},cancelCallLater:function(t,n,r){ct(t)?Ct.__callLaterListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(Ct.__deleteCallLater(e.id),!1)}):Ct.__deleteCallLater(t)},callInterval:function(t,n,r,e,i){var o;if(!0!==e||!1!==t.apply(r))return e=q.guid(),o=function(){var e=o.id;null!=e&&(!0===i&&Qe&&"visible"!==Qe.visibilityState||!1!==t.apply(r,arguments)?Ct.__setTimeout(o,n):Ct.__deleteInterval(e))},Ct.__callIntervalListMap.add(o.id=e,{id:e,later_callBack:o,callBack:t,delay:n,context:r}),Ct.__setTimeout(o,n),e},cancelCallInterval:function(t,n,r){ct(t)?Ct.__callIntervalListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(Ct.__deleteInterval(e.id),!1)}):Ct.__deleteInterval(t)},callRAFLater:function(e,t){return Ct.requestAnimationFrame(e,t)},callRAFInterval:function(t,n,e){if(!0===e&&!1===t.apply(n))return;function r(){var e=r.id;null!=e&&(!1!==t.apply(n,arguments)?Ct.requestAnimationFrame(r):Ct.__deleteRAFInterval(e))}e=q.guid();return Ct.__callRAFIntervalListMap.add(r.id=e,{id:e,later_callBack:r,callBack:t,context:n},r),Ct.requestAnimationFrame(r),e},cancelCallRAFInterval:function(t,n){ct(t)?Ct.__callRAFIntervalListMap.eachArray(function(e){return e.callBack!==t||e.context!==n||(Ct.__deleteRAFInterval(e.id),!1)}):Ct.__deleteRAFInterval(t)},__setTimeout:function(e,t,n){var r=e;return null!=n&&(r=e.bind(n)),W(r,t)},__deleteCallLater:function(e){var e=Ct.__callLaterListMap.remove(e);e&&(delete e.later_callBack.id,(e=e.timeout_id)&&G(e))},__deleteInterval:function(e){e=Ct.__callIntervalListMap.remove(e);e&&delete e.later_callBack.id},__deleteRAFInterval:function(e){e=Ct.__callRAFIntervalListMap.remove(e);e&&delete e.later_callBack.id}},F=(Ct.__raf=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame,Ct.__raf?Ct.requestAnimationFrame=function(e,t){var n;return e?(n=e,null!=t&&(n=e.bind(t)),Ct.__raf.call(s,n)):f}:Ct.requestAnimationFrame=function(e,t){return Ct.__setTimeout(e,17,t)},Ct.callBatch),mt=Ct.callLater,j=Ct.callInterval,bt=Ct.callRAFLater,xt=Ct.callRAFInterval,c=(Ke("COLOR_NAME_HEX_MAP",{AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"}),Ke("COLOR_DEFAULTS",["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]),{defaults:function(e){var t=He("COLOR_DEFAULTS");return 0<arguments.length?t[e%t.length]:t.slice()},random:function(e,t){e=(e||"hex").toLowerCase();var n=He("COLOR_NAME_HEX_MAP"),r=_(n);if("name"===e)return r[r.length*w()|0];r=yt(n),n="#"+r[r.length*w()|0];if("hex"===e)return n;r=c._getRGBByHex(n);return"rgba"!==e&&"hsla"!==e||(r.alpha=(11*w()|0)/10),c.convert(r,e,t)},toRGB:function(e,t){return c.convert(e,"rgb",t)},toRGBA:function(e,t){return c.convert(e,"rgba",t)},toHSL:function(e,t){return c.convert(e,"hsl",t)},toHSLA:function(e,t){return c.convert(e,"hsla",t)},toHex:function(e){return c.convert(e,"hex")},toName:function(e){return c.convert(e,"name")},convert:function(e,t,n){var r,i;if(t=t.toLowerCase(),null!=e&&(i=We(e)?c._roundRGBObj(e):(r=c._getColorType(e),c._getColorRGBObject(e,r))),!0===n)switch(t){case"rgb":case"rgba":return i;case"hsl":case"hsla":return c._rgbObjToHSLAObj(i)}if(i)switch(t){case"rgb":return c._rgbObjToRGBStr(i);case"rgba":return c._rgbObjToRGBAStr(i);case"hsl":return c._rgbObjToHSLStr(i);case"hsla":return c._rgbObjToHSLAStr(i);case"hex":return c._rgbObjToHexStr(i);case"name":return c._rgbObjToNameStr(i)}return""},mix:function(e,t,n,r,i){null==n&&(n=.5),r=(r||"hex").toLowerCase();e=c.toRGBA(e,!0),t=c.toRGBA(t,!0);return c.convert({red:ue.range(e.red+(t.red-e.red)*n,0,255),green:ue.range(e.green+(t.green-e.green)*n,0,255),blue:ue.range(e.blue+(t.blue-e.blue)*n,0,255),alpha:ue.range(e.alpha+(t.alpha-e.alpha)*n,0,1)},r,i)},lighten:function(e,t,n,r){return c._adjustLightness(e,t=null==t?.1:t,n,r)},darken:function(e,t,n,r){return null==t?t=-.1:t*=-1,c._adjustLightness(e,t,n,r)},_adjustLightness:function(e,t,n,r){return c._adjustHSL("lightness",e,t,n,r)},saturate:function(e,t,n,r){return c._adjustSaturation(e,t=null==t?.1:t,n,r)},desaturate:function(e,t,n,r){return null==t?t=-.1:t*=-1,c._adjustSaturation(e,t,n,r)},_adjustSaturation:function(e,t,n,r){return c._adjustHSL("saturation",e,t,n,r)},_adjustHSL:function(e,t,n,r,i){r=(r=null==r&&"name"===(r=c._getColorType(t))?"hsl":r).toLowerCase();var o,t=c.toHSL(t,!0);return t&&(nt(n)<1&&(n*=100),o=t[e],t[e]=ue.range(o+n,0,100),(o=c._hslToRGB(t.hue,t.saturation,t.lightness)).alpha=t.alpha),c.convert(o,r,i)},_getColorType:function(e){return(e=e.trim().toLowerCase()).startsWith("#")?"hex":e.startsWith("rgba")?"rgba":e.startsWith("rgb")?"rgb":e.startsWith("hsla")?"hsla":e.startsWith("hsl")?"hsl":c._getHexByName(e)?"name":""},_roundRGBObj:function(e){return e&&{red:x(e.red),green:x(e.green),blue:x(e.blue),alpha:e.alpha}},_rgbToHex:function(e){return((1<<24)+(e.red<<16)+(e.green<<8)+e.blue).toString(16).slice(1)},_getNameByHex:function(n){var r;return n=n.toLowerCase(),Fe(He("COLOR_NAME_HEX_MAP"),function(e,t){if(t.toLowerCase()===n)return r=e,!1}),r},_getHexByName:function(n){var r;return n=n.toLowerCase(),Fe(He("COLOR_NAME_HEX_MAP"),function(e,t){if(e.toLowerCase()===n)return r=t,!1}),r},_hslToRGB:function(e,t,n){return t/=100,{red:255*c._hueToRGB(t=2*(n/=100)-(n=n<=.5?n*(t+1):n+t-n*t),n,(e/=60)+2),green:255*c._hueToRGB(t,n,e),blue:255*c._hueToRGB(t,n,e-2)}},_hueToRGB:function(e,t,n){return n<0&&(n+=6),6<=n&&(n-=6),n<1?(t-e)*n+e:n<3?t:n<4?(t-e)*(4-n)+e:e},_rgbToHSL:function(e){for(var t,n,r=[e.red/255,e.green/255,e.blue/255],i=r[0],o=r[0],a=0,s=0;s<2;s++)r[s+1]<=i&&(i=r[s+1]),o<=r[s+1]&&(o=r[s+1],a=s+1);return 0===a&&(n=(r[1]-r[2])/(o-i)),1===a&&(n=2+(r[2]-r[0])/(o-i)),2===a&&(n=4+(r[0]-r[1])/(o-i)),isNaN(n)&&(n=0),(n*=60)<0&&(n+=360),e=(i+o)/2,t=i===o?0:e<.5?(o-i)/(o+i):(o-i)/(2-o-i),{hue:x(n),saturation:x(100*t),lightness:x(100*e)}},_rgbObjToHSLAObj:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,e):null},_rgbObjToRGBStr:function(e){return e?"rgb("+e.red+", "+e.green+", "+e.blue+")":""},_rgbObjToRGBAStr:function(e){return e?"rgba("+e.red+", "+e.green+", "+e.blue+", "+e.alpha+")":""},_rgbObjToHSLStr:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,"hsl("+e.hue+", "+e.saturation+"%, "+e.lightness+"%)"):""},_rgbObjToHSLAStr:function(e){var t;return e?(t=e.alpha,(e=c._rgbToHSL(e)).alpha=t,"hsla("+e.hue+", "+e.saturation+"%, "+e.lightness+"%, "+e.alpha+")"):""},_rgbObjToHexStr:function(e){return e?"#"+c._rgbToHex(e):""},_rgbObjToNameStr:function(e){return e?(e=c._rgbToHex(e),c._getNameByHex(e)||""):""},_getColorRGBObject:function(e,t){if(!t)return null;var n;switch(e=e.trim().toLowerCase(),t){case"hex":n=c._getRGBByHex(e);break;case"rgba":n=c._getRGBObjByRGBA(e);break;case"rgb":n=c._getRGBObjByRGB(e);break;case"hsla":n=c._getRGBObjByHSLA(e);break;case"hsl":n=c._getRGBObjByHSL(e);break;case"name":n=c._getRGBObjByName(e)}return n=c._roundRGBObj(n)},_getColorArgs:function(e){var t=[],e=e.match(/\((.*?)\)/g);return e&&2<(e=e[0]).length&&(e=e.substring(1,e.length-1)).split(",").forEach(function(e){-1<(e=e.trim()).indexOf("%")&&(e=e.replace("%","")),t.push(tt(e))}),t},_getRGBObjByHSL:function(e){var e=c._getColorArgs(e);return 2<e.length?{red:(e=c._hslToRGB(e[0],e[1],e[2])).red,green:e.green,blue:e.blue,alpha:1}:null},_getRGBObjByHSLA:function(e){var t,e=c._getColorArgs(e);return 3<e.length?{red:(t=c._hslToRGB(e[0],e[1],e[2])).red,green:t.green,blue:t.blue,alpha:tt(e[3])}:null},_getRGBObjByRGB:function(e){e=c._getColorArgs(e);return 2<e.length?{red:e[0],green:e[1],blue:e[2],alpha:1}:null},_getRGBObjByRGBA:function(e){e=c._getColorArgs(e);return 3<e.length?{red:e[0],green:e[1],blue:e[2],alpha:e[3]}:null},_getRGBObjByName:function(e){e=c._getHexByName(e);return e?c._getRGBByHex(e):null},_getRGBByHex:function(e){var t=1;return 8===(e=3!==(e=e.replace("#","")).length&&4!==e.length?e:e.replace(/(.)/g,"$1$1")).length&&(t=tt((et(e.substr(6,2),16)/255).toFixed(2)),e=e.substr(0,6)),6===e.length?{red:et(e.substr(0,2),16),green:et(e.substr(2,2),16),blue:et(e.substr(4,2),16),alpha:t}:null}}),he={isMoveTo:function(e){return"move_to"===e||"mt"===e||"moveTo"===e},isLineTo:function(e){return"line_to"===e||"lt"===e||"lineTo"===e},isQuadraticCurveTo:function(e){return"quadratic_curve_to"===e||"qct"===e||"qt"===e||"quadraticCurveTo"===e},isBezierCurveTo:function(e){return"bezier_curve_to"===e||"bct"===e||"ct"===e||"bezierCurveTo"===e},isBezier:function(e){return he.isQuadraticCurveTo(e)||he.isBezierCurveTo(e)},isClose:function(e){return"close"===e}},q={__uid:0,guid:function(){return"_z-i-"+q.__uid++},logError:function(e){console.error(e)},throwError:function(e){throw new Error(e)},exec:function(e,t,n){e=e.replace(n||/([\[{])(.+?)([\]}])/g,function(e){e=e.substr(1,e.length-2),e=gt(t,e);return null!=(e=!lt(e)||e.startsWith("'")||e.startsWith('"')?e:"'"+e+"'")?e:e||"''"});return new Function("return "+e).apply({},[])}},$=180,X=360,p=(u.prototype={update:function(){this.dpoints=[];for(var e=this.points,t=e.length,n=t-1;1<t;t--,n--){for(var r,i=[],o=0;o<n;o++)r={x:n*(e[o+1].x-e[o].x),y:n*(e[o+1].y-e[o].y)},this._3d&&(r.z=n*(e[o+1].z-e[o].z)),i.push(r);this.dpoints.push(i),e=i}this.computedirection()},computedirection:function(){var e=this.points,e=p.angle(e[0],e[this.order],e[1]);this.clockwise=0<e},length:function(){return p.length(this.derivative.bind(this))},_lut:[],getLUT:function(e){if(this._lut.length===(e=e||100))return this._lut;this._lut=[];for(var t=0;t<=e;t++)this._lut.push(this.compute(t/e));return this._lut},project:function(e){var t,n=this.getLUT(),r=n.length-1,n=p.closest(n,e),i=n.mdist,n=n.mpos;if(0===n||n===r)return(t=this.compute(a=n/r)).t=a,t.d=i,t;var o,a,s,l,d=(n+1)/r,c=.1/r;for(i+=1,o=a=(n-1)/r;a<d+c;a+=c)s=this.compute(a),(l=p.dist(e,s))<i&&(i=l,o=a);return(s=this.compute(o)).t=o,s.d=i,s},get:function(e){return this.compute(e)},compute:function(e){if(0===e)return this.points[0];if(1===e)return this.points[this.order];var d,h,t,n,r,i,o,a=this.points,s=1-e;if(1===this.order)return o={x:s*a[0].x+e*a[1].x,y:s*a[0].y+e*a[1].y},this._3d&&(o.z=s*a[0].z+e*a[1].z),o;if(this.order<4)return d=s*s,h=e*e,i=0,2===this.order?(a=[a[0],a[1],a[2],p.ZERO],t=d,n=s*e*2,r=h):3===this.order&&(t=d*s,n=d*e*3,r=s*h*3,i=e*h),o={x:t*a[0].x+n*a[1].x+r*a[2].x+i*a[3].x,y:t*a[0].y+n*a[1].y+r*a[2].y+i*a[3].y},this._3d&&(o.z=t*a[0].z+n*a[1].z+r*a[2].z+i*a[3].z),o;for(var l=JSON.parse(JSON.stringify(this.points));1<l.length;){for(var c=0;c<l.length-1;c++)l[c]={x:l[c].x+(l[c+1].x-l[c].x)*e,y:l[c].y+(l[c+1].y-l[c].y)*e},void 0!==l[c].z&&(l[c]=l[c].z+(l[c+1].z-l[c].z)*e);l.splice(l.length-1,1)}return l[0]},raise:function(){for(var e,t,n=this.points,r=[n[0]],i=n.length,o=1;o<i;o++)e=n[o],t=n[o-1],r[o]={x:(i-o)/i*e.x+o/i*t.x,y:(i-o)/i*e.y+o/i*t.y};return r[i]=n[i-1],new u(r)},derivative:function(e){var t,n,r=1-e,i=0,o=this.dpoints[0],r=(2===this.order&&(o=[o[0],o[1],p.ZERO],t=r,n=e),3===this.order&&(t=r*r,n=r*e*2,i=e*e),{x:t*o[0].x+n*o[1].x+i*o[2].x,y:t*o[0].y+n*o[1].y+i*o[2].y});return this._3d&&(r.z=t*o[0].z+n*o[1].z+i*o[2].z),r},normal:function(e){return this._3d?this.__normal3(e):this.__normal2(e)},__normal2:function(e){var e=this.derivative(e),t=p.sqrt(e.x*e.x+e.y*e.y);return{x:-e.y/t,y:e.x/t}},__normal3:function(e){var t=this.derivative(e),e=this.derivative(e+.01),n=p.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),r=p.sqrt(e.x*e.x+e.y*e.y+e.z*e.z),n=(t.x/=n,t.y/=n,t.z/=n,e.x/=r,e.y/=r,e.z/=r,{x:e.y*t.z-e.z*t.y,y:e.z*t.x-e.x*t.z,z:e.x*t.y-e.y*t.x}),r=p.sqrt(n.x*n.x+n.y*n.y+n.z*n.z),e=(n.x/=r,n.y/=r,n.z/=r,[n.x*n.x,n.x*n.y-n.z,n.x*n.z+n.y,n.x*n.y+n.z,n.y*n.y,n.y*n.z-n.x,n.x*n.z-n.y,n.y*n.z+n.x,n.z*n.z]);return{x:e[0]*t.x+e[1]*t.y+e[2]*t.z,y:e[3]*t.x+e[4]*t.y+e[5]*t.z,z:e[6]*t.x+e[7]*t.y+e[8]*t.z}},hull:function(e){var t,n,r=this.points,i=[],o=[],a=0,s=0;for(o[a++]=r[0],o[a++]=r[1],o[a++]=r[2],3===this.order&&(o[a++]=r[3]);1<r.length;){for(i=[],s=0,n=r.length-1;s<n;s++)t=p.lerp(e,r[s],r[s+1]),o[a++]=t,i.push(t);r=i}return o},split:function(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;var n=this.hull(e),n={left:2===this.order?new u([n[0],n[3],n[5]]):new u([n[0],n[4],n[7],n[9]]),right:2===this.order?new u([n[5],n[4],n[2]]):new u([n[9],n[8],n[6],n[3]]),span:n};return n.left._t1=p.map(0,0,1,this._t1,this._t2),n.left._t2=p.map(e,0,1,this._t1,this._t2),n.right._t1=p.map(e,0,1,this._t1,this._t2),n.right._t2=p.map(1,0,1,this._t1,this._t2),t?(t=p.map(t,e,1,0,1),n.right.split(t).left):n},extrema:function(){var e,n,t=this.dims,r={},i=[];return t.forEach(function(t){n=function(e){return e[t]},e=this.dpoints[0].map(n),r[t]=p.droots(e),3===this.order&&(e=this.dpoints[1].map(n),r[t]=r[t].concat(p.droots(e))),r[t]=r[t].filter(function(e){return 0<=e&&e<=1}),i=i.concat(r[t].sort())}.bind(this)),i=i.sort().filter(function(e,t){return i.indexOf(e)===t}),r.values=i,r},bbox:function(){var t=this.extrema(),n={};return this.dims.forEach(function(e){n[e]=p.getminmax(this,e,t[e])}.bind(this)),n},overlaps:function(e){var t=this.bbox(),e=e.bbox();return p.bboxoverlap(t,e)},offset:function(n,e){var r,t,i,o;return void 0!==e?(t={c:o=this.get(n),n:r=this.normal(n),x:o.x+r.x*e,y:o.y+r.y*e},this._3d&&(t.z=o.z+r.z*e),t):this._linear?(i=this.normal(0),o=this.points.map(function(e){var t={x:e.x+n*i.x,y:e.y+n*i.y};return e.z&&r.z&&(t.z=e.z+n*i.z),t}),[new u(o)]):this.reduce().map(function(e){return e.scale(n)})},simple:function(){if(3===this.order){var e=p.angle(this.points[0],this.points[3],this.points[1]),t=p.angle(this.points[0],this.points[3],this.points[2]);if(0<e&&t<0||e<0&&0<t)return!1}var e=this.normal(0),t=this.normal(1),n=e.x*t.x+e.y*t.y;return this._3d&&(n+=e.z*t.z),p.abs(p.acos(n))<p.pi/3},reduce:function(){var e,t,n=0,r=0,i=[],o=[],a=this.extrema().values;for(-1===(a=-1===a.indexOf(0)?[0].concat(a):a).indexOf(1)&&a.push(1),n=a[0],e=1;e<a.length;e++)r=a[e],(t=this.split(n,r))._t1=n,t._t2=r,i.push(t),n=r;return i.forEach(function(e){for(r=n=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(t=e.split(n,r)).simple()){if(r-=.01,p.abs(n-r)<.01)return[];(t=e.split(n,r))._t1=p.map(n,0,1,e._t1,e._t2),t._t2=p.map(r,0,1,e._t1,e._t2),o.push(t),n=r;break}n<1&&((t=e.split(n,1))._t1=p.map(n,0,1,e._t1,e._t2),t._t2=e._t2,o.push(t))}),o},scale:function(o){var a=this.order,s="function"==typeof o?o:!1;if(s&&2===a)return this.raise().scale(s);var l=this.clockwise,n=s?s(0):o,r=s?s(1):o,i=[this.offset(0,10),this.offset(1,10)],c=p.lli4(i[0],i[0].c,i[1],i[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");var d=this.points,h=[];return[0,1].forEach(function(e){var t=h[e*a]=p.copy(d[e*a]);t.x+=(e?r:n)*i[e].n.x,t.y+=(e?r:n)*i[e].n.y}.bind(this)),[0,1].forEach((s?function(e){var t,n,r,i;2===this.order&&e||(n={x:(t=d[e+1]).x-c.x,y:t.y-c.y},r=s?s((e+1)/a):o,s&&!l&&(r=-r),i=p.sqrt(n.x*n.x+n.y*n.y),n.x/=i,n.y/=i,h[e+1]={x:t.x+r*n.x,y:t.y+r*n.y})}:function(e){var t,n;2===this.order&&e||(t=h[e*a],n=this.derivative(e),n={x:t.x+n.x,y:t.y+n.y},h[e+1]=p.lli4(t,n,c,d[e+1]))}).bind(this)),new u(h)},intersects:function(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof u&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)},lineIntersects:function(e){var t=p.min(e.p1.x,e.p2.x),n=p.min(e.p1.y,e.p2.y),r=p.max(e.p1.x,e.p2.x),i=p.max(e.p1.y,e.p2.y),o=this;return p.roots(this.points,e).filter(function(e){e=o.get(e);return p.between(e.x,t,r)&&p.between(e.y,n,i)})},selfintersects:function(e){for(var t,n,r=this.reduce(),i=r.length-2,o=[],a=0;a<i;a++)t=r.slice(a,a+1),n=r.slice(a+2),t=this.curveintersects(t,n,e),o=o.concat(t);return o},curveintersects:function(e,n,t){var r=[],i=(e.forEach(function(t){n.forEach(function(e){t.overlaps(e)&&r.push({left:t,right:e})})}),[]);return r.forEach(function(e){e=p.pairiteration(e.left,e.right,t);0<e.length&&(i=i.concat(e))}),i}},{abs:ee.abs,cos:ee.cos,sin:ee.sin,acos:ee.acos,atan2:ee.atan2,sqrt:ee.sqrt,pow:ee.pow,crt:function(e){return e<0?-p.pow(-e,1/3):p.pow(e,1/3)},pi:ee.PI,tau:2*ee.PI,quart:ee.PI/2,epsilon:1e-6,nMax:9007199254740991,nMin:-9007199254740991,min:ee.min,max:ee.max,ZERO:{x:0,y:0,z:0},Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){t=t(e),e=t.x*t.x+t.y*t.y;return void 0!==t.z&&(e+=t.z*t.z),p.sqrt(e)},between:function(e,t,n){return t<=e&&e<=n||p.approximately(e,t)||p.approximately(e,n)},approximately:function(e,t,n){return p.abs(e-t)<=(n||p.epsilon)},length:function(e){for(var t,n=0,r=p.Tvalues.length,i=0;i<r;i++)t=.5*p.Tvalues[i]+.5,n+=p.Cvalues[i]*p.arcfn(t,e);return.5*n},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},lerp:function(e,t,n){var r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(r.z=t.z+e*(n.z-t.z)),r},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){var r=t.x-e.x,t=t.y-e.y,i=n.x-e.x,n=n.y-e.y,e=r*n-t*i,o=p.sqrt(r*r+t*t),a=p.sqrt(i*i+n*n);return p.atan2(e,(r/=o)*(i/=a)+(t/=o)*(n/=a))},dist:function(e,t){var n=e.x-t.x,e=e.y-t.y;return p.sqrt(n*n+e*e)},closest:function(e,n){var r,i,o=p.pow(2,63);return e.forEach(function(e,t){(i=p.dist(n,e))<o&&(o=i,r=t)}),{mdist:o,mpos:r}},lli8:function(e,t,n,r,i,o,a,s){var l=(e-n)*(o-s)-(t-r)*(i-a);return 0!=l&&{x:((e*r-t*n)*(i-a)-(e-n)*(i*s-o*a))/l,y:((e*r-t*n)*(o-s)-(t-r)*(i*s-o*a))/l}},lli4:function(e,t,n,r){var i=e.x,e=e.y,o=t.x,t=t.y,a=n.x,n=n.y,s=r.x,r=r.y;return p.lli8(i,e,o,t,a,n,s,r)},lli:function(e,t){return p.lli4(e,e.c,t,t.c)},getminmax:function(e,t,n){if(!n)return{min:0,max:0};var r,i=p.nMax,o=p.nMin;-1===(n=-1===n.indexOf(0)?[0].concat(n):n).indexOf(1)&&n.push(1);for(var a=0,s=n.length;a<s;a++)r=n[a],(r=e.get(r))[t]<i&&(i=r[t]),r[t]>o&&(o=r[t]);return{min:i,mid:(i+o)/2,max:o,size:o-i}},align:function(e,t){var n=t.p1.x,r=t.p1.y,i=-p.atan2(t.p2.y-r,t.p2.x-n);return e.map(function(e){return{x:(e.x-n)*p.cos(i)-(e.y-r)*p.sin(i),y:(e.x-n)*p.sin(i)+(e.y-r)*p.cos(i)}})},roots:function(e,t){function n(e){return 0<=e&&e<=1}var r=e.length-1,e=p.align(e,t=t||{p1:{x:0,y:0},p2:{x:1,y:0}});if(2==r)return 0!==(a=(i=e[0].y)-2*(c=e[1].y)+(o=e[2].y))?[-((t=-p.sqrt(c*c-i*o))+(r=-i+c))/a,-(-t+r)/a].filter(n):c!==o&&0===a?[(2*c-o)/2*(c-o)].filter(n):[];var i,o,a,s,t=e[0].y,r=e[1].y,l=e[2].y,r=(e=(3*(c=(-3*t+3*r)/(a=3*r-t-3*l+e[3].y))-(i=(3*t-6*r+3*l)/a)*i)/3)/3,l=(2*i*i*i-9*i*c+27*(o=t/a))/27,c=l/2,t=c*c+r*r*r;return t<0?(o=p.sqrt((a=-e/3)*a*a),e=p.acos((r=-l/(2*o))<-1?-1:1<r?1:r),[(a=2*p.crt(o))*p.cos(e/3)-i/3,a*p.cos((e+p.tau)/3)-i/3,a*p.cos((e+2*p.tau)/3)-i/3].filter(n)):0==t?[2*(s=c<0?p.crt(-c):-p.crt(c))-i/3,-s-i/3].filter(n):(l=p.sqrt(t),[(s=p.crt(-c+l))-p.crt(c+l)-i/3].filter(n))},droots:function(e){var t,n,r,i,o,a;return 3===e.length?0!==(n=(o=e[0])-2*(a=e[1])+(t=e[2]))?[-((r=-p.sqrt(a*a-o*t))+(i=-o+a))/n,-(-r+i)/n]:a!==t&&0===n?[(2*a-t)/(2*(a-t))]:[]:2===e.length?(o=e[0])!==(a=e[1])?[o/(o-a)]:[]:void 0},bboxoverlap:function(e,t){for(var n,r,i,o=["x","y"],a=o.length,s=0;s<a;s++)if(n=e[i=o[s]].mid,r=t[i].mid,i=(e[i].size+t[i].size)/2,p.abs(n-r)>=i)return!1;return!0},pairiteration:function(e,t,n){var r=e.bbox(),i=t.bbox(),o=n||.5;if(r.x.size+r.y.size<o&&i.x.size+i.y.size<o)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(t._t1+t._t2)/2|0)/1e5];var n=e.split(.5),r=t.split(.5),i=(i=[{left:n.left,right:r.left},{left:n.left,right:r.right},{left:n.right,right:r.right},{left:n.right,right:r.left}]).filter(function(e){return p.bboxoverlap(e.left.bbox(),e.right.bbox())}),a=[];return 0===i.length?a:(i.forEach(function(e){a=a.concat(p.pairiteration(e.left,e.right,o))}),a=a.filter(function(e,t){return a.indexOf(e)===t}))},__createBezier:function(e){var t=e[0],n=e[1],r=e[2],i=e.length;return 3===i?new u(t.x,t.y,n.x,n.y,r.x,r.y):4===i?(i=e[3],new u(t.x,t.y,n.x,n.y,r.x,r.y,i.x,i.y)):void 0},getLength:function(e){return p.__createBezier.apply(p,[e]).length()},getBounds:function(e){e=p.__createBezier.apply(p,[e]).bbox();return{x:e.x.min,y:e.y.min,width:e.x.size,height:e.y.size}},getClosestPointOnBezier:function(e,t){return p.__createBezier.apply(p,[e]).project(t)},getLUT:function(e,t){return p.__createBezier.apply(p,[e]).getLUT(t)}}),ue={range:function(e,t,n){return rt(it(t,n),it(rt(t,n),e))},toDegrees:function(e){return e*$/y},toRadians:function(e){return e/$*y},to360Degrees:function(e){return(e%X+X)%X},calcDistance:function(e,t){var n=t.x-e.x,t=t.y-e.y;return ne(n*n+t*t)},calcAngle:function(e,t){return ue.to360Degrees(ue.toDegrees(C(t.y-e.y,t.x-e.x)))},isAngleInRange:function(e,t,n){return e=ue.to360Degrees(e),t=ue.to360Degrees(t),n=ue.to360Degrees(n),t<e&&(t+=X),n<=t&&e<=n||X<t&&e<=(n+=X)&&n<=t},getArgsPoint:function(e){var t=arguments.length;return 1===t?st(e)?{x:e[1],y:e[2]}:e:1<t?{x:e,y:arguments[1]}:null},getArgsSize:function(e){var t=arguments.length;return 1===t?st(e)?{width:e[1],height:e[2]}:e:1<t?{width:e,height:arguments[1]}:null}},_e=ue.toRadians,pe=ue.calcDistance,fe=ue.calcAngle,ge=ue.to360Degrees,ye={cross:function(e,t,n){return(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x)},convexHull:function(e){(e=e.slice()).sort(function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x});for(var t=e.length,n=[],r=0;r<t;r++){for(;2<=n.length&&ye.cross(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}var i=[];for(r=t-1;0<=r;r--){for(;2<=i.length&&ye.cross(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),n.pop(),n.concat(i)}},ve={calc2LinesIntersection:function(e,t,d,h,u){var n=e.x,r=e.y,i=t.x,o=t.y,a=d.x,s=d.y,l=h.x,c=h.y,_=(n-i)*(s-c)-(r-o)*(a-l);if(0==_)return f;n={x:((n*o-r*i)*(a-l)-(n-i)*(a*c-s*l))/_,y:((n*o-r*i)*(s-c)-(r-o)*(a*c-s*l))/_};return!1===u||ve.isPointOnLineSegment(n,e,t)&&ve.isPointOnLineSegment(n,d,h)?n:f},calcRectLineIntersection:function(e,t,n,d){for(var r=e.x,i=e.y,o=e.width,e=e.height,h=t.x,u=t.y,_=n.x,p=n.y,f={x:r,y:i},a={x:r+o,y:i},g={x:r,y:i+e},r={x:r+o,y:i+e},o=[f,a],i=[a,r],e=[r,g],a=[g,f],y=h<_?u<p?[a,o,i,e]:[e,a,o,i]:u<p?[o,i,e,a]:[i,e,a,o],v=[],s=0;s<4;s++){var l=y[s],C=l[0],l=l[1],c=ve.calc2LinesIntersection(C,l,t,n,d);c&&ve.isPointOnLineSegment(c,C,l)&&(v.push(c),0!==s&&2!==s||s++)}return v},calcPointToLineClosestPoint:function(e,t,n){var r=t.x,t=t.y,i=n.x,n=n.y;if(r===i&&t===n)return{x:r,y:t};var o=v(r-i,2)+v(t-n,2),e=((e.x-r)*(i-r)+(e.y-t)*(n-t))/o;return e<0?{x:r,y:t}:1<e?{x:i,y:n}:{x:r+e*(i-r),y:t+e*(n-t)}},isPointsOnLineSameSide:function(t,n,e){if(e.length<2)return!0;var r=[],i=(t.x===n.x?e.forEach(function(e){r.push(e.x-t.x)}):t.y===n.y?e.forEach(function(e){r.push(e.y-t.y)}):e.forEach(function(e){r.push((e.y-t.y)*(n.x-t.x)-(e.x-t.x)*(n.y-t.y))}),[]);return r.forEach(function(e){e<0?e=-1:0<e&&(e=1),i.indexOf(e)<0&&i.push(e)}),-1<i.indexOf(1)&&-1<i.indexOf(1)},isPointOnLineSegment:function(e,t,n){var r=pe(e,t),e=pe(e,n),t=pe(t,n);return nt(r+e-t)<1e-4},calcOffsetPointOnLine:function(e,t,n,r){var i=pe(t,e);return(n=!0===r&&0<=n&&n<=1?ue.range(n*i,0,i):n)<=0?e:i<=n?t:{x:(i-n)/i*(e.x-t.x)+t.x,y:n/i*(t.y-e.y)+e.y}}},Ce={getTransformedPoint:function(e,t){var n=t.e||t.translate_x||0,r=t.f||t.translate_y||0,i=t.a||t.scale_x||t.zoom||1,o=t.d||t.scale_y||t.zoom||1,a=t.b||t.skew_x||0,t=t.c||t.skew_y||0;return{x:i*e.x+t*e.y+n,y:a*e.x+o*e.y+r}},calc3PointsCircleCenter:function(e,t,n){var r=(t.y-e.y)/(t.x-e.x),i=(n.y-t.y)/(n.x-t.x),n=(r*i*(n.y-e.y)+r*(t.x+n.x)-i*(e.x+t.x))/(2*(r-i));return{x:n,y:(e.y+t.y)/2-1/r*(n-(e.x+t.x)/2)}},calc3PointsAngle:function(e,t,n){var r=ne(v(t.x-e.x,2)+v(t.y-e.y,2)),t=ne(v(t.x-n.x,2)+v(t.y-n.y,2)),n=ne(v(n.x-e.x,2)+v(n.y-e.y,2));return ue.toDegrees(m((t*t+r*r-n*n)/(2*t*r)))},calcPointOnCircle:function(e,t,n){n=_e(ge(n));return{x:e.x+re(n)*t,y:e.y+ie(n)*t}},calcPointOnEllipse:function(e,t){var n=e.x,r=e.y,i=e.width,e=e.height,n=n+i/2,r=r+e/2,o=(t=ge(t),_e(t)),o=b(o),i=i/2,e=e/2,i=i*i,e=e*e,e=ne(i*e/(e+i*o*o)),i=e*o,o=e+n,a=i+r,e=-e+n,i=-i+r,n=fe({x:n,y:r},{x:o,y:a});return 0<=t&&t<$?0<=n&&n<$?{x:o,y:a}:{x:e,y:i}:$<=n&&n<X?{x:o,y:a}:{x:e,y:i}},calcRotatedPoint:function(e,t,n){var r=e.x,e=e.y,i=t.x,t=t.y,n=_e(ge(n));return{x:r+(i-r)*re(n)-(t-e)*ie(n),y:e+(t-e)*re(n)+(i-r)*ie(n)}},calcParallelogramPoints:function(t,e){var n=t.length;if(0<n){for(var r=t[0],d=r.x,h=r.x,i=r.y,o=r.y,a=r,u=r,_=1;_<n;_++)r=t[_],i=it(i,r.y),o=rt(o,r.y),r.x<d&&(d=r.x,a=r),r.x>h&&(h=r.x,u=r);for(var s=b(_e(e%90)),l=a.x-(o-a.y)/s,c=u.x-(o-u.y)/s,p=0,f=0;!function(){for(;p<n;p++){r=t[p];var e=o-s*(r.x-l);if(r.y<e)return l=r.x-(o-r.y)/s-1,!1}return!0}(););for(;!function(){for(;f<n;f++)if((r=t[f]).x>c){var e=o-s*(r.x-c);if(r.y>e)return c=r.x-(o-r.y)/s+1,!1}return!0}(););e=(o-i)/s;return[{x:l,y:o},{x:l+e,y:i},{x:c+e,y:i},{x:c,y:o}]}return t},calcPointsBounds:function(e){var t=(e=e||[]).length;if(0===t)return null;for(var n=e[0],r=n.x,i=n.y,o=n.x,a=n.y,s=1;s<t;s++)n=e[s],r=it(r,n.x),i=it(i,n.y),o=rt(o,n.x),a=rt(a,n.y);return{x:r,y:i,width:o-r,height:a-i}},rectContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width,e=e.height,o=t.x,t=t.y;return!(i<=0||e<=0)&&(n<=o&&o<=n+i&&r<=t&&t<=r+e)},circleContainsPoint:function(e,t,n){return pe(e,n)<=t},ellipseContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width/2,e=e.height/2,n=t.x-(n+i),t=t.y-(r+e);return n*n/(i*i)+t*t/(e*e)<=1},pieContainsPoint:function(e,t,n,r,i){return!!Ce.circleContainsPoint(e,t,i)&&(nt(r-n)>=X||ue.isAngleInRange(n,r,fe(e,i)))}},me={calcPathBounds:function(e){var t=(e=e||[]).length;if(t<1)return null;var n=e[0],r=n.x,i=n.y,o=n.x,a=n.y;return 1<t&&me.splitPath(e).forEach(function(e){var t,n=e.type,e=e.points;he.isLineTo(n)||he.isMoveTo(n)?t=Ce.calcPointsBounds(e):he.isBezier(n)&&(t=p.getBounds(e)),t&&(r=it(r,t.x),i=it(i,t.y),o=rt(o,t.x+t.width),a=rt(a,t.y+t.height))}),{x:r,y:i,width:o-r,height:a-i}},calcPointToPathClosestPoint:function(n,e){if((e=e||[]).length<2)return e[0];var t,r=[],i=(me.splitPath(e).forEach(function(e){var t=e.type,e=e.points;he.isLineTo(t)||he.isMoveTo(t)?r.push(ve.calcPointToLineClosestPoint(n,e[0],e[1])):he.isBezier(t)&&r.push(p.getClosestPointOnBezier(e,n))}),r[0]),o=pe(n,i);return r.forEach(function(e){(t=pe(n,e))<o&&(o=t,i=e)}),i},calcPathLength:function(e){var n=0;return me.splitPath(e=e||[]).forEach(function(e){var t=e.type,e=e.points;he.isLineTo(t)?n+=pe(e[0],e[1]):he.isBezier(t)&&(n+=p.getLength(e))}),n},calcOffsetPointOnPath:function(e,h,t){var u,_,n,r=(e=e||[]).length;return r<2?null:(h<=0?(u=e[0],_=fe(u,e[1])):(n=me.calcPathLength(e),!0===t&&h<=1&&0<=h&&(1<=h?(u=e[r-1],_=fe(e[r-2],u)):h=ue.range(h*n,0,n)),n<=h&&(u=e[r-1],_=fe(e[r-2],u))),u?Ge({angle:_},u):(ut(me.splitPath(e),function(e){var t=e.type,n=e.points,r=n.length,i=0;if(he.isLineTo(t)?i=pe(n[0],n[1]):he.isBezier(t)&&(i=p.getLength(n)),!(i<h)){if(he.isLineTo(t))u=me._getPathOffsetPoint(ve.calcOffsetPointOnLine(n[0],n[1],h),e);else if(he.isBezier(t))for(var o=p.getLUT(n,rt(0|i,20)),d=o.length,a=1;a<d;a++){var s=o[a-1],l=o[a],c=pe(s,l);if(!(c<h)){u=h<c/2?me._getPathOffsetPoint(s,e,o,a-1):me._getPathOffsetPoint(l,e,o,a);break}h-=c}return null==u&&(u=n[r-1],_=fe(n[r-2],n)),!1}h-=i}),u?Ge({angle:_},u):void 0))},_getPathOffsetPoint:function(e,t,n,r){var i=t.type,t=t.points,o=t.length;return he.isBezier(i)?e.angle=fe(n[(r=0===r?1:r)-1],n[r]):e.angle=fe(t[0],t[o-1]),e},splitPath:function(e){var t=e.length;if(t<2)return[];for(var n,r,i=[],o=e[0],a=o.seg,s=o,l=1;l<t;l++)o=e[l],null!=a?he.isMoveTo(a)?i.push({type:"move_to",points:[e[l-1],o]}):he.isQuadraticCurveTo(a)?l<t-1?(n=o,o=e[++l],i.push({type:"quadratic_curve_to",points:[s,n,o]})):i.push({type:"line_to",points:[s,o]}):he.isBezierCurveTo(a)&&(l<t-2?(n=o,r=o=e[++l],o=e[++l],i.push({type:"bezier_curve_to",points:[s,n,r,o]})):i.push({type:"line_to",points:[s,o]})):i.push({type:"line_to",points:[e[l-1],o]}),a=o.seg,s=o;return i},roundPath:function(e,t,n){if(1<t&&e){var r=e.length;if(2<r){!0===n&&(e=ht([e[r-1]],e,[e[0]]),r+=2);var i=[];i.push(e[0]);for(var o=1;o<r-1;o++){var a=e[o],s=e[o-1],d=e[o+1],l=pe(s,a),c=pe(a,d),l=(!0===n?(l/=2,c/=2):(1!==o&&(l/=2),o!==r-2&&(c/=2)),it(l,c,t)),c=Ce.calcPointOnCircle(a,l,fe(a,s));c.seg="quadratic_curve_to",i.push(c),i.push(a),i.push(Ce.calcPointOnCircle(a,l,fe(a,d)))}return i.push(e[r-1]),!0===n&&(i.shift(),i.pop()),i}}return e}},be={createGrowRect:function(e,t,n){return{x:e.x-t,y:e.y-(n=2===arguments.length?t:n),width:e.width+2*t,height:e.height+2*n}},getRectCenter:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},intersectsRect:function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0)&&(t.x+t.width>e.x&&t.y+t.height>e.y&&t.x<e.x+e.width&&t.y<e.y+e.height)},containsRect:function(e,t){var n=e.width,r=e.height,i=t.width,o=t.height;if(n<=0||r<=0||i<0||o<0)return!1;var a=e.x,e=e.y,s=t.x,t=t.y;return a<=s&&e<=t&&s+i<=a+n&&t+o<=e+r},calcRectsUnion:function(e){if(0===e.length)return null;var t=e[0],n=t.x,r=t.y,i=n+t.width,o=r+t.height;return e.slice(1).forEach(function(e){n=it(n,e.x),r=it(r,e.y),i=rt(i,e.x+e.width),o=rt(o,e.y+e.height)}),{x:n,y:r,width:i-n,height:o-r}},calcRectsIntersection:function(e){if(0===e.length)return null;var t=e[0],s={x:t.x,y:t.y,width:t.width,height:t.height};return e.slice(1).forEach(function(e){if(!be.intersectsRect(s,e))return f;var t=s.x,n=s.y,r=e.x,i=e.y,o=rt(t,r),a=rt(n,i);s={x:o,y:a,width:it(t+s.width,r+e.width)-o,height:it(n+s.height,i+e.height)-a}}),s},calcRotatedRect:function(e,t,n){if(null==e)return null;var r=e.x,i=e.y,o=e.width,a=e.height;if(t%360==0)return{x:r,y:i,width:o,height:a};n=n||{x:e.x+o/2,y:e.y+a/2};var e=Ce.calcRotatedPoint(n,{x:r,y:i},t),s=Ce.calcRotatedPoint(n,{x:r+o,y:i},t),o=Ce.calcRotatedPoint(n,{x:r+o,y:i+a},t),n=Ce.calcRotatedPoint(n,{x:r,y:i+a},t),r=it(e.x,s.x,o.x,n.x),i=it(e.y,s.y,o.y,n.y);return{x:r,y:i,width:rt(e.x,s.x,o.x,n.x)-r,height:rt(e.y,s.y,o.y,n.y)-i}}},K={calcCubicBezier:function(e,t,n,r,i){return v(1-i,3)*e+3*i*v(1-i,2)*t+3*v(i,2)*(1-i)*n+v(i,3)*r},calcCubicBezierT:function(e,t,n,r,i){if(i===e||i===r)return i;for(var o,a,s=0,l=1;o=K.calcCubicBezier(e,t,n,r,a=s+(l-s)/2),!(nt(o=o-i)<1e-6);)0<o?l=a:s=a;return a}},J={linear:function(e){return e},ease:function(e){return J._calcCubicBezierTiming({x:.25,y:.1},{x:.25,y:1},e)},"ease-in":function(e){return J._calcCubicBezierTiming({x:.42,y:0},{x:1,y:1},e)},"ease-out":function(e){return J._calcCubicBezierTiming({x:0,y:0},{x:.58,y:1},e)},"ease-in-out":function(e){return J._calcCubicBezierTiming({x:.42,y:0},{x:.58,y:1},e)},"cubic-bezier":function(e,t,n,r,i){return J._calcCubicBezierTiming({x:t,y:n},{x:r,y:i},e)},_calcCubicBezierTiming:function(e,t,n){n=K.calcCubicBezierT(0,e.x,t.x,1,n);return K.calcCubicBezier(0,e.y,t.y,1,n)},getTimingFunc:function(e){var t,n,r,i;return lt(e)&&(J.hasOwnProperty(e)?e=J[e]:!(t=e.match(/^\s*[(\w+)-]\s*\((.*)\)/))||(n=t[1])&&J.hasOwnProperty(n)&&(r=J[n],i=t[1].split(","),e=function(e){return r.apply(null,[e].concat(i))})),e=ct(e)?e:J.linear}},Y={cancelAnimate:function(e){Ct.cancelCallRAFInterval(e)},animate:function(r,e){if(We(arguments[0])&&(r=(e=arguments[0]).frame),ct(r)){var i,o,a,h,s,l,c,d,u=0|(e=e||{}).duration;if(!(u<=0))return i=J.getTimingFunc(e.timing_function||e.timing||e.easing),o=e.finish,a=0|e.delay,h=e.direction,s=!0===(s=e.iteration_count||e.iterations)||s===1/0?1/0:rt(1,0|s),l=performance.now(),d=c=1,xt(function(){var e=performance.now(),t=e-l;if(0<a){if(t<=a)return;l=e,t=a=0}var t=t/u,n=!1,t=(1<=t&&(n=!0,t=1),i(-1===c?1-t:t)),t=r(t,d);if(!1===t)return o&&o(),t;if(!0===n){if(s<=d)return o&&o(),!1;d++,l=e,"alternate"===h&&(c*=-1)}})}}},xe={_loadingMap:{},_cachedMap:{},_errorMap:{},clearCache:function(){xe._loadingMap={},xe._cachedMap={},xe._errorMap={}},register:function(e,t){t&&(lt(t)?(null==xe._loadingMap[e]&&(xe._loadingMap[e]=[]),xe.load(e,t)):xe._cachedMap[e]=t)},get:function(e,t,n){if(!lt(e))return e;if(xe._cachedMap.hasOwnProperty(e))return xe._cachedMap[e];if(1<xe._errorMap[e])return!1;var r=xe._loadingMap[e],i=null==r;!0==i&&(xe._loadingMap[e]=r=[]),t&&r.push({callBack:t,context:n}),!0==i&&xe.load(e,e)},load:function(e,t){var n=new Image;n.onload=function(){xe.cache(e,n)},n.onerror=function(){console.error("Load Image Error:"+t),xe.cache(e,null)},n.onabort=function(){console.error("Load Image Abort:"+t),xe.cache(e,null)},n.src=t},cache:function(e,t){t?xe._cachedMap[e]=t:xe._errorMap[e]=1+(0|xe._errorMap[e]);var n=xe._loadingMap[e];n&&(n.forEach(function(e){e.callBack.apply(e.context,[t])}),delete xe._loadingMap[e])},getColorImage:function(e,t,n){var e=xe._createImgCanvas(e),r=e.getContext("2d"),i=e.getAttribute("width"),o=e.getAttribute("height"),i=r.getImageData(0,0,i,o);return Z.rgb(i,t),r.putImageData(i,0,0),"canvas"===n?e:e.toDataURL(n)},_createImgCanvas:function(e){var t=e.width,n=e.height,r=Xe("canvas");return r.setAttribute("width",t),r.setAttribute("height",n),r.getContext("2d").drawImage(e,0,0),r}},Z={rgb:function(e,t){for(var n,t=c.toRGB(t,!0),r=t.red,i=t.green,o=t.blue,a=e.data,s=a.length,l=0;l<s;l+=4)0!==a[l+3]&&(n=(.34*a[l]+.5*a[l+1]+.16*a[l+2])/255,a[l]=n*r,a[l+1]=n*i,a[l+2]=n*o,a[l+3]=a[l+3])}},we=(je(Q,l,{id:function(){return this.__zid__},_bind:function(r){var i;We(r)&&(i=this,Fe(r,function(t,e){var n=e;l.defineProperty(r,t,{set:function(e){ct(n=e)?i[t]=n:i.setProperty(t,n)},get:function(){return n}})}))},setCallBack:function(e,t,n){this["_default_"+e]=this.constructor.prototype[e],this[e]=function(){t.apply(n||this,arguments)}},resetCallBack:function(e){this[e]=this["_default_"+e]},getClassName:function(){return this.constructor.__className_},set:function(e,t){return this.setProperty.apply(this,arguments)},setProperty:function(e,t){var n=arguments.length;return 1===n&&We(e)?Fe(e,function(e,t){this._setProperty(e,t)},this):1<n&&this._setProperty(e,t),this},isPropertyValid:function(e,t,n){return!0},beforeSetProperty:function(e,t,n){},afterSetProperty:function(e,t,n){},__initSetProperty:function(e,t){var n=this.__props__[e];return!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n)),this},_setProperty:function(e,t){var n=f;return this.hasProperty(e)&&(n=this.__props__[e])===t||!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n),n!==t&&this._onPropertyChange(e,t,n)),this},_onPropertyChange:function(e,t,n){},get:function(e){return this.getProperty(e)},getProperty:function(e){if(this.__getProps__.hasOwnProperty(e))return this.__getProps__[e];var t=this._getProperty(e);return this.__getProps__[e]=t},_getProperty:function(e){return this.hasProperty(e)?this.__props__[e]:vt.getClassDefault(this.constructor,e)},remove:function(e){return this.removeProperty(e)},removeProperty:function(e){if(this.hasProperty(e)){var t=this.__props__[e];if(t!==f){if(!1===this.isPropertyValid(e,f,t))return this;this.beforeSetProperty(e,f,t),delete this.__props__[e],delete this.__getProps__[e],this.afterSetProperty(e,f,t),this._onPropertyChange(e,f,t)}else delete this.__props__[e],delete this.__getProps__[e]}return this},has:function(e){return this.hasProperty(e)},hasProperty:function(e){return this.__props__.hasOwnProperty(e)},gets:function(){return this.getProperties.apply(this,arguments)},getProperties:function(e){if(0===arguments.length)return this._getAllProperties();if(!1===e)return this._getAllProperties(!1);var t={};return st(e)&&e.forEach(function(e){t[e]=this.getProperty(e)},this),t},_getAllProperties:function(e){return!1===e?this.__props__:Ge({},this.__props__)}}),je(e,l,{add:function(e,t,n){var r=this._typeListenersMap[e],e=(null==r&&(this._typeListenersMap[e]=r=[]),{listener:t,context:n});return r.push(e),e},remove:function(e,t,n){var r=this._typeListenersMap[e];if(r)for(var i=r.length,o=0;o<i;o++){var a=r[o];if(a.listener===t&&a.context===n)return void r.splice(o,1)}},dispatch:function(e,t){var n=this._typeListenersMap[e];if(n)for(var r=n.length,i=0;i<r;i++){var o=n[i],a=o.listener,o=o.context;a.apply(o,[t])}}}),je(P,Q,{_onPropertyChange:function(e,t,n){P.superClass._onPropertyChange.apply(this,arguments),this.dispatchChangeEvent(e,t,n)},getDispatcher:function(){return this._dispatcher},addListener:function(e,t,n){this._dispatcher.add(e,t,n)},removeListener:function(e,t,n){this._dispatcher.remove(e,t,n)},dispatchEvent:function(e,t){this._dispatcher.dispatch(e,t)},addChangeListener:function(e,t){this.addListener("change",e,t)},removeChangeListener:function(e,t){this.removeListener("change",e,t)},dispatchChangeEvent:function(e,t,n){this.dispatchEvent("change",{source:this,property:e,new_value:t,old_value:n,newValue:t,oldValue:n})},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)}}),s.localStorage),Pe=s.sessionStorage,Re={setCookie:function(e,t,n){var r,n=2<arguments.length?((r=new Date).setTime(r.getTime()+6e4*n),t+"; expires="+r.toUTCString()):t;Qe.cookie=e+"="+n},getCookie:function(e){e=Qe.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:f},removeCookie:function(e){Re.setCookie(e,"",-1)}},De={_call:function(e,t,n){return(n=h.call(n)).unshift(t),e.apply(null,n)},setItem:function(e,t,n,r){n!==f?3<arguments.length&&0<r?(r=6e4*(0|r)+Date.now(),e.setItem(t,JSON.stringify({_zexpires_time:Date.now()+r,value:n}))):e.setItem(t,JSON.stringify(n)):De.removeItem(e,t)},getItem:function(e,t){var n=e.getItem(t);if(n){try{n=JSON.parse(n)}catch(e){}if(We(n))if(n.hasOwnProperty("_zexpires_time"))return n._zexpires_time<Date.now()?(e.removeItem(t),f):n.value;return n}return f},removeItem:function(t,n){if(!ct(n))return t.removeItem(n);_(t).forEach(function(e){!0===n(e)&&t.removeItem(e)})},clear:function(e){return e.clear()}},Ae={_changeListeners:[],setItem:function(e,t,n){return De._call(De.setItem,we,arguments)},getItem:function(e){return De._call(De.getItem,we,arguments)},removeItem:function(e){return De._call(De.removeItem,we,arguments)},clear:function(){return De._call(De.clear,we,arguments)},addChangeListener:function(e,t,n){Ae._changeListeners.push({listener:e,context:t,key:n}),1===Ae._changeListeners.length&&$t(s,"storage",Ae._handleChange)},removeChangeListener:function(t,n,r){z(Ae._changeListeners,function(e){return e.listener===t&&e.context===n&&e.key===r}),0===Ae._changeListeners.length&&Xt(s,"storage",Ae._handleChange)},_handleChange:function(t){var n=t.key;Ae._changeListeners.forEach(function(e){null!==e.key&&n!==e.key||e.listener.apply(e.context,[t])})}},ke={setItem:function(e,t,n){return De._call(De.setItem,Pe,arguments)},getItem:function(e){return De._call(De.getItem,Pe,arguments)},removeItem:function(e){return De._call(De.removeItem,Pe,arguments)},clear:function(){return De._call(De.clear,Pe,arguments)}},Se={getLocationSearchParam:function(e){var t=[location.href];return 0<arguments.length&&t.push(e),Se.getURLSearchParam.apply(null,t)},getURLSearchParam:function(e,t){var n=arguments.length,i=(0===n?e=location.search:-1<e.indexOf("?")&&(e=e.replace(e.split("?")[0],"?")),{});return-1<e.indexOf("?")&&e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,r){i.hasOwnProperty(t)?(i[t]=[i[t]],i[t].push(r)):i[t]=r}),n<2?i:i[t]},appendURLSearchParam:function(e,t,n){var r;return We(t)?r=Se._getSearchParams(t):2<arguments.length&&(r=Se._encodeKVParams(t,n)),e=r?e+(/\?/.test(e)?"&":"?")+r:e},setURLSearchParam:function(e,t,n){var r=Se.getURLSearchParam(e);return We(t)?r=Ge(r,t):r[t]=n,e=e.split("?")[0],Se.appendURLSearchParam(e,r)},getURLHash:function(e){var t=location.hash;return t?0===arguments.length?t.substr(1):(t=location.hash.match(new RegExp(e+"=([^&]*)")))?t[1]:"":""},_getSearchParams:function(e){if(e){if(lt(e))return e;var n;if(We(e))return n=[],Fe(M.getDeepKVMap(e),function(t,e){st(e)?e.forEach(function(e){n.push(Se._encodeKVParams(t,e))}):n.push(Se._encodeKVParams(t,e))}),n.join("&")}return""},_encodeKVParams:function(e,t){return encodeURIComponent(e)+"="+encodeURIComponent(t)}},Te={},Le=(sn=navigator.userAgent,Le=sn.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],(sn=/trident/i.test(Le[1])?["IE",(r=/\brv[ :]+(\d+)/g.exec(sn)||[])[1]]:"Chrome"===Le[1]&&null!=(r=sn.match(/\b(OPR|Edge)\/(\d+)/))?r.slice(1):(Le=Le[2]?[Le[1],Le[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(r=sn.match(/version\/(\d+)/i))&&Le.splice(1,1,r[1]),Le))?(r=(r=sn[0])&&("ie"===(r=r.toLowerCase())||"msie"===r?"IE":"opr"===r?"Opera":A(r)),Te.browser=r,Te.version=0|sn[1]):Te.browser="Unknown",Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),s.parent!==s&&(q.nowTime=Date.now(),q.guid=function(){return"_z-t-"+q.nowTime+"-i-"+q.__uid++}),"IE"===Te.browser),wt={querySelector:function(e,t){return(1<arguments.length?t:Qe).querySelector(e)},querySelectorAll:function(e,t){var t=(1<arguments.length?t:Qe).querySelectorAll(e),n=[];return ut(t,function(e){n.push(e)}),n},querySelectorChild:function(e,t){return(t=wt.queryElement(t))?pt(wt.querySelectorAll(e,t),function(e){return e.parentNode===t}):null},querySelectorChildren:function(e,t){return(t=wt.queryElement(t))?_t(wt.querySelectorAll(e,t),function(e){return e.parentNode===t}):[]},queryNode:function(e){return lt(e)?wt.querySelector.apply(null,arguments):Ue(e)?e:null},queryElement:function(e){return lt(e)?wt.querySelector.apply(null,arguments):Ne(e)?e:null},queryEventElement:function(e){return e instanceof EventTarget||e===s||e===Qe?e:wt.queryElement.apply(null,arguments)}},Pt=wt.querySelector,Rt=wt.querySelectorAll,qe=wt.queryElement,Ee=wt.queryNode,Ve=wt.queryEventElement,Oe={add:function(e,t){t=Oe.formatClass(h.call(arguments,1));e=e.classList;e.add.apply(e,t)},remove:function(e,t){t=Oe.formatClass(h.call(arguments,1));e=e.classList;e.remove.apply(e,t)},toggle:function(e,t,n){var r=e.classList,e=h.call(arguments,1),i=arguments[arguments.length-1];V(i)?(n=i,e.pop(),(e=Oe.formatClass(e)).forEach(function(e){r.toggle.apply(r,[e,n])})):(e=Oe.formatClass(e)).forEach(function(e){r.toggle.apply(r,[e])})},set:function(e,t){t=Oe.formatClass(h.call(arguments,1)),e.className=t.join(" ")},contains:function(e,t){return e.classList.contains(t)},formatClass:function(e){var t=[];return e.forEach(function(e){e&&(0<=e.indexOf(" ")?e.split(" ").forEach(function(e){e&&t.push(e)}):t.push(e))}),t}},Dt=(Le&&(Oe.add=function(e){var t=e.className.split(" ");Oe.formatClass(h.call(arguments,1)).forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")},Oe.remove=function(e){var t=e.className.split(" "),n=Oe.formatClass(h.call(arguments,1)),t=_t(t,function(e){return n.indexOf(e)<0});e.className=t.join(" ")},Oe.toggle=function(t,e,n){var r=h.call(arguments),i=arguments[arguments.length-1];V(i)?(n=i,r.pop(),(!0===n?Oe.add:Oe.remove).apply(Oe,r)):(r=Oe.formatClass(r)).forEach(function(e){Oe.contains(t,e)?Oe.remove(t,e):Oe.add(t,e)})},Oe.contains=function(e,t){return null!=e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))}),Oe.add),At=Oe.remove,kt=Oe.set,St=Oe.toggle,Tt=Oe.contains,ze=(Oe.formatClass,{setStyle:function(e,t,n){e.style[t]=n},setStyles:function(n,e,t){if(!We(e))return ze.setStyle(n,Ie(e),t);Fe(e,function(e,t){ze.setStyle(n,Ie(e),t)})},getStyle:function(e,t){return s.getComputedStyle(e,null).getPropertyValue(t)},removeStyle:function(e,t){e.style[t]=""},formatStyle:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},parseStyle:function(e,n){var r={};return e.split(";").forEach(function(e){var t=(e=e.split(":")).shift().trim();""!==t&&(!0===n&&(t=Ie(t)),r[t]=e.join(":").trim())}),r}}),$e=ze.setStyle,Lt=ze.getStyle,Et=ze.removeStyle,Ie=ze.formatStyle,Vt={__valueHooks:{multiple_select:{setValue:function(e,n){e=e.options;0!==e.length&&(null==n&&ut(e,function(e){e.selected=!1}),st(n)||(n=[n]),ut(e,function(e){var t=e.hasAttribute("value")?e.value:e.text;e.selected=0<=n.indexOf(t)}))},getValue:function(e){var t=[];return ut(e.options,function(e){!0===e.selected&&(e.hasAttribute("value")?t.push(e.value):t.push(e.text))}),t}},radio:{setValue:function(e,t){var n=e.getAttribute("name");n?Rt("input[type='radio'][name='"+n+"']").forEach(function(e){e.checked=e.value===t}):e.checked=!0===t},getValue:function(e){var t=e.getAttribute("name");return t?(t=Pt("input[type='radio'][name='"+t+"']:checked"))?t.value:null:e.checked}},file:{setValue:function(e,t){e.value=t},getValue:function(e){return e.files}}},setValue:function(e,t){if(e.setValue)return e.setValue(t);var n=Vt.getValueField(e),r=Vt.__valueHooks[n];return r?r.setValue(e,t):e[n]=t},getValue:function(e){if(e.getValue)return e.getValue();var t=Vt.getValueField(e),n=Vt.__valueHooks[t];return n?n.getValue(e):e[t]},getValueField:function(e){return Ot.isInput(e)?Ot.isCheckBox(e)?"checked":Ot.isRadio(e)?"radio":Ot.isFileInput(e)?"file":"value":Ot.isSelect(e)?Ot.isMultipleSelect(e)?"multiple_select":"value":Ot.isTextArea(e)?"value":Ot.isImage(e)?"src":"innerHTML"}},Me=Vt.getValue,Be=Vt.setValue,Ot={isTagType:function(e,t){return e.tagName===t},isInput:function(e){return Ot.isTagType(e,"INPUT")},isCheckBox:function(e){return!!Ot.isInput(e)&&Ot.isAttributeType(e,"CHECKBOX")},isRadio:function(e){return!!Ot.isInput(e)&&Ot.isAttributeType(e,"RADIO")},isFileInput:function(e){return!!Ot.isInput(e)&&Ot.isAttributeType(e,"FILE")},isTextArea:function(e){return Ot.isTagType(e,"TEXTAREA")},isSelect:function(e){return Ot.isTagType(e,"SELECT")},isMultipleSelect:function(e){return!!Ot.isSelect(e)&&e.hasAttribute("multiple")},isImage:function(e){return Ot.isTagType(e,"IMG")},isElement:function(e){return!(!e||"object"!=typeof e)&&(1===e.nodeType&&"string"==typeof e.nodeName&&null!=e.style&&"object"==typeof e.style&&"number"==typeof e.clientWidth)},isNode:function(e){return!(!e||"object"!=typeof e)&&(null!==e.nodeType&&"string"==typeof e.nodeName)},isAttributeType:function(e,t){e=e.getAttribute("type");return!!e&&e.toUpperCase()===t}},Ne=Ot.isElement,Ue=Ot.isNode,zt=Ot.isTagType,It={getWindowPageOffset:function(){var e=Qe.documentElement,t=s.pageXOffset||e.scrollLeft||0,n=s.pageYOffset||e.scrollTop||0;return{x:t-(e.clientLeft||0),y:n-(e.clientTop||0)}},getWindowSize:function(){var e=Qe.body,t=Qe.documentElement;return{width:s.innerWidth||t.clientWidth||e.clientWidth,height:s.innerHeight||t.clientHeight||e.clientHeight}},getWindowPageBounds:function(){var e=It.getWindowPageOffset(),t=It.getWindowSize();return{x:e.x,y:e.y,width:t.width,height:t.height}},getElementWindowOffset:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top}},getElementPageOffset:function(e){var e=e.getBoundingClientRect(),t=It.getWindowPageOffset();return{x:t.x+e.left,y:t.y+e.top}},getElementWindowBounds:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom}},getEventWindowOffset:function(e){return{x:e.clientX,y:e.clientY}},getEventPageOffset:function(e){var t,n=e.pageX;return null==n?(t=It.getWindowPageOffset(),{x:e.clientX+t.x,y:e.clientY+t.y}):{x:n,y:e.pageY}}},Mt={create:function(e,t,n){var r,i,o=/^<([A-z]+\d?)([^\d].*)?>(.*<\/\1>)?$/.test(e.trim())?Mt._createByHtml(e):g(e);return null!=t&&(We(t)?(e=t.className||t.class,r=t.attributes,i=t.style,null!=e&&(o.className=e),null!=i&&ze.setStyles(o,i),null!=r&&Fe(r,function(e,t){o.setAttribute(e,t)})):o.className=t),n&&n.forEach(function(e){o.appendChild(e)}),o},_createByHtml:function(e){var t=g("div"),e=(t.innerHTML=e.trim(),t.firstElementChild);return e.parentNode.removeChild(e),e},remove:function(e){var t=e.parentNode;return t&&t.removeChild(e),e},appendText:function(e,t){e.appendChild(Qe.createTextNode(t))},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},scrollIntoView:function(e,t,n){var r=e.offsetTop,i=t.scrollTop,o=e.offsetHeight,a=t.clientHeight,i=(r<i+(n=n||10)?t.scrollTop=r-n:i+a-n<r+o&&(t.scrollTop=r+o+n-a),e.offsetLeft),r=t.scrollLeft,o=e.offsetWidth,a=t.clientWidth;i-n<r?t.scrollLeft=i-n:r+a<i+o+n&&(t.scrollLeft=i+o+n-a)},isInDom:function(e){return Qe.contains(e)},getAttributeSelector:function(e,t){return 1<arguments.length?"["+e+"='"+t+"']":"["+e+"]"}},Xe=(Qe.contains||(Mt.isInDom=function(e){return Qe.body.contains(e)}),s.HTMLTemplateElement&&(Mt._createByHtml=function(e){var t=g("template"),e=(t.innerHTML=e.trim(),t.content.firstElementChild);return e.parentNode.removeChild(e),e}),Mt.create),Bt=Mt.remove,Nt=Mt.empty,Ut=Mt.appendText,Ht=Mt.isInDom,Wt=Mt.getAttributeSelector,Gt={initSelectOptions:function(e,r,t){var i,o,a,s,l;We(t)?(i=t.value_field,o=t.label_field,a=t.value,s=t.restore_value,l=t.children_field):lt(t)&&(i=t),l=l||"children",lt(e)?e=Rt(e):st(e)||(e=[e]),null==r?r=[]:st(r)||(r=[r]),e.forEach(function(n){var e,t;(n=qe(n))&&(e=Me(n),Nt(n),r.forEach(function(e){var t;We(e)?e.hasOwnProperty(l)?(t=Gt._createSelectOptionGroup(n,e,o),e.children.forEach(function(e){Gt._createSelectOption(t,e,o,i)})):Gt._createSelectOption(n,e,o,i):Gt._createSelectOption(n,{label:e},o,i)}),null!=a?Be(n,a):!1!==s&&""!==e&&(t=Me(n),Be(n,e),""===Me(n)&&Be(n,t)))})},_createSelectOptionGroup:function(e,t,n){var r=Xe("optgroup"),n=n?t[n]:Gt._getValueByOrder(t,["label","name"],"");return r.setAttribute("label",n),e.appendChild(r),r},_createSelectOption:function(e,t,n,r){We(t)||(t={label:t});var i=Xe("option"),n=n?t[n]:Gt._getValueByOrder(t,["label","name"],""),r=r?t[r]:Gt._getValueByOrder(t,["value","id"]),r=(null!=r&&i.setAttribute("value",r),null==n&&(n=r),i.innerHTML=n,t.attributes);r&&Ze.dom.setAttribute(i,r),e.appendChild(i)},_getValueByOrder:function(t,e,n){var r=null;return ut(e,function(e){if(t.hasOwnProperty(e))return r=t[e],!1}),null==r?n:r}},Ft={stop:function(e){e.stopPropagation()},prevent:function(e){e.preventDefault()},ctrl:function(e){return!0===e.ctrlKey},shift:function(e){return!0===e.shiftKey},alt:function(e){return!0===e.altKey},meta:function(e){return!0===e.metaKey},keyboardKey:function(e,t){return e.key===t}},jt=function(e,t,n){return Ft.hasOwnProperty(t)?Ft[t]:"keydown"===e||"keyup"===e||"keypress"===e?Ft.keyboardKey:void 0},qt={_wrapperList:[],addEventListener:function(e,t,n,r){t=qt._addWrapper(e,t,n,r);e.addEventListener(t._event,t._listener,!1)},removeEventListener:function(e,t,n,r){t=qt._removeWrapper(e,t,n,r);t&&e.removeEventListener(t._event,t._listener,!1)},addTypeEventListener:function(e,t,n,r){return"resize"===t?Zt.addResizeListener(e,n,r):"wheel"===t?en.addWheelListener(e,n,r):qt.addEventListener(e,t,n,r)},removeTypeEventListener:function(e,t,n,r){return"resize"===t?Zt.removeResizeListener(e,n,r):"wheel"===t?en.removeWheelListener(e,n,r):qt.removeEventListener(e,t,n,r)},getEventTarget:function(e,t){return e.target.closest(t)},isPointerEvent:function(e){return E.isPrimitiveType(e,"MouseEvent")||E.isPrimitiveType(e,"Touch")||E.isPrimitiveType(e,"PointerEvent")},isMouseMainButton:function(e){return 0===e.button},isMouseAuxiliaryButton:function(e){return 1===e.button},isMouseSecondaryButton:function(e){return 2===e.button},_addWrapper:function(e,t,i,o){var a,n=t.split("."),s=n[0],e=(n=n.length<=1?function(e){i.apply(o,arguments)}:(a=n.slice(1),function(n){var r=!0;ut(a,function(e){var t=jt(s,e,n);if(t&&!1===t(n,e))return r=!1}),!1!==r&&i.apply(o,arguments)}),{element:e,type:t,listener:i,context:o,_event:s,_listener:n});return qt._wrapperList.push(e),e},_removeWrapper:function(n,r,i,o){return z(qt._wrapperList,function(e,t){return e.element===n&&e.type===r&&e.listener===i&&e.context===o})}},$t=qt.addEventListener,Xt=qt.removeEventListener,Kt=qt.addTypeEventListener,Jt=qt.removeTypeEventListener,Yt={_readyListeners:[],addReadyListener:function(e,t){Yt._isDocumentReady()?e.apply(t):(0===Yt._readyListeners.length&&$t(Qe,"DOMContentLoaded",Yt._handleReady),Yt._readyListeners.push({listener:e,context:t}))},_handleReady:function(t){bt(function(){Yt._readyListeners.forEach(function(e){e.listener.apply(e.context,[t])})})},_isDocumentReady:function(){var e=Qe.readyState;return"complete"===e||!!Qe.body&&"interactive"===e}},Zt={_createResizeTrigger:function(e){var t=g("object");return((t.__ze_resize_element__=e).__ze_resize_trigger__=t).setAttribute("style","display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;opacity:0;pointer-events:none;z-index: -1;"),t.onload=Zt._handleObjLoad,t.type="text/html",bt(function(){e.insertBefore(t,e.firstChild),t.data="about:blank"}),t},_handleObjLoad:function(e){var t=this.contentDocument;t&&t.defaultView&&(t.defaultView.__ze_resize_trigger__=this.__ze_resize_element__,t.defaultView.addEventListener("resize",Zt._handleResize))},_handleResize:function(n){(n.target||n.srcElement).__ze_resize_trigger__.__ze_resize_listeners__.forEach(function(e){var t=e.listener,e=e.context;t.apply(e,[n])})}},Qt=(Qe.attachEvent?(Zt.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(e.__ze_resize_listeners__=r=[],(e.__ze_resize_trigger__=e).attachEvent("onresize",Zt._handleResize)),r.push({listener:t,context:n})},Zt.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(z(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&(e.detachEvent("onresize",Zt._handleResize),delete e.__ze_resize_listeners__))}):(Zt.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(e.__ze_resize_listeners__=r=[],"static"===ze.getStyle(e,"position")&&ze.setStyle(e,"position","relative"),Zt._createResizeTrigger(e)),r.push({listener:t,context:n})},Zt.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(z(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&((r=e.__ze_resize_trigger__)&&(r.contentDocument.defaultView.removeEventListener("resize",Zt._handleResize),e.removeChild(r),delete e.__ze_resize_trigger__),delete e.__ze_resize_listeners__))}),"onwheel"in g("div")?"wheel":Qe.onmousewheel!==f?"mousewheel":"MozMousePixelScroll"),en={addWheelListener:function(e,t,n){$t(e,Qt,t,n)},removeWheelListener:function(e,t,n){Xt(e,Qt,t,n)},isWheelDown:function(e){return e.wheelDelta<0||0<e.deltaY||0<e.detail}},tn={_clickListeners:[],addClickListener:function(e,t){0===tn._clickListeners.length&&$t(Qe,"click",tn._handleClick),tn._clickListeners.push({listener:e,context:t})},removeClickListener:function(t,n){z(tn._clickListeners,function(e){return e.listener===t&&e.context===n}),0===tn._clickListeners.length&&Xt(Qe,"click",tn._handleClick)},_handleClick:function(t){tn._clickListeners.forEach(function(e){e.listener.apply(e.context,[t])})}},nn=function(e,t,n){if(!0!==(o=n||/<%(.+?)%>/).test(e))return e;for(var r,i,o=new RegExp(o,"g"),a=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,s="with(obj) { var r=[];\n",l=0,c=function(e,t){return s+=t?e.match(a)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",c};r=o.exec(e);)c(e.slice(l,r.index))(r[1],!0),l=r.index+r[0].length;c(e.substr(l,e.length-l)),s=(s+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{i=new Function("obj",s).apply(t,[t])}catch(e){console.error("Template Engine error:'"+e.message+"' in \n\nCode:\n"+s+"\n",null,"error")}return i},rn=(Ke({AJAX_PROMISE:!1,AJAX_TIMEOUT:12e4,AJAX_HEADERS:{"X-Requested-With":"XMLHttpRequest"}}),{get:function(e){var t=h.call(arguments);return t.unshift("GET"),rn.ajax.apply(null,t)},post:function(e){var t=h.call(arguments);return t.unshift("POST"),rn.ajax.apply(null,t)},ajax:function(n,r){n=n.toUpperCase();var i=rn._getAjaxParams.apply(null,h.call(arguments,2)),e=null!=s.Promise;if(e=e&&(i.hasOwnProperty("promise")?!0===i.promise:!0===He("AJAX_PROMISE")))return new Promise(function(e,t){rn._request(n,r,i,e,t)});rn._request(n,r,i)},_request:function(e,t,n,d,r){var i,o,a=n.data,s=n.complete,h=n.context,u=n.timeout||He("AJAX_TIMEOUT"),_=n.responseType,p=n.headers,f=n.data_type,n=!1!==n.async,l=He("AJAX_BEFORE_SEND"),l=(ct(l)&&(i=l),He("AJAX_COMPLETE")),l=(ct(l)&&(o=l),"GET"===e&&null!=a&&(t=Se.appendURLSearchParam(t,a),a=null),Ge({},He("AJAX_HEADERS"))),g=(a&&(We(a)||st(a)?(l["Content-Type"]="application/json; charset=utf-8",a=JSON.stringify(a)):"POST"===e&&(l["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8")),!1),c=new XMLHttpRequest;return n&&(c.onreadystatechange=function(){c.readyState===XMLHttpRequest.DONE&&(g=!0,rn._callBack(c,f,s,h,d,r),o&&o(c))}),_&&(c.responseType=_),c.open(e,t,n),Fe(Ge(l,p),function(e,t){!1!==t&&c.setRequestHeader(e,t)}),i&&i(c),c.send(a),!1==n?(rn._callBack(c,f,s,h,d,r),o&&o(c)):mt(function(){!0!==g&&(c&&(c.onreadystatechange=null),s&&s.apply(h,[408]),o&&o(c,!0),r&&r(408),c=null)},u),c},_callBack:function(e,t,n,r,i,o){var a,s=e.status,l=(t?t=t.trim().toUpperCase():(l=e.getResponseHeader("Content-Type"))&&0<=l.indexOf("json")&&(t="JSON"),e.responseType);!t||""!==l&&"text"!==l?a=e.response:(a=e.responseText,"JSON"===t&&(a=JSON.parse(a))),n&&n.apply(r,[s,a]),i&&i(a)},_getAjaxParams:function(){var e,t=arguments.length;return 1===t?e=arguments[0]:1<t&&(e=Ge({data:arguments[0]},arguments[1])),We(e)?e:{}},setup:function(e){}}),on={jsonp:function(e){var t=rn._getAjaxParams.apply(null,h.call(arguments,1)),n=t.data,r=t.complete,i=t.context,t=t.timeout||He("AJAX_TIMEOUT"),o=(n&&(e=Se.appendURLSearchParam(e,n)),"_z_jsonp_callback_"+Date.now()),a=!1;s[o]=function(e){a=!0,delete s[o],r.apply(i,[!1,!0,e])},e=e+(/\?/.test(e)?"&":"?")+"callback="+o,on._loadJS(e),mt(function(){!0!==a&&(delete s[o],r.apply(i,[!0]))},t)},_loadJS:function(e){var t=g("script");t.type="text/javascript",t.onload=function(){t.onload=null,t.parentNode.removeChild(t)},t.onerror=function(){t.onerror=null,t.parentNode.removeChild(t)},(Pt("head")||Pt("body")).appendChild(t),t.src=e}},an=(Ze.$={Defaults:R,StrUtil:D,TypeCheck:E,ArrayUtil:O,ObjectUtil:M,I18nUtil:H,ClassUtil:vt,ArrayMap:Je,TimeUtil:Ct,ColorUtil:c,PathUtil:he,Util:q,MathUtil:ue,MathConvexHullUtil:ye,MathLineUtil:ve,MathPointUtil:Ce,MathRectUtil:be,AnimationUtil:Y,ImageUtil:xe,ZObject:Q,EventDispatcher:e,ChangeSupport:P,CookieUtil:Re,LocalStorageUtil:Ae,SessionStorageUtil:ke,URLUtil:Se,BrowserUtil:Te,DomQuery:wt,DomClass:Oe,DomStyle:ze,DomValue:Vt,DomType:Ot,DomGeom:It,DomUtil:Mt,DomEle:Gt,DomEventUtil:qt,DomReadyEventUtil:Yt,DomResizeEventUtil:Zt,DomWheelEventUtil:en,DomClickEventUtil:tn,AjaxUtil:rn,JSONPUtil:on},Ze.util={isArray:st,isString:lt,isBoolean:V,isObject:We,isFunction:ct,isNumber:dt,mergeArray:ht,eachArray:ut,filterArray:_t,findArray:pt,removeArrayItem:z,toArrayMap:I,mergeObject:Ge,deepMergeObject:B,eachObject:Fe,filterObject:N,getObjectDeepValue:gt,setObjectDeepValue:U,getObjectValues:yt,getObjectDeepKVMap:M.getDeepKVMap,extendClass:je,newClass:vt.newClass,exec:q.exec,callBatch:function(e,t,n,r,i){F(e,t,n=n||s,r=r||"_call_batch_flag",i)},callLater:function(e,t,n){return mt(e,t=null==t||t<=0?20:t,n)},cancelCallLater:function(e,t,n){return Ct.cancelCallLater(e,t=null==t||t<=0?20:t,n)},callInterval:function(e,t,n,r,i){return j(e,t=null==t||t<=0?20:t,n,r,i)},cancelCallInterval:function(e,t,n){return Ct.cancelCallInterval(e,t=null==t||t<=0?20:t,n)},callRAFLater:bt,callRAFInterval:xt,cancelCallRAFInterval:Ct.cancelCallRAFInterval,animate:Y.animate,cancelAnimate:Y.cancelAnimate,color:{toRGB:c.toRGB,toRGBA:c.toRGBA,toHSL:c.toHSL,toHSLA:c.toHSLA,toHex:c.toHex,toName:c.toName,lighten:c.lighten,darken:c.darken,saturate:c.saturate,desaturate:c.desaturate,random:c.random,defaults:c.defaults,mix:c.mix},image:{register:xe.register,get:xe.get,clear:xe.clearCache}},Ze.type={isArray:st,isString:lt,isBoolean:V,isObject:We,isFunction:ct,isNumber:dt},Ze.dom={query:function(e,t){return t?(t=qe(t))?qe(e,t):null:qe(e)},queryAll:function(e,t){return t?(t=qe(t))?Rt(e,t):[]:Rt(e)},nextElementSibling:function(e){return qe(e).nextElementSibling},previousElementSibling:function(e){return qe(e).previousElementSibling},addClass:function(e,t){var n=h.call(arguments,1);return n.unshift(qe(e)),Dt.apply(null,n)},removeClass:function(e,t){var n=h.call(arguments,1);return n.unshift(qe(e)),At.apply(null,n)},toggleClass:function(e,t,n){var r=h.call(arguments,1);return r.unshift(qe(e)),St.apply(null,r)},setClass:function(e,t){var n=h.call(arguments,1);return n.unshift(qe(e)),kt.apply(null,n)},containsClass:function(e,t){return e=qe(e),Tt(e,t)},setStyle:function(e,t,n){e=qe(e),ze.setStyles(e,t,n)},getStyle:function(e,t){return Lt(qe(e),Ie(t))},removeStyle:function(e,t){return Et(qe(e),Ie(t))},setAttribute:function(n,e,t){if(n=qe(n),!We(e))return n.setAttribute(e,t);Fe(e,function(e,t){n.setAttribute(e,t)})},getAttribute:function(e,t){return(e=qe(e)).getAttribute(t)},removeAttribute:function(e,t){return(e=qe(e)).removeAttribute(t)},hasAttribute:function(e,t){return(e=qe(e)).hasAttribute(t)},getAttributes:function(e){for(var t=(e=qe(e)).attributes,n={},r=t.length-1;0<=r;r--){var i=t[r];n[i.name]=i.value}return n},setValue:function(e,t){return e=qe(e),Vt.setValue(e,t)},getValue:function(e){return e=qe(e),Vt.getValue(e)},isTagType:function(e,t){return e=qe(e),Ot.isTagType(e,t.toUpperCase())},create:Xe,appendText:function(e,t){return Ut(Ee(e),t)},remove:function(e){return Bt(Ee(e))},empty:function(e){return Nt(Ee(e))},insertBefore:function(e,t){return e=Ee(e),(t=Ee(t)).parentNode.insertBefore(e,t),e},insertAfter:function(e,t){return e=Ee(e),(t=Ee(t)).parentNode.insertBefore(e,t.nextSibling),e},insertFirst:function(e,t){return e=Ee(e),(t=Ee(t)).insertBefore(e,t.firstChild),e},appendChild:function(e,t){return e=qe(e),(t=qe(t)).appendChild(e),e},focus:function(e,t){bt(function(){mt(function(){qe(e).focus(t)},60)})},initSelectOptions:Gt.initSelectOptions,event:{ready:Yt.addReadyListener,addEventListener:function(e,t,n,r){return Kt(Ve(e),t,n,r)},removeEventListener:function(e,t,n,r){return Jt(Ve(e),t,n,r)},on:function(e,t,n,r){return Kt(Ve(e),t,n,r)},off:function(e,t,n,r){return Jt(Ve(e),t,n,r)},onclick:function(e,t,n){return $t(Ve(e),"click",t,n)},onchange:function(e,t,n){return $t(Ve(e),"change",t,n)},onresize:function(e,t,n){return Zt.addResizeListener(Ve(e),t,n)},onwheel:function(e,t,n){return en.addWheelListener(Ve(e),t,n)},getTarget:function(e,t){return qt.getEventTarget(e,t)}}},Ze.bom={setCookie:Re.setCookie,getCookie:Re.getCookie,removeCookie:Re.removeCookie,setLocalStorage:Ae.setItem,getLocalStorage:Ae.getItem,removeLocalStorage:Ae.removeItem,clearLocalStorage:Ae.clear,onstorage:Ae.addChangeListener,setSessionStorage:ke.setItem,getSessionStorage:ke.getItem,removeSessionStorage:ke.removeItem,clearSessionStorage:ke.clear,getURLQuery:Se.getLocationSearchParam,getLocationSearchParam:Se.getLocationSearchParam,getURLSearchParam:Se.getURLSearchParam,appendURLSearchParam:Se.appendURLSearchParam,setURLSearchParam:Se.setURLSearchParam,getURLHash:Se.getURLHash,browser:Te.browser,browserVersion:Te.version},Ze.ajax={get:rn.get,post:rn.post,ajax:rn.ajax,jsonp:on.jsonp},Ze.math={toRadians:ue.toRadians,toDegrees:ue.toDegrees,calcDistance:ue.calcDistance,calcAngle:ue.calcAngle,calcPointOnCircle:Ce.calcPointOnCircle,calcPointOnEllipse:Ce.calcPointOnEllipse,calcRotatedPoint:Ce.calcRotatedPoint,calcPointsBounds:Ce.calcPointsBounds,calcPathLength:me.calcPathLength,calcOffsetPointOnPath:me.calcOffsetPointOnPath,createGrowRect:be.createGrowRect},Ze.Defaults=R,Ze.setDefault=function(e,t){We(e)?Fe(e,function(e,t){U(R,e,t)}):U(R,e,t)},Ze.getDefault=He,Ze.ready=Yt.addReadyListener,Ze.i18n=H,Ze.ArrayMap=Je,Ze.ZObject=Q,s.z),sn=(Ze.noConflict=function(){return s.z===Ze&&(s.z=an),Ze},s.z=Ze,Ke({CANVAS_2D_TEXT_NEWLINE:"\n",CANVAS_2D_TEXT_LINE_SPACING:2,CANVAS_2D_TEXT_MULTILINE_ALIGN:"center"}),Xe("canvas")),ln=($e(sn,"display","block"),sn.getContext("2d")),cn=Xe("span"),dn=(cn.innerHTML="gM",{getRenderStyle:function(e){if(null==e)return{};var t={},n=e.fillStyle||e.fill||e.fill_style,n=(n&&(t.fillStyle=n),e.strokeStyle||e.stroke||e.stroke_style);return n&&(t.strokeStyle=n),t},isNoneRenderStyle:function(e){return null==e.fillStyle&&null==e.strokeStyle},set2DAttribute:function(e,t,n){return dn._set2DAttribute(e,t,n)},set2DAttributes:function(n,e){var r=!1;return Fe(e,function(e,t){r=dn._set2DAttribute(n,e,t)||r}),r},_set2DAttribute:function(e,t,n,r){return"lineDash"===t?dn._setLineDash(e,n,r):e[t]!==n&&(!0===r&&e.save(),e[t]=n,!0)},_setLineDash:function(e,t,n){return!!st(t)&&(e.getLineDash().join(",")!==t.join(",")&&(!0===n&&e.save(),e.setLineDash(t),!0))},saveAndSet2DAttribute:function(e,t,n,r,i){t=dn._set2DAttribute(e,t,n,!0);return r&&(r.apply(i,[e]),!0===t)?(e.restore(),!1):t},rotateAround:function(e,t,n,r,i){0!==t&&(e.save(),e.translate(n.x,n.y),e.rotate(_e(t)),e.translate(-n.x,-n.y)),r.apply(i,[e]),0!==t&&e.restore()},saveAndSet2DAttributes:function(n,e,t,r){var i=!1;return e&&Fe(e,function(e,t){i=dn._set2DAttribute(n,e,t,!i)||i}),t&&(t.apply(r,[n]),!0===i)?(n.restore(),!1):i},renderPath:function(e,t,n,r){var i=t.fillStyle,o=t.strokeStyle,a=null!=i||null!=o;!0==a&&e.beginPath(),n.apply(null,[e]),!0==a&&(!0!==r&&e.closePath(),un(e,t,function(){null!=i&&e.fill(),null!=o&&e.stroke()}))},clear:function(e){return e.width=e.width+0,e},ctxClear:function(e,t,n){return e.clearRect(0,0,t,n),e},isOpaque:function(e,t){try{for(var n=e.getImageData(t.x,t.y,t.width,t.height),r=n.data,i=0;i<n.width;i++)for(var o=0;o<n.height;o++)if(0!==r[3+4*(o*n.width+i)])return"yes"}catch(e){return"error"}return"no"},getRoundRectRadii:function(e,t){var n,r,i,o,a;return st(t)?0<(n=t.length)&&(a=t[0],r=t[1],i=t[2],o=t[3],a=1===n?[a,a,a,a]:2===n?[a,r,a,r]:3===n?[a,r,i,r]:[a,r,i,o]):a=[t=tt(t),t,t,t],a&&[dn._getRoundRectRadius(e,a[0]),dn._getRoundRectRadius(e,a[1]),dn._getRoundRectRadius(e,a[2]),dn._getRoundRectRadius(e,a[3])]},_getRoundRectRadius:function(e,t){if(t<=0)return 0;e=it(e.width,e.height);return t<1&&(t*=e),it(t,e/2)}}),hn=dn.set2DAttribute,un=(dn.set2DAttributes,dn.saveAndSet2DAttributes),_n=dn.rotateAround,pn=dn.renderPath,fn={_resetAlphaCanvas:function(){fn._alpha_cvs=null},_getAlphaCanvas:function(e,t){var n=fn._alpha_cvs;return null==n&&(n=Xe("canvas"),fn._alpha_cvs=n),dn.clear(n),n},_getAlphaC2d:function(e,t){var n=this._getAlphaCanvas(),e=(n.width=e,n.height=t,n.getContext("2d",{willReadFrequently:!0}));return e.restore(),e.save(),e},isDrawRectOpaque:function(e,t){var n=fn._getAlphaC2d(t.width,t.height),t=(n.translate(-t.x,-t.y),{x:0,y:0,width:t.width,height:t.height}),e=(e(n),dn.isOpaque(n,t));return"error"===e&&fn._resetAlphaCanvas(),"yes"===e}},gn={createRectDirectionLinearGradient:function(e,t,n){var r,i=e.x,o=e.y,a=e.width,s=e.height,l=ue.calcAngle({x:i,y:o},{x:i+a,y:o+s});switch(t){case"lt_to_rb":r=l;break;case"t_to_b":r=90;break;case"rt_to_lb":r=$-l;break;case"r_to_l":r=$;break;case"rb_to_lt":r=$+l;break;case"b_to_t":r=270;break;case"lb_to_rt":r=360-l;break;default:r=0}return gn.createRectLinearGradient(e,r,n)},createRectLinearGradient:function(e,t,n){var r=e.x,i=e.y,o=e.width,a=e.height,r={x:r+o/2,y:i+a/2},i=ve.calcRectLineIntersection(e,r,Ce.calcPointOnCircle(r,rt(o,a),t),!1),e=i[0],r=i[1];return gn.createLinearGradient(e,r,n)},createLinearGradient:function(e,t,n){var r=ln.createLinearGradient(e.x,e.y,t.x,t.y);return Fe(n||{},function(e,t){r.addColorStop(e,t)}),r},createRectDirectionRadialGradient:function(e,t,n){return gn.createRectRadialGradient(e,gn._getRectDirectionGradientCenter(e,t),n)},createRectRadialGradient:function(e,t,n){var r=e.x,i=e.y,o=e.width,e=e.height,o=rt(pe(t,{x:r,y:i}),pe(t,{x:r+o,y:i}),pe(t,{x:r+o,y:i+e}),pe(t,{x:r,y:i+e}));return gn.createRadialGradient(t,0,t,o,n)},createRadialGradient:function(e,t,n,r,i){var o=ln.createRadialGradient(e.x,e.y,t,n.x,n.y,r);return Fe(i||{},function(e,t){o.addColorStop(e,t)}),o},createRectConicGradient:function(e,t,n){return gn.createConicGradient(be.getRectCenter(e),t,n)},createConicGradient:function(e,t,n){var r=ln.createConicGradient(n=null==n?0:n,e.x,e.y);return Fe(t||{},function(e,t){r.addColorStop(e,t)}),r},_getRectDirectionGradientCenter:function(e,t){var n,r=e.x,i=e.y,o=e.width,a=e.height;switch(t){case"lt_to_rb":n={x:r,y:i};break;case"t_to_b":n={x:r+o/2,y:i};break;case"rt_to_lb":n={x:r+o,y:i};break;case"r_to_l":n={x:r+o,y:i+a/2};break;case"rb_to_lt":n={x:r+o,y:i+a};break;case"b_to_t":n={x:r+o/2,y:i+a};break;case"lb_to_rt":n={x:r,y:i+a};break;case"l_to_r":n={x:r,y:i+a/2};break;default:n={x:r+o/2,y:i+a/2}}return n}},yn=(ln.createConicGradient||(gn.createConicGradient=function(e,t,n){return null}),{path:function(e,t){var n=t.length;if(!(n<1))for(var r,i,o,a,s=t[0],l=(e.moveTo(s.x,s.y),s.seg),c=1;c<n;c++)s=t[c],null!=l?he.isMoveTo(l)?e.moveTo(s.x,s.y):he.isQuadraticCurveTo(l)?c<n-1?(r=s.x,i=s.y,s=t[++c],e.quadraticCurveTo(r,i,s.x,s.y)):e.lineTo(s.x,s.y):he.isBezierCurveTo(l)&&(c<n-2?(r=s.x,i=s.y,o=(s=t[++c]).x,a=s.y,s=t[++c],e.bezierCurveTo(r,i,o,a,s.x,s.y)):e.lineTo(s.x,s.y)):e.lineTo(s.x,s.y),l=s.seg,he.isClose(l)&&(l=s.next_seg,e.closePath())},render:function(t,n,e,r){var i,o;e=dn.getRenderStyle(e),!0!==r&&dn.isNoneRenderStyle(e)||((i=n.length)<1||(o=e.fillStyle,pn(t,e,function(){var e;yn.path(t,n),2<i&&null!=o&&(e=n[i-1],he.isClose(e.seg)||t.closePath())},!0)))}}),vn=yn.path,Cn={createPattern:function(e){if(e=lt(e)?xe.get(e):e)return ln.createPattern(e,"repeat")}},mn={_custom_shapes:{},register:function(e,t){mn._custom_shapes[e]=t},render:function(e,t,n,r,i,o){r=dn.getRenderStyle(r),!0!==o&&dn.isNoneRenderStyle(r)||pn(e,r,function(){mn.rectShape(e,t,n,i)},!0)},rectShape:function(e,t,n,r){if(mn._custom_shapes.hasOwnProperty(n))return mn._custom_shapes[n](e,t);switch(n){case"rect":mn.rect(e,t);break;case"circle":mn.circle(e,t);break;case"ellipse":mn.ellipse(e,t);break;case"roundrect":r&&r.radius,mn.roundRect(e,t,r.radius||0);break;case"triangle":mn.triangle(e,t);break;case"right_triangle":mn.rightTriangle(e,t);break;case"diamond":mn.diamond(e,t);break;case"pentagon":mn.pentagon(e,t);break;case"hexagon":mn.hexagon(e,t);break;case"star":mn.star(e,t);break;case"parallelogram":mn.parallelogram(e,t);break;case"cloud":mn.cloud(e,t)}},cloud:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,o=n+i/2,a=r+t/2,t=it(t/40,i/60),i={x:51*t+(n=o-60*t/2),y:18*t+(r=a-40*t/2)},o={x:50*t+n,y:40*t+r},a=Ce.calc3PointsCircleCenter(i,{x:60*t+n,y:30*t+r},o),s=pe(a,i);e.moveTo(i.x,i.y),mn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},fe(a,i),fe(a,o)),e.lineTo((i={x:9*t+n,y:40*t+r}).x,i.y),a=Ce.calc3PointsCircleCenter(i,{x:0*t+n,y:30*t+r},o={x:9*t+n,y:16*t+r}),s=pe(a,i),mn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},fe(a,i),fe(a,o)),a=Ce.calc3PointsCircleCenter(i={x:22*t+n,y:10*t+r},{x:11*t+n,y:11*t+r},o),s=pe(a,i),mn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},fe(a,o),fe(a,i)),a=Ce.calc3PointsCircleCenter(i,{x:38*t+n,y:0*t+r},o={x:51*t+n,y:18*t+r}),s=pe(a,i),mn.arc(e,{x:a.x-s,y:a.y-s,width:2*s,height:2*s},fe(a,i),fe(a,o)),e.closePath()},arc:function(e,t,n,r){var i=t.x,o=t.y,a=t.width,t=t.height,s=it(a/2,t/2);e.save(),e.translate(i+a/2,o+t/2),a!==t&&e.scale(a/(2*s),t/(2*s)),e.arc(0,0,s,_e(n),_e(r),!1),e.restore()},rect:function(e,t){e.rect(t.x,t.y,t.width,t.height)},circle:function(e,t){var n=t.width/2,r=t.height/2,i=t.x+n,t=t.y+r,n=it(n,r);e.moveTo(i+n,t),e.arc(i,t,n,0,2*y,!1),e.closePath()},triangle:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;vn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t},{x:n,y:r+t}]),e.closePath()},rightTriangle:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;vn(e,[{x:n,y:r},{x:n,y:r+t},{x:n+i,y:r+t}]),e.closePath()},diamond:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;vn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t/2},{x:n+i/2,y:r+t},{x:n,y:r+t/2}]),e.closePath()},pentagon:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,n=n+i/2,o=r+t/2;vn(e,[{x:n,y:r},{x:n+i/2,y:o-t/6},{x:n+i/3,y:o+t/2},{x:n-i/3,y:o+t/2},{x:n-i/2,y:o-t/6}]),e.closePath()},hexagon:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;vn(e,[{x:n+i/4,y:r},{x:n+3*i/4,y:r},{x:n+i,y:r+t/2},{x:n+3*i/4,y:r+t},{x:n+i/4,y:r+t},{x:n,y:r+t/2}]),e.closePath()},star:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height,o=n+i/2,a=r+t/2;vn(e,[{x:n+.388*i,y:r+.332*t},{x:o+0,y:a-t/2},{x:n+.611*i,y:r+.332*t},{x:o+i/2,y:a-t/6},{x:n+.693*i,y:r+.579*t},{x:o+i/3,y:a+t/2},{x:n+i/2,y:r+.733*t},{x:o-i/3,y:a+t/2},{x:n+.306*i,y:r+.579*t},{x:o-i/2,y:a-t/6}]),e.closePath()},parallelogram:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;vn(e,[{x:n,y:r+t},{x:n+i/4,y:r},{x:n+i,y:r},{x:n+3*i/4,y:r+t}]),e.closePath()}},bn=(ln.ellipse?mn.ellipse=function(e,t){var n,r=t.x,i=t.y,o=t.width,a=o/2,s=t.height/2;a!=s?(n=r+a,e.moveTo(r+o,r=i+s),e.ellipse(n,r,a,s,0,_e(360),!1)):mn.circle(e,t)}:mn.ellipse=function(e,t){var n,r,i,o=t.x,a=t.y,s=t.width,l=t.height;s!==l?(n=o+s/2,a+=l/2,i=s/(2*(r=it(s/2,l/2))),l/=2*r,e.moveTo(o+s,a),e.save(),e.translate(n,a),e.scale(i,l),e.arc(0,0,r,0,2*y,!1),e.restore(),e.closePath()):mn.circle(e,t)},ln.roundRect?mn.roundRect=function(e,t,n){if(!(n=dn.getRoundRectRadii(t,n)))return mn.rect(e,t);e.roundRect(t.x,t.y,t.width,t.height,n)}:mn.roundRect=function(e,t,n){if(!(n=dn.getRoundRectRadii(t,n)))return mn.rect(e,t);var r=t.x,i=t.y,o=t.width,t=t.height;e.moveTo(r+n[0],i),e.lineTo(r+o-n[1],i),e.quadraticCurveTo(r+o,i,r+o,i+n[1]),e.lineTo(r+o,i+t-n[2]),e.quadraticCurveTo(r+o,i+t,r+o-n[2],i+t),e.lineTo(r+n[3],i+t),e.quadraticCurveTo(r,i+t,r,i+t-n[3]),e.lineTo(r,i+n[0]),e.quadraticCurveTo(r,i,r+n[0],i),e.closePath()},{_fontHeightMap:{},_textSizeMap:{},_defaultRenderConfig:{h_direction:"center",v_direction:"middle",wrap_text_align:"left"},render:function(t,n,r,i,o,a){null!=n&&(n+="",o=o||"center",i=dn.getRenderStyle(i),dn.isNoneRenderStyle(i)||(a=Ge({newline:He("CANVAS_2D_TEXT_NEWLINE"),line_spacing:He("CANVAS_2D_TEXT_LINE_SPACING"),align:He("CANVAS_2D_TEXT_MULTILINE_ALIGN")},a),_n(t,0|a.rotation,r,function(){var e;-1<n.indexOf(a.newline)?bn._renderMText(t,n,r,o,i,a):(e=bn._getTextAlign(o),un(t,bn._getTextAttr(e.textAlign,e.textBaseline,a.font,i),function(){i.fillStyle&&t.fillText(n,r.x,r.y),i.strokeStyle&&t.strokeText(n,r.x,r.y)}))})))},_renderMText:function(t,e,n,d,h,r){e+="";var i,o,u,_=r.font,a=r.text_size,s=(a&&(i=a.font_height,o=a.width),null==i&&(i=bn.calcFontHeight(_)),null==o&&(o=bn.calcTextWidth(_,e)),0|r.line_spacing),p=e.split(He("CANVAS_2D_TEXT_NEWLINE")),l=p.length,c=n.x,a=n.y,e=r.align,n=bn._getHVDirection(d),r=n.horizontal,d=n.vertical;u="top"===d?a-(l*i+s*(l-1)):"bottom"===d?a:(n=ot(l/2),l%2==0?a-(n*i+(n-1)*s+s/2):a-(n*i+i/2+n*s)),"left"===r?"left"===e?c-=o:"right"===e||(c-=o/2):"right"===r?"left"===e||(c+="right"===e?o:o/2):"left"===e?c-=o/2:"right"===e&&(c+=o/2),un(t,bn._getTextAttr(e,"top",_,h),function(){var e=0;if(h.strokeStyle)for(e=0;e<l;e++)t.strokeText(p[e],c,u+(i+s)*e);if(h.fillStyle)for(e=0;e<l;e++)t.fillText(p[e],c,u+(i+s)*e)})},_getTextAttr:function(e,t,n,r){var i={};return e&&(i.textAlign=e),t&&(i.textBaseline=t),n&&(i.font=n),r.fillStyle&&(i.fillStyle=r.fillStyle),r.strokeStyle&&(i.strokeStyle=r.strokeStyle),i},calcFontHeight:function(e){var t;return bn._fontHeightMap.hasOwnProperty(e)?t=bn._fontHeightMap[e]:(t=bn._calcFontHeight(e),bn._fontHeightMap[e]=t),t},calcTextSize:function(e,t,n){var r=[e,t+="",n].join("$");if(bn._textSizeMap.hasOwnProperty(r))return bn._textSizeMap[r];var i=bn.calcFontHeight(e),o=He("CANVAS_2D_TEXT_NEWLINE"),n=(o=!0==(-1!==t.indexOf(o))?i*(o=t.split(o).length)+(o-1)*(n=0<=n?+n:He("CANVAS_2D_TEXT_LINE_SPACING")):i,{width:bn.calcTextWidth(e,t),height:o,font_height:i});return bn._textSizeMap[r]=n},calcTextWidth:function(e,t){if(null==t)return 0;var n=0,r=He("CANVAS_2D_TEXT_NEWLINE"),i=-1!==t.indexOf(r);return hn(ln,"font",e),!0==i?t.split(r).forEach(function(e){n=rt(n,ln.measureText(e).width)}):n=ln.measureText(t).width,n},getSystemFont:function(){if(null!=bn._systemFont)return bn._systemFont;if(Qe.body){var e=s.getComputedStyle(Qe.body,null);if(e){var t=e.font;if(t=t||e["font-style"]+" "+e["font-variant"]+" "+e["font-weight"]+" "+e["font-size"]+"/"+e["line-height"]+" "+e["font-family"])return bn._systemFont=t}}return"10px sans-serif"},_calcFontHeight:function(e){$e(cn,"font",e),Qe.body.appendChild(cn);e=cn.offsetHeight;return Qe.body.removeChild(cn),e},_getTextAlign:function(e){var t=e.startsWith("left")?"right":e.startsWith("right")?"left":"center",e=e.endsWith("top")?"bottom":e.endsWith("bottom")?"top":"middle";return{textAlign:t,textBaseline:e}},_getHVDirection:function(e){var t=e.startsWith("left")?"left":e.startsWith("right")?"right":"center",e=e.endsWith("top")?"top":e.endsWith("bottom")?"bottom":"middle";return{horizontal:t,vertical:e}}}),xn=(Ge(Ze.$,{canvas:{C2DUtil:dn,C2DTextUtil:bn,C2DPathUtil:yn,C2DRectShapeUtil:mn,C2DGradientUtil:gn,C2DPatternUtil:Cn,C2DAlphaUtil:fn}}),Ze.canvas2d={clear:function(e){dn.clear(qe(e))},renderText:bn.render,renderShape:mn.render,registerShape:mn.register,path:vn,renderPath:yn.render},{isIModel:function(e){return!(null==e||!e.__toTypeString_Model_$)&&e.__toTypeString_Model_$()===k},_isIModelType:function(e,t,n){if(xn.isIModel(e)){t=e["__toTypeString_"+t+"_$"];if(t)return t.apply(e)===n}return!1},isData:function(e){return xn._isIModelType(e,"Data",S)},isView:function(e){return xn._isIModelType(e,"View",L)},isProvider:function(e){return xn._isIModelType(e,"Provider",T)}}),wn=xn.isData,Le=xn.isView,Pn=xn.isProvider,Rn={isParentSettable:function(e,t){return e!==t&&!Rn.isDescendantOf(t,e)},getDataRoot:function(e){for(var t=e.getProperty("parent");t;)t=(e=t).getProperty("parent");return e},isDescendantOf:function(e,t){for(var n=e.getProperty("parent");n;){if(t===n)return!0;n=n.getProperty("parent")}return!1},getAncestorArray:function(e,t){for(var n=[],r=e.getProperty("parent");r;){if(n.push(r),t===r)return n;r=r.getProperty("parent")}return n},getAddedDescendantArray:function(e,t){var n=[];return Rn._getAddedDescendantArray(n,e,t),n},_getAddedDescendantArray:function(t,n,e){e=Rn.getAddedChildren(n,e);0<e.length&&(ht(t,e),e.forEach(function(e){Rn._getAddedDescendantArray(t,n,e)}))},getAddedChildren:function(e,t){return _t(t.getChildren(!1),e.contains,e)},getAddedSiblingArray:function(e,t){t=t.getProperty("parent");return t?_t(t.getChildren(!1),e.contains,e):e.toRootArray(!1)},isAncestorAdded:function(t,e){e=Rn.getAncestorArray(e);if(0===e.length)return!0;var n=!0;return e.forEach(function(e){t.contains(e)||(n=!1)}),n}},Dn={parse:function(e,t,n,r){e=Dn.parseToObjectArray(e,t,n);return An.parse(e,r)},parseToObjectArray:function(e,t,n){t=!0===t?Dn._parseLevelHTMLData(e):Dn._parseListHTMLData(e);return ct(n)&&t.forEach(function(e){Dn._convertItemAttr(e,n)}),t},_convertItemAttr:function(n,r){Fe(n,function(e,t){n[e]=r(e,t)});var e=n.children;e&&e.forEach(function(e){Dn._convertItemAttr(e,r)})},parseAttributes:function(e,t){for(var n=e.attributes,r=n.length,i=0;i<r;i++){var o=n[i],a=o.nodeName;"style"!==a&&"class"!==a&&(t[a]=o.nodeValue)}return t},_parseListHTMLData:function(e){for(var t=[],n=e.children,r=n.length,i=0;i<r;i++){var o=n[i],a={tag:o.tagName};Dn.parseAttributes(o,a),Dn.parseTemplate(o,a),"text"===a.content_type?Dn._parseTextContent(o,a):Dn._parseElementContent(o,a),t.push(a)}return t},parseTemplate:function(e,t){e=Pt("zw-template",e);return e&&(t.template=Dn._htmlDecode(e.innerHTML),Bt(e)),e},_htmlDecode:function(e){return o(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},_getChildren:function(e){var t,e=e.children;return 1===e.length&&(t=e[0],(Ot.isTagType(t,"UL")||Ot.isTagType(t,"OL"))&&(e=t.children)),e},_parseLevelHTMLData:function(e){for(var t=[],n=Dn._getChildren(e),r=n.length,i=0;i<r;i++){var o=n[i],a={tag:o.tagName};Dn.parseAttributes(o,a),Dn.parseTemplate(o,a),Dn._parseElementChildren(o,a),t.push(a)}return t},_parseElementChildren:function(e,t){var n=Dn._getChildren(e),r=n.length;if(0===r)Dn._parseTextContent(e,t);else{for(var i=[],o=0;o<r;o++){var a=n[o],s={tag:a.tagName};Dn.parseAttributes(a,s),Dn.parseTemplate(a,s),Dn._parseElementChildren(a,s),i.push(s)}t.children=i}},_parseTextContent:function(e,t,n){var r=e.textContent.trim();return r&&(t.hasOwnProperty("content")||(t.content=e.innerHTML),t.hasOwnProperty("name")||(t.name=r)),t},_parseElementContent:function(e,t){var n,r=e.innerHTML,i=r.trim();i&&(t.hasOwnProperty("content")||(0<(e=ht([],e.children)).length?(n=Xe("div","element_content"),ut(e,function(e){n.appendChild(e)}),t.content={type:"element",content:n}):t.content=r),t.hasOwnProperty("name")||(t.name=i))}},An={parse:function(d,e,t){var n=(e=Ge({clazz:"clazz",parent:"parent",children:"children",link_from:"link_from",link_to:"link_to"},e)).clazz,r=e.parent,i=e.children,o=e.link_from,h=e.link_to,a=e.id,s=[n,r,i,o,h],u="_z_"+n,_="_z_"+r,p="_z_"+i,l=[],c=(d.forEach(function(e){wn(e)?l.push(e):We(e)?An._createItemData(An._replaceKeyword(e,s,i),l,u,p):lt(e)&&An._createItemData({name:e},l,u,p)}),{}),f=t?ht([],t,l):l;return a?f.forEach(function(e){e.hasProperty(a)&&(c[e.getProperty(a)]=e)}):["name","id"].forEach(function(t){f.forEach(function(e){e.hasProperty(t)&&(c[e.getProperty(t)]=e)})}),l.forEach(function(e){var t=e.getProperty(_);!t||(t=wn(t)?t:c[t])&&e.set("parent",t)}),s=["_z_"+n,"_z_"+r,"_z_"+i,"_z_"+o,"_z_"+h],l.forEach(function(e){s.forEach(e.removeProperty,e)}),l},_replaceKeyword:function(e,t,n){var r,i={},o={},a=(Fe(e,function(e,t){wn(t)?i[e]=t:o[e]=t}),B({},o)),s=(a=Ge(a,i))[n];return st(s)&&(r=[],s.forEach(function(e){We(e)?r.push(An._replaceKeyword(e,t,n)):lt(e)&&r.push({name:e})}),a[n]=r),t.forEach(function(e){a.hasOwnProperty(e)&&(a["_z_"+e]=a[e],delete a[e])}),a._$z_data=e,a},_createItemData:function(e,t,n,r,i){var o=e[n]||Sn,a=vt.createInstance(o,[e]),o=(i&&a.set("parent",i),t.push(a),e[r]);st(o)&&o.forEach(function(e){An._createItemData(e,t,n,r,a)})}},D={getSingleObjectArg:function(e,t){if(1===e.length){e=e[0];if(We(e))return e[t]}}},kn=D.getSingleObjectArg,Sn=(je(t,P,{__toTypeString_Model_$:function(){return k}}),function(e){if(!(this instanceof Sn))return vt.createInstance(Sn,arguments);this._childArrayMap=new Je,Sn.superClass.constructor.apply(this,arguments)}),Tn=(je(Sn,t,{___zsg:["parent"],___zdefaults_:{parent:f,name:f,icon:f},__toTypeString_Data_$:function(){return S},isPropertyValid:function(e,t,n){if("parent"===e){if(!0===this.__pcrChanging)return!1;if(t){if(!wn(t))return!1;if(!Rn.isParentSettable(this,t))return!1}}return Sn.superClass.isPropertyValid.apply(this,arguments)},beforeSetProperty:function(e,t,n){"parent"===e&&(this.__pcrChanging=!0,n&&n.removeChild(this)),Sn.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"parent"===e&&(t&&t.addChild(this),this.__pcrChanging=!1),Sn.superClass.afterSetProperty.apply(this,arguments)},addChild:function(e){!0!==this.__pcrChanging&&wn(e)&&(this.isParentOf(e)||Rn.isParentSettable(e,this)&&(this.__pcrChanging=!0,this._childArrayMap.add(e.id(),e),e.setProperty("parent",this),this.__pcrChanging=!1,this.dispatchChangeEvent("children",e,f)))},removeChild:function(e){!0!==this.__pcrChanging&&wn(e)&&this.isParentOf(e)&&(this.__pcrChanging=!0,this._childArrayMap.remove(e.id()),e.removeProperty("parent"),this.__pcrChanging=!1,this.dispatchChangeEvent("children",null,e))},clearChildren:function(){this.__pcrChanging=!0;var e=this._childArrayMap.toArray();e.forEach(function(e){e.removeProperty("parent")}),this._childArrayMap.clear(),this.__pcrChanging=!1,this.dispatchChangeEvent("children",this._childArrayMap.toArray(),e)},getChildren:function(e){return this._childArrayMap.toArray(e)},isParentOf:function(e){return this._childArrayMap.has(e.id())},hasChildren:function(){return 0<this._childArrayMap.size()},eachChildren:function(e,t){this._childArrayMap.eachArray(e,t)},clone:function(n,e){var t=this.getProperties(!1),r={};return ct(n)?Fe(t,function(e,t){!1!==n(e,t)&&(r[e]=t)}):We(n)?Fe(t,function(e,t){!1!==n[e]&&(r[e]=t)}):r=Ge(r,t),vt.createInstance(this.constructor,[Ge(r,e)])},_getAttachedDataArray:function(){return this._childArrayMap.toArray(!1)}}),je(n,t,{__toTypeString_Provider_$:function(){return T},add:function(e,n){var t=arguments.length;st(e)?1<t?e.forEach(function(e,t){this.add(e,n+t)},this):e.forEach(function(e){this.add(e)},this):(wn(e)||q.throwError("Only z.Data instance is allowed"),!0!==this.isAddable(e)||this.contains(e)||(1<t?(this._dataArrayMap.add(e.id(),e,n),this._onAdd(e,n)):(this._dataArrayMap.add(e.id(),e),this._onAdd(e)),this.dispatchProviderChangeEvent("add",e)))},_onAdd:function(e){},isAddable:function(e){return!0},remove:function(e){this.contains(e)&&(this._dataArrayMap.remove(e.id()),this._onRemove(e),this.dispatchProviderChangeEvent("remove",e))},_onRemove:function(e){},clear:function(){var e;0<this._dataArrayMap.size()&&(e=this._dataArrayMap.toArray(),this._dataArrayMap.clear(),this._onClear(e),this.dispatchProviderChangeEvent("clear",e))},_onClear:function(e){},contains:function(e){return this._dataArrayMap.has(e.id())},find:function(t,n){if(We(t))return this._dataArrayMap.findArray(function(n){var r=!0;return Fe(t,function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(ct(t))return this._dataArrayMap.findArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.findArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.findArray(function(e){return e.getProperty(t)===n}):f},filter:function(t,n){if(We(t))return this._dataArrayMap.filterArray(function(n){var r=!0;return Fe(function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(ct(t))return this._dataArrayMap.filterArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.filterArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.filterArray(function(e){return e.getProperty(t)===n}):[]},toArray:function(e){return this._dataArrayMap.toArray(e)},size:function(){return this._dataArrayMap.size()},each:function(e,t){this._dataArrayMap.eachArray(e,t)},addProviderChangeListener:function(e,t){this.addListener("provider.change",e,t)},removeProviderChangeListener:function(e,t){this.removeListener("provider.change",e,t)},dispatchProviderChangeEvent:function(e,t,n){this.dispatchEvent("provider.change",{type:e,data:t,info:n})}}),je(Ye,n,{_onAdd:function(e){null==e.getProperty("parent")&&this._rootArrayMap.add(e.id(),e),e.addChangeListener(this._handleDataChange,this)},_onRemove:function(e){var t=e._getAttachedDataArray();t&&t.forEach(this.remove,this),null==e.getProperty("parent")&&this._rootArrayMap.remove(e.id()),e.removeChangeListener(this._handleDataChange,this)},_onClear:function(e){this._rootArrayMap.clear(),e.forEach(function(e){e.removeChangeListener(this._handleDataChange,this)},this)},_handleDataChange:function(e){var t,n,r;"parent"===e.property&&(t=e.source,n=e.old_value,r=e.new_value,null==n&&null!=r?this._rootArrayMap.remove(t.id()):null==r&&null!=n&&this._rootArrayMap.add(t.id(),t)),e.data=e.source,this.dispatchDataChangeEvent(e)},addDataChangeListener:function(e,t){this.addListener("provider.data.change",e,t)},removeDataChangeListener:function(e,t){this.removeListener("provider.data.change",e,t)},dispatchDataChangeEvent:function(e){this.dispatchEvent("provider.data.change",e)},toRootArray:function(e){return this._rootArrayMap.toArray(e)},hEach:function(t,n){this._rootArrayMap.eachArray(function(e){return this._hEach(e,t,n)},this)},hEachByData:function(e,t,n){e.eachChildren(function(e){if(this.contains(e))return this._hEach(e,t,n)},this)},_hEach:function(e,t,n){var r=t.apply(n,[e]);return!1!==r&&(e.eachChildren(function(e){if(this.contains(e)&&!1===(r=this._hEach(e,t,n)))return!1},this),r)},getSelectProvider:function(){return null==this._selectProvider&&(this._selectProvider=new Tn(this)),this._selectProvider},getCheckProvider:function(){return null==this._checkProvider&&(this._checkProvider=new Tn(this)),this._checkProvider},getExpandProvider:function(){return null==this._expandProvider&&(this._expandProvider=new Tn(this)),this._expandProvider},moveToPrevious:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.splice(n-1,0,e),this.dispatchIndexChangeEvent(e,n,n-1))},moveToNext:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.splice(r+1,0,e),this.dispatchIndexChangeEvent(e,r+1,r))},moveToFirst:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.unshift(e),this.dispatchIndexChangeEvent(e,0,n))},moveToLast:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.push(e),this.dispatchIndexChangeEvent(e,n-1,r))},moveTo:function(e,t){var n=this._getIndexArray(e),r=n.indexOf(e);r!==t&&(n.splice(r,1),n.splice(t,0,e),this.dispatchIndexChangeEvent(e,t,r))},_getIndexArray:function(e){e=e.getProperty("parent");return e?e.getChildren(!1):this._rootArrayMap.toArray(!1)},addIndexChangeListener:function(e,t){this.addListener("provider.index.change",e,t)},removeIndexChangeListener:function(e,t){this.removeListener("provider.index.change",e,t)},dispatchIndexChangeEvent:function(e,t,n){this.dispatchEvent("provider.index.change",{data:e,new_index:t,old_index:n})}}),function(e){Tn.superClass.constructor.apply(this),this.setProvider(e)});je(Tn,n,{set:function(e){this.clear(),wn(e)?this.isAddable(e)&&this._dataArrayMap.add(e.id(),e):st(e)&&ut(e,function(e){wn(e)&&this.isAddable(e)&&this._dataArrayMap.add(e.id(),e)},this),0<this._dataArrayMap.size()&&this.dispatchProviderChangeEvent("set",this._dataArrayMap.toArray())},getLast:function(){var e=this._dataArrayMap.toArray(!1);return e[e.length-1]},isAddable:function(e){return!this._provider||this._provider.contains(e)},setProvider:function(e){this._provider&&this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider=e,this.clear(),e&&e.addProviderChangeListener(this._handleProviderChange,this)},_handleProviderChange:function(e){var t=e.type;"remove"===t?this._dataArrayMap.remove(e.data.id()):"clear"===t&&this._dataArrayMap.clear()}});function Ln(e){return{_isCheck_:!0,isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_updateCheckProvider:function(){this._removeCheckProviderListener(),this._provider&&(!1!==this.getProperty("model_check")?this._checkProvider=this._provider.getCheckProvider():(this._checkProvider||(this._checkProvider=new Tn(this._provider)),this._checkProvider.setProvider(this._provider)),this._addCheckProviderListener())},_removeCheckProviderListener:function(){this._checkProvider&&this._checkProvider.removeProviderChangeListener(this._handleCheckProviderChange,this)},_addCheckProviderListener:function(){this._checkProvider.addProviderChangeListener(this._handleCheckProviderChange,this)},_handleCheckProviderChange:function(e){var t=e.type;"add"===t?this._onCheckAdd(e.data):"remove"===t?this._onCheckRemove(e.data):"clear"===t?this._onCheckClear(e.data):"set"===t&&this._onCheckSet(e.data),this._onCheckChange(e)},_addCheckNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)},_onCheckAdd:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},onCheckAdd:function(e,t){this.addListener("on.check.add",e,t)},_onCheckRemove:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},onCheckRemove:function(e,t){this.addListener("on.check.remove",e,t)},_onCheckClear:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckClear","on.check.clear",e,[e])},onCheckClear:function(e,t){this.addListener("on.check.clear",e,t)},_onCheckSet:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},onCheckSet:function(e,t){this.addListener("on.check.set",e,t)},_onCheckChange:function(e){this._update(),this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)},check:function(e,t){e=this._getModelDataArr(e);if(0!==e.length)return!0===t?this._addCheck(e):this._setCheck(e)},uncheck:function(e){e=this._getModelDataArr(e);0!==e.length&&this._removeCheck(e)},addCheck:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._addCheck(e)},removeCheck:function(e){e=this._getModelDataArr(e);0!==e.length&&this._removeCheck(e)},setCheck:function(e){e=this._getModelDataArr(e);0!==e.length&&this._setCheck(e)},checkAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=_t(t,this._isVisible,this)),this._checkProvider.set(this._filterCheckableData(t))},clearCheck:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},uncheckAll:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},getChecked:function(e){return this._checkProvider.toArray.apply(this._checkProvider,arguments)},getLastChecked:function(){return this._checkProvider.getLast.apply(this._checkProvider,arguments)},isChecked:function(e){return!!(e=this._getModelData(e))&&this._checkProvider.contains(e)},toggleCheck:function(e){(e=this._getModelData(e))&&(this.isChecked(e)?this.removeCheck(e):this.addCheck(e))},_addCheck:function(e){return this._checkProvider.add(this._filterCheckableData(e))},_removeCheck:function(e){e.forEach(function(e){this._checkProvider.remove(e)},this)},_setCheck:function(e){return this._checkProvider.set(this._filterCheckableData(e))},_filterCheckableData:function(e){return e.filter(function(e){return this.isCheckable(e)&&!this.isDisabled(e)},this)}}}function En(e){return{_isExpand_:!0,_isExpandable:function(e){return this.isExpandable(e)},isExpandable:function(e){return!1!==this.getDataViewProperty(e,"expandable")},_isAccordion:function(){return!0===this.getProperty("accordion")},_updateExpandProvider:function(){this._removeExpandProviderListener(),this._provider&&(!1!==this.getProperty("model_expand")?this._expandProvider=this._provider.getExpandProvider():(this._expandProvider||(this._expandProvider=new Tn(this._provider)),this._expandProvider.setProvider(this._provider)),this._addExpandProviderListener())},_removeExpandProviderListener:function(){this._expandProvider&&this._expandProvider.removeProviderChangeListener(this._handleExpandProviderChange,this)},_addExpandProviderListener:function(){this._expandProvider.addProviderChangeListener(this._handleExpandProviderChange,this)},_handleExpandProviderChange:function(e){var t=e.type;"add"===t?this._onExpandAdd(e.data):"remove"===t?this._onExpandRemove(e.data):"clear"===t?this._onExpandClear(e.data):"set"===t&&this._onExpandSet(e.data),this._onExpandChange(e)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!0)},_onExpandAdd:function(t){var e,n;this._addExpandNeedUpdateData(t),this._callOn("onExpand","on.expand.add",t,[t]),this._isAccordion()&&(e=this._expandProvider.toArray(),n=Rn.getAncestorArray(t),e.forEach(function(e){e!==t&&n.indexOf(e)<0&&this.collapse(e)},this))},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._addExpandNeedUpdateData(e,!1),this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._update(),this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)},getExpanded:function(e){return this._expandProvider.toArray.apply(this._expandProvider,arguments)},expand:function(e,t){var n=this._getModelDataArr(e);if(0!==n.length)return 1===n.length&&!0===t&&n.forEach(function(e){ht(n,Rn.getAncestorArray(e))}),this._addExpand(n)},collapse:function(e,t){var n=this._getModelDataArr(e);if(0!==n.length)return!0===t&&n.forEach(function(e){ht(n,Rn.getAddedDescendantArray(e))}),this._removeExpand(n)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=_t(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},collapseAll:function(){return this._expandProvider.clear.apply(this._expandProvider,arguments)},isExpanded:function(e){return!!(e=this._getModelData(e))&&this._expandProvider.contains(e)},toggleExpand:function(e){(e=this._getModelData(e))&&(this.isExpanded(e)?this.collapse(e):this.expand(e))},_addExpand:function(e){return this._expandProvider.add(this._filterExpandableData(e))},_removeExpand:function(e){e.forEach(function(e){this._expandProvider.remove(e)},this)},_filterExpandableData:function(e){return e.filter(function(e){return this._isExpandable(e)&&!this.isDisabled(e)},this)},_isDataAncestorExpanded:function(e){e=Rn.getAncestorArray(e);if(0===e.length)return!0;var t=!0;return e.forEach(function(e){this.isExpanded(e)||(t=!1)},this),t}}}function Vn(t){return{_onDataRemove:function(e){t.superClass._onDataRemove.apply(this,arguments),this._removeHover(e,!1)},_onDataClear:function(){t.superClass._onDataClear.apply(this,arguments),this._clearHover(!1)},_onModelChange:function(e){t.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._clearHover(!1)},setHoverData:function(e){this._setHoverData(this._getModelData(e),!0)},getHoverData:function(){return this._hoverData},isHover:function(e){return!!(e=this._getModelData(e))&&this._hoverData===e},hasHover:function(){return null!=this._hoverData},_isHoverable:function(e){return this.isHoverable(e)},isHoverable:function(e){return!0===this.getDataViewProperty(e,"hoverable")},_removeHover:function(e,t){e===this._hoverData&&this._setHoverData(null,t)},_clearHover:function(e){this._setHoverData(null,e)},_setHoverData:function(e,t,n){this._hoverData!==e&&((t=!1!==t)&&this._hoverData&&this._onHoverChange(this._hoverData,!1,n),this._hoverData=e,t&&this._hoverData&&this._onHoverChange(this._hoverData,!0,n))},_onHoverChange:function(e,t,n){this._addHoverNeedUpdateData(e),this._update(),this._callOn("onHoverChange","on.hover.change",{data:e,event:n,isHover:t},[e,t])},onHoverChange:function(e,t){this.addListener("on.hover.change",e,t)},_addHoverNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)}}}function On(e){return{_isMovable:function(e){return this.isMovable(e)},isMovable:function(e){return!1!==this.getDataViewProperty(e,"movable")}}}function zn(){var e=kn(arguments,"appendTo"),t=g("div");this._root=t,this._controllerArray=[],zn.superClass.constructor.apply(this,arguments),!0===this.getProperty("onresize")&&!1===this.hasProperty("onresize")&&Zt.addResizeListener(t,this._handleViewResize,this),this._appendToUpdate(),$e(t,"visibility","hidden"),e&&this.appendTo(e),mt(function(){Et(t,"visibility")},20)}function In(){var e=kn(arguments,"data");this._dataVisibleFilterArray=[],In.superClass.constructor.apply(this,arguments),Pn(e)?this.setProvider(e):(this.setProvider(new Ye),e&&this.setData(e))}function Mn(){this._rendererArrayMap=new Je,this._needUpdateDataArray=[],this._needUpdateDataADMap={},Mn.superClass.constructor.apply(this,arguments)}function Bn(){Bn.superClass.constructor.apply(this,arguments)}function Nn(e,t){this._view=e,this._data=t,this._renderConfig={}}function Un(){Un.superClass.constructor.apply(this,arguments),$e(this.getRenderer(),"display","none"),this.getRenderer().setAttribute("__z_did_",this._data.id())}function Hn(){this._typeMap={}}function Wn(){Wn.superClass.constructor.apply(this,arguments)}function Gn(){Gn.superClass.constructor.apply(this,arguments)}function Fn(){this._initCanvasView(),Fn.superClass.constructor.apply(this,arguments);var e=this.getRoot();$e(e,"width","100%"),$e(e,"height","100%"),$e(e,"overflow","hidden"),$e(e,"position","relative"),this._appendCanvas(this._dataCanvas),this.addController(new Wn)}var jn=function(e,t,n){return An.parse(e,t,n)},qn=(je(zn,t,Ge({__toTypeString_View_$:function(){return L},appendTo:function(e){(e=qe(e)).appendChild(this.getRoot())},_appendToUpdate:function(){var e=this.getRoot();xt(function(){if(Ht(e))return this.update(),this._displayToResize(),!1},this)},_displayToResize:function(){var n;!0===this.getProperty("onresize")&&(n=this.getRoot(),j(function(){for(var e=n.parentNode,t=!0;e;){if("none"===Lt(e,"display")){t=!1;break}if((e=e.parentNode)===Qe)break}if(t)return this._doResizeUpdate(),!1},600,this))},afterSetProperty:function(e,t,n){zn.superClass.afterSetProperty.apply(this,arguments),this._onViewChange(e,t,n)},_onViewChange:function(e,t,n){this._callOn("onViewChange","on.view.change",{property:e,new_value:t,old_value:n},[e,t,n]),!0!==this._doViewCSSUpdate(e,t,n)&&!0!==this._doViewOnResizeUpdate(e,t,n)&&this._update()},onViewChange:function(e,t){this.addListener("on.view.change",e,t)},offViewChange:function(e,t){this.removeListener("on.view.change",e,t)},update:function(e){!0===e?(this._update(),this._handleViewResize()):(this._doBatchUpdate(),this._doBatchResizeUpdate())},_update:function(){this._callBatch(this._doBatchUpdate,"update_cb_")},_doBatchUpdate:function(){this._doUpdate(),this._onViewUpdate()},_onViewUpdate:function(){this._callOn("onViewUpdate","on.view.update",{},[])},onViewUpdate:function(e,t){this.addListener("on.view.update",e,t)},_doUpdate:function(){},_doViewCSSUpdate:function(e,t,n){var r;return"style"===e?(r={},lt(n)&&(n=ze.parseStyle(n)),We(n)&&_(n).forEach(function(e){r[e]=""}),lt(t)&&(t=ze.parseStyle(t)),We(t)&&(r=Ge(r,t)),Ze.dom.setStyle(this._root,r),!0):"class"===e?(n&&At(this._root,n),t&&Dt(this._root,t),!0):void 0},_callBatch:function(e,t){F(e,{key:t,context:this})},getRoot:function(){return this._root}},{_doViewOnResizeUpdate:function(e,t,n){if("onresize"===e)return!0===n&&Zt.removeResizeListener(this._root,this._handleViewResize,this),!0===t&&Zt.addResizeListener(this._root,this._handleViewResize,this),!0},_handleViewResize:function(){this._callBatch(this._doBatchResizeUpdate,"onresize_cb_")},_doBatchResizeUpdate:function(){var e=this.getRootSize();0<e.width&&0<e.height&&this._doResizeUpdate(),this._onViewResize()},_onViewResize:function(){this._callOn("onViewResize","on.view.resize",{},[])},onViewResize:function(e,t){this.addListener("on.view.resize",e,t)},_doResizeUpdate:function(){},getRootSize:function(){return{width:this._root.clientWidth,height:this._root.clientHeight}}},{_getControllerRoot:function(){return this._root},setControllers:function(e){this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=ht([],e),this._controllerArray.forEach(function(e){e.add(this)},this),this._onControllerChange("set")},addController:function(e){this._controllerArray.push(e),e.add(this),this._onControllerChange("add")},removeController:function(e){var t=this._controllerArray.indexOf(e);0<=t&&(e.remove(),this._controllerArray.splice(t,1),this._onControllerChange("remove"))},clearController:function(){0<this._controllerArray.length&&(this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=[],this._onControllerChange("clear"))},_onControllerChange:function(e){},_onDataClick:function(e,t){this._callOn("onDataClick","on.data.click",{data:e,event:t},[e,t])},onDataClick:function(e,t){this.addListener("on.data.click",e,t)},_onDataDblClick:function(e,t){this._callOn("onDataDblClick","on.data.dblclick",{data:e,event:t},[e,t])},onDataDblClick:function(e,t){this.addListener("on.data.dblclick",e,t)}})),je(In,zn,Ge({makeVisible:function(e){},_isDisabled:function(e){return this.isDisabled(e)},isDisabled:function(e){return!0===this.getDataViewProperty(e,"disabled")},getDataViewProperty:function(e,t,n){n=n||t;var r=this.getDataProperties(e);if(r){if(r.hasOwnProperty(t))return r[t];if(r.hasOwnProperty(n))return r[n]}if(e.hasProperty(t))return e.getProperty(t);if(this.hasProperty(n))return this.getProperty(n);r=e.getProperty(t);return null!=r?r:this.getProperty(n)},hasDataViewProperty:function(e,t,n){n=n||t;var r=this.getDataProperties(e);if(r){if(r.hasOwnProperty(t))return!0;if(r.hasOwnProperty(n))return!0}return!!e.hasProperty(t)||!!this.hasProperty(n)},getDataProperties:function(e){}},{setProvider:function(e){this._provider!==e&&(xn.isProvider(e)||q.throwError("Only z.Provider instance is allowed"),this._removeProviderListener(),this._provider=e,this._addProviderListener(),this._beforeModelChange("set_provider"),this._onProviderChange(),this._onModelChange("set_provider"))},getProvider:function(){return this._provider},_onProviderChange:function(){},_removeProviderListener:function(){this._provider&&(this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider.removeDataChangeListener(this._handleProviderDataChange,this),this._provider.removeIndexChangeListener(this._handleProviderDataIndexChange,this))},_addProviderListener:function(){this._provider.addProviderChangeListener(this._handleProviderChange,this),this._provider.addDataChangeListener(this._handleProviderDataChange,this),this._provider.addIndexChangeListener(this._handleProviderDataIndexChange,this)},_handleProviderChange:function(e){this._beforeModelChange("provider",e);var t=e.type;"add"===t?this._onDataAdd(e.data):"remove"===t?this._onDataRemove(e.data):"clear"===t&&this._onDataClear(e.data),this._onModelChange("provider",e)},_handleProviderDataChange:function(e){this._beforeModelChange("data",e),this._onDataChange(e.data,e),this._onModelChange("data",e)},_handleProviderDataIndexChange:function(e){this._beforeModelChange("index",e),this._onDataIndexChange(e.data,e),this._onModelChange("index",e)},_beforeModelChange:function(e,t){},_onModelChange:function(e,t){this._update(),this._callOn("onModelChange","on.model.change",{type:e,event:t},[e,t])},onModelChange:function(e,t){this.addListener("on.model.change",e,t)},offModelChange:function(e,t){this.removeListener("on.model.change",e,t)},_onDataAdd:function(e){this._callOn("onDataAdd","on.data.add",e,[e])},onDataAdd:function(e,t){this.addListener("on.data.add",e,t)},_onDataRemove:function(e){this._callOn("onDataRemove","on.data.remove",e,[e])},onDataRemove:function(e,t){this.addListener("on.data.remove",e,t)},_onDataClear:function(e){this._callOn("onDataClear","on.data.clear",e,[e])},onDataClear:function(e,t){this.addListener("on.data.clear",e,t)},_onDataIndexChange:function(e,t){this._callOn("onDataIndexChange","on.data.index.change",{data:e,event:t},[e,t])},onDataIndexChange:function(e,t){this.addListener("on.data.index.change",e,t)},_onDataChange:function(e,t){this._callOn("onDataChange","on.data.change",{data:e,event:t},[e,t])},onDataChange:function(e,t){this.addListener("on.data.change",e,t)},setData:function(e,t){st(e)||(e=[e]);var n=new Ye,e=jn(e);!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))}),n.add(e),this.setProvider(n)},addData:function(e,t){return wn(e)||(st(e)||(e=[e]),wn(e[0])||(e=jn(e,null,this.getDataArray()))),1<arguments.length?this._provider.add(e,t):this._provider.add(e)},removeData:function(e){e=this._getModelDataArr(e);0!==e.length&&e.forEach(function(e){this._provider.remove(e)},this)},clearData:function(){return this._provider.clear.apply(this._provider,arguments)},containsData:function(e){return!!(e=wn(e)?e:this._provider.find.apply(this._provider,arguments))&&this._provider.contains.apply(this._provider,arguments)},findData:function(e,t){return this._provider.find.apply(this._provider,arguments)},filterData:function(e,t){return this._provider.filter.apply(this._provider,arguments)},eachData:function(e,t){if(this._provider)return this._provider.each.apply(this._provider,arguments)},hEachData:function(e,t){if(this._provider)return this._provider.hEach.apply(this._provider,arguments)},getDataArray:function(e){return this._provider.toArray.apply(this._provider,arguments)},getRootDataArray:function(e){return this._provider.toRootArray.apply(this._provider,arguments)},getDataSize:function(){return this._provider.size.apply(this._provider,arguments)},_getModelDataArr:function(e){var t=[];return wn(e)?t.push(e):st(e)?e.forEach(function(e){wn(e)?t.push(e):!We(e)||(e=this.findData(e))&&t.push(e)},this):We(e)&&(e=this.findData(e))&&t.push(e),t},_getModelData:function(e){return wn(e)?e:We(e)?this.findData(e):void 0}},{_isVisible:function(e){return this._isVisible_(e)},_isVisible_:function(e){return this.containsData(e)&&this.isVisible(e)&&this._isFilterVisible(e)},isVisible:function(e){return!1!==this.getDataViewProperty(e,"visible")},_isFilterVisible:function(t){var n=!0;return 0<this._dataVisibleFilterArray.length&&ut(this._dataVisibleFilterArray,function(e){if(!1===e(t))return n=!1}),n},addVisibleFilter:function(e){this._dataVisibleFilterArray.push(e),this._update()},removeVisibleFilter:function(e){ft(this._dataVisibleFilterArray,e),this._update()},clearVisibleFilter:function(){this._dataVisibleFilterArray.length=0,this._update()}})),je(Mn,In,Ge({___zdefaults_:{model_select:!1,model_expand:!1,model_check:!1,make_visible_on_select:!0,selectable:!0,label_field:"name",label_visible:!0,info_field:"info",info_visible:!0},_onViewChange:function(e,t,n){this._updateAllDataVar(),Mn.superClass._onViewChange.apply(this,arguments),this._doAttachProviderUpdate(e)},_onProviderChange:function(){Mn.superClass._onProviderChange.apply(this,arguments),this._updateSelectProvider(),this._updateExpandProvider(),this._updateCheckProvider()},_doAttachProviderUpdate:function(e){return"model_select"===e?(this._updateSelectProvider(),!0):"model_expand"===e?(this._updateExpandProvider(),!0):"model_check"===e?(this._updateCheckProvider(),!0):void 0},_updateSelectProvider:function(){},_updateExpandProvider:function(){},_updateCheckProvider:function(){},_updateAllDataVar:function(){this._update_all_data_=!0,this._needUpdateDataArray.length=0},_updateAllData:function(){this._updateAllDataVar(),this._update()},_updateData:function(e){this._addNeedUpdateData(e),this._update()},_onModelChange:function(e){"set_provider"===e&&(this._updateAllDataVar(),this._clearDataRendererImpl(),this._initAllDataRenderer()),Mn.superClass._onModelChange.apply(this,arguments)},update:function(){this._updateAllDataVar(),Mn.superClass.update.apply(this,arguments)},_doUpdate:function(e,t,n){Mn.superClass._doUpdate.apply(this,arguments),!0===this._update_all_data_?this._doUpdateDataArray(this.getDataArray(!1)):this._doUpdateDataArray(this._needUpdateDataArray),this._needUpdateDataArray.length=0,this._update_all_data_=!1},_doUpdateDataArray:function(e){var n=[];e.forEach(function(e){var t=e.id(),t=this._getDataRelatedDataArray(e,!0===this._needUpdateDataADMap[t+"_$_ancestor"],!0===this._needUpdateDataADMap[t+"_$_descendant"])||[];ht([e],t).forEach(function(e){var t=n.indexOf(e);-1<t&&n.splice(t,1),n.push(e)})},this),n.forEach(this._doUpdateDataRenderer,this),this._needUpdateDataADMap={}},_addNeedUpdateData:function(e,t,n){!0!==this._update_all_data_&&(this._needUpdateDataArray.push(e),e=e.id(),this._needUpdateDataADMap[e+"_$_ancestor"]=this._needUpdateDataADMap[e+"_$_ancestor"]||!1!==t,this._needUpdateDataADMap[e+"_$_descendant"]=this._needUpdateDataADMap[e+"_$_descendant"]||!1!==n)},_getDataRelatedDataArray:function(e,t,n){},getLabel:function(e){return e.getProperty(this.getProperty("label_field"))},getInfo:function(e){return e.getProperty(this.getProperty("info_field"))},_onDataAdd:function(e){this._addNeedUpdateData(e),this._addDataRenderer(e),Mn.superClass._onDataAdd.apply(this,arguments)},_onDataRemove:function(e){this._addNeedUpdateData(e),this._removeDataRenderer(e),Mn.superClass._onDataRemove.apply(this,arguments)},_onDataClear:function(){this._updateAllDataVar(),this._clearDataRendererImpl(),Mn.superClass._onDataClear.apply(this,arguments)},_onDataChange:function(e,t){this._addNeedUpdateData(e),this._updateDataRenderer(e,t),Mn.superClass._onDataChange.apply(this,arguments)},_onDataIndexChange:function(e){this._addNeedUpdateData(e);var t=this._rendererArrayMap.get(e.id());t&&this._updateDataRendererImpl(e,t,!0),Mn.superClass._onDataIndexChange.apply(this,arguments)}},{isSelectable:function(e){return!1!==this.getDataViewProperty(e,"selectable")},getSelectMode:function(){return this.getProperty("select_mode")},_updateSelectProvider:function(){this._removeSelectProviderListener(),this._provider&&(!1!==this.getProperty("model_select")?this._selectProvider=this._provider.getSelectProvider():(this._selectProvider||(this._selectProvider=new Tn(this._provider)),this._selectProvider.setProvider(this._provider)),this._addSelectProviderListener())},_removeSelectProviderListener:function(){this._selectProvider&&this._selectProvider.removeProviderChangeListener(this._handleSelectProviderChange,this)},_addSelectProviderListener:function(){this._selectProvider.addProviderChangeListener(this._handleSelectProviderChange,this)},_handleSelectProviderChange:function(e){var t=e.type;"add"===t?this._onSelectAdd(e.data):"remove"===t?this._onSelectRemove(e.data):"clear"===t?this._onSelectClear(e.data):"set"===t&&this._onSelectSet(e.data),this._onSelectChange(e)},_addSelectNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)},_onSelectAdd:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectAdd","on.select.add",e,[e])},onSelectAdd:function(e,t){this.addListener("on.select.add",e,t)},_onSelectRemove:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectRemove","on.select.remove",e,[e])},onSelectRemove:function(e,t){this.addListener("on.select.remove",e,t)},_onSelectClear:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectClear","on.select.clear",e,[e])},onSelectClear:function(e,t){this.addListener("on.select.clear",e,t)},_onSelectSet:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectSet","on.select.set",e,[e])},onSelectSet:function(e,t){this.addListener("on.select.set",e,t)},_onSelectChange:function(e){this._update(),this._callOn("onSelectChange","on.select.change",e,[e]),this._callBatch(this._onSelectBatchChange,"select_batch_cb_")},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(){var e=this.getSelected();this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)},select:function(e,t){e=this._getModelDataArr(e);if(0!==e.length)return!0===t?this._addSelect(e):this._setSelect(e)},unselect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._removeSelect(e)},addSelect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._addSelect(e)},removeSelect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._removeSelect(e)},setSelect:function(e){e=this._getModelDataArr(e);if(0!==e.length)return this._setSelect(e)},selectAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=_t(t,this._isVisible,this)),this._selectProvider.set(this._filterSelectableData(t))},clearSelect:function(){return this._selectProvider.clear.apply(this._selectProvider,arguments)},getSelected:function(e){return this._selectProvider.toArray.apply(this._selectProvider,arguments)},getLastSelected:function(){return this._selectProvider.getLast.apply(this._selectProvider,arguments)},isSelected:function(e){return!!(e=this._getModelData(e))&&this._selectProvider.contains(e)},_addSelect:function(e){return this._selectProvider.add(this._filterSelectableData(e))},_removeSelect:function(e){e.forEach(function(e){this._selectProvider.remove(e)},this)},_setSelect:function(e){return this._selectProvider.set(this._filterSelectableData(e))},_filterSelectableData:function(e){return e.filter(function(e){return this.isSelectable(e)&&!this.isDisabled(e)},this)}},{_doUpdateDataRenderer:function(e){e=this.getDataRenderer(e);e&&e.update()},getDataRenderProperty:function(e,t){return e.getProperty(t)},_addDataRenderer:function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},_addDataRendererImpl:function(e,t){},_removeDataRenderer:function(e){var t=this._rendererArrayMap.get(e.id());t&&(this._rendererArrayMap.remove(e.id()),this._removeDataRendererImpl(e,t),t.dispose())},_removeDataRendererImpl:function(e,t){},_clearDataRendererImpl:function(){},_updateDataRenderer:function(e,t){var n=this._rendererArrayMap.get(e.id());n&&this._updateDataRendererImpl(e,n,"parent"===t.property)},_updateDataRendererImpl:function(e,t,n){},_initAllDataRenderer:function(){this.getDataArray(!1).forEach(function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},this)},_reorderAllDataRenderer:function(){},getDataRenderer:function(e){return this._rendererArrayMap.get(e.id())},createDataRenderer:function(e){var t=this.getDataRendererClass(e);return vt.createInstance(t,[this,e])},getDataRendererClass:function(e){}})),je(Bn,Mn,{___zdefaults_:{sort_compare:null},update:function(){this.getProperty("sort_compare")&&this._reorderAllDataRenderer(),Bn.superClass.update.apply(this,arguments)},_onViewChange:function(e,t,n){"sort_compare"===e&&this._reorderAllDataRenderer(),Bn.superClass._onViewChange.apply(this,arguments)},_onViewUpdate:function(){Bn.superClass._onViewUpdate.apply(this,arguments),this._updateRendererVIndex()},_updateRendererVIndex:function(){Rt(".item:not(.hidden)",this.getRendererRootContainer()).forEach(function(e,t){e.setAttribute("v_index",t),e.setAttribute("v_index_oe",t%2==0?"odd":"even")})},getRendererRootContainer:function(){return this.getRoot()},getRendererContainer:function(e){return this.getRoot()},_getSortDataArray:function(e){var t=this.getProperty("sort_compare");return ct(t)?e.slice().sort(t):e},_removeDataRendererImpl:function(e,t){Bt(t.getRenderer())},_clearDataRendererImpl:function(){Nt(this.getRendererRootContainer())},getDataRendererElement:function(e){e=this.getDataRenderer(e);return e?e.getRenderer():null},getDataAt:function(e){var t,e=qt.getEventTarget(e,"[__z_did_]");return e?(t=e.getAttribute("__z_did_"),pt(this.getDataArray(!1),function(e){return e.id()===t})):null},makeVisible:function(e){var t;!e||(t=this.getDataRendererElement(e))&&bt(function(){Mt.scrollIntoView(t,this._getScrollView())},this)},_getScrollView:function(){return this.getRoot()}}),je(Nn,l,{update:function(){var e=this._isRendererVisible(this._view,this._data);this._visible!==e&&(this._visible=e,this.onVisibleChange(e)),this._renderConfig={},!0===this._visible&&(this.updateRenderConfig(this._view,this._data,this._renderConfig),this.updateRenderer(this._view,this._data,this._renderConfig))},_isRendererVisible:function(e,t){return e._isVisible(t)},onVisibleChange:function(e){},updateRenderConfig:function(e,t,n){var r;!1===e.getDataViewProperty(t,"label_visible")||null!=(r=e.getLabel(t))&&(n.label_visible=!0,n.label=r,n.label_font=e.getDataViewProperty(t,"label_font"),n.label_color=e.getDataViewProperty(t,"label_color")),!1!==e.getDataViewProperty(t,"info_visible")&&null!=(r=e.getInfo(t))&&(n.info_visible=!0,n.info=r,n.info_font=e.getDataViewProperty(t,"info_font"),n.info_color=e.getDataViewProperty(t,"info_color")),n.selected=e.isSelected(t),n.disabled=e._isDisabled(t)},updateRenderer:function(e,t,n){this.updateRendererStatus()},updateRendererStatus:function(e,t,n){},getRenderConfig:function(e){return this._renderConfig[e]},getViewRenderConfig:function(e){return this._view.getProperty(e)},updateData:function(){this._view._updateData(this._data)},dispose:function(){}}),je(Un,Nn,{getRenderer:function(){return this._renderer},updateRenderConfig:function(e,t,n){Un.superClass.updateRenderConfig.apply(this,arguments);e=e.getDataRenderProperty(t,"icon");e&&(n.icon=e)},updateRendererStatus:function(e,t,n){Un.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"disabled",!0===this.getRenderConfig("disabled")),St(this._renderer,"selected",!0===this.getRenderConfig("selected"))},onVisibleChange:function(e){St(this._renderer,"hidden",!1===e),!1===e?($e(this._renderer,"display","none"),Nt(this._renderer)):($e(this._renderer,"display",""),this.reBuildRenderer())},reBuildRenderer:function(){}}),je(Hn,l,{addViewListener:function(e){this._addListener(this._controllerRoot,"view",e)},removeViewListener:function(e){this._removeListener(this._controllerRoot,"view",e)},addWindowListener:function(e){this._addListener(s,"window",e)},removeWindowListener:function(e){this._removeListener(s,"window",e)},add:function(e){this._view=e,this._controllerRoot=e._getControllerRoot(),(this.getViewDefaultTypes()||[]).forEach(this.addViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this)},remove:function(){(this.getViewDefaultTypes()||[]).forEach(this.removeViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this),this._view=null,this._controllerRoot=null,this._typeMap={}},update:function(){},getViewDefaultTypes:function(){},getWindowDefaultTypes:function(){},getView:function(){return this._view},getViewRoot:function(){return this._controllerRoot},getViewProperty:function(e){return this._view.getProperty(e)},_addListener:function(e,t,n){var r,i,t=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(t)||((r=this[t])?(this._typeMap[t]=i=function(e){r.apply(this,[e,this.getView()])},Kt(e,n,i,this)):console.error(t+" is null"))},_removeListener:function(e,t,n){var r,t=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(t)&&(r=this._typeMap[t],Jt(this._controllerRoot,n,r,this),delete this._typeMap[t])},_getHandlerName:function(e,t){var n;return"window"===e?n="handle_window_"+t:"view"===e&&(n="handle_"+t),n}}),Ge(Ze.$,{iview:{Data:Sn,Provider:Ye,CheckInterface:Ln,ExpandInterface:En,HoverInterface:Vn,MoveInterface:On,IView:zn,IDataView:In,IDataRendererView:Mn,IDataRenderer:Nn,IDataElementRendererView:Bn,IDataElementRenderer:Un,IViewController:Hn,ModelTypeCheck:xn,ArgsUtil:D,DataLevelUtil:Rn,JSONDataParser:An,HTMLDataParser:Dn}}),Ze.Data=Sn,Ze.Provider=Ye,Ze.view={isData:function(e){return wn(e)},isView:function(e){return xn.isView(e)}},Ge(Ze.type,{isData:wn,isView:Le,isProvider:Pn}),{drawGridLine:function(e,t){var n,r,i,o;!0!==e.getProperty("grid_line_visible")||(n=e.getProperty("grid_line_stroke"))&&(o=qn._calcLinePoints(e),r=o.line,i=o.axis,o={lineWidth:e.getProperty("grid_line_stroke_line_width"),lineDash:e.getProperty("grid_line_stroke_line_dash")},0<r.length&&un(t,o,function(){yn.render(t,r,{stroke:n})}),0<i.length&&(o.lineWidth=e.getProperty("grid_line_axis_stroke_line_width"),un(t,o,function(){yn.render(t,i,{stroke:n})})))},_calcLinePoints:function(e){var d=e.getRootSize(),t=e.getProperty("zoom"),n=e.getProperty("grid_line_space")*t,r=d.width*te,i=d.height*te,h=ot(i/n)+2,u=ot(r/n)+2,o=e.getProperty("translate_x"),a=e.getProperty("translate_y"),_=nt(ot(a/n))+1,p=nt(ot(o/n))+1,t=[],s=[];if(0<=a&&a<=i&&(t.push({x:0,y:a}),t.push({x:r,y:a,seg:"mt"})),0<=o&&o<=r&&(t.push({x:o,y:0}),t.push({x:o,y:i,seg:"mt"})),0<a)for(var l=1;l<_;l++){var c=a-n*l;0<=c&&(s.push({x:0,y:c}),s.push({x:r,y:c,seg:"mt"}))}else h+=_;for(var f=1;f<h;f++){var g=a+n*f;g<=i&&(s.push({x:0,y:g}),s.push({x:r,y:g,seg:"mt"}))}if(0<o)for(var y=1;y<p;y++){var v=o-n*y;0<=v&&(s.push({x:v,y:0}),s.push({x:v,y:i,seg:"mt"}))}else u+=p;for(var C=1;C<u;C++){var m=o+n*C;m<=r&&(s.push({x:m,y:0}),s.push({x:m,y:i,seg:"mt"}))}return{axis:t,line:s}}}),$n=function(e){return We(e)&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Xn=function(e,t){$e(e.getViewRoot(),"cursor",t||"default")},Kn=function(e){return"body"===e.getProperty("interact_bounds")};je(Wn,Hn,{getViewDefaultTypes:function(){return["mousemove","mouseleave"]},handle_mousemove:function(e,t){var n;if(!(0<e.buttons)&&!0===t.getProperty("hoverable"))return(n=t.getDataAt(e,Kn(t)))&&!t._isDisabled(n)&&t._isHoverable(n)?(t._setHoverData(n,!0,e),void(!0===t.getProperty("select_on_hover")&&t.isSelectable(n)&&(t.isSelected(n)||t.setSelect(n)))):void t._setHoverData(null,!0,e)},handle_mouseleave:function(e,t){t._setHoverData(null,!0,e)}}),je(Gn,Nn,{updateRenderConfig:function(e,t,n){Gn.superClass.updateRenderConfig.apply(this,arguments),this.updateHoverConfig(e,t,n)},updateHoverConfig:function(e,t,n){var r=e.isHover(t);!0===(n.hover=r)&&(n.hover_style=e.getDataViewProperty(t,"hover_style"))},draw:function(e){!0===this._visible&&this._doDraw(e)},_doDraw:function(e,t){!1!==this._doCustomDraw(e,t)&&this.doDraw(e,t)},_doCustomDraw:function(e,t){var n=this._data.draw;return!n||!1!==n.apply(this._data,[e,this._data,this._view,t,this])},doDraw:function(e,t){},hits:function(e,t){var n=0|this.getViewRenderConfig("hit_padding"),e={x:e.x-n,y:e.y-n,width:2*n,height:2*n},r=this;return fn.isDrawRectOpaque(function(e){r._hitsDraw(e,t)},e)},_hitsDraw:function(e,t){return this._doDraw(e,t)},contained:function(e,t){t=this.getBounds(t);return!!t&&be.containsRect(e,t)},getBounds:function(e){}});je(Fn,Mn,Ge({___zdefaults_:{onresize:!0,hoverable:!1,select_on_hover:!1,translate_x:0,translate_y:0,zoom:1,zoom_factor:1.05,max_zoom:20,min_zoom:.2,grid_line_visible:!1,grid_line_space:50,grid_line_stroke:"#e6e6e6",grid_line_stroke_line_width:.6,grid_line_axis_stroke_line_width:1.2,line_cap:null,line_join:null,interact_bounds:"body"},_initCanvasView:function(){this._canvasArray=[],this._dataCanvas=Xe("canvas"),this._dataC2d=this._dataCanvas.getContext("2d",{willReadFrequently:!0})},_doUpdate:function(){Fn.superClass._doUpdate.apply(this,arguments),this.draw()},_doResizeUpdate:function(){Fn.superClass._doResizeUpdate.apply(this,arguments),this._resizeCanvas(),this.draw()},_resizeCanvas:function(){var e=this.getRootSize(),t=e.width,n=e.height,r=t*te,i=n*te;this._canvasArray.forEach(function(e){$e(e,"width",t+"px"),$e(e,"height",n+"px"),e.setAttribute("width",r),e.setAttribute("height",i)},this)},_appendCanvas:function(e){$e(e,"position","absolute"),$e(e,"left","0"),$e(e,"top","0"),this._canvasArray.push(e),this.getRoot().appendChild(e)},_removeCanvas:function(e){ft(this._canvasArray,e),Bt(e)}},{getDataAt:function(e,t){!1!==t&&(t=!0);var n=this.getTransformedPoint(e);return null==n?null:pt(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAt:function(e,t){!1!==t&&(t=!0);var n=this.getTransformedPoint(e);return null==n?null:_t(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAtRect:function(e,t){if(null==e)return[];!1!==t&&(t=!0);var n=this.getTransformedRect(e);return _t(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.contained(n,t))return!0},this)}},{draw:function(){var e=this._dataC2d,t=(dn.ctxClear(e,this._dataCanvas.width,this._dataCanvas.height),this._improveDrawPerf(),e.save(),te);1!==t&&e.scale(t,t),qn.drawGridLine(this,e),this._setTransform(e,t),this._drawData(e),e.restore()},_setTransform:function(e,t){var n=this.getProperty("translate_x")*t,r=this.getProperty("translate_y")*t,t=this.get("zoom")*t;0==n&&0==r&&1==t||e.setTransform(t,0,0,t,n,r)},_improveDrawPerf:function(){var e=this._dataC2d,t=this.getProperty("label_font")||bn.getSystemFont();e.font!==t&&(e.font=t),e.textAlign="center",e.textBaseline="middle",e.lineCap=this.getProperty("line_cap"),e.lineJoin=this.getProperty("line_join")},_drawData:function(t){var e=this.getDrawDataArray(this.getDataArray(!1));e.forEach(function(e){this._rendererDraw(t,e)},this),this._draw_data_reverse_array=(e||[]).reverse()},_rendererDraw:function(e,t){t=this.getDataRenderer(t);t&&t.draw(e)},getDrawDataArray:function(e){return e},_getDrawDataReverseArray:function(){return this._draw_data_reverse_array||[]}},{resetTransform:function(){this.set({zoom:1,translate_x:0,translate_y:0})},zoomIn:function(e){var t=this.getProperty("zoom")*this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this.zoomByPoint(t,{x:0,y:0})},zoomOut:function(e){var t=this.getProperty("zoom")/this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this._zoomByPoint(t,{x:0,y:0})},zoomCenter:function(e){this._zoomCenter(e)},zoomByPoint:function(e,t){this._zoomByPoint(e,t)},translate:function(e,t){var n=ue.getArgsPoint.apply(null,arguments);n&&(this.setProperty("translate_x",n.x),this.setProperty("translate_y",n.y))},_zoomCenter:function(e){var t=this.getRootSize(),n=t.width/2,t=t.height/2;this._zoomByPoint(e,{x:n,y:t})},_zoomByPoint:function(e,t){t=t||{x:0,y:0},e=this._getZoom(e);var n,r=this.getProperty("zoom");e!==r&&(this.set("zoom",e),n=t.x,t=t.y,e=e/r,this.translate(n-(n-this.getProperty("translate_x"))*e,t-(t-this.getProperty("translate_y"))*e))},_getZoom:function(e){var t=this.get("min_zoom"),n=this.get("max_zoom");return e<t?t:n<e?n:e},getTransformedPoint:function(e){var t;return $n(e)?t=e:qt.isPointerEvent(e)&&(t=this.getEventRelativePoint(e)),this._getTransformedPoint(t)},getTransformedRect:function(e){var t=this._getTransformedPoint({x:e.x,y:e.y}),e=this._getTransformedPoint({x:e.x+e.width,y:e.y+e.height});return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}},getEventRelativePoint:function(e){var e=It.getEventWindowOffset(e),t=It.getElementWindowOffset(this.getRoot());return{x:e.x-t.x,y:e.y-t.y}},getDataWindowBounds:function(e,t){return this._getDataRelativeBounds(e,t,It.getElementWindowOffset(this.getRoot()))},getDataPageBounds:function(e,t){return this._getDataRelativeBounds(e,t,It.getElementPageOffset(this.getRoot()))},_getDataRelativeBounds:function(e,t,n){var e=e.getBounds(this,t=!1!==t?!0:t);return e?(t=this._getRelativePoint({x:e.x,y:e.y}),e=this._getRelativePoint({x:e.x+e.width,y:e.y+e.height}),{x:t.x+(n=n||{x:0,y:0}).x,y:t.y+n.y,width:e.x-t.x,height:e.y-t.y}):null},_getTransformedPoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:(e.x-this.getProperty("translate_x"))/t,y:(e.y-this.getProperty("translate_y"))/t}},_getRelativePoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:e.x*t+this.getProperty("translate_x"),y:e.y*t+this.getProperty("translate_y")}}},On(),{_initControllerCanvas:function(){this._controllerCanvas=Xe("canvas"),this._controllerC2d=this._controllerCanvas.getContext("2d"),this._controllerDrawArray=[],this._appendCanvas(this._controllerCanvas)},addControllerDraw:function(e,t){this._controllerDrawArray.push({draw:e,context:t}),this.updateControllerCanvas()},removeControllerDraw:function(t,n){z(this._controllerDrawArray,function(e){return e.draw===t&&e.context===n}),this.updateControllerCanvas()},updateControllerCanvas:function(){this._drawControllerCanvas()},_drawControllerCanvas:function(){dn.clear(this._controllerCanvas);var t=this._controllerC2d,e=(t.save(),te);1!==e&&t.scale(e,e),this._controllerDrawArray.forEach(function(e){e.draw.apply(e.context,[t])}),t.restore()}},Vn(Fn))),Ge(Ze.$,{cvs_view:{IDataCanvasRendererView:Fn,IDataCanvasRenderer:Gn}}),function(h){Ke({WIDGET_MESSAGEBOX_CONFIRM_CLASS:"z-button primary",WIDGET_MESSAGEBOX_CONFIRM_TEXT:"OK",WIDGET_MESSAGEBOX_CANCEL_CLASS:"z-button",WIDGET_MESSAGEBOX_CANCEL_TEXT:"Cancel"});function e(e){return Ge({checkbox_visible:!1,checkbox_unchecked_icon_template:r.checkbox_unchecked,checkbox_checked_icon_template:r.checkbox_checked,checkbox_indeterminate_icon_template:r.checkbox_indeterminate,three_states_check:!0,check_on_click:!1},e)}function t(e){return Ge({expand_icon_visible:!0,expand_collapsed_icon_template:r.expand_collapsed,expand_expanded_icon_template:r.expand_expanded,expand_on_click:!1,expand_on_dbl_click:!1,accordion:!1},e)}function n(e){return Ge({sortable:!1,sort_mode:"single",multiple_sort_modifier_key:null,sort_orders:["asc","desc",null],sort_asc_icon_template:r.sort_asc,sort_desc_icon_template:r.sort_desc},e)}function u(e){return Ge({minimize_icon_template:V,minimize_width:20,minimize_label:"..."},e)}function _(e){return{setCurrentContent:function(e,t){!0===t&&a.releaseContent(this._currentContentObj),this._currentContentObj=e,this._currentContentObj&&(this.appendContent(this._currentContentObj),this._showContent(this._currentContentObj))},appendContent:function(e,t){e&&(!0===t&&a.hideContent(e),t=e.contentEle,e=this.getContentContainer(),t.parentNode!==e&&e.appendChild(t))},_showContent:function(e){e&&!1!==this.beforeShowContent(e)&&a.showContent(e)},beforeShowContent:function(e){},_hideContent:function(e){e&&!1!==this.beforeHideContent(e)&&a.hideContent(e)},beforeHideContent:function(e){}}}function p(e){return Ge({_getDataContentArrayMap:function(){return this._dataContentArrayMap||(this._dataContentArrayMap=new Je),this._dataContentArrayMap},isDataContentAdded:function(e){return this._getDataContentArrayMap().hasOwnProperty(e.id())},setCurrentDataContent:function(e){var n=e.id();this._getDataContentArrayMap().eachObject(function(e,t){e!==n&&this._hideContent(t)},this),this._getDataContentArrayMap().has(n)||this.addDataContent(e),e=this._getDataContentArrayMap().get(n),this.setCurrentContent(e)},addDataContent:function(e){var t=a.getContentObject(e.getProperty("content")),e=e.id();return t&&(t._id=e),this._getDataContentArrayMap().add(e,t),this.appendContent(t,!0),t},removeDataContent:function(e){var e=e.id(),t=this._getDataContentArrayMap().get(e);this._getDataContentArrayMap().remove(e),a.releaseContent(t),t===this._currentContentObj&&(this._currentContentObj=null)},clearDataContent:function(){this._currentContentObj=null,this._getDataContentArrayMap().eachArray(a.releaseContent),this._getDataContentArrayMap().clear()},getDataContent:function(e){return this._getDataContentArrayMap()[e.id()]}},_())}function y(r){return Ge({_isTreeStatesCheck:function(){return!1!==this.getProperty("three_states_check")},_isCheckedByDefault:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},_onCheckAddByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},_onCheckRemoveByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},_onCheckSetByDefault:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},_isAllChildrenOrDataChecked:function(e){var t=Rn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!0;return ut(t,function(e){if(!this._isAllChildrenOrDataChecked(e))return n=!1},this),n},_hasChildrenChecked:function(e){var e=Rn.getAddedChildren(this.getProvider(),e),t=!1;return ut(e,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(t=!0)},this),t},_hasChildrenCheckedImpl:function(e){var t=Rn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!1;return ut(t,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(n=!0)},this),n},_addDescendantCheck:function(e){e=Rn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)||this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_addAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,ut(Rn.getAncestorArray(e),function(e){if(this._isCheckedByDefault(e)||!this._isAllChildrenOrDataChecked(e))return!1;this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,ut(Rn.getAncestorArray(e),function(e){if(!this._isCheckedByDefault(e))return!1;this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeDescendantCheck:function(e){e=Rn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)&&this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_onDataAdd:function(e){r.superClass._onDataAdd.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataRemove:function(e){r.superClass._onDataRemove.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataChange:function(e,t){var n;r.superClass._onDataChange.apply(this,arguments),this._isTreeStatesCheck()&&"parent"===t.property&&(n=t.old_value,t=t.new_value,this._updateParentCheck(n),this._updateParentCheck(t))},_updateParentCheck:function(e){e&&(this._isCheckedByDefault(e)?this._isAllChildrenOrDataChecked(e)||this.removeCheck(e):this._isAllChildrenOrDataChecked(e)&&this.addCheck(e))}},Ln(),{isChecked:function(e){return this._isTreeStatesCheck()?this._isAllChildrenOrDataChecked(e):this._isCheckedByDefault(e)},_onCheckAdd:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._addAncestorCheck(e),this._addDescendantCheck(e)),this._onCheckAddByDefault(e)},_onCheckRemove:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._removeAncestorCheck(e),this._removeDescendantCheck(e)),this._onCheckRemoveByDefault(e)},_onCheckSet:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(e.forEach(this._addAncestorCheck,this),e.forEach(this._addDescendantCheck,this)),this._onCheckSetByDefault(e)}})}function v(e){return{_initAllDataRenderer:function(){return z(this)},_reorderAllDataRenderer:function(){return I(this)},_addDataRendererImpl:function(e,t){return M(this,e,t)},_updateDataRendererImpl:function(e,t,n){if(this.getProperty("sort_compare"))return M(this,e,t)}}}function C(n){return{getRendererContainer:function(e){var t=e.getProperty("parent");return t?this.getDataRenderer(t).getChildrenRendererContainer(e):n.superClass.getRendererContainer.apply(this,arguments)},_initAllDataRenderer:function(){return s.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return s.reorderAllDataRenderer(this)},_addDataRenderer:function(e){if(Rn.isAncestorAdded(this.getProvider(),e))return n.superClass._addDataRenderer.apply(this,arguments)},_addDataRendererImpl:function(e,t){return s.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(Rn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return n.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),s.insertElementRenderer(this,e,t,!0))}else s.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){if(!0===n||this.getProperty("sort_compare"))return s.insertElementRenderer(this,e,t)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=_t(t,this._isLevelVisible,this)),this._expandProvider.set(this._filterExpandableData(t))},_getDataLevel:function(e){var t=this.getProperty("root_data"),n=0,r=e.getProperty("parent");if(t){for(n++;r&&r!==t;)n++,r=r.getProperty("parent");if(r!==t)return-1}else for(;r;)n++,r=r.getProperty("parent");return n},hasChildrenVisible:function(e){return N.hasChildrenVisible(this,e)},_isLevelVisible:function(e){return!1!==this.isVisible(e)&&(!1!==this._isFilterVisible(e)||this._hasDescendantVisible(e))},_hasDescendantVisible:function(e){var e=Rn.getAddedDescendantArray(this.getProvider(),e),t=!1;return ut(e,function(e){if(this._isLevelVisible(e))return!(t=!0)},this),t},_isVisible:function(e){return!1!==this._isLevelVisible(e)&&!(!0===this._isExpand_&&!this._isDataAncestorExpanded(e))},_getDataRelatedDataArray:function(e,t,n){t=t?Rn.getAncestorArray(e):[],n=n?Rn.getAddedDescendantArray(this.getProvider(),e):[];return ht(n,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||(0<=Rn.getAncestorArray(t).indexOf(e)||0<=Rn.getAddedDescendantArray(this.getProvider(),t).indexOf(e)))},_isBodyVisibleByRootData:function(e){var t=this.getProperty("root_data");return!(t&&0<=Rn.getAncestorArray(t).indexOf(e))},_isRootData:function(e){var t=this.getProperty("root_data");return!!t&&t===e}}}function m(){m.superClass.constructor.apply(this,arguments),O.addWidgetClass(this.getRoot()),this.addController(new W),this.addController(new G)}function b(){b.superClass.constructor.apply(this,arguments)}function x(){this._rootUL=Xe("ul","items"),x.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._rootUL)}function w(){w.superClass.constructor.apply(this,arguments)}function P(){P.superClass.constructor.apply(this,arguments)}function R(){this._table=Xe("table","table"),this._table.setAttribute("cellspacing","0"),this._tableColGroup=Xe("colgroup"),this._table.appendChild(this._tableColGroup),R.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._table)}function D(){this._tableHead=Xe("thead"),this._rowTRArray=[],D.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableHead),this.setControllers([new $]),Dt(this.getRoot(),"z-thead")}var A="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='15 18 9 12 15 6'></polyline></svg></span>",k="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='9 18 15 12 9 6'></polyline></svg></span>",S="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='18 15 12 9 6 15'></polyline></svg></span>",T="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg></span>",L="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='1'></circle><circle cx='19' cy='12' r='1'></circle><circle cx='5' cy='12' r='1'></circle></svg></span>",E="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='2' x2='12' y2='6'></line><line x1='12' y1='18' x2='12' y2='22'></line><line x1='4.93' y1='4.93' x2='7.76' y2='7.76'></line><line x1='16.24' y1='16.24' x2='19.07' y2='19.07'></line><line x1='2' y1='12' x2='6' y2='12'></line><line x1='18' y1='12' x2='22' y2='12'></line><line x1='4.93' y1='19.07' x2='7.76' y2='16.24'></line><line x1='16.24' y1='7.76' x2='19.07' y2='4.93'></line></svg></span>",V="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='5' y1='12' x2='19' y2='12'></line></svg></span>",r={remove:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></span>",refresh:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='1 4 1 10 7 10'></polyline><polyline points='23 20 23 14 17 14'></polyline><path d='M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15'></path></svg></span>",expand_collapsed:k,expand_expanded:T,checkbox_unchecked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='3' width='18' height='18' rx='2' ry='2'></rect></svg></span>",checkbox_checked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='20 6 9 17 4 12'></polyline></svg></span>",checkbox_indeterminate:V,sort_asc:S,sort_desc:T,pagination_to_prev:A,pagination_to_next:k,pagination_to_prev_more:L,pagination_to_next_more:L,tabs_scroll_to_left_arrow:A,tabs_scroll_to_right_arrow:k,tabs_scroll_to_up_arrow:S,tabs_scroll_to_down_arrow:T,notify_success:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><path d='M22 11.08V12a10 10 0 1 1-5.93-9.14'></path><polyline points='22 4 12 14.01 9 11.01'></polyline></svg></span>",notify_info:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='16' x2='12' y2='12'></line><line x1='12' y1='8' x2='12' y2='8'></line></svg></span>",notify_warning:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='8' x2='12' y2='12'></line><line x1='12' y1='16' x2='12' y2='16'></line></svg></span>",notify_error:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='15' y1='9' x2='9' y2='15'></line><line x1='9' y1='9' x2='15' y2='15'></line></svg></span>"},a={getContentInfo:function(e){var t,n;return e?(lt(e)?n=e.startsWith("url:")?(t="url",e.substr(4)):e.startsWith("element:")?(t="element",e.substr(8)):(t="string",e):Ot.isElement(e)?(t="element",n=e):We(e)&&(t=e.type,n=e.content),{type:t,content:n}):null},getContentElement:function(e){e=a.getContentInfo(e);if(e&&"element"===e.type){e=e.content;if(e)return qe(e)}return null},getLabelContent:function(e){return We(e)?e:{content:null==e?"":e+""}},getContentObject:function(e){e=a.getContentInfo(e);if(e){var t,n,r=e.type,e=e.content;if(e)if("string"===r?(n=Xe("div","text-content")).innerHTML=e:"element"===r?(n=qe(e))&&(t=n._z_$_init_parentNode||n.parentNode,t={parent:n._z_$_init_parentNode=t,display:Lt(n,"display")}):"url"===r&&(n=a.createContentIFrame(e)),n)return{type:r,contentEle:n,contentReleaseConfig:t}}return null},createContentIFrame:function(e){var t=Xe("iframe");return t.src=e,t},releaseContent:function(e){var t,n;e&&(t=e.contentReleaseConfig,e=e.contentEle,Bt(e),t&&((n=t.parent)&&n.appendChild(e),delete e._z_$_init_parentNode,$e(e,"display",t.display)))},showContent:function(e){var t;e&&(e.vislbe=!0,t=e.type,e=e.contentEle,"string"===t||"element"===t?$e(e,"display","block"):"url"===t&&(Et(e,"visibility"),Et(e,"opacity"),Et(e,"width"),Et(e,"height")))},hideContent:function(e){var t;e&&(e.vislbe=!1,t=e.type,e=e.contentEle,"string"===t||"element"===t?$e(e,"display","none"):"url"===t&&($e(e,"visibility","hidden"),$e(e,"opacity",0),$e(e,"width",0),$e(e,"height",0)))}},O={addWidgetClass:function(e){Dt(e,"z-widget"),e.setAttribute("tabindex",-1)},isEvtInRendererNode:function(e){for(var t=e.target;t&&t!==Qe;){if("node"===t.getAttribute("role"))return!0;t=t.parentNode}return!1},preventDefault:function(e){e.preventDefault()},findNextUsableDataByDom:function(e,t){var n=Rt("[__z_did_]",e.getRendererRootContainer());if(0<n.length){if(t){var r=_t(n,function(e){return e.parentNode===t.parentNode});if(r=O._findNextUsableDataByArray(e,r,t))return r}r=O._findNextUsableDataByArray(e,n,t)}return r},_findNextUsableDataByArray:function(e,t,n){var r,i=t.length;if(0<i){for(var o=-1,a=(o=n?t.indexOf(n):-1)+1;a<i;a++)if(r=O._isRenderDataUsable(e,t[a]))return r;for(var s=o-1;0<=s;s--)if(r=O._isRenderDataUsable(e,t[s]))return r}},_isRenderDataUsable:function(e,t){var n=t.getAttribute("__z_did_"),t=pt(e.getDataArray(!1),function(e){return e.id()===n});if(t&&e.isVisible(t)&&!e._isDisabled(t)&&e.isSelectable(t))return t}},z=function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t))})},I=function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.getDataRenderer(e);!t||(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t)})},M=function(e,t,n){for(var r,i,o=e._getSortDataArray(e.getDataArray(!1)),a=o.indexOf(t),s=o.length,l=a+1;l<s;l++)if((r=e.getDataRenderer(o[l]))&&(i=r.getRenderer()))return void i.parentNode.insertBefore(n.getRenderer(),i);e.getRendererContainer(t).appendChild(n.getRenderer())},s={initAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){s.appendDataRenderer(t,e)})},appendDataRenderer:function(e,t){var n=e.createDataRenderer(t);n&&(e._rendererArrayMap.add(t.id(),n),(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),s.appendDataChildrenRenderer(e,t)))},appendDataChildrenRenderer:function(t,e){e=_t(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){s.appendDataRenderer(t,e)})},reorderAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){s.reAppendDataRenderer(t,e)})},reAppendDataRenderer:function(e,t){var n=e.getDataRenderer(t);!n||(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),s.reAppendDataChildrenRenderer(e,t))},reAppendDataChildrenRenderer:function(t,e){e=_t(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){s.reAppendDataRenderer(t,e)})},insertElementRenderer:function(e,t,n,r){var i=e._getSortDataArray(Rn.getAddedSiblingArray(e.getProvider(),t)),o=i.indexOf(t),i=i[o+1];i?(o=e.getDataRenderer(i).getRenderer()).parentNode.insertBefore(n.getRenderer(),o):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&s.appendDataChildrenRenderer(e,t)},removeDataRenderer:function(e,t){e.getDataRenderer(t)&&(e._removeDataRenderer(t),s.removeDataChildrenRenderer(e,t))},removeDataChildrenRenderer:function(t,e){e=_t(e.getChildren(!1),t.containsData,t);0<e.length&&e.forEach(function(e){s.removeDataRenderer(t,e)})}},B={appendDataChildrenRenderer:function(n,e){e=Rn.getAddedChildren(n.getProvider(),e);0<e.length&&(e=n._getSortDataArray(e)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),t.getRenderer()&&B.insertElementRenderer(n,e,t,!0))})},insertElementRenderer:function(e,t,n,r){var i=B._getNextData(e,t);i?(i=e.getDataRenderer(i).getRenderer()).parentNode.insertBefore(n.getRenderer(),i):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&B.appendDataChildrenRenderer(e,t)},_getNextData:function(e,t,n){if(!1!==n){n=Rn.getAddedChildren(e.getProvider(),t);if(0<n.length)return e._getSortDataArray(n)[0]}n=e._getSortDataArray(Rn.getAddedSiblingArray(e.getProvider(),t)),n=n[n.indexOf(t)+1];return n||((t=t.getProperty("parent"))?B._getNextData(e,t,!1):void 0)},updateDataRenderer:function(t,e){var n=t.getDataRenderer(e);n&&n.getRenderer()&&(B.insertElementRenderer(t,e,n),0<(n=Rn.getAddedChildren(t.getProvider(),e)).length&&(n=t._getSortDataArray(n)).forEach(function(e){B.updateDataRenderer(t,e)}))}},N={getVisibleChildren:function(t,e){return _t(e.getChildren(!1),function(e){return t.containsData(e)&&t._isLevelVisible(e)})},hasChildrenVisible:function(e,t){return 0<N.getVisibleChildren(e,t).length}},o={initRenderNode:function(e){e._nodeWrapper=Xe("a","node"),e._nodeWrapper.setAttribute("role","node"),e._inWrapper=Xe("div","in"),e._nodeWrapper.appendChild(e._inWrapper),e.getRenderer().appendChild(e._nodeWrapper)},updateRenderCheckConfig:function(e,t,n,r){!0===t.getDataViewProperty(n,"checkbox_visible")&&(r.checkbox_visible=!0,r.checked=t.isChecked(n),r.checkable=t.isCheckable(n))},updateRenderLevelCheckConfig:function(e,t,n,r){!0===e.getRenderConfig("checkbox_visible")&&!0!==e.getRenderConfig("checked")&&t._isTreeStatesCheck()&&(r.indeterminate_checked=t._hasChildrenChecked(n))},updateRenderRemoveConfig:function(e,t,n,r){r.remove_icon_visible=!0===t.getDataViewProperty(n,"remove_icon_visible")},updateRenderExpandConfig:function(e,t,n,r){var i=t.hasChildrenVisible(n);(r.has_children=i)&&(r.expanded=t.isExpanded(n),r.expand_icon_visible=!1!==t.getDataViewProperty(n,"expand_icon_visible"),r.expandable=t.isExpandable(n))},updateRendererCheck:function(e,t,n,r){var i;!0===e.getRenderConfig("checkbox_visible")?((i=o._getCheckboxWrapper(e)).innerHTML=o._getCheckboxTemplate(e),e.insertToNodeWrapperFirst(i)):e._checkBoxWrapper&&Bt(e._checkBoxWrapper)},_getCheckboxTemplate:function(e){return!0===e.getRenderConfig("checked")?e.getViewRenderConfig("checkbox_checked_icon_template"):!0===e.getRenderConfig("indeterminate_checked")?e.getViewRenderConfig("checkbox_indeterminate_icon_template"):e.getViewRenderConfig("checkbox_unchecked_icon_template")},_getCheckboxClass:function(e){var t=["checkbox"];return!0===e.getRenderConfig("checked")?t.push("checked"):!0===e.getRenderConfig("indeterminate_checked")?t.push("indeterminate"):t.push("unchecked"),!0===e.getRenderConfig("checkable")?t.push("checkable"):t.push("uncheckable"),t.join(" ")},_getCheckboxWrapper:function(e){return e._checkBoxWrapper||(e._checkBoxWrapper=Xe("span","checkbox"),e._checkBoxWrapper.setAttribute("__z_dop_","check")),e._checkBoxWrapper},updateRendererRemove:function(e,t,n,r){var i;!0===e.getRenderConfig("remove_icon_visible")?(i=o._getRemoveWrapper(e),e.appendToNodeWrapper(i)):e._removeWrapper&&Bt(e._removeWrapper)},_getRemoveWrapper:function(e){return e._removeWrapper||(e._removeWrapper=Xe("span","remove"),e._removeWrapper.innerHTML=e.getViewRenderConfig("remove_icon_template"),e._removeWrapper.setAttribute("__z_dop_","remove")),e._removeWrapper},updateRendererExpand:function(e,t,n,r){var i;!0===e.getRenderConfig("expand_icon_visible")?((i=o._getExpandWrapper(e)).innerHTML=e._getExpandTemplate(),kt(i,o._getExpandClass(e)),e.insertToNodeWrapperFirst(i)):e._expandWrapper&&Bt(e._expandWrapper)},_getExpandTemplate:function(e){return!0===e.getRenderConfig("expanded")?e.getViewRenderConfig("expand_expanded_icon_template"):e.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(e){var t=["expand"];return!0===e.getRenderConfig("expanded")?t.push("expanded"):t.push("collapsed"),!0===e.getRenderConfig("expandable")?t.push("expandable"):t.push("unexpandable"),t.join(" ")},_getExpandWrapper:function(e){return e._expandWrapper||(e._expandWrapper=Xe("span"),e._expandWrapper.setAttribute("__z_dop_","expand")),e._expandWrapper},updateRenderIn:function(e,t,n,r){var i=e._inWrapper,o=(Nt(i),t.render);if(ct(o)){if(!1===o.apply(t,[n,i,e._renderer]))return}else{o=e.getRenderConfig("template");if(o)return void(i.innerHTML=nn(o,n.getProperties(!1)))}t=e.getRenderConfig("icon");t&&((o=Xe("img")).setAttribute("src",t),i.appendChild(o)),!0===e.getRenderConfig("label_visible")&&((n=Xe("span","label")).innerHTML=e.getRenderConfig("label"),i.appendChild(n))},updateRenderAttributes:function(n,e,t,r){n._nodeAttributes&&Fe(n._nodeAttributes,function(e,t){o._removeNodeWrapperAttribute(n,e,t)}),n._nodeAttributes=n.getRenderConfig("attributes"),n._nodeAttributes&&Fe(n._nodeAttributes,function(e,t){o._setNodeWrapperAttribute(n,e,t)})},_removeNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?At(e,n):e.removeAttribute(t,n)},_setNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?Dt(e,n):e.setAttribute(t,n)}},U=function(e,t,n,r){var i;e&&(t&&e?($t(e,"animationend",i=function(){n&&n.apply(r),Xt(e,"animationend",i),delete e._animationendListener_$,At(e,t)}),e._animationendListener_$=i,Dt(e,t)):n&&n.apply(r))},H=function(e){var t;!e||(t=e._animationendListener_$)&&(t(),delete e._animationendListener_$)},f={VIEW_ATTR_TYPE_MAP:{label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove_icon_visible:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",select_on_hover:"boolean",expand_on_click:"boolean",expand_on_dbl_click:"boolean",make_visible_on_select:"boolean",accordion:"boolean",auto_select:"boolean",three_states_check:"boolean",check_on_click:"boolean",sortable:"boolean"},VIEW_ATTR_METHOD_MAP:{on_data_click:"onDataClick",on_data_dblclick:"onDataDblClick",on_expand:"onExpand",on_collapse:"onCollapse"},VIEW_ATTR_INIT_METHOD_MAP:{init_expand_all:"expandAll"},DATA_ATTR_TYPE_MAP:{visible:"boolean",label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",remove_icon_visible:"boolean",disabled:"boolean"},VIEWS:{"zw-pagination":{level:!1,view:"Pagination"},"zw-grid":{level:!1,view:"Grid",parse:function(e,t,n){var r,i,o,a,s=Rt("tr>th",t),l=[];return 0<s.length&&(r=[],s.forEach(function(e){e=e.parentNode;r.indexOf(e)<0&&r.push(e)}),i=[],r.forEach(function(e){i=ht(i,Dn.parseToObjectArray(e,!0,n))}),o=i.length,Rt("tr>td",t).forEach(function(e,t){t%o==0&&(a={},Dn.parseAttributes(e.parentNode,a),l.push(a));t=i[t%o];a[t.field]=e.innerHTML}),ct(n)&&l.forEach(function(e){Dn._convertItemAttr(e,n)}),e.setColumns(i)),l}},"zw-listview":{level:!1,view:"ListView"},"zw-tree":{level:!0,view:"Tree"},"zw-collapse":{level:!1,view:"Collapse"},"zw-carousel":{level:!1,view:"Carousel"},"zw-tabs":{level:!1,view:"Tabs"}},parse:function(r,i){r=r||{},Fe(f.VIEWS,function(t,e){var n=Ze.dom.queryAll(t,i);0!==n.length&&ut(n,function(e){f.parseView(t,e,r)})})},parseView:function(e,t,n){n=n||{};function r(e,t){return f._convertAttrValue(e,t,u,n)}var d,i,o,a,s,e=f.VIEWS[e],h=f.VIEW_ATTR_TYPE_MAP,u=f.DATA_ATTR_TYPE_MAP,_=f.VIEW_ATTR_METHOD_MAP,p=f.VIEW_ATTR_INIT_METHOD_MAP,l=f.parseViewArgs(t,function(e,t){return f._convertAttrValue(e,t,h,n)}),c=(l.hasOwnProperty("var_name")&&(i=l.var_name,delete l.var_name),l.hasOwnProperty("data")&&(d=n[l.data],delete l.data),vt.createInstance(e.view,[l]));if(c)return i&&(n[i]=c),i=ct(e.parse)?e.parse(c,t,r):Dn.parseToObjectArray(t,!0===e.level,r),i=ht(i,d),c.addData&&(e=An.parse(i,n.data_keyword_mapping),o=[],a=[],s=[],e.forEach(function(e){f.filterDataAttach(e,"selected",o),f.filterDataAttach(e,"checked",a),f.filterDataAttach(e,"expanded",s)}),c.addData(e),f.setViewAttachData(c,c.addSelect,o),f.setViewAttachData(c,c.addCheck,a),f.setViewAttachData(c,c.expand,s)),f.callViewInitMethod(c,l,p),f.setViewCallBackMethod(c,l,n,_),t.parentNode.insertBefore(c.getRoot(),t.nextSibling),c.update(),Bt(t),c},parseViewArgs:function(e,n){var r={};return Dn.parseAttributes(e,r),Dn.parseTemplate(e,r),ct(n)&&Fe(r,function(e,t){r[e]=n(e,t)}),r},callViewInitMethod:function(r,e,i){Fe(e,function(e,t){var n;i.hasOwnProperty(e)&&(n=r[i[e]],ct(n)&&(r.removeProperty(e),n.apply(r,[])))})},setViewCallBackMethod:function(n,e,r,i){return Fe(e,function(e,t){i.hasOwnProperty(e)&&((t=r[t])&&n.setCallBack(i[e],t,r),n.removeProperty(e))}),e},filterDataAttach:function(e,t,n){return"true"===e.getProperty(t)&&(n.push(e),e.removeProperty(t)),n},setViewAttachData:function(e,t,n){0<n.length&&t&&t.apply(e,[n])},_convertAttrValue:function(e,t,n,r){if(n.hasOwnProperty(e)){n=n[e];if("boolean"===n)return"true"===t;"app_value"===n&&(t=r[t])}return t}},W=(je(m,Bn,Ge({___zdefaults_:{template:null,remove_icon_visible:!1,remove_icon_template:r.remove,auto_select:!1,select_on_hover:!1,hoverable:!1},_onViewChange:function(e,t,n){m.superClass._onViewChange.apply(this,arguments),"auto_select"===e&&this._selectProvider&&this._doViewAutoSelectUpdate()},_doViewAutoSelectUpdate:function(){var e;!this._needAutoSelect()||(e=O.findNextUsableDataByDom(this))&&this.setSelect(e)},beforeRemove:function(e){},_onDataAdd:function(e){m.superClass._onDataAdd.apply(this,arguments),this._needAutoSelect()&&this._isDataAutoSelectable(e)&&this.setSelect(e)},_needAutoSelect:function(e){return!0===this.getProperty("auto_select")&&(0<arguments.length?this.getLastSelected()===e:!this.getLastSelected())},_isDataAutoSelectable:function(e){return null!=e&&this.isVisible(e)&&!this._isDisabled(e)&&this.isSelectable(e)}},Vn(m),{_onDataRemove:function(e){var t,n;this._needAutoSelect(e)&&((t=this.getDataRenderer(e))&&(n=t.getRenderer()),t=O.findNextUsableDataByDom(this,n)),m.superClass._onDataRemove.apply(this,arguments),t&&this.setSelect(t),this._removeHover(e,!1)},_onModelChange:function(e){m.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&(!this._needAutoSelect()||(e=O.findNextUsableDataByDom(this))&&this.setSelect(e),this._clearHover(!1))}})),je(b,Un,{getChildrenRendererContainer:function(e){return this._childrenRendererContainer},updateRenderConfig:function(e,t,n){b.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"template"),n.selectable=e.isSelectable(t),n.hover=e.isHover(t)},updateRendererStatus:function(e,t,n){b.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"unselectable",!0!==this.getRenderConfig("selectable")),St(this._renderer,"hover",!0===this.getRenderConfig("hover"))}}),function(){W.superClass.constructor.apply(this,arguments)}),G=(je(W,Hn,{getViewDefaultTypes:function(){return["click","dblclick"]},handle_click:function(e,t){var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this.isHitRemove(e)?this.handleRemove(n,e):this.isHitCheckBox(e)?this.handleCheck(n,e):this.isHitExpand(e)?this.handleExpand(n,e):(this._handleClickAction(n,e),t._onDataClick(n,e))))},_handleClickAction:function(e,t){var n=this.getView();return!(!n._isExpandable||!n._isExpandable(e)||!0!==n.getProperty("expand_on_click")||!0!==this.handleExpand(e,t))||(!!(n.isCheckable&&(!0===n.getDataViewProperty(e,"checkbox_visible")||n.hasCheckColumn&&!0===n.hasCheckColumn())&&n.isCheckable(e)&&!0===n.getProperty("check_on_click")&&!0===this.handleCheck(e,t))||void this.handleSelect(e,t))},handleRemove:function(e,t){var n=this.getView(),r=n.beforeRemove(e);ct(r)?r(function(){n.removeData(e)}):!1!==r&&n.removeData(e)},handleSelect:function(e,t){var n=this.getView();return!!n.isSelectable(e)&&(n.isSelected(e)||n.setSelect(e),!0)},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},handleExpand:function(e,t){var n=this.getView();return!(!n.toggleExpand||!n.isExpandable(e))&&(n.toggleExpand(e),!0)},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this._isHitOPTarget(e)||!0!==t.getProperty("expand_on_click")&&!0===t.getProperty("expand_on_dbl_click")&&this.handleExpand(n,e),t._onDataDblClick(n,e)))},isHitCheckBox:function(e){return this._isHitOPTypeTarget(e,"check")},isHitRemove:function(e){return this._isHitOPTypeTarget(e,"remove")},isHitExpand:function(e){return this._isHitOPTypeTarget(e,"expand")},_isHitOPTarget:function(e){return null!=qt.getEventTarget(e,"[__z_dop_]")},_isHitOPTypeTarget:function(e,t){e=qt.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t}}),function(){G.superClass.constructor.apply(this,arguments)}),F=(je(G,Hn,{getViewDefaultTypes:function(){return["mouseover","mouseleave"]},handle_mouseover:function(e,t){var n;!0===t.getProperty("hoverable")&&((n=t.getDataAt(e))?t._isDisabled(n)||t._isHoverable(n)&&(t._setHoverData(n,!0,e),!0===t.getProperty("select_on_hover")&&t.isSelectable(n)&&(t.isSelected(n)||t.setSelect(n))):(n=qt.getEventTarget(e,"[__z_did_]"))&&t.getRoot().contains(n)||t._setHoverData(null,!0,e))},handle_mouseleave:function(e,t){!0===t.getProperty("hoverable")&&t._setHoverData(null,!0,e)}}),je(x,m,{getRendererRootContainer:function(){return this._rootUL},getRendererContainer:function(e){return this._rootUL},getDataRendererClass:function(e){return F}}),je(w,x,Ge({___zdefaults_:e()},v(),Ln())),je(P,x,Ge({___zdefaults_:Ge(e(),t()),_onViewChange:function(e,t,n){P.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},getDataRendererClass:function(e){return j},getDataAt:function(e){return O.isEvtInRendererNode(e)?P.superClass.getDataAt.apply(this,arguments):null},makeVisible:function(e){e&&(Rn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),P.superClass.makeVisible.apply(this,arguments))}},C(P),y(P),En(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)||t)&&!1!==this.isExpandable(e)}})),function(){this._renderer=Xe("li","item"),o.initRenderNode(this),F.superClass.constructor.apply(this,arguments)}),j=(je(F,b,{updateRenderConfig:function(e,t,n){F.superClass.updateRenderConfig.apply(this,arguments),n.attributes=e.getDataRenderProperty(t,"attributes"),o.updateRenderCheckConfig(this,e,t,n),o.updateRenderRemoveConfig(this,e,t,n)},updateRenderer:function(e,t,n){F.superClass.updateRenderer.apply(this,arguments),o.updateRendererCheck(this,e,t,n),o.updateRendererRemove(this,e,t,n),o.updateRenderIn(this,e,t,n),o.updateRenderAttributes(this,e,t,n)},updateRendererStatus:function(e,t,n){F.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"checked",!0===this.getRenderConfig("checked")),St(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}}),function(){this._childrenRendererContainer=Xe("ul","children"),j.superClass.constructor.apply(this,arguments)}),l=(je(j,F,{_isRendererVisible:function(e,t){var n=j.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},_isRendererBodyVisible:function(e,t){return e._isBodyVisibleByRootData(t)},updateRenderConfig:function(e,t,n){j.superClass.updateRenderConfig.apply(this,arguments),n.body_visible=this._isRendererBodyVisible(e,t),n.is_root_data=e._isRootData(t),o.updateRenderLevelCheckConfig(this,e,t,n),o.updateRenderExpandConfig(this,e,t,n)},updateRenderer:function(e,t,n){var r=this._renderer;St(r,"body_hidden",!1===this.getRenderConfig("body_visible")),!1===this.getRenderConfig("body_visible")?$e(this.getNodeWrapper(),"display","none"):Et(this.getNodeWrapper(),"display"),St(r,"root_data",!0===this.getRenderConfig("is_root_data")),j.superClass.updateRenderer.apply(this,arguments),St(r,"leaf",!0!==this.getRenderConfig("has_children")),o.updateRendererExpand(this,e,t,n),this._updateChildrenRendererContainer()},updateRendererStatus:function(e,t,n){j.superClass.updateRendererStatus.apply(this,arguments);var r=this._renderer;St(r,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked")),St(r,"expanded",!0===this.getRenderConfig("expanded")),St(r,"unexpandable",!1===this.getRenderConfig("expandable"))},_getExpandTemplate:function(){return o._getExpandTemplate(this)},_updateChildrenRendererContainer:function(){var e=this._childrenRendererContainer;!0===this.getRenderConfig("has_children")?(e.parentNode||this._renderer.appendChild(e),!0===this.getRenderConfig("expanded")?Et(e,"display"):$e(e,"display","none")):Bt(e)}}),je(R,m,{getRendererContainer:function(e){return this._table},getColGroup:function(){return this._tableColGroup}}),{isAscSort:function(e){return"asc"===e},getColumnNextOrder:function(e,t){e=e.getDataViewProperty(t,"sort_orders"),t=t.getProperty("sort"),t=l.getSortOrder(t),t=e.indexOf(t);return t===e.length-1?e[0]:e[t+1]},getSortOrder:function(e){return e?We(e)?e.order:e:null},getSortIndex:function(e){return We(e)?e.index+1:null},getSortedColumnArray:function(e){e=e.filter(function(e){return e.hasProperty("sort")});return e.sort(l._sortMultipleColumnArray),e},getSortCompare:function(e,t){var n,a,s=l._getSortedColumnCompareArray(e,t);return!s||0<(a=s.length)&&(n=function(e,t){for(var n=0;n<a;n++){var r,i=s[n],o=i.compare;if(0!==(r=l.isAscSort(i.order)?o(e,t):-o(e,t)))return r}return r}),n},_getSortedColumnCompareArray:function(r,e){var e=l.getSortedColumnArray(e),t=[];return e.forEach(function(n){var e=n.compare;ct(e)||(e=function(e,t){e=r._getCellValue(e,n),t=r._getCellValue(t,n);return t<e?1:e<t?-1:0}),t.push({order:l.getSortOrder(n.getProperty("sort")),compare:e})}),t},setColumnSort:function(e,t,n,r){var i,o;n?r?0===(i=(o=l.getSortedColumnArray(e)).length)?t.set("sort",n):1===i?o[0]===t?t.set("sort",n):(t.set("sort",{order:n,index:1}),l.updateColumnSortIndex(e)):(o=0<=o.indexOf(t)?t.getProperty("sort").index:i,t.set("sort",{order:n,index:o})):(l._clearOtherColumnSort(e,t),t.set("sort",n)):r?(t.removeProperty("sort"),l.updateColumnSortIndex(e)):l.clearColumnSort(e)},clearColumnSort:function(e){e.each(function(e){e.removeProperty("sort")})},_clearOtherColumnSort:function(e,t){e.each(function(e){t!==e&&e.removeProperty("sort")})},updateColumnSortIndex:function(e){var t,n,e=l.getSortedColumnArray(e),r=e.length;1===r?(n=(t=e[0]).getProperty("sort"),We(n)&&t.set("sort",n.order)):1<r&&e.forEach(function(e,t){var n=e.getProperty("sort"),r=We(n);r&&n.index===t||e.set("sort",{order:r?n.order:n,index:t})})},_sortMultipleColumnArray:function(e,t){var e=e.getProperty("sort"),t=t.getProperty("sort"),n=We(e),r=We(t);if(n&&!r)return 1;if(!n&&r)return-1;if(n&&r){n=e.index,r=t.index;if(n<r)return-1;if(r<n)return 1}return 0}}),q={calcMaxLevel:function(t){var i=0;return t.toRootArray(!1).forEach(function(n){var e=Rn.getAddedDescendantArray(t,n),r=1;e.forEach(function(e){e=e.getProperty("parent");for(var t=1;e&&(t++,e!==n);)e=e.getProperty("parent");r=rt(r,t)}),i=rt(i,r)}),i},calcDataRowIndex:function(e){var t=0;for(e=e.getProperty("parent");e;)t++,e=e.getProperty("parent");return t},calcColSpan:function(t,e){var n=0;return Rn.getAddedDescendantArray(t.getProvider(),e).forEach(function(e){t._isVisible(e)&&!t.hasChildrenVisible(e)&&n++}),rt(1,n)},calcRowSpan:function(e,t){return e.hasChildrenVisible(t)?1:q.calcMaxLevel(e.getProvider())-q.calcDataRowIndex(t)},appendAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){q._appendDataRenderer(t,e)})},_appendDataRenderer:function(e,t){var n=e.getDataRenderer(t);n&&(e.getRendererContainer(t).appendChild(n.getRenderer()),q.appendDataChildrenRenderer(e,t))},appendDataChildrenRenderer:function(t,e){e=_t(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){q._appendDataRenderer(t,e)})}},$=(je(D,R,Ge({___zdefaults_:Ge({model_select:!0,model_check:!0,template:null},e({checkbox_visible:!1}),n(),u()),getRendererRootContainer:function(){return this._tableHead},getDataRendererClass:function(e){return X},isCheckColumn:function(e){return this.getProvider()._checkColumn===e},hasCheckColumn:function(e){return null!=this.getProvider()._checkColumn},isTreeColumn:function(e){return this.getProvider()._treeColumn===e},_onModelChange:function(e,t){q.appendAllDataRenderer(this),D.superClass._onModelChange.apply(this,arguments)},_clearDataRendererImpl:function(){D.superClass._clearDataRendererImpl.apply(this,arguments),this._updateHeadTR()},_beforeModelChange:function(e,t){"data"===e&&"parent"!==t.property||this._updateHeadTR(),D.superClass._beforeModelChange.apply(this,arguments)},_updateHeadTR:function(){var e=q.calcMaxLevel(this.getProvider());this._rowTRArray=[],Nt(this._tableHead);for(var t=0;t<e;t++){var n=Xe("tr");this._rowTRArray[t]=n,this._tableHead.appendChild(n)}},getRowTRArray:function(){return this._rowTRArray},_onViewUpdate:function(){this._updateColGroup(),D.superClass._onViewUpdate.apply(this,arguments)},_updateColGroup:function(){Nt(this._tableColGroup);var e,t=this.getProvider();this._colGroupWidth=0,t&&((e=this.getProperty("root_data"))?this.hasChildrenVisible(e)?t.hEachByData(e,this._appendColGroupItem,this):this._appendColGroupItem(e):t.hEach(this._appendColGroupItem,this)),this.onColGroupChange(this._tableColGroup)},onColGroupChange:function(){},_getColGroupWidth:function(){return this._colGroupWidth},_isColNeedAdded:function(e){return!1!==this.isVisible(e)&&(!this._isAllChildrenHidden(e)&&(!this.hasChildrenVisible(e)&&(!(!(t=this._isVisible(e))&&!e.getProperty("parent"))&&{visible:t})));var t},_isAllChildrenHidden:function(e){return!!e.hasChildren()&&!this.hasChildrenVisible(e)},_appendColGroupItem:function(e){var t,n,r=this._isColNeedAdded(e);!1!==r&&(t=0,n=Xe("col"),!0===r.visible&&(t=this.isColumnMinimized(e)?0|this.getProperty("minimize_width"):tt(e.getProperty("width"))),t=rt(0,t),this._colGroupWidth+=t,n._width=t,$e(n,"width",t+"px"),this._tableColGroup.appendChild(n))},hEachColumn:function(n,r){var e,t=this.getProvider();t&&((e=this.getProperty("root_data"))?t.hEachByData(e,function(e){var t=this._isColNeedAdded(e);!1!==t&&n.apply(r,[e,t.visible])},this):t.hEach(function(e){var t;this.hasChildrenVisible(e)||!1!==(t=this._isColNeedAdded(e))&&n.apply(r,[e,t.visible])},this))},setColumnMinimize:function(e,t){!0===t?e.set("minimized",!0):e.remove("minimized")},isColumnMinimized:function(e){return!0===e.get("minimized")}},C(D),y(D),{getRendererContainer:function(e){e=q.calcDataRowIndex(e);return this._rowTRArray[e]}})),function(){$.superClass.constructor.apply(this,arguments)}),X=(je($,Hn,{getViewDefaultTypes:function(){return["click"]},handle_click:function(e,t){var n,r,i,o=t.getDataAt(e);o&&(t._isDisabled(o)||(t.isColumnMinimized(o)?t.setColumnMinimize(o,!1):this.isCheckBox(e)?this.handleCheck(o,e):this.isMinimize(e)?t.setColumnMinimize(o,!0):(this._isSortable(o)&&(n=l.getColumnNextOrder(t,o),(r="multiple"===t.getDataViewProperty(o,"sort_mode"))&&(null==(i=t.getProperty("multiple_sort_modifier_key"))?e.ctrlKey||e.metaKey||(r=!1):e[i.toLowerCase()+"Key"]||(r=!1)),l.setColumnSort(t.getProvider(),o,n,r)),t._onDataClick(o,e))))},isCheckBox:function(e){return this._isOPTypeTarget(e,"check")},isRemove:function(e){return this._isOPTypeTarget(e,"remove")},isExpand:function(e){return this._isOPTypeTarget(e,"expand")},isMinimize:function(e){return this._isOPTypeTarget(e,"minimize")},_isOPTarget:function(e){return null!=qt.getEventTarget(e,"[__z_dop_]")},_isOPTypeTarget:function(e,t){e=qt.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},_isSortable:function(e){var t=this.getView();return!t.hasChildrenVisible(e)&&!0===t.getDataViewProperty(e,"sortable")}}),function(){this._renderer=Xe("th"),o.initRenderNode(this),X.superClass.constructor.apply(this,arguments)});je(X,b,{_isRendererVisible:function(e,t){var n=X.superClass._isRendererVisible.apply(this,arguments);return n=!0===(n=!0===(n=!0===n?e._isVisibleByRootData(t):n)?e._isBodyVisibleByRootData(t):n)?!e._isAllChildrenHidden(t):n},updateRenderConfig:function(e,t,n){X.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"head_template"),n.is_root_data=e._isRootData(t),n.colspan=q.calcColSpan(e,t),n.rowspan=q.calcRowSpan(e,t),n.tree_column=e.isTreeColumn(t),n.has_children=e.hasChildrenVisible(t);var r=e.getDataRenderProperty(t,"attributes");this.updateRenderMinimizeConfig(e,t,n),!0!==this.getRenderConfig("minimized")?(this.updateRenderCheckConfig(e,t,n),o.updateRenderLevelCheckConfig(this,e,t,n),this.updateRenderSortConfig(e,t,n)):(e=this.getRenderConfig("label"))&&(null==r?r={title:e}:We(r)&&(r.hasOwnProperty("title")||(r.title=e))),n.attributes=r},updateRenderCheckConfig:function(e,t,n){e.isCheckColumn(t)?(n.check_column=!0,n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t)):o.updateRenderCheckConfig(this,e,t,n)},updateRenderer:function(e,t,n){X.superClass.updateRenderer.apply(this,arguments),St(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),St(this._renderer,"leaf",!0!==this.getRenderConfig("has_children")),this._renderer.setAttribute("colspan",this.getRenderConfig("colspan")),this._renderer.setAttribute("rowspan",this.getRenderConfig("rowspan"));var r=!0===this.getRenderConfig("minimized");St(this._renderer,"minimized",r),o.updateRenderAttributes(this,e,t,n),r?(this._checkBoxWrapper&&Bt(this._checkBoxWrapper),this._sortWrapper&&Bt(this._sortWrapper),this._minimizeWrapper&&Bt(this._minimizeWrapper),this._inWrapper.innerHTML=this.getRenderConfig("minimize_label")):(o.updateRendererCheck(this,e,t,n),o.updateRenderIn(this,e,t,n),this.updateRendererSort(e,t,n),this.updateRendererMinimize(e,t,n))},updateRendererStatus:function(e,t,n){X.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"tree-column",!0===this.getRenderConfig("tree_column")),St(this._renderer,"check-column",!0===this.getRenderConfig("check_column")),St(this._renderer,"checked",!0===this.getRenderConfig("checked")),St(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable")),St(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},updateRenderSortConfig:function(e,t,n){!0!==this.getRenderConfig("has_children")?(n.sortable=!0===e.getDataViewProperty(t,"sortable"),n.sort=e.getDataRenderProperty(t,"sort")):n.sortable=!1},updateRendererSort:function(e,t,n){St(this._renderer,"sortable",!0===this.getRenderConfig("sortable"));var r,i,o=this.getRenderConfig("sort");!0!==this.getRenderConfig("has_children")&&null!=o?(r=this._getSortWrapper(),i=this._getSortTemplate(),0<(o=l.getSortIndex(o))&&(i+="<span class='index'>"+o+"</span>"),r.innerHTML=i,kt(r,this._getSortClass()),this.appendToNodeWrapper(r)):this._sortWrapper&&Bt(this._sortWrapper)},_getSortClass:function(){var e=["sort"],t=this.getRenderConfig("sort");return null!=t&&(e.push("sorted"),e.push(l.getSortOrder(t))),!0===this.getRenderConfig("sortable")?e.push("sortable"):e.push("unsortable"),e.join(" ")},_getSortWrapper:function(){return this._sortWrapper||(this._sortWrapper=Xe("span"),this._sortWrapper.setAttribute("__z_dop_","sort")),this._sortWrapper},_getSortTemplate:function(){return l.isAscSort(l.getSortOrder(this.getRenderConfig("sort")))?this.getViewRenderConfig("sort_asc_icon_template"):this.getViewRenderConfig("sort_desc_icon_template")},updateRenderMinimizeConfig:function(e,t,n){var r;!0!==this.getRenderConfig("has_children")?(r=!0===e.getDataViewProperty(t,"minimizable"),(n.minimizable=r)&&(r=e.isColumnMinimized(t),(n.minimized=r)?(n.minimize_width=this.getViewRenderConfig("minimize_width"),n.minimize_label=this.getViewRenderConfig("minimize_label")):n.minimize_icon_template=this.getViewRenderConfig("minimize_icon_template"))):n.minimizable=!1},updateRendererMinimize:function(e,t,n){var r=this.getRenderConfig("minimizable");St(this._renderer,"minimizable",r),r?(r=this.getRenderConfig("minimized"),St(this._renderer,"minimized",r),r||this.appendToNodeWrapper(this._getMinimizeWrapper())):this._minimizeWrapper&&Bt(this._minimizeWrapper)},_getMinimizeWrapper:function(){return this._minimizeWrapper||(this._minimizeWrapper=Xe("span","minimize"),this._minimizeWrapper.setAttribute("__z_dop_","minimize"),this._minimizeWrapper.innerHTML=this.getViewRenderConfig("minimize_icon_template")),this._minimizeWrapper},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});function K(){this._tableBody=Xe("tbody"),K.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),Dt(this.getRoot(),"z-tbody")}function J(){this._tableBody=Xe("tbody"),J.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),Dt(this.getRoot(),"z-tbody")}function Y(){return this instanceof Y?Ot.isElement(e=arguments[0])?f.parseView("zw-listview",e):(Y.superClass.constructor.apply(this,arguments),void Dt(this.getRoot(),"z-listview")):vt.createInstance(Y,arguments);var e}function Z(){Z.superClass.constructor.apply(this,arguments)}function Q(){return this instanceof Q?(e=arguments[0],Ot.isElement(e)?f.parseView("zw-tabs",e):(this._contentContainer=Xe("div","contents"),this._prevEle=Xe("span","to_prev"),this._nextEle=Xe("span","to_next"),this._tabsView=Xe("div","tabs"),Q.superClass.constructor.apply(this,arguments),e=this.getRoot(),Dt(e,"z-tabs"),this._tabsView.appendChild(this._rootUL),this._tabsView.appendChild(this._prevEle),this._tabsView.appendChild(this._nextEle),e.appendChild(this._tabsView),this._doTabPositionUpdate(),this._doTabContentVisibleUpdate(),this._doUpdateTabScrollAndSize(),void this.addController(new Z))):vt.createInstance(Q,arguments);var e}function ee(){return this instanceof ee?Ot.isElement(e=arguments[0])?f.parseView("zw-tree",e):(ee.superClass.constructor.apply(this,arguments),void Dt(this.getRoot(),"z-tree")):vt.createInstance(ee,arguments);var e}function te(){this._contentContainer=Xe("div","content"),te.superClass.constructor.apply(this,arguments)}function ne(){return this instanceof ne?Ot.isElement(e=arguments[0])?f.parseView("zw-collapse",e):(ne.superClass.constructor.apply(this,arguments),void Dt(this.getRoot(),"z-collapse")):vt.createInstance(ne,arguments);var e}function re(){return this instanceof re?Ot.isElement(e=arguments[0])?f.parseView("zw-carousel",e):(this._contentContainer=Xe("div","contents"),this._initDataContentInterface(!0),this._indicatorView=Xe("div","indicators"),re.superClass.constructor.apply(this,arguments),this._initIndicatorView(),void Dt(this.getRoot(),"z-carousel")):vt.createInstance(re,arguments);var e}var ie,oe=function(e,t){var n,r=t.getProperty("field");return n=null==(n=r?gt(e.getProperties(!1),r):n)?null!=(e=t.getProperty("default"))?e:"":n},ae=(je(K,R,Ge({___zdefaults_:Ge({model_select:!0,model_expand:!0,model_check:!0},e()),makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return!1},isCheckColumn:function(e){return!1},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return oe(e,t)},getDataRendererClass:function(e){return ae}},v(),Ln())),function(){this._renderer=Xe("tr","item"),ae.superClass.constructor.apply(this,arguments)}),se=(je(ae,Un,{updateRenderConfig:function(e,t,n){ae.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.row_template=e.getDataViewProperty(t,"row_template"),this._renderConfig.selectable=e.isSelectable(t),this._renderConfig.hover=e.isHover(t),e.hasCheckColumn()&&(n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t))},updateRenderer:function(e,t,n){ae.superClass.updateRenderer.apply(this,arguments),Nt(this._renderer);var r=this.getRenderConfig("row_template");r?this._renderer.innerHTML=nn(r,t.getProperties(!1)):e.hEachColumn(this._renderColumn,this)},updateRendererStatus:function(e,t,n){ae.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"unselectable",!1===this.getRenderConfig("selectable")),St(this._renderer,"hover",!0===this.getRenderConfig("hover")),St(this._renderer,"checked",!0===this.getRenderConfig("checked")),St(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},_renderColumn:function(e,t){var n=this._view,r=Xe("td",{className:e.get("className")||e.get("class"),style:e.get("style"),attributes:e.get("attributes")});return this._renderer.appendChild(r),!0===t&&(n.isColumnMinimized(e)||(this._renderCommonColumn(r,e),n.isCheckColumn(e)&&this._renderCheckColumn(r,e))),r},_renderCommonColumn:function(e,t){var n=this._view,r=this._data,i=t.render;ct(i)?i.apply(n,[e,r,t,n,this._renderer]):(i=(i=t.getProperty("template"))?nn(i,r.getProperties(!1)):n._getCellValue(r,t),e.innerHTML=i)},_renderCheckColumn:function(e,t){Dt(e,"check-column");var n=o._getCheckboxWrapper(this);n.innerHTML=o._getCheckboxTemplate(this),e.insertBefore(n,e.firstChild)}}),je(J,R,Ge({___zdefaults_:Ge({model_select:!0,model_expand:!0,model_check:!0},e(),t()),_onViewChange:function(e,t,n){J.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return this._tableHead.hasCheckColumn()},isCheckColumn:function(e){return this._tableHead.isCheckColumn(e)},isTreeColumn:function(e){return!0===e.getProperty("tree")},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return oe(e,t)},getDataRendererClass:function(e){return se}},(delete(L=C(ie=J)).getRendererContainer,Ge(L,{_addDataRendererImpl:function(e,t){return B.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(Rn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return ie.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),B.insertElementRenderer(this,e,t,!0))}else s.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){!0!==n&&!this.getProperty("sort_compare")||B.updateDataRenderer(this,e,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||0<=Rn.getAddedDescendantArray(this.getProvider(),t).indexOf(e))}})),y(J),En(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)||t)&&!1!==this.isExpandable(e)}})),function(){se.superClass.constructor.apply(this,arguments)});je(se,ae,{_isRendererVisible:function(e,t){var n=se.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},updateRenderConfig:function(e,t,n){se.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.is_root_data=e._isRootData(t),o.updateRenderLevelCheckConfig(this,e,t,n),o.updateRenderExpandConfig(this,e,t,n),this._renderConfig.data_level=e._getDataLevel(t)},updateRenderer:function(e,t,n){St(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),se.superClass.updateRenderer.apply(this,arguments),St(this._renderer,"leaf",!0!==this.getRenderConfig("has_children"))},updateRendererStatus:function(e,t,n){se.superClass.updateRendererStatus.apply(this,arguments),St(this._renderer,"unexpandable",!1===this.getRenderConfig("expandable")),St(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},_renderColumn:function(e,t){var n=this._view,r=se.superClass._renderColumn.apply(this,arguments);!0===t&&(n.isColumnMinimized(e)||n.isTreeColumn(e)&&this._renderTreeColumn(r,e))},_renderTreeColumn:function(e,t){Dt(e,"tree-column"),!0===this.getRenderConfig("has_children")&&!1!==this.getRenderConfig("expand_icon_visible")&&((n=o._getExpandWrapper(this)).innerHTML=o._getExpandTemplate(this),kt(n,o._getExpandClass(this)),e.insertBefore(n,e.firstChild));for(var n,r=this.getRenderConfig("data_level"),i=0;i<r;i++)e.insertBefore(Xe("span","indent"),e.firstChild)}}),je(Y,w,{__className_:"ListView"}),je(Z,Hn,{add:function(e){Z.superClass.add.apply(this,arguments);var t=e._prevEle,t=($t(t,"mousedown",this.toPrev,this),$t(t,"mouseup",this.stopScroll,this),$t(t,"mouseleave",this.stopScroll,this),e._nextEle);$t(t,"mousedown",this.toNext,this),$t(t,"mouseup",this.stopScroll,this),$t(t,"mouseleave",this.stopScroll,this),en.addWheelListener(e._tabsView,this.handleTabsWheel,this)},remove:function(){var e=this._view._prevEle,e=(Xt(e,"mousedown",this.toPrev,this),Xt(e,"mouseup",this.stopScroll,this),Xt(e,"mouseleave",this.stopScroll,this),this._view._nextEle);Xt(e,"mousedown",this.toNext,this),Xt(e,"mouseup",this.stopScroll,this),Xt(e,"mouseleave",this.stopScroll,this),en.removeWheelListener(this._view._tabsView,this.handleTabsWheel,this),Z.superClass.remove.apply(this,arguments)},handleTabsWheel:function(e){var t=e.wheelDelta<0||0<e.deltaY||0<e.detail?10:-10,n=this._view.getProperty("tab_position"),n="top"===n||"bottom"===n?"scrollLeft":"scrollTop",r=this._view._rootUL[n];this._view._rootUL[n]+=t,r!==this._view._rootUL[n]&&e.preventDefault()},stopScroll:function(){this._scrollStop=!0},toPrev:function(){this.startScroll(-6)},toNext:function(){this.startScroll(6)},startScroll:function(e){this._scrollStop=!1,this._scrollOffset=e;e=this._view.getProperty("tab_position");this._scrollDirection="top"===e||"bottom"===e?"scrollLeft":"scrollTop",Ct.cancelCallRAFInterval(this.scroll,this),xt(this.scroll,this)},scroll:function(){if(!0===this._scrollStop)return!1;var e=this._view._rootUL[this._scrollDirection];this._view._rootUL[this._scrollDirection]+=this._scrollOffset,e===this._view._rootUL[this._scrollDirection]&&this.stopScroll()}}),je(Q,w,Ge({__className_:"Tabs",___zdefaults_:{onresize:!0,content_visible:!0,content_lazy_load:!1,content_auto_resize:!0,content_container:null,tab_position:"top",auto_select:!0,scroll_to_left_arrow_icon_template:r.tabs_scroll_to_left_arrow,scroll_to_right_arrow_icon_template:r.tabs_scroll_to_right_arrow,scroll_to_up_arrow_icon_template:r.tabs_scroll_to_up_arrow,scroll_to_down_arrow_icon_template:r.tabs_scroll_to_down_arrow},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_onViewUpdate:function(){Q.superClass._onViewUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_onViewChange:function(e,t,n){Q.superClass._onViewChange.apply(this,arguments),"tab_position"===e?this._doTabPositionUpdate():"content_visible"===e?this._doTabContentVisibleUpdate():"content_lazy_load"===e?this._doTabContentLazyLoadUpdate():"content_container"===e&&this._doTabContentContainerUpdate()},_doTabPositionUpdate:function(){var e=this.getRoot();At(e,"top bottom left right"),Dt(e,this.getProperty("tab_position")),this._isContentVisible()&&this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabScrollArrowUpdate()},_doTabScrollArrowUpdate:function(){var e=this.getProperty("tab_position");"left"===e||"right"===e?(this._prevEle.innerHTML=this.getProperty("scroll_to_up_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_down_arrow_icon_template")):(this._prevEle.innerHTML=this.getProperty("scroll_to_left_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_right_arrow_icon_template"))},_insertContentContainerByOrder:function(){var e=this.getRoot();"bottom"===this.getProperty("tab_position")?e.insertBefore(this._contentContainer,e.firstElementChild):e.appendChild(this._contentContainer)},_doTabContentVisibleUpdate:function(){var e;this._isContentVisible()?(this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabContentLazyLoadUpdate(),(e=this.getLastSelected())&&this.setCurrentDataContent(e)):(this.clearDataContent(),this._isUseDefaultContentContainer()&&Bt(this._contentContainer))},_doTabContentLazyLoadUpdate:function(){this._isContentLazyLoad()||this.eachData(function(e){this.isDataContentAdded(e)||this.addDataContent(e)},this)},_doTabContentContainerUpdate:function(){this._isUseDefaultContentContainer()?this._isContentVisible()&&this._insertContentContainerByOrder():Bt(this._contentContainer)},getContentContainer:function(){var e=this.getProperty("content_container");return e?qe(e):this._contentContainer},_isUseDefaultContentContainer:function(){return null==this.getProperty("content_container")},_onDataAdd:function(e){Q.superClass._onDataAdd.apply(this,arguments),this._isContentVisible()&&!this._isContentLazyLoad()&&this.addDataContent(e)},_onDataRemove:function(e){Q.superClass._onDataRemove.apply(this,arguments),this._isContentVisible()&&this.removeDataContent(e)},_onDataClear:function(){Q.superClass._onDataClear.apply(this,arguments),this._isContentVisible()&&this.clearDataContent()},_onDataChange:function(e,t){Q.superClass._onDataChange.apply(this,arguments),this._isContentVisible()&&"content"===t.property&&(this.removeDataContent(e),this.getLastSelected()===e?this.setCurrentDataContent(e):this._isContentLazyLoad()||this.addDataContent(e))},_onModelChange:function(e){Q.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._doTabContentLazyLoadUpdate()},_onSelectBatchChange:function(){var e;Q.superClass._onSelectBatchChange.apply(this,arguments),!this._isContentVisible()||(e=this.getLastSelected())&&this.setCurrentDataContent(e)},_getScrollView:function(){return this._rootUL},_isContentVisible:function(){return!1!==this.getProperty("content_visible")},_isContentLazyLoad:function(){return!0===this.getProperty("content_lazy_load")},_doResizeUpdate:function(){Q.superClass._doResizeUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_doUpdateTabScrollAndSize:function(e){this._doUpdateTabScroll(),this._doUpdateTabSize()},_doUpdateTabScroll:function(){var e=this.getProperty("tab_position");Et(this._tabsView,"padding-top"),Et(this._tabsView,"padding-bottom"),Et(this._tabsView,"padding-left"),Et(this._tabsView,"padding-right"),"top"===e||"bottom"===e?(e=this._rootUL.scrollWidth,this._tabsView.clientWidth<e?("none"===Lt(this._prevEle,"display")&&(Et(this._prevEle,"display"),Et(this._nextEle,"display")),$e(this._tabsView,"padding-left",this._prevEle.offsetWidth+"px"),$e(this._tabsView,"padding-right",this._nextEle.offsetWidth+"px")):($e(this._prevEle,"display","none"),$e(this._nextEle,"display","none"))):(e=this._rootUL.scrollHeight,this._tabsView.clientHeight<e?("none"===Lt(this._prevEle,"display")&&(Et(this._prevEle,"display"),Et(this._nextEle,"display")),$e(this._tabsView,"padding-top",this._prevEle.offsetHeight+"px"),$e(this._tabsView,"padding-bottom",this._nextEle.offsetHeight+"px")):($e(this._prevEle,"display","none"),$e(this._nextEle,"display","none")))},_doUpdateTabSize:function(){if(this._isContentVisible()&&this._isUseDefaultContentContainer()){if(!1!==this.getProperty("content_auto_resize")){var e=this.getRoot().parentNode;if(e&&Lt(e,"height")){var t,e=this.getProperty("tab_position");if("top"===e||"bottom"===e)return e=this.getRootSize(),t=this._rootUL.offsetHeight,void $e(this._contentContainer,"height",e.height-t-1+"px")}}Et(this._contentContainer,"height")}}},p())),je(ee,P,{__className_:"Tree"}),je(te,F,{updateRenderConfig:function(e,t,n){te.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.expanded=e.isExpanded(t);var r=!1!==e.getDataViewProperty(t,"expand_icon_visible");!0==(this._renderConfig.expand_icon_visible=r)&&(this._renderConfig.expandable=e.isExpandable(t)),this._renderConfig.content=e.getDataRenderProperty(t,"content")},updateRenderer:function(e,t,n){te.superClass.updateRenderer.apply(this,arguments),St(this._renderer,"expanded",!0===this.getRenderConfig("expanded")),St(this._renderer,"unexpandable",!0!==this.getRenderConfig("expandable")),this._updateRendererExpand(),this._updateRendererContent()},_updateRendererExpand:function(){var e;!1!==this.getRenderConfig("expand_icon_visible")?((e=this._getExpandWrapper()).innerHTML=this._getExpandTemplate(),kt(e,this._getExpandClass()),this.insertToNodeWrapperFirst(e)):this._expandWrapper&&Bt(this._expandWrapper)},_getExpandTemplate:function(){return!0===this.getRenderConfig("expanded")?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(){var e=["expand"];return!0===this.getRenderConfig("expanded")?e.push("expanded"):e.push("collapsed"),!0===this.getRenderConfig("expandable")?e.push("expandable"):e.push("unexpandable"),e.join(" ")},_getExpandWrapper:function(){return this._expandWrapper||(this._expandWrapper=Xe("span"),this._expandWrapper.setAttribute("__z_dop_","expand")),this._expandWrapper},_updateRendererContent:function(){var e=this.getRenderConfig("content");this._currentContent!==e&&(a.releaseContent(this._currentContentObj),this._currentContent=e,this._currentContentObj=a.getContentObject(e),this._currentContentObj&&((e=this._currentContentObj.contentEle)&&this._contentContainer.appendChild(e),a.showContent(this._currentContentObj))),this._contentContainer.parentNode||this._renderer.appendChild(this._contentContainer),!0===this.getRenderConfig("expanded")?(a.showContent(this._currentContentObj),this._currentContentObj&&this._currentContentObj.contentEle?Et(this._contentContainer,"display"):$e(this._contentContainer,"display","none")):(a.hideContent(this._currentContentObj),$e(this._contentContainer,"display","none"))},dispose:function(){te.superClass.dispose.apply(this,arguments),this._currentContentObj&&a.releaseContent(this._currentContentObj)}}),je(ne,w,Ge({__className_:"Collapse",___zdefaults_:Ge({make_visible_on_select:!1},t({expand_on_click:!0})),getDataRendererClass:function(e){return te},getDataAt:function(e){return O.isEvtInRendererNode(e)?ne.superClass.getDataAt.apply(this,arguments):null}},En()));je(re,w,Ge({__className_:"Carousel",___zdefaults_:{auto_select:!0,indicator_visible:!0,scroll_arrow_visible:!0,auto_play:!0,interval:3e3,hover_pause:!0,scroll_to_prev_arrow_template:"<a class='fz-icon fz-angle-left'></a>",scroll_to_next_arrow_template:"<a class='fz-icon fz-angle-right'></a>"},_initIndicatorView:function(){this._prevEle=Xe("span","to_prev"),this._prevEle.innerHTML=this._getCommonProperty("scroll_to_prev_arrow_template"),this._nextEle=Xe("span","to_next"),this._nextEle.innerHTML=this._getCommonProperty("scroll_to_next_arrow_template"),this._indicatorView.appendChild(this._rootUL),this.getRoot().appendChild(this._contentContainer),this.getRoot().appendChild(this._prevEle),this.getRoot().appendChild(this._nextEle),this.getRoot().appendChild(this._indicatorView)},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_getContentContainer:function(){return this._contentContainer},_onDataAdd:function(e){re.superClass._onDataAdd.apply(this,arguments),this.addDataContent(e)},_onDataRemove:function(e){re.superClass._onDataRemove.apply(this,arguments),this.removeDataContent(e)},_onDataClear:function(){re.superClass._onDataClear.apply(this,arguments),this.clearDataContent()},_onDataChange:function(e,t){re.superClass._onDataChange.apply(this,arguments),"content"===t.property&&(this.removeDataContent(e),this.getLastSelect()===e?this.setCurrentDataContent(e):this.addDataContent(e))},_onSelectBatchChange:function(){re.superClass._onSelectBatchChange.apply(this,arguments);var e=this.getLastSelect();e&&this.setCurrentDataContent(e),Ct.cancelCallLater(this.toNext,3e3,this),!0===this._getCommonProperty("auto_play")&&mt(this.toNext,1e3,this)},toNext:function(){var e=this._getNextData();e&&this.setSelect(e)},_getPrevData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=-1,n=0,r=this.getLastSelect(),r=(r&&(t=e.indexOf(r),n=1),e.length);0<=t&&((t=e.splice(t)).shift(),e.unshift.apply(e,t));for(var i=r-1;n<=i;i--){var o=e[i];if(this.isVisible(o)&&!this.isDisabled(o)&&this.isSelectable(o))return o}},_getNextData:function(){for(var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=this.getLastSelect(),n=(t&&(t=e.splice(0,e.indexOf(t)),e.shift(),e.push.apply(e,t)),e.length),r=0;r<n;r++){var i=e[r];if(this.isVisible(i)&&!this.isDisabled(i)&&this.isSelectable(i))return i}}},_(),{beforeHideContent:function(e){this._lastContent=e;var e=this.getLastSelect();e&&(e=this.getDataContent(e),this._lastContent._id,e._id)}}));function le(e){this._pager=e,le.superClass.constructor.apply(this,[])}function ce(){ce.superClass.constructor.apply(this,arguments)}function de(){return this instanceof de?Ot.isElement(e=arguments[0])?f.parseView("zw-pagination",e):(de.superClass.constructor.apply(this,arguments),this._initPageView(),O.addWidgetClass(this.getRoot()),Dt(this.getRoot(),"z-pagination"),void this.addController(new ce)):vt.createInstance(de,arguments);var e}function he(){he.superClass.constructor.apply(this,arguments)}function ue(){if(!(this instanceof ue))return vt.createInstance(ue,arguments);var e=arguments[0];if(Ot.isElement(e))return f.parseView("zw-grid",e);this._initGridView();var e=kn(arguments,"columns"),t=(ue.superClass.constructor.apply(this,arguments),this._initCenterTables(),this._initDefaultColumns(),this.getRoot());O.addWidgetClass(t),Dt(t,"z-grid"),t.appendChild(this._headDiv),t.appendChild(this._bodyDiv),t.appendChild(this._pagerDiv),this._doViewOverflowUpdate(),this._updateLayout(),this.addController(new he),this.addController(new G),e&&this.setColumns(e)}var _e=function(e,t,n,r,i){return 0===t?"to_prev":(--t,(n=rt(1,n))<=i?t<=n-1?t:t===n?"to_next":void 0:r<=i/2?t===i-1?"to_next_more":t===i?n-1:t===i+1?"to_next":t<i-1?t:void 0:n-i/2-1<r?0===t?0:1===t?"to_prev_more":t===i+1?"to_next":t<=i?n+t-i-1:void 0:0===t?0:1===t?"to_prev_more":t===i+2?"to_next":t===i+1?n-1:t===i?"to_next_more":t<i?r-((i-2)/2|0)+(t-2):void 0)},pe=(je(le,w,{_getPagerCommonProperty:function(e){return this._pager.getProperty(e)},_getPagerPageIndex:function(){return this._pager._getPageIndex()-1},_setPagerPageIndex:function(e){this._pager.set("page_index",e+1)},_getPagerPageNumber:function(){return this._pager._getPageNumber()},_getPagerPagerCount:function(){return this._pager._getPagerCount()},isVisible:function(e){return null!=e.getProperty("role")},getLabel:function(e){e=e.getProperty("role");return null!=e?"to_prev"===e?this._getPagerCommonProperty("to_prev_icon_template"):"to_next"===e?this._getPagerCommonProperty("to_next_icon_template"):"to_prev_more"===e?this._getPagerCommonProperty("to_prev_more_icon_template"):"to_next_more"===e?this._getPagerCommonProperty("to_next_more_icon_template"):e+1:e},isDisabled:function(e){e=e.getProperty("role");if(null==e)return!0;var t=this._getPagerPageIndex();return"to_prev"===e?t<=0:"to_next"===e&&t>=this._getPagerPageNumber()-1},_onDataClick:function(e){var t,e=e.getProperty("role");null!=e&&(dt(e)?this._setPagerPageIndex(e):(t=this._getPagerPageIndex(),"to_prev"===e?0<t&&this._setPagerPageIndex(t-1):"to_next"===e?t<this._getPagerPageNumber()-1&&this._setPagerPageIndex(t+1):"to_prev_more"===e?this._setPagerPageIndex(rt(0,t-(this._getPagerPagerCount()-2))):"to_next_more"===e&&this._setPagerPageIndex(it(this._getPagerPageNumber()-1,t+(this._getPagerPagerCount()-2)))))},updatePagerData:function(){this._updatePagerDataCount(),this._updatePagerDataRole()},_updatePagerDataCount:function(){var e=this._getPagerPagerCount()+4,t=this.getDataSize();if(t!==e)if(t<e)for(var n=t;n<e;n++)this.addData(new Sn);else for(var r=this.getDataArray(),i=e;i<t;i++)this.removeData(r[i])},_updatePagerDataRole:function(){var n=this._getPagerPageNumber(),r=this._getPagerPageIndex(),i=this._getPagerPagerCount();this.clearSelect(),this.eachData(function(e,t){t=_e(e,t,n,r,i);e.set("role",t),t===r&&this.setSelect(e)},this),this.update()},getDataRendererClass:function(e){return pe}}),function(){pe.superClass.constructor.apply(this,arguments)}),fe=(je(pe,F,{updateRenderConfig:function(e,t,n){pe.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.role=t.getProperty("role")},updateRenderer:function(e,t,n){pe.superClass.updateRenderer.apply(this,arguments),St(this._renderer,"to_prev","to_prev"===this.getRenderConfig("role")),St(this._renderer,"to_next","to_next"===this.getRenderConfig("role")),St(this._renderer,"to_prev_more","to_prev_more"===this.getRenderConfig("role")),St(this._renderer,"to_next_more","to_next_more"===this.getRenderConfig("role"))}}),je(ce,Hn,{add:function(e){ce.superClass.add.apply(this,arguments),$t(e._gerRefreshWrapper(),"click",this.handleRefresh,this),$t(e._gerSizeSelect(),"change",this.handleSizeChange,this)},remove:function(e){Xt(this._view._gerRefreshWrapper(),"click",this.handleRefresh,this),Xt(this._view._gerSizeSelect(),"change",this.handleSizeChange,this),ce.superClass.remove.apply(this,arguments)},handleRefresh:function(){this._view._onRefresh(this._view.getPageConfig())},handleSizeChange:function(){var e=0|this._view._gerSizeSelect().value;this._view.set("page_size",e)}}),je(de,zn,{__className_:"Pagination",___zdefaults_:{layout:"sizes,pager,total,refresh",page_sizes:[20,50,100],page_size:20,total_template:"<%start%>-<%end%> | <%total%>",refresh_icon_template:r.refresh,page_index:1,total:0,pager_count:7,to_prev_icon_template:r.pagination_to_prev,to_next_icon_template:r.pagination_to_next,to_prev_more_icon_template:r.pagination_to_prev_more,to_next_more_icon_template:r.pagination_to_next_more},_initPageView:function(){this._pagerULView=new le(this);var e=this._pagerULView.getRoot();Dt(e,"pager"),this.getRoot().appendChild(e),this._updatePageSizeSelect(),this._handlePageChange(),this._doViewLayoutUpdate()},_onViewChange:function(e,t,n){switch(de.superClass._onViewChange.apply(this,arguments),e){case"page_index":this._doViewPageIndexUpdate();break;case"page_size":this._doViewPageSizeUpdate();break;case"total":this._doViewTotalUpdate();break;case"page_sizes":this._doViewPageSizesUpdate();break;case"pager_count":this._doViewPagerCountUpdate();break;case"layout":this._doViewLayoutUpdate();break;case"total_template":this._updateTotalInfo();break;case"to_prev_icon_template":case"to_next_icon_template":case"to_prev_more_icon_template":case"to_next_more_icon_template":this._updatePagerULView();break;case"refresh_icon_template":this._doViewRefreshIconUpdate()}},_doViewPageIndexUpdate:function(){this._handlePageChange()},_doViewPageSizeUpdate:function(){this._updatePageSizeSelect(!0),this._updatePageIndex(),this._handlePageChange()},_doViewTotalUpdate:function(){this._updatePageIndex(),this._handlePageChange()},_doViewPageSizesUpdate:function(){this._updatePageSizeSelect();var e=this.getProperty("page_sizes"),t=this._getPageSize();e.indexOf(t)<0&&this.set("page_size",e[0])},_updatePageSizeSelect:function(e){var t=this.getProperty("page_sizes"),n=this._gerSizeSelect();!0===e?n.value=this._getPageSize():1<t.length?(Nt(n),t.forEach(function(e){var t=Xe("option");t.setAttribute("value",e),t.innerHTML=e,n.appendChild(t)}),n.value=this._getPageSize()):Bt(n)},_doViewPagerCountUpdate:function(){this._updatePagerULView()},_doViewLayoutUpdate:function(){var n=this.getRoot();Nt(n),this.getProperty("layout").split(",").forEach(function(e){var t;switch(e){case"sizes":t=this._gerSizeSelect();break;case"pager":this._pagerULView&&(t=this._pagerULView.getRoot());break;case"total":t=this._gerTotalWrapper();break;case"refresh":t=this._gerRefreshWrapper()}t&&n.appendChild(t)},this)},_gerSizeSelect:function(){return this._sizeSelect||(this._sizeSelect=Xe("select","sizes"),this._sizeSelect.setAttribute("__z_dop_","size_select")),this._sizeSelect},_gerTotalWrapper:function(){return this._totalWrapper||(this._totalWrapper=Xe("span","total")),this._totalWrapper},_gerRefreshWrapper:function(){return this._refreshWrapper||(this._refreshWrapper=Xe("span","refresh"),this._refreshWrapper.setAttribute("__z_dop_","refresh"),this._refreshWrapper.innerHTML=this.getProperty("refresh_icon_template")),this._refreshWrapper},_updatePagerULView:function(){this._pagerULView&&this._pagerULView.update()},_updateTotalInfo:function(){this._gerTotalWrapper().innerHTML=nn(this.getProperty("total_template"),this.getPageConfig())},_doViewRefreshIconUpdate:function(){this._gerRefreshWrapper().innerHTML=this.getProperty("refresh_icon_template")},_updatePageIndex:function(){var e=rt(1,this._getPageNumber());return e<this._getPageIndex()&&(e=rt(1,e-1),this.set("page_index",e),!0)},_handlePageChange:function(){this._pagerULView&&(this._pagerULView.updatePagerData(),this._callBatch(this._onPageChange,"page_change_cb_"))},_onPageChange:function(){var e=this.getPageConfig();if(this._updateTotalInfo(),this._currentPagerConfig){if(this._currentPagerConfig.index===e.index&&this._currentPagerConfig.size===e.size)return;e.changed=!0}this._currentPagerConfig=Ge({},e),this._callOn("onPageChange","on.page.change",e,[e])},_getPageNumber:function(){return at(this._getTotal()/this._getPageSize())},_getPageSize:function(){return this.getProperty("page_size")},_getTotal:function(){return this.getProperty("total")},_getPagerCount:function(){return this.getProperty("pager_count")},_getPageIndex:function(){return this.getProperty("page_index")},getPageConfig:function(){var e=this._getPageIndex(),t=e-1,n=this._getPageSize(),r=t*n,i=this._getTotal(),o=0,a=0;return 0<i&&(o=t*n+1,a=it(i,(1+t)*n)),{index:e,size:n,skip:r,limit:n,offset:r,number:this._getPageNumber(),start:o,end:a,total:i}},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onRefresh:function(e){this._callOn("onRefresh","on.page.refresh",e,[e])},onRefresh:function(e,t){this.addListener("on.page.refresh",e,t)}}),{sortable:function(e,t){e=e.getProperty("sortable");t.set("sortable",!0===e||"custom"===e)},sort_mode:"sort_mode",multiple_sort_modifier_key:"multiple_sort_modifier_key",sort_orders:"sort_orders",sort_asc_icon_template:"sort_asc_icon_template",sort_desc_icon_template:"sort_desc_icon_template",minimize_icon_template:"minimize_icon_template",minimize_width:"minimize_width",minimize_label:"minimize_label"}),ge={selectable:"selectable",auto_select:"auto_select",row_template:"row_template",expand_icon_visible:"expand_icon_visible",expand_collapsed_icon_template:"expand_collapsed_icon_template",expand_expanded_icon_template:"expand_expanded_icon_template",expand_on_click:"expand_on_click",expand_on_dbl_click:"expand_on_dbl_click",accordion:"accordion",checkbox_unchecked_icon_template:"checkbox_unchecked_icon_template",checkbox_checked_icon_template:"checkbox_checked_icon_template",checkbox_indeterminate_icon_template:"checkbox_indeterminate_icon_template",check_on_click:"check_on_click",three_states_check:"three_states_check",root_data:"root_data"},c={getOffsetHeight:function(e){return It.getElementWindowBounds(e).height},createFixedHeadView:function(e){var t=c._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=Rn.getDataRoot(e).getProperty("fixed");return!0===e||"left"===e});return c.initHeadViewShareProperty(e,t),t},createFixedRightHeadView:function(e){var t=c._createHeadView(e,function(e){return!1!==e.getProperty("visible")&&"right"===Rn.getDataRoot(e).getProperty("fixed")});return c.initHeadViewShareProperty(e,t),t},createCenterHeadView:function(e){return c._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=Rn.getDataRoot(e).getProperty("fixed");return!0!==e&&"left"!==e&&"right"!==e})},_createHeadView:function(t,e){e=new D({isVisible:e,_hasChildrenChecked:function(e){return this.isCheckColumn(e)?ye._hasDataChecked(t):D.prototype._hasChildrenChecked.apply(this,arguments)}});return e.onViewUpdate(t._onColumnUpdate,t),e},initHeadViewShareProperty:function(n,r){Fe(fe,function(e,t){ct(t)?t(n,r):r.set(t,n.getProperty(e))},n)},createBodyView:function(e,t,n){var r=new K(c.getBodyOverridingMethods(e));return c._onBodyViewChange(e,r),!1!==n&&c.initBodyViewShareProperty(e,r),r.setTableHead(t),r},getBodyOverridingMethods:function(n){return{isHover:function(e){return n.isHover(e)},_getCellValue:function(e,t){return n._getCellValue(e,t)},_isFilterVisible:function(e){return n._isFilterVisible(e)},isVisible:function(e){return n.isVisible(e)},isCheckColumn:function(e){return n._isCheckColumn(e)},hasCheckColumn:function(){return n._hasCheckColumn()},isCheckable:function(e){return n.isCheckable(e)},isSelectable:function(e){return n.isSelectable(e)}}},_onBodyViewChange:function(t,e){e.onDataClick(function(e){t._onDataClick.apply(t,[e.data,e.event])}),e.onDataDblClick(function(e){t._onDataDblClick.apply(t,[e.data,e.event])}),e.onViewUpdate(function(){t._onBodyUpdate()})},initBodyViewShareProperty:function(n,r){Fe(ge,function(e,t){ct(t)?t(n,r):r.set(t,n.getProperty(e))},n)}},ye={bubblingBodyEventToGrid:function(t){var e=t._bodyCenterTable;e.onCheckChange(function(e){t._onCheckChange(e)},t),e.onSelectChange(function(e){t._onSelectChange(e)}),e.onSelectBatchChange(function(e){t._onSelectBatchChange(e)})},syncHeadViewProperty:function(e,t,n,r){fe.hasOwnProperty(t)&&(t=fe[t],ct(t)?(e._headCenterTable&&t(e,e._headCenterTable),e._headLeftTable&&t(e,e._headLeftTable),e._headRightTable&&t(e,e._headRightTable)):(e._headCenterTable&&e._headCenterTable.set(t,n),e._headLeftTable&&e._headLeftTable.set(t,n),e._headRightTable&&e._headRightTable.set(t,n)))},syncBodyViewProperty:function(e,t,n,r){ge.hasOwnProperty(t)&&(t=ge[t],ct(t)?(e._bodyCenterTable&&t(e,e._bodyCenterTable),e._bodyLeftTable&&t(e,e._bodyLeftTable),e._bodyRightTable&&t(e,e._bodyRightTable)):(e._bodyCenterTable&&e._bodyCenterTable.set(t,n),e._bodyLeftTable&&e._bodyLeftTable.set(t,n),e._bodyRightTable&&e._bodyRightTable.set(t,n)))},syncBodyHeadCheck:function(t){t._headCenterTable.onCheckChange(function(e){ye._syncBodyCheckFromHead(t)}),t._bodyCenterTable.onCheckChange(function(e){t._callBatch(function(){ye._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")}),t._bodyCenterTable.onModelChange(function(e){e=e.type;"set_provider"!==e&&"provider"!==e||t._callBatch(function(){ye._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")})},_syncHeadCheckFromBody:function(e){var t,n,r,i,o;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(t=e._columnProvider)||(t=t._checkColumn)&&(n=ye._isAllDataChecked(e),i=(r=ye._getCheckColumnTable(e)).isChecked(t),o=!0,n?i||(r.addCheck(t),o=!1):i&&(r.removeCheck(t),o=!1),o&&r._updateData(t)),delete e._$is_sync_body_head_check_columning)},_syncBodyCheckFromHead:function(e){var t,n;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(t=e._columnProvider)||(t=t._checkColumn)&&((n=e._headCenterTable).isChecked(t)?(e._bodyCenterTable.checkAll(),ye._isAllDataChecked(e)||n.removeCheck(t)):e._bodyCenterTable.clearCheck()),delete e._$is_sync_body_head_check_columning)},_isAllDataChecked:function(e){var t=e._bodyCenterTable.getDataArray(!1).length;return 0<t&&e._bodyCenterTable.getChecked(!1).length===t},_hasDataChecked:function(e){return 0<e._bodyCenterTable.getChecked(!1).length},_getCheckColumnTable:function(e){var t=e._columnProvider;if(t){var n,t=t._checkColumn;if(t)return(n=e._hasColumnFixed&&e._headLeftTable.isVisible(t)?e._headLeftTable:n)||e._hasColumnFixedRight&&e._headRightTable.isVisible(t)&&(n=e._headRightTable),n=n||e._headCenterTable}},syncColGroupUpdate:function(e,t){e.setCallBack("onColGroupChange",function(e){bt(function(){t._tableColGroup.innerHTML=e.innerHTML})})}},ve=function(e){var t=!1,n=!1;return e.toRootArray(!1).forEach(function(e){e=e.getProperty("fixed");!0===e||"left"===e?t=!0:"right"===e&&(n=!0)}),{fixed:t,fixed_right:n}};je(he,Hn,{add:function(e){he.superClass.add.apply(this,arguments),$t(e._vScrollbarDiv,"scroll",this.handleVScroll,this),$t(e._hScrollbarDiv,"scroll",this.handleHScroll,this),$t(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),$t(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),$t(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this)},remove:function(){var e=this._view;Xt(e._vScrollbarDiv,"scroll",this.handleVScroll,this),Xt(e._hScrollbarDiv,"scroll",this.handleHScroll,this),Xt(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),Xt(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),Xt(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this),he.superClass.remove.apply(this,arguments)},getViewDefaultTypes:function(){return["keydown","wheel"]},handle_keydown:function(e,t){var n,r=e.keyCode,i=t._vScrollbarDiv,i=(i.parentNode&&(n=i.scrollTop,38===r?i.scrollTop-=20:40===r?i.scrollTop+=20:33===r?i.scrollTop-=t._bodyDiv.clientHeight-3:34===r&&(i.scrollTop+=t._bodyDiv.clientHeight-3),38!==r&&40!==r&&33!==r&&34!==r||i.scrollTop!==n&&e.preventDefault()),t._hScrollbarDiv);i.parentNode&&(n=i.scrollLeft,37===r?i.scrollLeft-=20:39===r&&(i.scrollLeft+=20),37!==r&&39!==r||i.scrollLeft!==n&&e.preventDefault())},handle_wheel:function(e,t){var n=e.wheelDelta<0||0<e.deltaY||0<e.detail,r=t._vScrollbarDiv,t=t._hScrollbarDiv,i=e.target,o="v";"v"===(o=t.contains(i)?"h":o)?r.parentNode||(o=null):t.parentNode||(o=null),"v"===o?(i=r.scrollTop,n?r.scrollTop+=30:r.scrollTop-=30,r.scrollTop!==i&&e.preventDefault()):"h"===o&&(r=t.scrollLeft,n?t.scrollLeft+=20:t.scrollLeft-=20,t.scrollLeft!==r&&(e.preventDefault(),this._view._syncBodyHScroll()))},handleTouchStart:function(e){(this._view._hScrollbarDiv.parentNode||this._view._vScrollbarDiv.parentNode)&&(this._touchPoint=this._getTouchPoint(e))},handleTouchMove:function(e){var t,n;this._touchPoint&&(e.preventDefault(),t=(e=this._getTouchPoint(e)).x-this._touchPoint.x,n=e.y-this._touchPoint.y,nt(t)>nt(n)?this._view._hScrollbarDiv.parentNode&&(this._view._hScrollbarDiv.scrollLeft-=t):this._view._vScrollbarDiv.parentNode&&(this._view._vScrollbarDiv.scrollTop-=n),this._touchPoint=e)},handleTouchEnd:function(e){this._touchPoint=null},_getTouchPoint:function(e){e=e.touches[0];return{x:e.clientX,y:e.clientY}},handleVScroll:function(){this._view._syncBodyVScroll()},handleHScroll:function(){this._view._syncBodyHScroll()}});je(ue,In,Ge({__className_:"Grid",___zdefaults_:Ge({onresize:!0,overflow:"hidden",pageable:!1,hoverable:!1,selectable:!1,make_visible_on_select:!0},e(),n(),u()),_onViewChange:function(e,t,n){ue.superClass._onViewChange.apply(this,arguments),"pageable"!==e?("overflow"===e&&this._doViewOverflowUpdate(),ye.syncHeadViewProperty(this,e,t,n),ye.syncBodyViewProperty(this,e,t,n),this.update()):this._doViewPagerUpdate(e,t,n)},_doViewOverflowUpdate:function(){St(this.getRoot(),"overflow-scroll","scroll"===this.getProperty("overflow"))},makeVisible:function(e){var t;!e||(t=this._bodyCenterTable.getDataRendererElement(e))&&bt(function(){Mt.scrollIntoView(t,this._getScrollView()),this._syncVScrollByBody()},this)},_getScrollView:function(){return this._bodyDiv}},{_initGridView:function(){this._headDiv=Xe("div","head"),this._headLeftDiv=Xe("div","left"),this._headCenterDiv=Xe("div","center"),this._headRightDiv=Xe("div","right"),this._headDiv.appendChild(this._headCenterDiv),this._headDiv.appendChild(this._headLeftDiv),this._headDiv.appendChild(this._headRightDiv),this._bodyDiv=Xe("div","body"),this._bodyLeftDiv=Xe("div","left"),this._bodyCenterDiv=Xe("div","center"),this._bodyRightDiv=Xe("div","right"),this._bodyDiv.appendChild(this._bodyCenterDiv),this._bodyDiv.appendChild(this._bodyLeftDiv),this._bodyDiv.appendChild(this._bodyRightDiv),this._pagerDiv=Xe("div","pager"),this._vScrollbarHeightDiv=Xe("div"),this._vScrollbarDiv=Xe("div","v-scrollbar"),this._vScrollbarDiv.appendChild(this._vScrollbarHeightDiv),this._hScrollbarHeightDiv=Xe("div","scroll"),this._hScrollbarDiv=Xe("div","h-scrollbar"),this._hScrollbarDiv.appendChild(this._hScrollbarHeightDiv),this._headCenterTable=c.createCenterHeadView(this),this._headCenterTableRoot=this._headCenterTable.getRoot(),this._headCenterDiv.appendChild(this._headCenterTableRoot),this._bodyCenterTable=this._createBodyView(this._headCenterTable,!1),this._bodyCenterTableRoot=this._bodyCenterTable.getRoot(),this._bodyCenterDiv.appendChild(this._bodyCenterTableRoot),ye.syncBodyHeadCheck(this)},_initCenterTables:function(){c.initHeadViewShareProperty(this,this._headCenterTable),c.initBodyViewShareProperty(this,this._bodyCenterTable),ye.syncColGroupUpdate(this._headCenterTable,this._bodyCenterTable),ye.bubblingBodyEventToGrid(this)}},{_onProviderChange:function(){ue.superClass._onProviderChange.apply(this,arguments),this._bodyCenterTable.setProvider(this.getProvider()),this._hasColumnFixed&&this._bodyLeftTable.setProvider(this.getProvider()),this._hasColumnFixedRight&&this._bodyRightTable.setProvider(this.getProvider())},_updateBodyData:function(e){e&&(this._bodyCenterTable&&this._bodyCenterTable._updateData(e),this._bodyLeftTable&&this._bodyLeftTable._updateData(e),this._bodyRightTable&&this._bodyRightTable._updateData(e))},_updateBodyAllData:function(){this._bodyCenterTable&&this._bodyCenterTable._updateAllData(),this._bodyLeftTable&&this._bodyLeftTable._updateAllData(),this._bodyRightTable&&this._bodyRightTable._updateAllData()},_updateHeadColumn:function(e){e&&(this._headCenterTable&&this._headCenterTable._updateData(e),this._headLeftTable&&this._headLeftTable._updateData(e),this._headRightTable&&this._headRightTable._updateData(e))},update:function(e,t){!0!==t?(ue.superClass.update.apply(this,arguments),this._updateBody(e),this._headCenterTable&&this._headCenterTable.update(e),this._headLeftTable&&this._headLeftTable.update(e),this._headRightTable&&this._headRightTable.update(e)):this._updateBody(e)},_updateBody:function(e){this._bodyCenterTable&&this._bodyCenterTable.update(e),this._bodyLeftTable&&this._bodyLeftTable.update(e),this._bodyRightTable&&this._bodyRightTable.update(e)}},{_initDefaultColumns:function(){this._columnProvider=new Ye,this._headCenterTable.setProvider(this._columnProvider),this._addColumnProviderListener()},setColumns:function(e,t){st(e)||(e=[e]);e=An.parse(e),!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))}),t=new Ye;t.add(e),l.updateColumnSortIndex(t),this._setColumnProvider(t)},findColumn:function(e,t){return this._columnProvider.find.apply(this._columnProvider,arguments)},getColumnArray:function(e){return this._columnProvider.toArray.apply(this._columnProvider,arguments)},_beforeSetColumnProvider:function(e){e._checkColumn=e.find(function(e){return"check"===e.getProperty("type")&&!e.hasChildren()&&!e.getProperty("parent")})},_setColumnProvider:function(e){this._beforeSetColumnProvider(e),this._removeColumnProviderListener(),this._columnProvider=e,this._updateFixedColumns(),this._headCenterTable.setProvider(e),this._hasColumnFixed&&this._headLeftTable.setProvider(e),this._hasColumnFixedRight&&this._headRightTable.setProvider(e),this._addColumnProviderListener(),this._onColumnChange("set_provider"),this._sortBodyData()},_isCheckColumn:function(e){return!!e&&this._columnProvider._checkColumn===e},_hasCheckColumn:function(){return null!=this._columnProvider._checkColumn},_addColumnProviderListener:function(){this._columnProvider.addProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.addDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this)},_removeColumnProviderListener:function(){this._columnProvider&&(this._columnProvider.removeProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.removeDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this))},_handleColumnProviderChange:function(e){this._updateFixedColumns(),l.updateColumnSortIndex(this._columnProvider),this._onColumnChange("provider",e)},_handleColumnChange:function(e){var t=e.property;"fixed"===t?this._updateFixedColumns():"sort"===t&&this._onSortChange(),this._onColumnChange("data",e)},_handleColumnIndexChange:function(e){this._onModelChange("index",e)},_onColumnChange:function(e,t){this._callOn("onColumnChange","on.column.change",{type:e,event:t},[e,t])},onColumnChange:function(e,t){this.addListener("on.column.change",e,t)},_updateFixedColumns:function(){var e=this._columnProvider,e=ve(e);this._hasColumnFixed===e.fixed&&this._hasColumnFixedRight===e.fixed_right||(this._hasColumnFixed=e.fixed,this._hasColumnFixedRight=e.fixed_right,this._hasColumnFixed?this._createLeftTables():this._removeFixedTable(this._headLeftTable,this._bodyLeftTable),this._hasColumnFixedRight?this._createRightTables():this._removeFixedTable(this._headRightTable,this._bodyRightTable))},_createLeftTables:function(){this._headLeftTable||(this._headLeftTable=c.createFixedHeadView(this)),this._bodyLeftTable||(this._bodyLeftTable=this._createBodyView(this._headLeftTable),ye.syncColGroupUpdate(this._headLeftTable,this._bodyLeftTable));var e=this._headLeftTable.getRoot(),e=(e.parentNode||(this._headLeftDiv.appendChild(e),this._headLeftTable.setProvider(this._columnProvider)),this._bodyLeftTable.getRoot());e.parentNode||(this._bodyLeftDiv.appendChild(e),this._bodyLeftTable.setProvider(this.getProvider())),this._bodyLeftTable.set("sort_compare",this._getSortCompare())},_createRightTables:function(){this._headRightTable||(this._headRightTable=c.createFixedRightHeadView(this)),this._bodyRightTable||(this._bodyRightTable=this._createBodyView(this._headRightTable),ye.syncColGroupUpdate(this._headRightTable,this._bodyRightTable));var e=this._headRightTable.getRoot(),e=(e.parentNode||(this._headRightDiv.appendChild(e),this._headRightTable.setProvider(this._columnProvider)),this._bodyRightTable.getRoot());e.parentNode||(this._bodyRightDiv.appendChild(e),this._bodyRightTable.setProvider(this.getProvider())),this._bodyRightTable.set("sort_compare",this._getSortCompare())},_removeFixedTable:function(e,t){t&&(Bt(t.getRoot()),t.setProvider(new Ye)),e&&(Bt(e.getRoot()),e.setProvider(new Ye))},_createBodyView:function(e,t){return c.createBodyView(this,e,t)}},{_onSortChange:function(){this._callBatch(this._onSortBatchChange,"sort_batch_change__cb_")},_onSortBatchChange:function(){var e=this.getSortConfig();"custom"!==this.getProperty("sortable")&&this._sortBodyData(),this._callOn("onSortChange","on.column.sort.change",e,[e])},_sortBodyData:function(){var e=this._getSortCompare();this._hasColumnFixed&&this._bodyLeftTable.set("sort_compare",e),this._hasColumnFixedRight&&this._bodyRightTable.set("sort_compare",e),this._bodyCenterTable.set("sort_compare",e)},onSortChange:function(e,t){this.addListener("on.column.sort.change",e,t)},clearSort:function(){l.clearColumnSort(this._columnProvider)},getSortConfig:function(){var n,e=l.getSortedColumnArray(this._columnProvider);return 0<e.length?"multiple"===this.getProperty("sort_mode")?(n=[],e.forEach(function(e,t){n.push({field:e.getProperty("field"),order:l.getSortOrder(e.getProperty("sort")),index:t})}),n):((e=e[0]).getProperty("sort"),{field:e.getProperty("field"),order:l.getSortOrder(e.getProperty("sort"))}):null},_getSortCompare:function(){return l.getSortCompare(this,this._columnProvider)}},{_doViewPagerUpdate:function(){var e=this.getProperty("pageable");!0===e?this._addPager():We(e)?this._addPager(e):this._removePager()},_addPager:function(e){this._pager||(this._pager=new de,this._pagerDiv.appendChild(this._pager.getRoot()),this._pager.setCallBack("onPageChange",this._onPageChange,this),this._pager.setCallBack("onRefresh",this._onPageRefresh,this)),e&&this._pager.set(e)},_removePager:function(){this._pager&&(this._pager.resetCallBack("onPageChange"),this._pager.resetCallBack("onRefresh"),Nt(this._pagerDiv),this._pager=null)},_onPageChange:function(e){this._callOn("onPageChange","on.page.change",e,[e])},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onPageRefresh:function(e){this._callOn("onPageRefresh","on.page.refresh",e,[e])},onPageRefresh:function(e,t){this.addListener("on.page.refresh",e,t)},getPagination:function(){return this._pager},getPageConfig:function(){if(this._pager)return this._pager.getPageConfig()}},{_onColumnUpdate:function(){this._callBatch(this._doColumnUpdateSync,"_do_column_update_sync_cb_")},_doColumnUpdateSync:function(){this._syncHeadRowHeight(),this._bodyCenterTable.update(),this._hasColumnFixed&&this._bodyLeftTable.update(),this._hasColumnFixedRight&&this._bodyRightTable.update()},_onBodyUpdate:function(){this._callBatch(this._doBodyUpdateSync,"_do_body_update_sync_cb_")},_doBodyUpdateSync:function(){this._updateLayout(),this._syncBodyRowHeight()},_doResizeUpdate:function(){ue.superClass._doResizeUpdate.apply(this,arguments),this._syncHeadRowHeight(),this._syncBodyRowHeight(),this._updateLayout()},_updateLayout:function(){var e=this.getRootSize();e.height<=0||e.width<=0||(this._updateFixedLayout(),this._updateFixedRightLayout(),this._updateScrollbar())},_updateScrollbar:function(){var e=this.getRoot(),t=this.getRootSize(),n=t.height,r=c.getOffsetHeight(this._headDiv),i=c.getOffsetHeight(this._pagerDiv),n=ot(n-r-i),i=t.width,t=this._headCenterDiv.scrollWidth,o=1<t-i,a=(o&&(this._hScrollbarDiv.parentNode||e.insertBefore(this._hScrollbarDiv,this._pagerDiv),n-=c.getOffsetHeight(this._hScrollbarDiv)),$e(this._bodyDiv,"margin-top",r+"px"),!1);"scroll"===this.getProperty("overflow")&&(1<nt(n-c.getOffsetHeight(this._bodyDiv))&&$e(this._bodyDiv,"height",n+"px"),a=c.getOffsetHeight(this._bodyCenterDiv)>n),a?(this._vScrollbarDiv.parentNode||e.appendChild(this._vScrollbarDiv),i-=this._vScrollbarDiv.offsetWidth-1,$e(this._vScrollbarDiv,"height",n+r+"px"),$e(this._vScrollbarHeightDiv,"height",this._bodyDiv.scrollHeight+r+"px"),$e(this._headDiv,"width",i+"px"),$e(this._bodyDiv,"width",i+"px"),this._syncVScrollByBody()):(Bt(this._vScrollbarDiv),Et(this._headDiv,"width"),Et(this._bodyDiv,"width")),o?($e(this._hScrollbarDiv,"width",i+"px"),$e(this._hScrollbarHeightDiv,"width",t+"px")):Bt(this._hScrollbarDiv)},_updateFixedLayout:function(){var e,t=0;this._hasColumnFixed&&(e=t=this._headLeftTable._getColGroupWidth(),0<t&&(e+=1),$e(this._headLeftDiv,"width",e+"px"),$e(this._bodyLeftDiv,"width",e+"px")),$e(this._headCenterTableRoot,"padding-left",t+"px"),$e(this._bodyCenterTableRoot,"padding-left",t+"px")},_updateFixedRightLayout:function(){var e,t=0;this._hasColumnFixedRight&&(e=t=this._headRightTable._getColGroupWidth(),0<t&&(e+=1),$e(this._headRightDiv,"width",e+"px"),$e(this._bodyRightDiv,"width",e+"px")),$e(this._headCenterTableRoot,"padding-right",t+"px"),$e(this._bodyCenterTableRoot,"padding-right",t+"px")},_syncHeadRowHeight:function(){var n,e=[this._headCenterTable];this._hasColumnFixed&&e.push(this._headLeftTable),this._hasColumnFixedRight&&e.push(this._headRightTable),e.forEach(function(e){e.getRowTRArray().forEach(function(e){Et(e,"height")})}),1<e.length&&(n=[],e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){n[t]=rt(0|n[t],e.offsetHeight+1)})}),e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){$e(e,"height",n[t]+"px")})}))},_syncBodyRowHeight:function(){var n,e=[this._bodyCenterTable],r=(this._hasColumnFixed&&e.push(this._bodyLeftTable),this._hasColumnFixedRight&&e.push(this._bodyRightTable),[]);e.forEach(function(e,t){e=Rt("tr[__z_did_]",e._tableBody);(r[t]=e).forEach(function(e){Et(e,"height")})}),1<e.length&&(n=[],r.forEach(function(e){e.forEach(function(e,t){n[t]=rt(0|n[t],e.offsetHeight+1)})}),r.forEach(function(e){e.forEach(function(e,t){$e(e,"height",n[t]+"px")})}))}},{_syncBodyVScroll:function(){this._bodyDiv.scrollTop=this._vScrollbarDiv.scrollTop},_syncBodyHScroll:function(){this._headCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft,this._bodyCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft},_syncVScrollByBody:function(){this._vScrollbarDiv.scrollTop=this._bodyDiv.scrollTop}},{_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return oe(e,t)}},{getDataAt:function(e){var t,e=qt.getEventTarget(e,"[__z_did_]");return e?(t=e.getAttribute("__z_did_"),pt(this.getDataArray(!1),function(e){return e.id()===t})):null}},Vn(ue),{_onHoverChange:function(e,t){this._updateBodyData(e),this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])}},{check:function(e,t){return this._bodyCenterTable.check.apply(this._bodyCenterTable,arguments)},uncheck:function(e){return this._bodyCenterTable.uncheck.apply(this._bodyCenterTable,arguments)},addCheck:function(e){return this._bodyCenterTable.addCheck.apply(this._bodyCenterTable,arguments)},removeCheck:function(e){return this._bodyCenterTable.removeCheck.apply(this._bodyCenterTable,arguments)},clearCheck:function(){return this._bodyCenterTable.clearCheck.apply(this._bodyCenterTable,arguments)},setCheck:function(e){return this._bodyCenterTable.setCheck.apply(this._bodyCenterTable,arguments)},checkAll:function(e){return this._bodyCenterTable.checkAll.apply(this._bodyCenterTable,arguments)},toggleCheck:function(e){return this._bodyCenterTable.toggleCheck.apply(this._bodyCenterTable,arguments)},getChecked:function(e){return this._bodyCenterTable.getChecked.apply(this._bodyCenterTable,arguments)},isChecked:function(e){return this._bodyCenterTable.isChecked.apply(this._bodyCenterTable,arguments)},isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_onCheckChange:function(e){this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)}},{isSelectable:function(e){return!0===this.getDataViewProperty(e,"selectable")},select:function(e,t){return this._bodyCenterTable.select.apply(this._bodyCenterTable,arguments)},unselect:function(e){return this._bodyCenterTable.unselect.apply(this._bodyCenterTable,arguments)},addSelect:function(e){return this._bodyCenterTable.addSelect.apply(this._bodyCenterTable,arguments)},removeSelect:function(e){return this._bodyCenterTable.removeSelect.apply(this._bodyCenterTable,arguments)},clearSelect:function(){return this._bodyCenterTable.clearSelect.apply(this._bodyCenterTable,arguments)},setSelect:function(e){return this._bodyCenterTable.setSelect.apply(this._bodyCenterTable,arguments)},selectAll:function(e){return this._bodyCenterTable.selectAll.apply(this._bodyCenterTable,arguments)},getSelected:function(e){return this._bodyCenterTable.getSelected.apply(this._bodyCenterTable,arguments)},getLastSelected:function(){return this._bodyCenterTable.getLastSelected.apply(this._bodyCenterTable,arguments)},isSelected:function(e){return this._bodyCenterTable.isSelected.apply(this._bodyCenterTable,arguments)},_onSelectChange:function(e){this._callOn("onSelectChange","on.select.change",e,[e])},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(e){this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)}},{}));function Ce(){return this instanceof Ce?Ot.isElement(e=arguments[0])?f.parseView("zw-treegrid",e):(Ce.superClass.constructor.apply(this,arguments),Ae(this),void Dt(this.getRoot(),"z-treegrid")):vt.createInstance(Ce,arguments);var e}function me(){me.superClass.constructor.apply(this,arguments)}function be(){be.superClass.constructor.apply(this,arguments)}function xe(){return this instanceof xe?Ot.isElement(e=arguments[0])?f.parseView("zw-menu",e):(xe.superClass.constructor.apply(this,arguments),Dt(this.getRoot(),"z-menu"),this._ToggleModeClass(),void this.addController(new me)):vt.createInstance(xe,arguments);var e}function we(){we.superClass.constructor.apply(this,arguments)}function Pe(){this._headerDiv=Xe("div","header "),this._bodyDiv=Xe("div","body"),this._closeWrapper=Xe("span","close"),Pe.superClass.constructor.apply(this,arguments);var e=this.getRoot();O.addWidgetClass(e),Dt(e,"popup"),e.appendChild(this._headerDiv),e.appendChild(this._bodyDiv),this.addController(new we)}function Re(){Re.superClass.constructor.apply(this,arguments);var e=this.getRoot();this._arrowDiv=Xe("div","arrow"),e.insertBefore(this._arrowDiv,e.firstElementChild)}var De=function(t,e,n){var r=new J(Ge(c.getBodyOverridingMethods(t),{isTreeColumn:function(e){return t._isTreeColumn(e)},hasChildrenVisible:function(e){return t.hasChildrenVisible?t.hasChildrenVisible(e):J.prototype.hasChildrenVisible.apply(this,arguments)}}));return c._onBodyViewChange(t,r),!1!==n&&c.initBodyViewShareProperty(t,r),r.setTableHead(e),r},Ae=function(t){var e=t._bodyCenterTable;e.onExpand(function(e){t._onExpandAdd.apply(t,arguments)}),e.onCollapse(function(e){t._onExpandRemove.apply(t,arguments)}),e.onCollapseAll(function(e){t._onExpandClear.apply(t,arguments)}),e.onExpandSet(function(e){t._onExpandSet.apply(t,arguments)}),e.onExpandChange(function(e){t._onExpandChange.apply(t,arguments)})},ke=(je(Ce,ue,{__className_:"TreeGrid",___zdefaults_:Ge(t()),_createBodyView:function(e,t){return De(this,e,t)},_beforeSetColumnProvider:function(e){Ce.superClass._beforeSetColumnProvider.apply(this,arguments);var t=(t=e.find(function(e){return!0===e.getProperty("tree")&&!e.hasChildren()}))||((t=e._checkColumn)||e.find(function(e){return!e.hasChildren()}));e._treeColumn=t},_isTreeColumn:function(e){return!!e&&this._columnProvider._treeColumn===e},makeVisible:function(e){e&&(Rn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),Ce.superClass.makeVisible.apply(this,arguments))},getExpanded:function(e){return this._bodyCenterTable.getExpanded.apply(this._bodyCenterTable,arguments)},expand:function(e){return this._bodyCenterTable.expand.apply(this._bodyCenterTable,arguments)},collapse:function(e){return this._bodyCenterTable.collapse.apply(this._bodyCenterTable,arguments)},expandAll:function(e){return this._bodyCenterTable.expandAll.apply(this._bodyCenterTable,arguments)},collapseAll:function(){return this._bodyCenterTable.collapseAll.apply(this._bodyCenterTable,arguments)},toggleExpand:function(e){return this._bodyCenterTable.toggleExpand.apply(this._bodyCenterTable,arguments)},isExpanded:function(e){return this._bodyCenterTable.isExpanded.apply(this._bodyCenterTable,arguments)},_onExpandAdd:function(e){this._callOn("onExpand","on.expand.add",e,[e])},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)}}),{ROOT_POP_DIRECTION_MAP:{down:"down_right",down_right:"down_right",down_left:"down_left",up:"up_right",up_right:"up_right",up_left:"up_left",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"down_right"},SUB_POP_DIRECTION_MAP:{down:"right_down",down_right:"right_down",down_left:"left_down",up:"right_up",up_right:"right_up",up_left:"left_up",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"right_down"},getPopDirection:function(e,t){var n=null==(n=e.getProperty("direction"))?e._isVertical()?"right":"bottom":n.toLowerCase();return ke.isRootMenu(t)?ke.ROOT_POP_DIRECTION_MAP[n]||ke.ROOT_POP_DIRECTION_MAP.default:ke.SUB_POP_DIRECTION_MAP[n]||ke.SUB_POP_DIRECTION_MAP.default},isRootMenu:function(e){return null==e.getProperty("parent")},getMenuExpandExpandedTemplate:function(e){if(ke.isRootMenu(data))return view._renderConfig.root}}),d=(je(me,Hn,{getViewDefaultTypes:function(){return["blur","click"]},handle_blur:function(){"debug"!==h.focus_ui_mode&&this.getView().collapseAll()},handle_click:function(e,t){t.getDataAt(e)||(t.collapseAll(),t._setHoverData(null,!0,e))},add:function(e){me.superClass.add.apply(this,arguments),this.getView().getRoot().setAttribute("tabindex",0)},remove:function(){this.getView().getRoot().removeAttribute("tabindex"),me.superClass.remove.apply(this,arguments)}}),je(be,j,{updateRenderConfig:function(e,t,n){e.isDivider(t)?n.divider=!0:(be.superClass.updateRenderConfig.apply(this,arguments),this._updateMenuRenderConfig(e,t,n))},_updateMenuRenderConfig:function(e,t,n){var r=ke.isRootMenu(t);n.root_menu=r,!0===this.getRenderConfig("has_children")&&(n.pop_direction=ke.getPopDirection(e,t),r&&(n.expand_icon_visible=!0===e.getDataViewProperty(t,"expand_icon_visible","root_expand_icon_visible")))},updateRenderer:function(e,t,n){var r=!0===this.getRenderConfig("divider");St(this._renderer,"divider",r),r||(be.superClass.updateRenderer.apply(this,arguments),At(this._renderer,"down_right down_left up_right up_left right_down right_up left_down left_up"),(r=this.getRenderConfig("pop_direction"))&&Dt(this._renderer,r),St(this._renderer,!0===this.getRenderConfig("root_menu")&&!0===this.getRenderConfig("expand_icon_visible")))},_getExpandTemplate:function(){var e,t,n=!0===this.getRenderConfig("expanded");return!0===this.getRenderConfig("root_menu")?(t=n?this.getViewRenderConfig("root_expand_expanded_icon_template"):this.getViewRenderConfig("root_expand_collapsed_icon_template"))||(e=this.getRenderConfig("pop_direction"))&&(t=this.getViewRenderConfig("expand_"+e.split("_")[0]+"_icon_template")):t=(t=n?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template"))||this.getViewRenderConfig("expand_right_icon_template"),t}}),je(xe,P,Ge({__className_:"Menu",___zdefaults_:{selectable:!1,expand_on_click:!1,accordion:!0,hoverable:!0,three_states_check:!1,check_on_click:!0,hover_delay:200,mode:"horizontal",direction:null,root_expand_icon_visible:!1,root_expand_expanded_icon_template:null,root_expand_collapsed_icon_template:null,expand_icon_visible:!0,expand_expanded_icon_template:null,expand_collapsed_icon_template:null,expand_up_icon_template:S,expand_down_icon_template:T,expand_left_icon_template:A,expand_right_icon_template:k,open_on_hover:!1,close_on_click:!0},_displayToResize:function(){xe.superClass._displayToResize.apply(this,arguments);var e=this.getRoot().parentNode;e&&$e(e,"overflow","visible")},_onViewChange:function(e,t,n){xe.superClass._onViewChange.apply(this,arguments),this._doMenuViewUpdate(e)},_doMenuViewUpdate:function(e,t,n){"mode"===e&&this._ToggleModeClass()},_ToggleModeClass:function(){St(this.getRoot(),"horizontal",!this._isVertical()),St(this.getRoot(),"vertical",this._isVertical())},_isVertical:function(){return"vertical"===this.getProperty("mode")},_onExpandChange:function(){xe.superClass._onExpandChange.apply(this,arguments),this._hasExpanded()&&this.getRoot().focus({preventScroll:!0})},_setHoverData:function(){var e=this._hoverData,t=(xe.superClass._setHoverData.apply(this,arguments),this._hoverData);e!==t&&this._handleExpandByHover(e,t)},_handleExpandByHover:function(e,t){var n,r;t?(n=ke.isRootMenu(t),r=this._hasExpanded(),e&&this.isExpanded(e)&&!Rn.isDescendantOf(t,e)&&(!n||!ke.isRootMenu(e)||this.isExpandable(t)&&this._hasDescendantVisible(t)||!1!==this.getProperty("open_on_hover"))&&this.collapse(e),n&&!r&&!1===this.getProperty("open_on_hover")||this._expandByHover(t)):e&&this.isExpanded(e)&&(ke.isRootMenu(e)&&!1===this.getProperty("open_on_hover")||this.collapse(e))},_expandByHover:function(e){var t;this.isExpandable(e)&&this._hasDescendantVisible(e)&&(t=this.getProperty("hover_delay"),!ke.isRootMenu(e)&&0<t?mt(function(){this._hoverData&&this.expand(this._hoverData)},t,this):this.expand(e))},_onDataClick:function(e,t){ke.isRootMenu(e)?this._isExpandable(e)?this.toggleExpand(e):this.collapseAll():!1===this.getProperty("close_on_click")||this.hasChildrenVisible(e)||this.collapseAll(),this.hasChildrenVisible(e)||this._onMenuItemClick(e,t),xe.superClass._onDataClick.apply(this,arguments)},_onMenuItemClick:function(e,t){this._callOn("onMenuItemClick","on.menu.item.click",{data:e,event:t},[e,t])},onMenuItemClick:function(e,t){this.addListener("on.menu.item.click",e,t)},_hasExpanded:function(){return 0<this._expandProvider.size()},getDataRendererClass:function(e){return be},isDivider:function(e){return!0===e.getProperty("divider")}},{_isAccordion:function(){return!0},_isDisabled:function(e){return this.isDivider(e)||this.isDisabled(e)},makeVisible:function(){}})),{_CachedPopUpViewMap:{},addCacheView:function(e){var t=e.getClassName(),n=d._CachedPopUpViewMap[t];n||(d._CachedPopUpViewMap[t]=n=[]),n.push(e)},removeCacheView:function(e){var t=e.getClassName(),t=d._CachedPopUpViewMap[t];t&&ft(t,e)},closeAll:function(e){ht([],d._CachedPopUpViewMap[e]).forEach(function(e){e.close()})},z_index:1e4,open:function(e,t){d.addCacheView(e),this.completeAnimations(e);var n=e.getRoot(),r=(e._beforeOpen(),Lt(n,"opacity"));$e(n,"opacity",0),$e(n,"left","-10100px"),d.resetStaticPosition(t),t.appendChild(n),bt(function(){d.startAnimations(e),$e(n,"opacity",r),"-10100px"===Lt(n,"left")&&Et(n,"left"),e._onOpen()})},_getAnimationEle:function(e){var t=e._bodyDiv;return t&&t.parentNode?e.getRoot():e._getContentEle()},completeAnimations:function(e){H(d._getAnimationEle(e)),H(e._maskDiv)},startAnimations:function(t,n){d._startMaskAnimations(t,n);var e,r,i=d._getAnimationEle(t);i&&(e=!0===n?t.getProperty("close_animation"):t.getProperty("open_animation"),(r=t.getRoot()).scrollLeft=0,r.scrollTop=0,U(i,e,function(){var e;!0===n&&(!0!==t.getProperty("release_on_close")||(e=t._currentContentObj)&&r.contains(e.contentEle)&&a.releaseContent(e),Bt(r))}))},_startMaskAnimations:function(e,t){var n=e._maskDiv;n&&(e=!0===t?e.getProperty("mask_close_animation"):e.getProperty("mask_open_animation"),U(n,e,function(){!0===t&&Bt(n)}))},isOpen:function(e){return e&&e.getRoot().parentNode&&Tt(e.getRoot(),"open")},close:function(e){var t=e.beforeClose();!1!==t&&(h.event&&e instanceof Ue&&h.event.stopImmediatePropagation(),ct(t)?t(function(){d._doClose(e)}):d._doClose(e))},_doClose:function(e){d.removeCacheView(e),this.completeAnimations(e),d.startAnimations(e,!0),e._beforeClose(),e._onClose(),e._afterClose()},setPosition:function(n,r){Et(n,"left"),["left","right","top","bottom"].forEach(function(e){var t=r[e];null!=t?$e(n,e,t+"px"):Et(n,e)})},resetStaticPosition:function(e){"static"===Lt(e,"position")&&$e(e,"position","relative")},addDismissListener:function(e,t,n){e&&Rt(Wt("data-dismiss",n),e).forEach(function(e){$t(e,"click",t.close,t)})},removeDismissListener:function(e,t,n){e&&Rt(Wt("data-dismiss",n),e).forEach(function(e){Xt(e,"click",t.close,t)})}}),g={DIRECTION_CLASS_MAP:{right:"to-right",right_down:"to-right-down",right_up:"to-right-up",left:"to-left",left_down:"to-left-down",left_up:"to-left-up",up:"to-up",up_right:"to-up-right",up_left:"to-up-left",down:"to-down",down_right:"to-down-right",down_left:"to-down-left"},POSITION_CLASS_MAP:{top_right:"top-right",top_left:"top-left",bottom_right:"bottom-right",bottom_left:"bottom-left",center:"center"},POSITION_DIRECTION_MAP:{top_left:"down",top_right:"down",bottom_left:"up",bottom_right:"up"},setDirectionClass:function(e,t,n){At(e,g.ALL_DIRECTION_CLASS),Dt(e,g.DIRECTION_CLASS_MAP[t]||n)},setPositionClass:function(e,t,n){At(e,g.ALL_POSITION_CLASS),Dt(e,g.POSITION_CLASS_MAP[t]||n)},getScreenCenterDirection:function(e){e=qt.isPointerEvent(e)?(t=(n=It.getEventWindowOffset(e)).x,n.y):Se.isRect(e)?(t=e.x+e.width/2,e.y+e.height/2):Se.isPoint(e)?(t=e.x,e.y):(t=(n=e.getBoundingClientRect()).left+n.width/2,n.top+n.height/2);var t,n=It.getWindowSize(),r=n.width,n=n.height;return t<r/3?e<n/3?"right_down":2*n/3<e?"right_up":"right":2*r/3<t?e<n/3?"left_down":2*n/3<e?"left_up":"left":!(e<n/3)&&2*n/3<e?"up":"down"},getStackPosition:function(e,t,n,r,i,o,a){switch(r){case"top_left":return g._getTopLeftStackPosition(e,t,n,i,o,a);case"bottom_left":return g._getBottomLeftStackPosition(e,t,n,i,o,a);case"bottom_right":return g._getBottomRightStackPosition(e,t,n,i,o,a);default:return g._getTopRightStackPosition(e,t,n,i,o,a)}},_getTopRightStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("top_right",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Rt("."+e+".top-right."+a,n):Rt("."+e+".top-right."+a),e=n[n.length-1];if(!e)return{top:i,right:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|et(Lt(e,"top")),u=0|et(Lt(e,"right")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u+_+o;break;case"right":s=c,l=u-o-d;break;case"up":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{top:s,right:l}},_getBottomRightStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("bottom_right",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Rt("."+e+".bottom-right."+a,n):Rt("."+e+".bottom-right."+a),e=n[n.length-1];if(!e)return{bottom:i,right:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|et(Lt(e,"bottom")),u=0|et(Lt(e,"right")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u+_+o;break;case"right":s=c,l=u-o-d;break;case"down":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{bottom:s,right:l}},_getTopLeftStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("top_left",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Rt("."+e+".top-left."+a,n):Rt("."+e+".top-left."+a),e=n[n.length-1];if(!e)return{top:i,left:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|et(Lt(e,"top")),u=0|et(Lt(e,"left")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u-d-o;break;case"right":s=c,l=u+_+o;break;case"up":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{top:s,left:l}},_getBottomLeftStackPosition:function(e,t,n,r,i,o){r=g.getPositionDirection("bottom_left",r);var a=g.DIRECTION_CLASS_MAP[r],n=n?Rt("."+e+".bottom-left."+a,n):Rt("."+e+".bottom-left."+a),e=n[n.length-1];if(!e)return{bottom:i,left:i};var s,l,d=t.offsetWidth,h=t.offsetHeight,c=0|et(Lt(e,"bottom")),u=0|et(Lt(e,"left")),_=e.offsetWidth,p=e.offsetHeight;switch(r){case"left":s=c,l=u-d-o;break;case"right":s=c,l=u+o+_;break;case"down":s=c-o-h,l=i;break;default:s=c+p+o,l=i}return{bottom:s,left:l}},getPositionDirection:function(e,t){return t||g.POSITION_DIRECTION_MAP[e]||"down"}},Se=(g.ALL_DIRECTION_CLASS=yt(g.DIRECTION_CLASS_MAP).join(" "),g.ALL_POSITION_CLASS=yt(g.POSITION_CLASS_MAP).join(" "),{isRect:function(e){return!!We(e)&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height"))},isPoint:function(e){return!!We(e)&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y"))},hostPopup:function(e,t,n,r){r=Ge({},a.getLabelContent(r));var i=a.getContentElement(r.content),o=(i&&!r.hasOwnProperty("release_on_close")&&(r.release_on_close=!0),new e(r));return bt(function(){o.open(n)}),i&&(d.addDismissListener(i,o,t),o._afterClose=function(){d.removeDismissListener(i,o,t)}),o},open:function(e,t,n,r,i){"screen_center"===r&&(r=g.getScreenCenterDirection(n)),g.setDirectionClass(t,r,"to-top");var o=Qe.body;d.open(e,o),Se._positionOnHost(o,t,n,r,i)},_positionOnHost:function(d,h,e,u,_){var t,n,r,i=0,p=0,o=(qt.isPointerEvent(e)?t=It.getEventPageOffset(e):Se.isRect(e)?(!0===e.scroll?t={x:e.x,y:e.y}:((t=It.getWindowPageOffset()).x+=e.x,t.y+=e.y),i=e.width,p=e.height):Se.isPoint(e)?!0===e.scroll?t={x:e.x,y:e.y}:((t=It.getWindowPageOffset()).x+=e.x,t.y+=e.y):(t=It.getElementPageOffset(e),i=e.offsetWidth,p=e.offsetHeight),t.x),a=t.y,f=h.offsetWidth,g=h.offsetHeight,s=0,l=0,c=We(_),l=c?(s=0|_.x,0|_.y):s=0|_;switch(u){case"right":r=a+p/2-g/2,n=o+i,c||(l=0);break;case"right_down":r=a,n=o+i,c||(l=0);break;case"right_up":r=a+p-g,n=o+i,c||(l=0);break;case"left":r=a+p/2-g/2,n=o-f,c||(l=0,s=-s);break;case"left_down":r=a,n=o-f,c||(l=0,s=-s);break;case"left_up":r=a+p-g,n=o-f,c||(l=0,s=-s);break;case"up_right":r=a-g,n=o,c||(s=0,l=-l);break;case"up_left":r=a-g,n=o+i-f,c||(s=0,l=-l);break;case"down":r=a+p,n=o+i/2-f/2,c||(s=0);break;case"down_right":r=a+p,n=o,c||(s=0);break;case"down_left":r=a+p,n=o+i-f,c||(s=0);break;default:r=a-g,n=o+i/2-f/2,c||(s=0,l=-l)}e=It.getElementPageOffset(d);$e(h,"left",n+s-e.x+"px"),$e(h,"top",r+l-e.y+"px")}}),i=(je(we,Hn,{add:function(e){we.superClass.add.apply(this,arguments),$t(e._closeWrapper,"click",this.handleCloseClick,this)},remove:function(){Xt(this._view._closeWrapper,"click",this.handleCloseClick,this),we.superClass.remove.apply(this,arguments)},handleCloseClick:function(e){e.stopPropagation(),this.getView().close()},getViewDefaultTypes:function(){return!0===this.getView().getProperty("close_on_press_escape")?["click","keydown"]:["click"]},handle_keydown:function(e,t){d.isOpen(t)&&27===e.keyCode&&!0===t.getProperty("close_on_press_escape")&&t.close()},handle_click:function(e,t){d.isOpen(t)&&(!0===t.getProperty("close_on_click")&&(e.stopPropagation(),t.close()),Ht(e.target)||e.stopPropagation())},getWindowDefaultTypes:function(){var e=[];return!0===this.getView().getProperty("close_on_click_outside")&&e.push("click"),!0===this.getView().getProperty("close_on_window_blur")&&e.push("blur"),e},handle_window_click:function(e,t){if(!0===t.getProperty("close_on_click_outside")&&d.isOpen(t)){var n=t.getRoot();if(!Pt(".z-widget.popup.open",n)){e=e.target;if(!n.contains(e)||e===t._maskDiv){if(Tt(n,"z-modal")){if(Pt(".z-widget.popup.open:not(.z-modal)"))return;e=Pt(".z-widget.popup.open.z-message-box");if(null!=e&&e!==n)return}t.close()}}}},handle_window_blur:function(e,t){d.isOpen(t)&&"debug"!==h.focus_ui_mode&&t.close()}}),je(Pe,zn,Ge({___zdefaults_:{close_icon_visible:!1,close_icon_template:r.remove,close_on_click:!1,mask_visible:!1,release_on_close:!1,close_on_click_outside:!1,close_on_window_blur:!1,close_on_press_escape:!1,auto_focus:!0,open_animation:null,close_animation:null,mask_open_animation:"z-animation-fadeIn",mask_close_animation:"z-animation-fadeOut"},_appendToUpdate:function(){},open:function(){},_beforeOpen:function(){this._initPopUpView()},_onOpen:function(){Dt(this.getRoot(),"open"),this._callOn("onOpen","on.open",{type:"open"},[])},onOpen:function(e,t){this.addListener("on.open",e,t)},close:function(){d.close(this)},beforeClose:function(){},_beforeClose:function(){At(this.getRoot(),"open")},_onClose:function(){this._callOn("onClose","on.close",{type:"close"},[])},_afterClose:function(){},onClose:function(e,t){this.addListener("on.close",e,t)},isOpen:function(){return d.isOpen(this)},getContentContainer:function(){return this._bodyDiv}},{_initPopUpView:function(){this._initPopUpTitle(),this._initPopUpMask(),this._initPopUpCloseIcon(),this._setPopUpContent()},_initPopUpTitle:function(){var e=this.getProperty("title");this._headerDiv.innerHTML=null==e?"":e},_initPopUpMask:function(){var e;!0===this.getProperty("mask_visible")?(this._maskDiv||(this._maskDiv=Xe("div","mask")),(e=this.getRoot()).insertBefore(this._maskDiv,e.firstChild)):this._maskDiv&&Bt(this._maskDiv)},_initPopUpCloseIcon:function(){!0===this.getProperty("close_icon_visible")?(this._closeWrapper.innerHTML=this.getProperty("close_icon_template"),this.getRoot().appendChild(this._closeWrapper)):Bt(this._closeWrapper)},_setPopUpContent:function(){var e,t=a.getContentObject(this.getProperty("content"));t&&(this.setCurrentContent(t,!0),t=this.getRoot(),(e=pt(Rt("[autofocus]",t),function(e){return!1===e.disabled}))?Ze.dom.focus(e,{preventScroll:!0}):!0===this.getProperty("auto_focus")&&Ze.dom.focus(t,{preventScroll:!0}))},_getContentEle:function(){return this._currentContentObj?this._currentContentObj.contentEle:null}},_())),je(Re,Pe,{___zdefaults_:{delay:0,direction:"right",offset:2,close_on_click_outside:!0,close_on_window_blur:!0,auto_focus:!1,open_animation:"z-animation-fadeIn",close_animation:"z-animation-fadeOut"},open:function(e){var t,n,r,i;this._cancelLater(),(e=qt.isPointerEvent(e)||Se.isRect(e)||Se.isPoint(e)?e:qe(e))&&(t=this.getRoot(),n=this.getProperty("delay"),We(n)?n=0|n.open:n|=0,r=this.getProperty("direction"),i=this.getProperty("offset"),0<n?this._laterID=mt(function(){Se.open(this,t,e,r,i)},n,this):Se.open(this,t,e,r,i))},_onOpen:function(){this._laterID=null,Re.superClass._onOpen.apply(this,arguments)},close:function(){this._cancelLater();var e=this.getProperty("delay");We(e)?e=0|e.close:e|=0,0<e?this._laterID=mt(function(){d.close(this)},e,this):d.close(this)},_onClose:function(){this._laterID=null,Re.superClass._onClose.apply(this,arguments)},_cancelLater:function(){this._laterID&&(Ct.cancelCallLater(this._laterID),this._laterID=null)}}),{TRIGGER_EVENT:{hover:{open:"mouseenter",close:"mouseleave"},focus:{open:"focus",close:"blur"},click:{open:"click",close:"click"}},getTriggerEvent:function(e,t){return i.TRIGGER_EVENT[e]||i.TRIGGER_EVENT[t]},clearToggleTrigger:function(e,t){i._removeToggleTrigger(e,t),i._removeToggleTrigger(e,t,"close")},_removeToggleTrigger:function(e,t,n){e="_$z_toggle_"+e,n&&(e+="_"+n),n=t[e];n&&(Xt(t,n.trigger,n.listener),delete t[e])},onTrigger:function(e,t,n,r,i){$t(t,n,r);e="_$z_toggle_"+e;i&&(e+="_"+i),t[e]={trigger:n,listener:r}},getToggleItems:function(e,t){var n;if(0<t.length){if(!(n=Pt(t[0])))return}else n=Qe.body;t=Rt(Wt("data-toggle",e="zw-"+e),n);return n.getAttribute("data-toggle")===e&&t.unshift(n),t}}),Te={tooltip:function(e,t){return Se.hostPopup(Le,"tooltip",e,t)},close:function(){d.closeAll("Tooltip")},tooltipOn:function(e,t,n){(e=qe(e))&&Te._tooltipOn(e,t,n)},toggleInit:function(e){i.getToggleItems("tooltip",arguments).forEach(function(e){Te._tooltipOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_tooltipOn:function(e,t,n){i.clearToggleTrigger("tooltip",e);var r,t=i.getTriggerEvent(t,"hover");i.onTrigger("tooltip",e,t.open,function(){d.isOpen(r)||(r=Te._openTooltip(e,r))}),!1!==n&&i.onTrigger("tooltip",e,t.close,function(){r&&r.close()},"close")},_openTooltip:function(e,t){var n=Te._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new Le).set(n),bt(function(){t.open(e)}),r&&d.addDismissListener(a.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t,n;return e.hasAttribute("data-content")?t=e.getAttribute("data-content"):(t=e.getAttribute("title"))?(e._tooltip_title=t,e.removeAttribute("title")):t=e._tooltip_title,t?(e.hasAttribute("data-open-delay")&&(n={open:0|e.getAttribute("data-open-delay")}),e.hasAttribute("data-close-delay")&&(n?n.close=0|e.getAttribute("data-close-delay"):n={open:0|e.getAttribute("data-close-delay")}),n=n||0|e.getAttribute("data-delay"),{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",delay:n,offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click")}):null}},Le=function(){if(!(this instanceof Le))return vt.createInstance(Le,arguments);Le.superClass.constructor.apply(this,arguments),Dt(this.getRoot(),"z-tooltip")},Ee=(je(Le,Re,{__className_:"Tooltip"}),{popover:function(e,t){return Se.hostPopup(Ve,"popover",e,t)},close:function(){d.closeAll("Popover")},popoverOn:function(e,t,n){(e=qe(e))&&Ee._popoverOn(e,t,n)},toggleInit:function(e){i.getToggleItems("popover",arguments).forEach(function(e){Ee._popoverOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_popoverOn:function(e,t,n){i.clearToggleTrigger("popover",e);var r,t=i.getTriggerEvent(t,"click");i.onTrigger("popover",e,t.open,function(){d.isOpen(r)||(r=Ee._openPopover(e,r))}),!1!==n&&i.onTrigger("popover",e,t.close,function(){d.isOpen(r)&&r.close()},"close")},_openPopover:function(e,t){var n=Ee._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new Ve).set(n),bt(function(){t.open(e)}),r&&d.addDismissListener(a.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}}),Ve=function(){if(!(this instanceof Ve))return vt.createInstance(Ve,arguments);Ve.superClass.constructor.apply(this,arguments),Dt(this.getRoot(),"z-popover")},Oe=(je(Ve,Re,{__className_:"Popover"}),{loading:function(e,t,n){var r;{if(t=qe(t)||Qe.body,!1!==e)return(r=t._z_loader||new ze).set(Ge({},a.getLabelContent(e),n)),(t._z_loader=r).open(t),r;t._z_loader?(t._z_loader.close(),delete t._z_loader):Oe._clearTargetLoader(t)}},_clearTargetLoader:function(e){wt.querySelectorChildren(".z-loader",e).forEach(function(e){Bt(e)})}}),ze=function(){if(!(this instanceof ze))return vt.createInstance(ze,arguments);this._loadindDiv=Xe("div","loading"),ze.superClass.constructor.apply(this,arguments),this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"),this._bodyDiv.appendChild(this._loadindDiv),Dt(this.getRoot(),"z-loader")},Ie=(je(ze,Pe,{__className_:"Loader",___zdefaults_:{loading_icon_template:E,mask_visible:!0},_onViewChange:function(e,t,n){ze.superClass._onViewChange.apply(this,arguments),"loading_icon_template"===e&&(this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"))},open:function(e){e=qe(e)||Qe.body;var t=this.getRoot();e.lastElementChild!==t?d.open(this,e):this._setPopUpContent()}}),{notify:function(e,t){{if(!1!==e)return We(t)&&(e=Ie._getTypeLabel(e,t.type)),(t=new Me(Ge({},t,a.getLabelContent(e)))).open(),t;d.closeAll("Notification")}},_getTypeLabel:function(e,t){var n;return e=null==e?"":e+"",t?((n=Xe("div","ntype "+t)).innerHTML=(t=r["notify_"+t]||"")?"<span class='icon'>"+t+"</span> <span>"+e+"</span>":e,n.outerHTML):e}}),Me=function(){if(!(this instanceof Me))return vt.createInstance(Me,arguments);Me.superClass.constructor.apply(this,arguments),Dt(this.getRoot(),"z-notification")},Be=(je(Me,Pe,{__className_:"Notification",___zdefaults_:{duration:0,type:"",position:"top_right",direction:null,offset:10,gap:6,close_on_click:!0,close_icon_visible:!0,auto_focus:!1},open:function(){var e=this.getRoot(),t=Qe.body,n=this.getProperty("position"),r=this.getProperty("direction"),i=0|this.getProperty("offset"),o=0|this.getProperty("gap"),t=(d.open(this,t),g.getStackPosition("z-notification",e,t,n,r,i,o)),i=(d.setPosition(e,t),g.getPositionDirection(n,r)),o=(g.setPositionClass(e,n,"top-right"),g.setDirectionClass(e,i,"to-down"),0|this.getProperty("duration"));0<o&&(this._laterID=mt(this.close,o,this))},_onClose:function(){this._laterID=null,Me.superClass._onClose.apply(this,arguments)}}),{modal:function(e,t,n){if(e=qe(e)){if(!1!==t)return Be._openModal(e,t,n);(t=e._$z_modal)&&Be._closeModal(e,t)}},close:function(e){var t;!(e=qe(e))||(t=e._$z_modal)&&Be._closeModal(e,t)},_openModal:function(e,t,n){var r=e._$z_modal||new Ue,i={content:e};return t&&Fe(t,function(e,t){ct(t)?r[e]=t:i[e]=t}),r.set(i),r.open(n),e._$z_modal||(d.addDismissListener(e,r,"modal"),e._$z_modal=r),r},_closeModal:function(e,t){t.close(),d.removeDismissListener(e,t,"modal"),delete e._$z_modal},modalOn:function(e,t,n){(e=qe(e))&&Be._modalOn(e,t,n)},toggleInit:function(e){i.getToggleItems("modal",arguments).forEach(function(e){Be._modalOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_modalOn:function(e,t,n){i.clearToggleTrigger("modal",e);var r,t=i.getTriggerEvent(t,"click");i.onTrigger("modal",e,t.open,function(){d.isOpen(r)||(r=Be._openHostModal(r,e))}),!1!==n&&i.onTrigger("modal",e,t.close,function(){d.isOpen(r)&&r.close()},"close")},_openHostModal:function(e,t){t=Be._getModalHostConfig(t);if(!t)return e;var n=null==e;return(e=e||new Ue).set(t),bt(function(){e.open()}),n&&d.addDismissListener(a.getContentElement(e.get("content")),e,"modal"),e},_getModalHostConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_on_click_outside:"false"!==e.getAttribute("data-close-on-click-outside"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}}),Ne={alert:function(e,t,n,r){return Ne.box("alert",e,t,n,r)},confirm:function(e,t,n,r){return Ne.box("confirm",e,t,n,r)},prompt:function(e,t,n,r){return Ne.box("prompt",e,t,n,r)},box:function(n,r,i,o,a){if(h.Promise)return new Promise(function(e,t){Ne._box(n,r,i,o,a,e,t)});Ne._box(n,r,i,o,a)},_box:function(e,t,n,r,i,o,d){We(r)?(s=r,a=i):ct(r)&&(s=i,a=r),s=Ge({confirm_class:He("WIDGET_MESSAGEBOX_CONFIRM_CLASS"),cancel_class:He("WIDGET_MESSAGEBOX_CANCEL_CLASS"),confirm_text:He("WIDGET_MESSAGEBOX_CONFIRM_TEXT"),cancel_text:He("WIDGET_MESSAGEBOX_CANCEL_TEXT")},s);var a,s,l,h=!1,u=(s.hasOwnProperty("promise")?h=s.promise:"confirm"!==e&&"prompt"!==e||null!=a||(h=!0),"prompt"===e),c=u&&null,_=!1,i="z-message-box "+e+" "+(s.class||""),p=Xe("div","zw-modal"),r=Xe("div","content"),n=(null!=n&&(r.innerHTML+="<div class='header'><span class='title'>"+n+"</span></div>"),Xe("div","body")),t=(n.innerHTML=t,u&&((l=Xe("input",s.input_class||"")).value=null==s.value?"":s.value,$t(l,"keydown",function(e){13===e.keyCode&&(_=!0,c=Vt.getValue(l),Be.modal(p,!1))}),n.appendChild(l),l.select()),r.appendChild(n),Xe("div","footer")),n=Xe("button",s.confirm_class),e=(n.setAttribute("data-dismiss","modal"),n.innerHTML=s.confirm_text,t.appendChild(n),l?(l.setAttribute("autofocus",!0),l.select()):n.setAttribute("autofocus",!0),"alert"!==e&&((e=Xe("button",s.cancel_class)).setAttribute("data-dismiss","modal"),e.innerHTML=s.cancel_text,t.appendChild(e)),r.appendChild(t),p.appendChild(r),$t(n,"click",function(){_=!0,c=!u||Vt.getValue(l)}),{close_on_click_outside:!0!==s.close_on_click_outside,close_on_press_escape:!0,class:i});(a||o)&&(e.onClose=function(){a&&a(c),!0===h&&o&&(!0===_?o:d)(c)}),Be.modal(p,e)}},Ue=function(){if(!(this instanceof Ue))return vt.createInstance(Ue,arguments);Ue.superClass.constructor.apply(this,arguments),Bt(this._bodyDiv),Bt(this._headerDiv),Dt(this.getRoot(),"z-modal")};je(Ue,Pe,{__className_:"Modal",___zdefaults_:{mask_visible:!0,release_on_close:!0,close_on_click_outside:!0,open_animation:"z-animation-fadeInDown",close_animation:"z-animation-fadeOutUp"},open:function(e){e=qe(e)||Qe.body,d.open(this,e)},getContentContainer:function(){return this.getRoot()}}),Ze.widget={ListView:Y,Tabs:Q,Tree:ee,Collapse:ne,Pagination:de,Grid:ue,TreeGrid:Ce,Menu:xe,Tooltip:Le,Popover:Ve,Loader:ze,Notification:Me,tooltip:Te.tooltipOn,popover:Ee.popoverOn,modal:Be.modal,alert:Ne.alert,confirm:Ne.confirm,prompt:Ne.prompt,loading:Oe.loading,notify:Ie.notify,$interface:{DataContentInterface:p}},Ze.widget.tooltip.init=Te.toggleInit,Ze.widget.tooltip.open=Te.tooltip,Ze.widget.tooltip.close=Te.close,Ze.widget.popover.init=Ee.toggleInit,Ze.widget.popover.open=Ee.popover,Ze.widget.popover.close=Ee.close,Ze.widget.modal.init=Be.toggleInit,Ze.widget.modal.on=Be.modalOn}(s),function(h){Ke({FORM_VALIDATOR_RULES_ATTRIBUTE:"v-rules",FORM_VALIDATOR_ATTRIBUTE_PREFIX:"v-",FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE:"v-message-for",FORM_FORM_MODEL_ATTRIBUTE:"ze-model",FORM_FORM_MODEL_TYPE_ATTRIBUTE:"ze-model-type",FORM_FORM_MODEL_EXCLUDE:"ze-exclude",FORM_FORM_MODEL_FOR:"for-ze-model",FORM_FORM_VISIBLE_ATTRIBUTE:"ze-visible",FORM_FORM_HIDDEN_ATTRIBUTE:"ze-hidden",FORM_FORM_DISABLED_ATTRIBUTE:"ze-disabled",FORM_FORM_ATTRIBUTE_REGEX:null,FORM_FORM_EVENT_ATTRIBUTE:"ze-on"});function r(e,t,n){if(!(this instanceof r))return vt.createInstance(r,arguments);this._rules=[],r.superClass.constructor.apply(this,[n]),this.set("form",e),t&&this.set("rules",t)}function i(e,t){if(!(this instanceof i))return vt.createInstance(i,arguments);i.superClass.constructor.apply(this,[t]),this.set("form",e),this._doValidateUpdate(),this._updateStatus()}var u=function(e){return"none"!==Lt(e,"display")&&"hidden"!==Lt(e,"visibility")&&0<e.offsetWidth&&0<e.offsetHeight},_=function(e,t,n){!0!==t?("none"===Lt(e,"display")&&(t=n&&"none"!==n?n:e._$z_default_display&&"none"!==e._$z_default_display?e._$z_default_display:"",$e(e,"display",t)),delete e._$z_default_display):("hidden"===Lt(e,"visibility")&&(t=n&&"hidden"!==n?n:e._$z_default_visibility&&"hidden"!==e._$z_default_visibility?e._$z_default_visibility:"visible",$e(e,"visibility",t)),delete e._$z_default_visibility)},p=function(e,t){!0!==t?(e._$z_default_display=Lt(e,"display"),$e(e,"display","none")):(e._$z_default_visibility=Lt(e,"visibility"),$e(e,"visibility","hidden"))},f=function(e){e.setAttribute("disabled","")},g=function(e){e.removeAttribute("disabled")},y={required:"The field is required",integer:"The field must be an integer",numeric:"The field must contain only numbers",alphanumeric:"The field must only contain alpha-numeric characters",alphanumeric_dash:"The field must only contain alpha-numeric characters, underscores and dashes",alphanumeric_space:"The field must only contain alpha-numeric characters and space characters",email:"The field must be a valid email address",ipv4:"The field must be a valid IP",minlength:"The field must be at least %p characters in length",maxlength:"The field must not exceed %p characters in length",greaterthan:"The field must contain a number greater than %p",lessthan:"The field must contain a number less than %p",equal:"The field must be equal to %p",match:"The field must match %p field"},l={appendMessages:function(t,e,n){!1!==n&&(l.clearMessage(t,n),e.forEach(function(e){l._appendMessageItem(t,e,n)}))},appendMessageItem:function(e,t,n){var r;!1!==n&&(r=t.element,l._removeMessageItem(e,r,n),l._appendMessageItem(e,t,n))},_appendMessageItem:function(e,t,n){var r,i,o=t.message,t=t.element,a=n.message_class,s=n.invalid_class,n=n.container;Dt(t,s),n?(i=zt(n,"UL")||zt(n,"OL")?"li":"span",r=Xe(i,a)):(s=l._getMessageEle(t,e,a))?r=s:i="span",i&&(r=Xe(i,a),t._val_msg_ele=r,n?n.appendChild(r):Ze.dom.insertAfter(r,t)),r.innerHTML=null==o?"":o},removeMessageItem:function(e,t,n){!1!==n&&l._removeMessageItem(e,t,n)},_removeMessageItem:function(e,t,n){var r=n.invalid_class,n=n.message_class,r=(At(t,r),t._val_msg_ele);r?(Bt(r),delete t._val_msg_ele):(r=l._getMessageEle(t,e,n))&&Nt(r)},_getMessageEle:function(e,t,n){var r,i=e.getAttribute("name");return(r=i?qe(Wt(He("FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE"),i),t):r)||(i=e.nextElementSibling)&&Tt(i,n)&&(r=i),r},clearMessage:function(t,n){var e;!1!==n&&((e=n.container)&&Nt(e),e="."+n.invalid_class,Rt(e,t).forEach(function(e){l._removeMessageItem(t,e,n)}))}},o=(Ge(l,{getMessageText:function(e,t,n){var r;return e.hasOwnProperty("message")?r=e.message:t&&(r=y[t]),r?(t=e.name,(r=r.replace("%f",t||"")).replace("%p",n||"")):null},registerMessage:function(e,t){We(e)?Fe(e,function(e,t){l._registerMessage(e,t)}):l._registerMessage(e,t)},_registerMessage:function(e,t){null==t?delete y[e]:y[e]=t}}),{RULE_REGEX:/^(.+?)\[(.+)\]$/,INTEGER:/^-?\d+$/,NUMERIC:/^-?\d*\.?\d+$/,ALPHANUMERIC:/^[a-zA-Z0-9]+$/,ALPHANUMERIC_DASH:/^[a-zA-Z0-9_\-]+$/,ALPHANUMERIC_SPACE:/^[a-zA-Z0-9 ]+$/,MAIL:/^([\w.+-]+)@([\da-zA-Z.-]+)\.([a-zA-Z.]{2,})$/,IPV4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/}),v=function(e,t){var n;return e.hasOwnProperty("element")?n=e.element:e.hasOwnProperty("selector")?n=qe(e.selector,t):e.hasOwnProperty("id")?n=Qe.getElementById(e.id):e.hasOwnProperty("name")&&(n=qe(Wt("name",e.name),t)),n},C=function(e){var t=[],r=He("FORM_VALIDATOR_ATTRIBUTE_PREFIX"),i=r.length;return Rt("["+He("FORM_VALIDATOR_RULES_ATTRIBUTE")+"]",e).forEach(function(e){var n={element:e};Fe(Ze.dom.getAttributes(e),function(e,t){"name"===e&&(n[e]=t),e.startsWith(r)&&(n[e.substring(i)]=t)}),t.push(n)}),t},a={required:function(e){e=Me(e);return V(e)?!0===e:lt(e)?""!==e.trim():e instanceof FileList?0<e.length:null!=e},integer:function(e){return o.INTEGER.test(Me(e))},numeric:function(e){return o.NUMERIC.test(Me(e))},alphanumeric:function(e){return o.ALPHANUMERIC.test(Me(e))},alphanumeric_dash:function(e){return o.ALPHANUMERIC_DASH.test(Me(e))},alphanumeric_space:function(e){return o.ALPHANUMERIC_SPACE.test(Me(e))},email:function(e){return o.MAIL.test(Me(e))},ipv4:function(e){return o.IPV4.test(Me(e))},minlength:function(e,t){e=Me(e);return!!lt(e)&&(e=e.trim()).length>=t},maxlength:function(e,t){e=Me(e);return!!lt(e)&&(e=e.trim()).length<=t},greaterthan:function(e,t){e=Me(e);return!!a._isNumeric(e)&&+e>+a._getCompareValue(t)},lessthan:function(e,t){e=Me(e);return!!a._isNumeric(e)&&+e<+a._getCompareValue(t)},equal:function(e,t){return Me(e)===a._getCompareValue(t)},match:function(e,t){return Me(e)===a._getCompareValue(t)},_isNumeric:function(e){return o.NUMERIC.test(e)},_getCompareValue:function(e){if(a._isNumeric(e))return e;try{var t=qe(e)||qe(Wt("name",e));if(t)return Me(t)}catch(e){}return e}},m=function(e,t,n){ct(t)&&(a[e]=t),n&&l.registerMessage(e,n)},e=function(e){var t=[],i=(lt(e)?t=e.split("|"):st(e)&&(t=e),[]);return t.forEach(function(e){var t,n,r;lt(e)?((r=o.RULE_REGEX.exec(e))?(t=r[1],n=r[2]):t=e,(r=a[t])&&i.push({rule_name:t,method:r,param:n})):ct(e)&&i.push({method:e})}),i},s={validate:function(e,t,n){if(!(e=qe(e)))return[];var r,i=s._getConfig(n),i=(n=i.config,i.msg_config),t=ht(C(e),t),t=s.doValidate(e,t);return l.appendMessages(e,t,i),!1===n.autofocus||(r=t[0])&&mt(function(){r.element.focus()},60),t},reset:function(e,t){if(!(e=qe(e)))return[];var n=s._getConfig(t),t=(t=n.config,n.msg_config);l.clearMessage(e,t)},_getConfig:function(e){e=Ge({invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:!0,autofocus:!0},e);return{config:e,msg_config:!1!==e.message&&{container:qe(e.message_container),invalid_class:e.invalid_class,message_class:e.message_class}}},doValidate:function(n,e,r){var i=[],o=[];return e.forEach(function(e){var t=v(e,n);t&&(!1!==r&&!u(t)||0<=o.indexOf(t)||(t=s.doValidateRulesItem(t,e))&&(i.push(t),o.push(t.element)))}),i},doValidateRulesItem:function(r,i){var o;return ut(e(i.rules),function(e){var t=e.method,n=e.param;if(!1===t(r,n))return t=e.rule_name,!(o={reason:t,element:r,message:l.getMessageText(i,t,n),rule:i})}),o}},b=(je(r,P,{___zdefaults_:{invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:!0,autofocus:!0},afterSetProperty:function(e,t,n){switch(r.superClass.afterSetProperty.apply(this,arguments),e){case"rules":this.reset(),this._doRulesUpdate();break;case"form":this.reset(),this._doFormUpdate(t);break;case"message":case"message_container":case"invalid_class":case"message_class":case"visible_only":this.reset()}},_doFormUpdate:function(e){this.reset(),this._setRuleEleChangeListener("off"),this._form=qe(e),this._doRulesUpdate()},update:function(){this._form&&(this.reset(),this._doRulesUpdate())},_doRulesUpdate:function(){this._form&&(this._setRuleEleChangeListener("off"),this._rules=ht(C(this._form),this.get("rules")),this._setRuleEleChangeListener("on"))},_setRuleEleChangeListener:function(n){var r,i;this._form&&(r=this._form,i=[],this._rules.forEach(function(e){var t,e=v(e,r);e&&(0<=i.indexOf(e)||(i.push(e),t=this._getChangeEvent(e),("on"===n?$t:Xt)(e,t,this._handleChange,this)))},this))},_getChangeEvent:function(e){var t=this.getChangeEvent(e);if(t)return t;if(Ot.isInput(e)){t=e.getAttribute("type");if(null==t||"text"===t||"email"===t||"password"===t||"number"===t||"url"===t)return"input"}else if(Ot.isTextArea(e))return"input";return"change"},getChangeEvent:function(e){},_handleChange:function(e){var t,n,r;this._form&&(t=e.target,n=s.doValidate(this._form,this._rules,this.getProperty("visible_only")),(r=pt(n,function(e){return e.element===t}))?l.appendMessageItem(this._form,r,this._getMessageConfig()):l.removeMessageItem(this._form,t,this._getMessageConfig()),this._onValidate(n,r,e))},_onValidate:function(e,t,n){this._callOn("onValidate","on.validate",{errors:e,current:t,event:n},[e,t,n])},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)},onValidate:function(e,t){this.addListener("on.validate",e,t)},_getMessageConfig:function(){return!1!==this.get("message")&&{container:qe(this.get("message_container")),invalid_class:this.get("invalid_class"),message_class:this.get("message_class")}},reset:function(){this._form&&l.clearMessage(this._form,this._getMessageConfig())},validate:function(){var e,t;if(this._form)return e=s.doValidate(this._form,this._rules,this.getProperty("visible_only")),l.appendMessages(this._form,e,this._getMessageConfig()),!1===this.get("autofocus")||(t=e[0])&&mt(function(){t.element.focus()},60),e},registerRule:function(e,t,n){return m(e,t,n)},registerRuleMessage:function(e,t){return l.registerMessage(e,t)}}),{integer:function(e){return null==e?null:(e=e.trim(),/^-?\d+$/.test(e)?0|e:null)},array:function(e){return null==e?null:_t(e.split(","),function(e){return""!==e.trim()})}}),c={set:function(e,r){We(r)||(r={}),Fe(c._queryModelEleMap(e),function(e,t){var n=gt(r,e);null==n&&(n=""),1===t.length?Be(t[0],n):st(n)?t.forEach(function(e,t){t=n[t];Be(e,t=null==t?"":t)}):t.forEach(function(e){Be(e,n)})})},get:function(e,r){var i={};return Fe(c._queryModelEleMap(e),function(e,t){var n;1===(t=!0===r?_t(t,function(e){return!c._isExclude(e)}):t).length?n=c._getEleValue(t[0]):(n=[],t.forEach(function(e){n.push(c._getEleValue(e))})),U(i,e,n)}),i},_isExclude:function(e){var t=He("FORM_FORM_MODEL_EXCLUDE");return e.hasOwnProperty(t)&&"false"!==e.getAttribute(t)},_queryModelEleMap:function(e){var r=He("FORM_FORM_MODEL_ATTRIBUTE"),i={};return Rt("["+r+"]",e).forEach(function(e){var t,n=e.getAttribute(r).trim();n&&((t=i[n])||(i[n]=t=[]),t.push(e))}),i},_getEleValue:function(e){var t=Me(e),e=b[e.getAttribute(He("FORM_FORM_MODEL_TYPE_ATTRIBUTE"))];return t=e?e(t):t},clear:function(e){c.set(e)}},n={updateStatus:function(e,t){n.updateVisible(e,t),n.updateDisable(e,t)},updateVisible:function(e,t){n._doUpdate(e,He("FORM_FORM_VISIBLE_ATTRIBUTE"),t,function(e,t){(!0===t?_:p)(e)}),n._doUpdate(e,He("FORM_FORM_HIDDEN_ATTRIBUTE"),t,function(e,t){(!0===t?p:_)(e)})},updateDisable:function(e,t){n._doUpdate(e,He("FORM_FORM_DISABLED_ATTRIBUTE"),t,function(e,t){(!0===t?f:g)(e)})},_doUpdate:function(e,n,r,i){Rt("["+n+"]",e).forEach(function(e){var t=(e.getAttribute(n)||"").trim();t&&i(e,q.exec(t,r,He("FORM_FORM_ATTRIBUTE_REGEX")))})}},x=function(e,t,n){Rt("["+He("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){$t(e,"change",t,n)})},w=function(e,t,n){Rt("["+He("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){Xt(e,"change",t,n)})},d=(je(i,P,{___zdefaults_:{validate:!0},afterSetProperty:function(e,t,n){switch(i.superClass.afterSetProperty.apply(this,arguments),e){case"form":this._doFormUpdate(t);break;case"validate":this._doValidateUpdate()}},update:function(){this._form&&(w(this._form,this._handleFormModelElementChange,this),x(this._form,this._handleFormModelElementChange,this),this._updateStatus()),this._validator&&this._validator.update()},_doFormUpdate:function(e){this._form&&(w(this._form,this._handleFormModelElementChange,this),t.removeForListener(this._form)),this._form=qe(e),this._validator&&this._validator.set("form",this._form),this._form&&(x(this._form,this._handleFormModelElementChange,this),t.addForListener(this._form))},_doValidateUpdate:function(){!1!==this.getProperty("validate")?this._validator||(this._validator=r(this._form)):this._validator&&(this._validator.set("form",null),delete this._validator)},_handleFormModelElementChange:function(e){this._updateStatus(),this._callOn("onFormChange","on.form.change",e,[e])},onFormChange:function(e,t){this.addListener("on.form.change",e,t)},_updateStatus:function(e){n.updateStatus(this._form,Ge(this._getValue(),e))},_getValue:function(){return this._form?c.get(this._form):{}},setValue:function(e){this._form&&(e=Ge({},e),c.set(this._form,e),this._updateStatus(e),this._validator&&this._validator.reset())},getValue:function(e){if(!1===e)return this._getValue();if(!this._form)return null;if(this._validator&&0<this._validator.validate().length)return null;return c.get(this._form)},clearValue:function(){if(!this._form)return null;c.clear(this._form),this._updateStatus(),this._validator&&this._validator.reset()},getValidator:function(){return this._validator}}),{on:function(e,t){d._each(e,t,!1),d._each(e,t,!0)},off:function(e,t){d._each(e,t,!1)},_each:function(r,e,i){r=r||h;var t,o=He("FORM_FORM_EVENT_ATTRIBUTE");if(e){if(!(e=Ve(e)))return;t=Rt("["+o+"]",e)}else t=Rt("["+o+"]");t.forEach(function(n){n.getAttribute(o).split(";").forEach(function(e){var t,e=e.trim().split(":");2!==e.length||(t=e[0].trim())&&e[1].split(",").forEach(function(e){(e=e.trim())&&(e=gt(r,e),ct(e)&&(!0===i?Kt:Jt)(n,t,e,r))})})})}}),t={addForListener:function(e){Rt(Wt(He("FORM_FORM_MODEL_FOR")),e).forEach(function(e){$t(e,"click",t._handleForClick)})},removeForListener:function(e){Rt(Wt(He("FORM_FORM_MODEL_FOR")),e).forEach(function(e){Xt(e,"click",t._handleForClick)})},_handleForClick:function(e){for(var t=He("FORM_FORM_MODEL_FOR"),e=qt.getEventTarget(e,"["+t+"]"),n=e.parentNode,r=He("FORM_FORM_MODEL_ATTRIBUTE"),i=e.getAttribute(t);n;){var o=Pt(Wt(r,i),n);if(o)return void o.focus();n=n.parentNode}}};Ze.form={Validator:r,Form:i,bindEvent:d.on,unbindEvent:d.off,attrOn:d.on,attrOff:d.off},Ze.form.Validator.validate=s.validate,Ze.form.Validator.reset=s.reset,Ze.form.Validator.registerRule=m,Ze.form.Validator.registerRuleMessage=l.registerMessage}(s),function(e){Ke({GVIEW_NODE_WIDTH:32,GVIEW_NODE_HEIGHT:32,GVIEW_GROUP_WIDTH:36,GVIEW_GROUP_HEIGHT:36,GVIEW_SUBVIEW_WIDTH:60,GVIEW_SUBVIEW_HEIGHT:36,GVIEW_NODE_SHAPE:"circle",GVIEW_NODE_FILL:"#0175a2",GVIEW_NODE_STROKE:"#0175a2",GVIEW_NODE_HEATMAP_COLORS:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},GVIEW_GROUP_EXPAND_SHAPE:"covexhull",GVIEW_GROUP_EXPAND_FILL:"rgba(50,100,200,0.1)",GVIEW_GROUP_EXPAND_STROKE:"#0175a2",GVIEW_SUBVIEW_SHAPE:"cloud",GVIEW_LINK_STROKE:"#0175a2",GVIEW_LABEL_FILL:"#000",GVIEW_INFO_FILL:"#000",GVIEW_INFO_BOX_FILL:"#0EB29A",GVIEW_SELECT_BORDER_STROKE:"#0EB29A",GVIEW_SELECT_SHADOW_COLOR:"#0EB29A",GVIEW_HOVER_STYLE:{shadowColor:"#888",shadowBlur:6}});function t(){t.superClass.constructor.apply(this,arguments)}function r(e){if(!(this instanceof r))return vt.createInstance(r,arguments);this._linkArray=[],this._fromLinkArray=[],this._toLinkArray=[],r.superClass.constructor.apply(this,arguments)}function c(e,t,n){if(!(this instanceof c))return vt.createInstance(c,arguments);1===(a=arguments.length)?r=e:2===a?(i=e,o=t):3===a&&(i=e,o=t,r=n);var r,i,o,a=We(r)?[r]:[];c.superClass.constructor.apply(this,a),i&&this.set("from",i),o&&this.set("to",o)}function n(){if(!(this instanceof n))return vt.createInstance(n,arguments);n.superClass.constructor.apply(this,arguments)}function i(){if(!(this instanceof i))return vt.createInstance(i,arguments);i.superClass.constructor.apply(this,arguments)}function a(e,t,n){if(!(this instanceof a))return vt.createInstance(a,arguments);a.superClass.constructor.apply(this,arguments)}function g(){g.superClass.constructor.apply(this,arguments)}function y(){y.superClass.constructor.apply(this,arguments)}function v(){v.superClass.constructor.apply(this,arguments)}function C(){C.superClass.constructor.apply(this,arguments)}function m(){m.superClass.constructor.apply(this,arguments)}function x(){x.superClass.constructor.apply(this,arguments)}function w(e,t){xn.isGView(e)||1!==arguments.length||(t=arguments[0],e=null),this._gView=e,this._is_updating=!1,w.superClass.constructor.apply(this,[t]),this._updateStartOnChange()}function P(e,t){this._damper=1,this._maxMotion=0,this._motionRatio=0,this._sNodeMap={},this._sNodeArr=[],this._sLinkArr=[],P.superClass.constructor.apply(this,arguments)}function R(){if(!(this instanceof R))return vt.createInstance(R,arguments);this._subViewTransform={},R.superClass.constructor.apply(this,arguments),this._initControllerCanvas(),this.addController(new C),this.addController(new v),this.addController(new m),this.addController(new x)}var D,o={getDrawGroupArray:function(e){return _t(o._getDrawNodeArray(e),function(e){return h(e)})},getDrawNodeArray:function(e){return _t(o._getDrawNodeArray(e),function(e){return d(e)&&!h(e)})},_getDrawNodeArray:function(n){var e=n.getCurrentSubview(),r=e?e.getChildren():n.getRootDataArray(),t=[];return r.sort(function(e,t){return o._indexCompare(n,r,e,t)}),r.forEach(function(e){o._fillIndexArr(n,e,t)}),_t(t,function(e){return d(e)})},_fillIndexArr:function(n,e,t){var r;d(e)&&t.push(e),e.hasChildren()&&((r=e.getChildren(!1)).sort(function(e,t){return o._indexCompare(n,r,e,t)}),r.forEach(function(e){o._fillIndexArr(n,e,t)}))},_indexCompare:function(e,t,n,r){var i=o._getSelectIndex(e,n),e=o._getSelectIndex(e,r);return i===e&&(i=t.indexOf(n),e=t.indexOf(r)),e<i?1:i<e?-1:0},_getSelectIndex:function(t,n){var r=[o._getDataSelectIndex(t,n)];return d(n)&&E.getSameSubviewDescendantArray(t,n).forEach(function(e){r.push(o._getDataSelectIndex(t,n))}),rt.apply(null,r)},_getDataSelectIndex:function(e,t){return e.getSelected(!1).indexOf(t)}},b={getNodeViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"node",r)},getLinkViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"link",r)},getGroupViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"group",r)},getDataViewLabelProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,null,r)},getDataViewInfoProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,null,r)},getDataViewVisibleLabel:function(e,t){return e?!1!==e.getDataViewProperty(t,"label_visible")?e.getLabel(t):null:t.getProperty("name")},getDataViewVisibleInfo:function(e,t){return e?!1!==e.getDataViewProperty(t,"info_visible")?e.getInfo(t):null:t.getProperty("info")},getFont:function(e){return e||bn.getSystemFont()},_getDataViewPrefixProperty:function(e,t,n,r,i){return e?e.getDataViewProperty(t,n,i=null==i?r?r+"_"+n:n:i):t.getProperty(n)},getVisibleDataBounds:function(t){var n=[];return _t(t.getDataArray(!1),function(e){e.getBounds&&t._isVisible(e)&&((e=e.getBounds(t,!1))&&n.push(e))}),be.calcRectsUnion(n)},toDataURL:function(e,t){var n=b.getVisibleDataBounds(e);if(null==n)return null;var r=n.width,i=n.height,o=Xe("canvas"),r=(o.setAttribute("width",r+10),o.setAttribute("height",i+10),o.getContext("2d")),i=e.getProperty("label_font")||bn.getSystemFont(),i=(r.font!==i&&(r.font=i),te),i=(1!==i&&r.scale(i,i),-(n.x-5)),n=-(n.y-5);return 0==i&&0==n||r.setTransform(1,0,0,1,i,n),e._drawData(r),o.toDataURL(t||"image/png")}},d=(Ge(xn,{isNode:function(e){return xn._isIModelType(e,"Node",ae)},isLink:function(e){return xn._isIModelType(e,"Link",se)},isGroup:function(e){return xn._isIModelType(e,"Group",le)},isSubview:function(e){return xn._isIModelType(e,"Subview",ce)},isLinkSubview:function(e){return xn._isIModelType(e,"LinkSubview",de)},isGView:function(e){return xn._isIModelType(e,"GView",oe)}}),xn.isNode),A=xn.isLink,h=xn.isGroup,k=xn.isSubview,S=xn.isLinkSubview,T={isPointsNode:function(e){e=e.getType();return"path"===e||"heatmap"===e},getSizeProperty:function(e,t,n){var r="node_"+n;if(e&&e.hasDataViewProperty(t,n,r))return e.getDataViewProperty(t,n,r);if("image"===t.getType()){var i=t.getProperty("image");if(i){i=lt(i)?xe.get(i):i;if(i)return i[n]}}return e?e.getDataViewProperty(t,n,r):t.getProperty(n)},setPosition:function(e,t,n){null!=n&&(T.isPointsNode(t)?T._updateNodePointsByPosition(e,t,n):(t.setProperty("x",n.x),t.setProperty("y",n.y)))},_updateNodePointsByPosition:function(e,t,n){e=t.getBounds(e);T._updateNodePointsByOffset(t,n.x-e.x,n.y-e.y)},_updateNodePointsByOffset:function(e,t,n){var r=[];(e.get("points")||[]).forEach(function(e){r.push(Ge(e,{x:e.x+t,y:e.y+n}))}),e.set("points",r)},setSize:function(e,t,n){null!=n&&(t.setProperty("width",n.width),t.setProperty("height",n.height))},isGIFNode:function(e){if("image"!==e.getType())return!1;e=e.get("image");return!!lt(e)&&e.endsWith(".gif")}},f={getLoopSibling:function(t,e){var n=e.getProperty("from"),e=_t(n.getFromLinks(!1),function(e){return n===e.getProperty("to")});return t?_t(e,function(e){return t._isVisible(e)}):e},getSiblingByType:function(e,t,n){return f._getSibling(e,t,n,!0)},getSibling:function(e,t,n){return f._getSibling(e,t,n,!1)},_getSibling:function(t,e,n,r){var i,o,a=f.getFromNodeAgent(t,e),s=f.getToNodeAgent(t,e),l=[];return a&&s&&(i=b.getLinkViewProperty(t,e,"type"),e=f.getNodeAgentLinks(t,a),o=f.getNodeAgentLinks(t,s),e.forEach(function(e){o.indexOf(e)<0||t&&!t._isVisible(e)||!0===n&&f.getFromNodeAgent(t,e)!==a||!0===r&&b.getLinkViewProperty(t,e,"type")!==i||l.push(e)})),l},getNodeAgentLinks:function(t,n){var r=[];return t&&Rn.getAddedDescendantArray(t.getProvider(),n).forEach(function(e){!d(e)||0<(e=e.getLinks()).length&&e.forEach(function(e){f.getFromNodeAgent(t,e)!==n&&f.getToNodeAgent(t,e)!==n||r.push(e)})}),_t(ht(r,n.getLinks()),function(e,t){return r.indexOf(e)===t})},getFromNodeAgent:function(e,t){var n,r;return e?(n=f._getCurrentSubviewAgent(e,t.getProperty("from")))===(r=f._getCurrentSubviewAgent(e,t.getProperty("to")))?n:f._getSpanSubviewAgent(e,n,r):t.getProperty("from")},getToNodeAgent:function(e,t){var n,r;return e?(n=f._getCurrentSubviewAgent(e,t.get("to")),(r=f._getCurrentSubviewAgent(e,t.get("from")))===n?n:f._getSpanSubviewAgent(e,n,r)):t.getProperty("to")},_getCurrentSubviewAgent:function(e,t){if(!t)return null;for(var n=t.get("parent");h(n);){if(!h(n.get("parent")))return!0===e.isExpanded(n)?t:n;!0!==e.isExpanded(n)&&(t=n),n=n.get("parent")}return d(t)?t:null},_getSpanSubviewAgent:function(e,t,n){if(!t||!n)return null;var r=E.getDataSubview(t),i=E.getDataSubview(n);if(r===i)return d(t)?t:null;for(;null!=i&&r!==i;)i=E.getDataSubview(i);if(r===i)return t;for(var o=[],a=(o.push(t),t.get("parent"));d(a)&&!Rn.isDescendantOf(n,a);)o.unshift(a),a=a.get("parent");for(var s=o.length,l=0;l<s;l++){var c=o[l];if(h(c)&&!0==!e.isExpanded(c))return c;if(k(c))return c}return t}},L={getGroupAncestorArray:function(e){for(var t=[],n=e.get("parent");n;)h(n)&&t.push(n),n=n.get("parent");return t},getGroupVisibleNodes:function(t,e){e=_t(e.getGroupChildren(),function(e){return d(e)});return t?_t(e,function(e){return t._isVisible_(e)}):e},setPosition:function(e,t,n){var r=t.getBounds(e);L.updateChildrenPositionByOffset(e,t,n.x-r.x,n.y-r.y)},updateChildrenPositionByOffset:function(n,e,r,i){e.getGroupChildren().forEach(function(e){var t=e.getBounds(n);e.setPosition({x:t.x+r,y:t.y+i})})}},E={getDataSubview:function(e){for(var t=e.get("parent");t&&!xn.isSubview(t);)t=t.get("parent");return t},getSameSubviewAncestorArray:function(e){for(var t=[],n=e.get("parent");n&&!k(n);)t.push(n),n=n.get("parent");return t},getSameSubviewDescendantArray:function(e,t){var e=Rn.getAddedDescendantArray(e.getProvider(),t),n=E.getDataSubview(t);return _t(e,function(e){return n===E.getDataSubview(e)})}},V=function(e,t,n,r,i,o,a){var s,l,t=-(n.indexOf(t)-(n.length/2-.5))*r;return e.same_direction?(s=e.from,l=e.to):(s=e.to,l=e.from,t=-t),n=fe(s,l),0<a?[s,Ce.calcRotatedPoint(s,{x:s.x+a,y:s.y+t},n),Ce.calcRotatedPoint(l,{x:l.x-a,y:l.y+t},n),l]:[Ce.calcRotatedPoint(s,{x:s.x,y:s.y+t},n),Ce.calcRotatedPoint(l,{x:l.x,y:l.y+t},n)]},O=function(e,t,n){var r,i=e.x,o=e.y,a=e.width,d=e.height,s=i+a/2,l=o+d/2,c=t.x,h=t.y,u=c+t.width/2,_=h+t.height/2;switch(n="edge_center"===n?45<(c=fe({x:s,y:l},{x:u,y:_}))&&c<135?"bottom":135<=c&&c<=225?"left":225<c&&c<315?"top":"right":n){case"center":r={x:s,y:l};break;case"top":r={x:s,y:o};break;case"right":r={x:i+a,y:l};break;case"bottom":r={x:s,y:o+d};break;case"left":r={x:i,y:l};break;case"v_center":r=l<_?{x:s,y:o+d}:{x:s,y:o};break;case"h_center":r=s<u?{x:i+a,y:l}:{x:i,y:l};break;default:r=ve.calcRectLineIntersection(e,{x:u,y:_},{x:s,y:l},!0)[0]}return r=null==r?{x:s,y:l}:r},z=function(e,t,n,r){t=t.indexOf(e),e=r.x+r.width,r=r.y,t=n+t*n,n=.551915024494*t;return[{x:e-t,y:r,seg:"bezier_curve_to"},{x:e-t,y:r-n},{x:e-n,y:r-t},{x:e,y:r-t,seg:"bezier_curve_to"},{x:e+n,y:r-t},{x:e+t,y:r-n},{x:e+t,y:r,seg:"bezier_curve_to"},{x:e+t,y:r+n},{x:e+n,y:r+t},{x:e,y:r+t}]},I={calcLinkRAPath:function(e,t,n,r,i,o,a){switch(e){case"ra_hv":return I.calcLinkRAHVPath(t,n,r,i,o);case"ra_vh":return I.calcLinkRAVHPath(t,n,r,i,o);case"ra_hvh":return I.calcLinkRAHVHPath(t,n,r,i,o,a);case"ra_vhv":return I.calcLinkRAVHVPath(t,n,r,i,o,a);case"ra_top":return I.calcLinkRATopPath(t,n,r,i,o);case"ra_bottom":return I.calcLinkRABottomPath(t,n,r,i,o);case"ra_left":return I.calcLinkRALeftPath(t,n,r,i,o);case"ra_right":return I.calcLinkRARightPath(t,n,r,i,o)}},calcLinkRABottomPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.y+r.height,h=i.y+i.height,r=r.x+r.width/2,i=i.x+i.width/2,l=rt(2*n,6),c=e*n,l=rt(d,h)+l+c,c=(t-.5)*n-e*n,t=r<i?(a={x:(o={x:r+c,y:d}).x,y:l},{x:(s={x:i-c,y:h}).x,y:l}):(a={x:(o={x:r-c,y:d}).x,y:l},{x:(s={x:i+c,y:h}).x,y:l});return[o,a,t,s]},calcLinkRAHVPath:function(e,t,n,r,i){var o,a,e=t.indexOf(e),t=t.length/2,s=r.y+r.height/2,l=i.y+i.height/2,d=r.x+r.width/2,c=i.x+i.width/2,h=r.x,r=r.x+r.width,u=i.y,i=i.y+i.height,t=(t-.5)*n-e*n,e=d<c?{x:(a=s<l?{x:c+t,y:u}:{x:c-t,y:i}).x,y:(o={x:r,y:s-t}).y}:{x:(a=s<l?{x:c-t,y:u}:{x:c+t,y:i}).x,y:(o={x:h,y:s-t}).y};return[o,e,a]},calcLinkRAHVHPath:function(e,d,t,n,r,i){var o,h,u,a,e=d.indexOf(e),d=d.length,_=d/2,s=n.y+n.height/2,l=r.y+r.height/2,p=n.x+n.width/2,f=r.x+r.width/2,g=n.x,n=n.x+n.width,c=r.x,r=r.x+r.width,y=(_-.5)*t-e*t,_=(_-.5)*t*2,n=p<f?(o={x:n,y:s-y},{x:c,y:l-y}):(o={x:g,y:s-y},{x:r,y:l-y}),c=nt(o.x-n.x),g=i.from_corner_distance,r=i.to_corner_distance,i=-1,v=-1,r=(0<r&&r<c&&(v=r<1?c*r:r),!0),C=!0;return-1!==(i=0<g&&g<c?g<1?c*g:g:i)&&-1!==v?i+v<c-_&&(C=r=!1):(-1!==v&&v<c-_&&(C=!1),-1!==i&&i<c-_&&(r=!1)),!0!==r&&!0!==C||(h=p<f?s<l?(o.x+n.x)/2+y:(o.x+n.x)/2-y:s<l?(o.x+n.x)/2-y:(o.x+n.x)/2+y),!1===r&&(p<f?(u=o.x+i,u+=s<l?(d-e-1)*t:e*t):(u=o.x-i,u-=s<l?(d-e-1)*t:e*t)),!1===C&&(p<f?(a=n.x-v,a-=s<l?e*t:(d-e-1)*t):(a=n.x+v,a+=s<l?e*t:(d-e-1)*t)),!1===r?!0===C&&(a=u):u=!1===C?a:a=h,[o,{x:u,y:o.y},{x:a,y:n.y},n]},calcLinkRALeftPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.x,h=i.x,r=r.y+r.height/2,i=i.y+i.height/2,l=rt(2*n,6),c=e*n,l=it(d,h)-l-c,c=(t-.5)*n-e*n,t=r<i?(a={x:l,y:(o={x:d,y:r+c}).y},{x:l,y:(s={x:h,y:i-c}).y}):(a={x:l,y:(o={x:d,y:r-c}).y},{x:l,y:(s={x:h,y:i+c}).y});return[o,a,t,s]},calcLinkRARightPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.x+r.width,h=i.x+i.width,r=r.y+r.height/2,i=i.y+i.height/2,l=rt(2*n,6),c=e*n,l=rt(d,h)+l+c,c=(t-.5)*n-e*n,t=r<i?(a={x:l,y:(o={x:d,y:r+c}).y},{x:l,y:(s={x:h,y:i-c}).y}):(a={x:l,y:(o={x:d,y:r-c}).y},{x:l,y:(s={x:h,y:i+c}).y});return[o,a,t,s]},calcLinkRATopPath:function(e,t,n,r,i){var o,a,s,e=t.indexOf(e),t=t.length/2,d=r.y,h=i.y,r=r.x+r.width/2,i=i.x+i.width/2,l=rt(2*n,6),c=e*n,l=it(d,h)-l-c,c=(t-.5)*n-e*n,t=r<i?(a={x:(o={x:r+c,y:d}).x,y:l},{x:(s={x:i-c,y:h}).x,y:l}):(a={x:(o={x:r-c,y:d}).x,y:l},{x:(s={x:i+c,y:h}).x,y:l});return[o,a,t,s]},calcLinkRAVHPath:function(e,t,n,r,i){var o,e=t.indexOf(e),t=t.length/2,a=r.y+r.height/2,s=i.y+i.height/2,l=r.x+r.width/2,d=i.x+i.width/2,c=r.y,r=r.y+r.height,h=i.x,i=i.x+i.width,t=(t-.5)*n-e*n,n=(e=l<d?a<s?(o={x:l-t,y:r},{x:h,y:s+t}):(o={x:l-t,y:c},{x:h,y:s-t}):a<s?(o={x:l-t,y:r},{x:i,y:s-t}):(o={x:l-t,y:c},{x:i,y:s+t}),{x:o.x,y:e.y});return[o,n,e]},calcLinkRAVHVPath:function(e,d,t,n,r,i){var o,h,u,a,e=d.indexOf(e),d=d.length,_=d/2,p=n.y+n.height/2,f=r.y+r.height/2,s=n.x+n.width/2,l=r.x+r.width/2,g=n.y,n=n.y+n.height,c=r.y,r=r.y+r.height,y=(_-.5)*t-e*t,_=(_-.5)*t*2,n=p<f?(o={x:s-y,y:n},{x:l-y,y:c}):(o={x:s-y,y:g},{x:l-y,y:r}),c=nt(o.y-n.y),g=i.from_corner_distance,r=i.to_corner_distance,i=-1,v=-1,r=(0<r&&r<c&&(v=r<1?c*r:r),!0),C=!0;return-1!==(i=0<g&&g<c?g<1?c*g:g:i)&&-1!==v?i+v<c-_&&(C=r=!1):(-1!==v&&v<c-_&&(C=!1),-1!==i&&i<c-_&&(r=!1)),!0!==r&&!0!==C||(h=p<f?s<l?(o.y+n.y)/2+y:(o.y+n.y)/2-y:s<l?(o.y+n.y)/2-y:(o.y+n.y)/2+y),!1===r&&(p<f?(u=o.y+i,u+=s<l?(d-e-1)*t:e*t):(u=o.y-i,u-=s<l?(d-e-1)*t:e*t)),!1===C&&(p<f?(a=n.y-v,a-=s<l?e*t:(d-e-1)*t):(a=n.y+v,a+=s<l?e*t:(d-e-1)*t)),!1===r?!0===C&&(a=u):u=!1===C?a:a=h,[o,{x:o.x,y:u},{x:n.x,y:a},n]}},M={calcLinkCurvePath:function(e,t,n,r,i,o,a,s){switch(e){case"quadratic":return M.calcLinkQuadraticPath(t,n,r,i,o,a,s);case"cubic":return M.calcLinkCubicPath(t,n,r,i,o,a,s)}},calcLinkCubicPath:function(e,t,n,r,i,o,a){e=V(e,t,n,r,i,o);if(0===a)return e;t=e[0],n=e[1],r=fe(t,n),i=pe(t,n),o=i*a,e=t.x+i/2,a=Ce.calcRotatedPoint(t,{x:e,y:t.y-o},r),i=Ce.calcRotatedPoint(t,{x:e,y:t.y+o},r);return t.seg="bezier_curve_to",[t,a,i,n]},calcLinkQuadraticPath:function(e,t,n,r,i,o,a){e=V(e,t,n,r,i,o);if(0===a)return e;t=e[0],n=e[1],r=fe(t,n),i=pe(t,n),o=t.x+i/2,e=Ce.calcRotatedPoint(t,{x:o,y:t.y+i*a},r);return t.seg="quadratic_curve_to",[t,e,n]}},B={calcArrowRenderProperties:function(e,t,n,r,i,o,a){return 0!==i&&(n=ve.calcOffsetPointOnLine(n,t,i)),B._calcShapeArrow(e,t,n,o,a)||B._calcPathArrow(e,t,n,r,a)},calcArrowSizeLength:function(e,t){return t=tt(t),e=tt(e)+2,ot(e*(t*t/32+t/16+1.9))+1},_calcShapeArrow:function(e,t,n,r,i){var o=i*=.8;if(-1<["rect","circle","roundrect","triangle","right_triangle","pentagon","hexagon","star","parallelogram","cloud","ellipse","diamond"].indexOf(e))return t=fe(t,n),"circle"===e?t=0:"ellipse"!==e&&"diamond"!==e||(o*=1.2),{type:"shape",shape:e,shape_bounds:e={x:n.x-o/2,y:n.y-i/2,width:o,height:i},rotation:t,bounds:be.calcRotatedRect(e,t)}},_calcPathArrow:function(e,t,n,r,i){t=B._calcArrowPoints(e,t,n,i,r,0);if(t)return{type:"path",shape:e,points:t,bounds:Ce.calcPointsBounds(t)}},_calcArrowPoints:function(e,t,n,r,i,o){null!=o&&0!==o&&(n=ve.calcOffsetPointOnLine(n,t,o));var a,s=B._calcArrowAllPoints(t,n,r,i);switch(e){case"open_arrow":a=s.slice(0,3);break;case"stealth_arrow":a=s;break;case"arrow":a=s.slice(0,3)}return a},_calcArrowAllPoints:function(e,t,n,r){var i=e.x,o=e.y,i={x:i+pe(e,t),y:o},r=_e(r/2),a=n*re(r),n=n*ie(r),r={x:i.x-a,y:i.y-n},n={x:i.x-a,y:i.y+n},a={x:i.x-2*a/3,y:o},o=fe(e,t);return[Ce.calcRotatedPoint(e,r,o),Ce.calcRotatedPoint(e,i,o),Ce.calcRotatedPoint(e,n,o),Ce.calcRotatedPoint(e,a,o)]}},N={calcGroupBounds:function(e,t,n,r){e=N.calcGroupRenderProperties(e,t,n,r);if(e)return e.bounds_render},calcGroupRenderProperties:function(e,t,d,n){var r,i,o,a,h,u,_=N._calcGroupExpandRenderProps(e,t);if(null==(r=_?_.bounds:r))return p.calcNodeRenderProperties(e,t,n);r=d?r:(s=(l=p.calcNodeBodyBounds(e,t)).width,l=l.height,{x:r.x+r.width/2-s/2,y:r.y+r.height/2-l/2,width:s,height:l}),!0!==n&&(i=p._calcNodeOutlineBounds(e,t,r),(o=U.calcNodeLabelRenderProperties(e,t,r))&&(c=o.bounds),(a=H.calcNodeInfoRenderProperties(e,t,r))&&(h=a.bounds),u=p._calcNodeBorderBounds(e,t,r,i));var s=_t([r,i,c,h],function(e){return null!=e}),l=be.calcRectsUnion(s),n=0,c=(d||(n=0|b.getNodeViewProperty(e,t,"rotation")),be.getRectCenter(r));return{is_group:!0,expand_render_props:_,body_bounds:r,body_bounds_render:be.calcRotatedRect(r,n,c),outline_bounds:i,outline_bounds_render:be.calcRotatedRect(i,n,c),border_bounds:be.calcRotatedRect(u,n,c),label_render_props:o,info_render_props:a,bounds:l,bounds_render:be.calcRotatedRect(l,n,c)}},_calcGroupExpandRenderProps:function(e,t){var n=N._calcGroupedChildrenPoints(e,t);if(0===n.length)return null;var r,d,i=Ce.calcPointsBounds(n),o={x:i.x+i.width/2,y:i.y+i.height/2},a="shape";switch(b.getGroupViewProperty(e,t,"expand_shape")){case"rect":l=i;break;case"circle":var s=pe({x:i.x,y:i.y},o),l={x:o.x-s,y:o.y-s,width:2*s,height:2*s};break;case"ellipse":var s=ne(2)/2*i.width,c=ne(2)/2*i.height;l={x:o.x-s,y:o.y-c,width:2*s,height:2*c};break;case"roundrect":s=0,c=dn.getRoundRectRadii(i,b.getGroupViewProperty(e,t,"expand_roundrect_radius"));c&&0<c.length&&(s=rt.apply(null,c),s*=1-re(_e(45))),0<s&&(l=be.createGrowRect(i,s));break;case"parallelogram":a="path",r=Ce.calcParallelogramPoints(n,0|b.getGroupViewProperty(e,t,"expand_parallelogram_angle"));break;default:a="path",r=ye.convexHull(n)}return"path"===a&&null!=r&&((d=r[r.length-1])&&(d.seg="close"),l=Ce.calcPointsBounds(r)),{type:a,bounds:l,points:r}},_calcGroupedChildrenPoints:function(t,e){var n=L.getGroupVisibleNodes(t,e),r=b.getGroupViewProperty(t,e,"expand_padding"),i=(r|=0,[]);return n.forEach(function(e){e=e.getBounds(t,!1);e&&(i.push({x:e.x-r,y:e.y-r}),i.push({x:e.x-r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y-r}))}),i}},U={calcNodeLabelRenderProperties:function(e,t,n){var d=U._calcLabelSize(e,t);if(null==d)return null;var r,i,o,a,s=d.width,h=d.height,u=n.x,_=n.y,p=n.width,f=n.height,g=0|b.getDataViewLabelProperty(e,t,"label_gap"),n=0|b.getDataViewLabelProperty(e,t,"label_x_offset"),l=0|b.getDataViewLabelProperty(e,t,"label_y_offset"),y=b.getDataViewLabelProperty(e,t,"label_position"),c=b.getDataViewLabelProperty(e,t,"label_direction"),v=0,C=0;switch(y){case"top":r=u+p/2,i=_,"top"===(c=c||"top")&&(C=-g);break;case"left":r=u,i=_+f/2,"left"===(c=c||"left")&&(v=-g);break;case"right":r=u+p,i=_+f/2,"right"===(c=c||"right")&&(v=g);break;case"center":r=u+p/2,i=_+f/2,c=c||"center";break;default:r=u+p/2,i=_+f,"bottom"===(c=c||"bottom")&&(C=g)}switch(r+=v+n,i+=C+l,c){case"top":o=r-s/2,a=i-h;break;case"bottom":o=r-s/2,a=i;break;case"left":o=r-s,a=i-h/2;break;case"right":o=r,a=i-h/2;break;case"left_top":o=r-s,a=i-h;break;case"left_bottom":o=r-s,a=i;break;case"right_top":o=r,a=i-h;break;case"right_bottom":o=r,a=i;break;default:o=r-s/2,a=i-h/2}var m,y={x:o,y:a,width:s,height:h},n=0|b.getNodeViewProperty(e,t,"label_rotation"),l={label:{size:d,bounds:y,bounds_render:be.calcRotatedRect(y,n),render_props:{point:{x:o+s/2,y:a+h/2},direction:"center_middle",bounds:y,rotation:n}}};return null==b.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==b.getDataViewLabelProperty(e,t,"label_box_fill")||(m=be.createGrowRect(y,b.getDataViewLabelProperty(e,t,"label_box_padding")||0),l.label_box={bounds:m,bounds_render:be.calcRotatedRect(m,n),render_props:{bounds:m,rotation:n}}),m?(l.bounds=l.label_box.bounds,l.bounds_render=l.label_box.bounds_render):(l.bounds=l.label.bounds,l.bounds_render=l.label.bounds_render),l},calcLinkLabelRenderProperties:function(e,t,n){var r=U._calcLabelSize(e,t);if(null==r)return null;if(!(l=t.isLoop()?{x:(l=me.calcPathBounds(n)).x+l.width/2,y:l.y,angle:0}:U._calcPathLabelCenter(n)))return null;var i,n=l.x,o=l.y,a=b.getLinkViewProperty(e,t,"label_rotation"),s=(n+=0|b.getDataViewLabelProperty(e,t,"label_x_offset"),o+=0|b.getDataViewLabelProperty(e,t,"label_y_offset"),0),l=(!0===a&&(s=90<(a=l.angle)&&a<=270?ge(a-180):a),{x:n,y:o}),a={x:n-r.width/2,y:o-r.height/2,width:r.width,height:r.height},n={label:{size:r,bounds:a,bounds_render:be.calcRotatedRect(a,s)}};return n.label.render_props={rotation:s,point:l,direction:"center",bounds:a},null==b.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==b.getDataViewLabelProperty(e,t,"label_box_fill")||(i=be.createGrowRect(a,b.getDataViewLabelProperty(e,t,"label_box_padding")||0),n.label_box={bounds:i,bounds_render:be.calcRotatedRect(i,s),render_props:{bounds:i,rotation:s}}),i?(n.bounds=n.label_box.bounds,n.bounds_render=n.label_box.bounds_render):(n.bounds=n.label.bounds,n.bounds_render=n.label.bounds),n},calcLinkFromToLabelRenderProperties:function(e,t,n){},_calcPathLabelCenter:function(e){var t=(e=e||[]).length;return t<2?null:t%2==0?U._calcEvenPathLabelCenter(e):U._calcOddPathLabelCenter(e)},_calcEvenPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n-1],i=e[n],o=e[n-2],e=e[1+n],n=o&&he.isBezierCurveTo(o.seg)&&e?(t=me.calcOffsetPointOnPath([o,r,i,e],.5,!0)).angle:(t=ve.calcOffsetPointOnLine(r,i,.5,!0),fe(r,i));return t.angle=n,t},_calcOddPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n],i=e[n-1],e=e[1+n];return i=he.isQuadraticCurveTo(i.seg)?(t=me.calcOffsetPointOnPath([i,r,e],.5,!0)).angle:(n=nt(i.y-r.y)<nt(e.y-r.y)?i:e,t=ve.calcOffsetPointOnLine(r,n,.5,!0),fe(n,r)),t.angle=i,t},_calcLabelSize:function(e,t){var n=b.getDataViewVisibleLabel(e,t);if(null!=n)return bn.calcTextSize(b.getFont(b.getDataViewLabelProperty(e,t,"label_font")),n)}},H={calcNodeInfoRenderProperties:function(e,t,n){var r=H._calcInfoSize(e,t);return null==r?null:H._calcDataInfoRenderProperties(e,t,r,n.x+n.width,n.y)},calcLinkInfoRenderProperties:function(e,t,n){var r,i=H._calcInfoSize(e,t);return null==i?null:(r=t.isLoop()?{x:(r=me.calcPathBounds(n)).x+r.width/2,y:r.y,angle:0}:U._calcPathLabelCenter(n),H._calcDataInfoRenderProperties(e,t,i,r.x,r.y))},_calcDataInfoRenderProperties:function(e,t,n,r,d){var i,o=n.width,a=n.height,s=0|b.getDataViewInfoProperty(e,t,"info_x_offset"),l=0|b.getDataViewInfoProperty(e,t,"info_y_offset"),c=0|b.getDataViewInfoProperty(e,t,"info_box_padding"),h=it(10,(o+c)/3),r=r+s,s=d-h-a/2-c+l,d={x:r-o/2,y:s-a/2,width:o,height:a},l=o+2*c,u=a+2*c,_={x:r,y:s+a/2+c+h},p={x:r,y:s+a/2+c},h={x:r+h,y:s+a/2+c,seg:"close"},c={info:{size:n,bounds:d,render_props:{point:{x:r-o/2+o/2,y:s-a/2+a/2},direction:"center_middle",bounds:d}}};return null==b.getDataViewInfoProperty(e,t,"info_box_stroke")&&null==b.getDataViewInfoProperty(e,t,"info_box_fill")||(i=Ce.calcPointsBounds(n=[_,p,{x:r-l/2,y:s+u/2},{x:r-l/2,y:s-u/2},{x:r+l/2,y:s-u/2},{x:r+l/2,y:s+u/2},h]),c.info_box={bounds:i,render_props:{bounds:i,points:n}}),c.bounds=(i?c.info_box:c.info).bounds,c},_calcInfoSize:function(e,t){var n=b.getDataViewVisibleInfo(e,t);if(null!=n)return bn.calcTextSize(b.getFont(b.getDataViewLabelProperty(e,t,"info_font")),n)}},W={calcLinkBounds:function(e,t,n){e=W.calcLinkRenderProperties(e,t,n);if(e)return e.bounds},calcLinkPathPoints:function(e,t){e=W._calcLinkPathPoints(e,t);if(e)return e.points},calcLinkRenderProperties:function(e,t,n){var r,i,o,a,s,d,l,h,c=W._calcLinkPathPoints(e,t);return c&&(r=c.draw_points,i=c.points),i&&1<i.length?((c=me.calcPathBounds(i))&&!0!==n&&((o=W._calcLinkArrowRenderProps(e,t,i))&&(a=o.bounds),(s=U.calcLinkLabelRenderProperties(e,t,i))&&(d=s.bounds),(l=H.calcLinkInfoRenderProperties(e,t,i))&&(h=l.bounds)),n=_t([c,a,d,h],function(e){return null!=e}),{body_bounds:c,points:i,draw_points:r,label_render_props:s,info_render_props:l,arrow_render_props:o,bounds:be.calcRectsUnion(n)}):null},_calcLinkPathPoints:function(t,e){var n=e.getProperty("from"),r=e.getProperty("to");if(null==n||null==r)return null;var d,i=t?t.getProperty("link_gap"):16;if(e.getPath)o=e.getPath();else if(e.isLoop())c=f.getLoopSibling(t,e),o=z(e,c,i,n.getBounds(t));else{if(n=f.getFromNodeAgent(t,e),r=f.getToNodeAgent(t,e),null==n||null==r)return null;var h,u,_,o,a=W._calcLinkEdgeBounds(t,e,n,r),s=a.from,a=a.to,l=b.getLinkViewProperty(t,e,"type"),p=W._isSameDirectionLinkType(l),c=f.getSiblingByType(t,e,p);l&&((o=I.calcLinkRAPath(l,e,c,i,s,a,{from_corner_distance:b.getLinkViewProperty(t,e,"from_corner_distance"),to_corner_distance:b.getLinkViewProperty(t,e,"to_corner_distance")}))||("quadratic"===l&&(p=c[0],h=f.getFromNodeAgent(t,p),u=[],_=[],c.forEach(function(e){(f.getFromNodeAgent(t,e)===h?u:_).push(e)}),c=ht(u,_)),o=M.calcLinkCurvePath(l,W._calcRefLinkPathConfig(t,e,c,n,r,s,a),e,c,i,s,a,b.getLinkViewProperty(t,e,"curvature")))),(o=null==o?V(W._calcRefLinkPathConfig(t,e,c,n,r,s,a),e,c,i,s,a,0|b.getLinkViewProperty(t,e,"corner_offset")):o)&&(d=me.roundPath(o,0|b.getLinkViewProperty(t,e,"corner_radius")))}return{points:o,draw_points:d||o}},_isSameDirectionLinkType:function(e){return-1<["ra_hv","ra_vh"].indexOf(e)},_calcLinkEdgeBounds:function(e,t,n,r){var n=n.getBounds(e),r=r.getBounds(e),i=0|b.getLinkViewProperty(e,t,"from_offset"),o=0|b.getLinkViewProperty(e,t,"to_offset"),a=0|b.getLinkViewProperty(e,t,"from_offset_x"),s=0|b.getLinkViewProperty(e,t,"from_offset_y"),l=0|b.getLinkViewProperty(e,t,"to_offset_x"),e=0|b.getLinkViewProperty(e,t,"to_offset_y"),t={x:n.x+n.width/2,y:n.y+n.height/2},c={x:r.x+r.width/2,y:r.y+r.height/2};return 0!=i&&(t=Ce.calcPointOnCircle(t,i,fe(t,c))),0!=o&&(c=Ce.calcPointOnCircle(c,o,fe(c,t))),t.x+=a,t.y+=s,c.x+=l,c.y+=e,{from:{x:t.x-n.width/2,y:t.y-n.height/2,width:n.width,height:n.height},to:{x:c.x-r.width/2,y:c.y-r.height/2,width:r.width,height:r.height}}},_calcRefLinkPathConfig:function(e,t,n,r,i,d,o){var a,s,l,c,h,u,n=n[0],t=n!==t?f.getFromNodeAgent(e,n):r,_=r===t,i=_?(a=i,s=d,o):(a=r,s=o,d),r="path"===t.getType(),o="path"===a.getType();return r&&o&&(o=r=!1),r&&(h={x:(l=me.calcPointToPathClosestPoint(be.getRectCenter(i),t.get("points"))).x,y:l.y,width:0,height:0}),o&&(u={x:(c=me.calcPointToPathClosestPoint(be.getRectCenter(s),a.get("points"))).x,y:c.y,width:0,height:0}),{from:l=r?l:O(s,u||i,b.getLinkViewProperty(e,n,"from_position")),to:c=o?c:O(i,h||s,b.getLinkViewProperty(e,n,"to_position")),same_direction:_}},_calcLinkArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return{};var r,i,o,a=b.getLinkViewProperty(e,t,"stroke_line_width"),s=b.getLinkViewProperty(e,t,"from_arrow_shape"),l=b.getLinkViewProperty(e,t,"to_arrow_shape"),s=(s&&(i=b.getLinkViewProperty(e,t,"from_arrow_offset"),(i=me.calcOffsetPointOnPath(n,i,!0))&&(r=Ce.calcPointOnCircle(i,2,i.angle),r=B.calcArrowRenderProperties(s,r,i,b.getLinkViewProperty(e,t,"from_arrow_angle"),0,a,B.calcArrowSizeLength(a,b.getLinkViewProperty(e,t,"from_arrow_size"))))),l&&(s=(s=b.getLinkViewProperty(e,t,"to_arrow_offset"))<=1&&0<=s?1-s:(i=me.calcPathLength(n),rt(i-s,0)),(i=me.calcOffsetPointOnPath(n,s,!0))&&(n=Ce.calcPointOnCircle(i,2,i.angle+180),o=B.calcArrowRenderProperties(l,n,i,b.getLinkViewProperty(e,t,"to_arrow_angle"),0,a,B.calcArrowSizeLength(a,b.getLinkViewProperty(e,t,"to_arrow_size"))))),[]);return r&&s.push(r.bounds),o&&s.push(o.bounds),{from:r,to:o,bounds:be.calcRectsUnion(s)}}},p={calcNodeBounds:function(e,t,n){e=p.calcNodeRenderProperties(e,t,n);if(e)return e.bounds_render},calcNodeRenderProperties:function(e,t,n){var r,i,d,h,o,a=p.calcNodeBodyBounds(e,t);if(null==a)return null;!0!==n&&("path"!==(n=t.getType())||(r=p._calcPathArrowRenderProps(e,t,p._getNodePoints(t)))&&(s=r.bounds),i=p._calcNodeOutlineBounds(e,t,a),(d=U.calcNodeLabelRenderProperties(e,t,a))&&(l=d.bounds),(h=H.calcNodeInfoRenderProperties(e,t,a))&&(c=h.bounds),!(o=p._calcNodeBorderBounds(e,t,a,i))||"path"!==n&&"shape"!==n||(n=b.getNodeViewProperty(e,t,"stroke_line_width")||0,o=be.createGrowRect(o,n/2)));var n=_t([a,s,i,l,c],function(e){return null!=e}),s=be.calcRectsUnion(n),l=0|b.getNodeViewProperty(e,t,"rotation"),c=be.getRectCenter(a);return{body_bounds:a,body_bounds_render:be.calcRotatedRect(a,l,c),outline_bounds:i,outline_bounds_render:be.calcRotatedRect(i,l,c),border_bounds:be.calcRotatedRect(o,l,c),label_render_props:d,info_render_props:h,path_arrow_render_props:r,bounds:s,bounds_render:be.calcRotatedRect(s,l,c)}},_calcNodeBorderBounds:function(e,t,n,r){r=r||n;if(r&&(0<r.width||0<r.height))return r=be.createGrowRect(r,(0|b.getNodeViewProperty(e,t,"select_border_padding","select_border_padding"))+(0|b.getNodeViewProperty(e,t,"select_border_stroke_line_width","select_border_stroke_line_width")))},_calcNodeOutlineBounds:function(e,t,n){if(n&&0<n.width&&0<n.height&&b.getNodeViewProperty(e,t,"outline_stroke"))return be.createGrowRect(n,(0|b.getNodeViewProperty(e,t,"outline_padding"))+(0|b.getNodeViewProperty(e,t,"outline_stroke_line_width")))},calcNodeBodyBounds:function(e,t){var n=t.getType();return"path"===n?me.calcPathBounds(p._getNodePoints(t)):"heatmap"===n?(n=b.getNodeViewProperty(e,t,"heatmap_radius"),u.calcHMPointsBounds(p._getNodePoints(t),n)):p._getShapeAndImageNodeBounds(e,t)},_getShapeAndImageNodeBounds:function(e,t){e=p._getShapeAndImageNodeSize(e,t);return e.width=tt(e.width)||0,e.height=tt(e.height)||0,{x:tt(t.getProperty("x"))||0,y:tt(t.getProperty("y"))||0,width:tt(e.width)||0,height:tt(e.height)||0}},_getShapeAndImageNodeSize:function(e,t){return{width:T.getSizeProperty(e,t,"width"),height:T.getSizeProperty(e,t,"height")}},_calcPathArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return null;var r,i,o,a=b.getNodeViewProperty(e,t,"stroke_line_width"),s=b.getNodeViewProperty(e,t,"begin_arrow_shape"),s=(s&&(l=b.getNodeViewProperty(e,t,"begin_arrow_offset"),(l=me.calcOffsetPointOnPath(n,l,!0))&&(r=Ce.calcPointOnCircle(l,2,l.angle),r=B.calcArrowRenderProperties(s,r,l,b.getNodeViewProperty(e,t,"begin_arrow_angle"),0,a,B.calcArrowSizeLength(a,b.getNodeViewProperty(e,t,"begin_arrow_size"))))),b.getNodeViewProperty(e,t,"end_arrow_shape")),l=(s&&(l=(l=b.getNodeViewProperty(e,t,"end_arrow_offset"))<=1&&0<=l?1-l:(i=me.calcPathLength(n),rt(i-l,0)),(i=me.calcOffsetPointOnPath(n,l,!0))&&(n=Ce.calcPointOnCircle(i,2,i.angle+180),o=B.calcArrowRenderProperties(s,n,i,b.getNodeViewProperty(e,t,"end_arrow_angle"),0,a,B.calcArrowSizeLength(a,b.getNodeViewProperty(e,t,"end_arrow_size"))))),[]);return r&&l.push(r.bounds),o&&l.push(o.bounds),{begin:r,end:o,bounds:be.calcRectsUnion(l)}},_getNodePoints:function(e){return e.getProperty("points")||[]}},s={_getLabelProperties:function(n,r){r=r||{};var i={};return Fe(Ge({label_rotation:null,label_font:null,label_gap:null,label_align:null,label_position:null,label_direction:null,label_x_offset:0,label_y_offset:0,label_box_padding:null},s._getStyleProperties("label",{},!0),s._getStyleProperties("label_box",{},!0)),function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getArrowProperties:function(n,r){var i={};return r=r||{},Fe(Ge({arrow_shape:null,arrow_size:null,arrow_offset:null,arrow_angle:null},s._getStyleProperties("arrow",{},!0)),function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStyleProperties:function(e,t,n){return Ge(s._getFillProperties(e,t),s._getStokeProperties(e,t,n))},_getFillProperties:function(n,r){r=r||{};var i={};return Fe({fill:null,fill_gradient_colors:null,fill_gradient_direction:null,fill_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStokeProperties:function(n,r,e){r=r||{};var i={};return Fe({stroke:null,stroke_gradient_colors:null,stroke_gradient_direction:null,stroke_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),!0===e&&Fe({stroke_line_width:1,stroke_line_dash:null,stroke_line_dash_offset:0},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getPropertyKey:function(e,t){var n=[];return t&&n.unshift(t),e&&n.unshift(e),n.join("_")},_getProperties:function(e,n,r){var i;return r?(i={},n=n||{},Fe(e,function(e,t){n.hasOwnProperty(e=r+"_"+e)&&(t=n[e]),i[e]=t}),i):Ge({},e,n)}},u=(Ge(s,{LabelProperties:s._getLabelProperties(),InfoProperties:Ge({info_font:null,info_box_padding:null,info_align:null,info_x_offset:0,info_y_offset:0},s._getStyleProperties("info",{},!0),s._getStyleProperties("info_box",{},!0)),LinkFromToLabelProperties:Ge(s._getLabelProperties("from"),s._getLabelProperties("to")),SelectStyleProperties:Ge({select_style:null,select_border_padding:null,select_shadow_blur:null,select_shadow_color:null,select_shadow_offset:null},s._getStokeProperties("select_border",{},!0)),NodeProperties:Ge({shape:null,roundrect_radius:null},s._getStyleProperties(null,{},!0),s._getArrowProperties("begin"),s._getArrowProperties("end")),OutlineProperties:Ge({outline_padding:null},s._getStokeProperties("outline",{},!0)),GroupProperties:Ge({expand_shape:null,expand_padding:null,expand_parallelogram_angle:null,expand_roundrect_radius:null},s._getStyleProperties("expand",{},!0)),LinkProperties:Ge({from_position:null,to_position:null,from_offset:null,to_offset:null,from_offset_x:null,from_offset_y:null,to_offset_x:null,to_offset_y:null,corner_offset:null,curvature:null,corner_radius:null,from_corner_distance:null,to_corner_distance:null},s._getStokeProperties(null,{stroke:"#000"},!0),s._getArrowProperties("from"),s._getArrowProperties("to")),getLabelProperties:function(e,t){return s._getProperties(s.LabelProperties,e,t)},getInfoProperties:function(e,t){return s._getProperties(s.InfoProperties,e,t)},getSelectStyleProperties:function(e,t){return s._getProperties(s.SelectStyleProperties,e,t)},getNodeStyleProperties:function(e,t){return s._getProperties(s.NodeProperties,e,t)},getOutlineProperties:function(e,t){return s._getProperties(s.OutlineProperties,e,t)},getGroupProperties:function(e,t){return s._getProperties(s.GroupProperties,e,t)},getLinkProperties:function(e,t){return s._getProperties(s.LinkProperties,e,t)},getLinkFromToLabelProperties:function(e,t){return s._getProperties(s.LinkFromToLabelProperties,e,t)},HeatMapProperties:{heatmap_blur:null,heatmap_colors:null,heatmap_opacity:null,heatmap_max_opacity:null,heatmap_min_opacity:null,heatmap_radius:null,heatmap_min_value:null,heatmap_max_value:null},getHeatMapProperties:function(e,t){return s._getProperties(s.HeatMapProperties,e,t)}}),je(t,Sn,{___zdefaults_:Ge({alpha:1,style:null,hover_style:He("GVIEW_HOVER_STYLE")},s.getLabelProperties({label_rotation:0,label_gap:0,label_align:"center",label_fill:He("GVIEW_LABEL_FILL")}),s.getInfoProperties({info_fill:He("GVIEW_INFO_FILL"),info_box_padding:2,info_box_fill:He("GVIEW_INFO_BOX_FILL")}),s.getSelectStyleProperties({select_style:"border",select_border_stroke:He("GVIEW_SELECT_BORDER_STROKE"),select_border_stroke_line_width:1,select_shadow_color:He("GVIEW_SELECT_SHADOW_COLOR"),select_shadow_blur:6,select_shadow_offset:{x:0,y:0}})),draw:function(e){},getBounds:function(e,t,n){var r=arguments[0];return!0!==r&&!1!==r||(e=null,t=r,n=arguments[1]),this._getBounds(e,t=!1!==t?!0:t,n)},_getBounds:function(e,t,n){}}),je(r,t,Ge({__toTypeString_Node_$:function(){return ae},__className_:"Node",___zdefaults_:Ge({x:0,y:0,image:null,rotation:0,width:He("GVIEW_NODE_WIDTH"),height:He("GVIEW_NODE_HEIGHT"),label_gap:3,label_position:"bottom",select_border_padding:2},s.getNodeStyleProperties({shape:He("GVIEW_NODE_SHAPE"),roundrect_radius:.12,fill:He("GVIEW_NODE_FILL"),stroke:He("GVIEW_NODE_STROKE"),stroke_line_width:1,begin_arrow_size:2,begin_arrow_offset:0,begin_arrow_angle:46,end_arrow_size:2,end_arrow_offset:0,end_arrow_angle:46}),s.getOutlineProperties({outline_padding:2,outline_stroke_line_width:1}),s.getHeatMapProperties({heatmap_blur:.85,heatmap_colors:He("GVIEW_NODE_HEATMAP_COLORS"),heatmap_opacity:0,heatmap_max_opacity:1,heatmap_min_opacity:0,heatmap_radius:30})),getType:function(){var e=this.get("type");return e||(this.get("image")?"image":this.get("points")?"path":"shape")},getRendererClass:function(e){return J}},{getLinks:function(e){return!1===e?this._linkArray:ht([],this._linkArray)},getFromLinks:function(e){return!1===e?this._fromLinkArray:ht([],this._fromLinkArray)},getToLinks:function(e){return!1===e?this._toLinkArray:ht([],this._toLinkArray)},getLinksTo:function(e){var t=e.getToLinks(!1);return _t(this.getFromLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksFrom:function(e){var t=e.getFromLinks(!1);return _t(this.getToLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksBetween:function(e){var t=e.getLinks(!1);return _t(this.getLinks(!1),function(e){return-1<t.indexOf(e)})},_addFromLink:function(e){this._fromLinkArray.push(e),this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeFromLink:function(e){ft(this._fromLinkArray,e),ft(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_addToLink:function(e){this._toLinkArray.push(e),this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeToLink:function(e){ft(this._toLinkArray,e),ft(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)}},{beforeSetProperty:function(e,t,n){"host"===e&&n&&n.removeChangeListener(this._onHostChange,this),r.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"host"===e&&t&&t.addChangeListener(this._onHostChange,this),r.superClass.afterSetProperty.apply(this,arguments)},_onHostChange:function(e){var t,n,r=e.property;"x"!==r&&"y"!==r||!0!==this.__isUpdatingFromHost&&!0!==this.__isUpdatingFollower&&(this.__isUpdatingFromHost=!0,t=e.source,h(t)||(e=(e.new_value||0)-(e.old_value||0),t.__isUpdatingFollower=!0,n=this.get(r),this.set(r,n+e),delete t.__isUpdatingFollower,delete this.__isUpdatingFromHost))}},{setPosition:function(e){T.setPosition(null,this,ue.getArgsPoint.apply(null,arguments))},getPosition:function(){if(!T.isPointsNode(this))return{x:this.getProperty("x"),y:this.getProperty("y")};var e=this.getBounds();return e?{x:e.x,y:e.y}:void 0},setCenter:function(e){if(null!=(e=ue.getArgsPoint.apply(null,arguments))){var t;if(T.isPointsNode(this)){var n=this.getBounds();if(!n)return;t=n.width,n=n.height}else t=this.getProperty("width"),n=this.getProperty("height");this.setPosition({x:e.x-t/2,y:e.y-n/2})}},getCenter:function(){if(!T.isPointsNode(this))return{x:this.getProperty("x")+this.getProperty("width")/2,y:this.getProperty("y")+this.getProperty("height")/2};var e=this.getBounds();return e?{x:e.x+e.width/2,y:e.y+e.height/2}:void 0},getSize:function(){if(!T.isPointsNode(this))return{width:this.getProperty("width"),height:this.getProperty("height")};var e=this.getBounds();return e?{width:e.width,height:e.height}:void 0},setSize:function(e){T.setSize(null,this,ue.getArgsSize.apply(null,arguments))},_getBounds:function(e,t){return p.calcNodeBounds(e,this,t)}})),je(c,t,{__toTypeString_Link_$:function(){return se},__className_:"Link",___zdefaults_:Ge({type:null,from:null,to:null,label_rotation:!0},s.getLinkProperties({stroke:He("GVIEW_LINK_STROKE"),stroke_line_width:1,from_offset:0,to_offset:0,corner_radius:0,curvature:.15,from_arrow_size:2,from_arrow_offset:0,from_arrow_angle:46,to_arrow_size:2,to_arrow_offset:0,to_arrow_angle:46}),s.getLinkFromToLabelProperties({from_label_rotation:!0,to_label_rotation:!0,from_label_gap:0,to_label_gap:0,from_label_align:"center",to_label_align:"center",from_label_fill:"#000",to_label_fill:"#000"})),isLoop:function(){var e=this.getProperty("from"),t=this.getProperty("to");return null!=e&&e===t},beforeSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!n||("from"===e?n._removeFromLink(this):"to"===e&&n._removeToLink(this)),c.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!t||("from"===e?t._addFromLink(this):"to"===e&&t._addToLink(this)),c.superClass.afterSetProperty.apply(this,arguments)},_getBounds:function(e,t){return W.calcLinkBounds(e,this,t)},getPathPoints:function(e){return W.calcLinkPathPoints(e,this)},getRendererClass:function(e){return Y}}),je(n,r,{__toTypeString_Group_$:function(){return le},__className_:"Group",___zdefaults_:Ge({shape:"roundrect"},s.getGroupProperties({width:He("GVIEW_GROUP_WIDTH"),height:He("GVIEW_GROUP_HEIGHT"),expand_padding:10,expand_shape:He("GVIEW_GROUP_EXPAND_SHAPE"),expand_roundrect_radius:.12,expand_parallelogram_angle:78,expand_fill:He("GVIEW_GROUP_EXPAND_FILL"),expand_stroke:He("GVIEW_GROUP_EXPAND_STROKE"),expand_stroke_line_width:1})),setPosition:function(e){L.setPosition(null,this,ue.getArgsPoint.apply(null,arguments))},_getBounds:function(e,t,n){return e&&null==n&&(n=e.isExpanded(this)),N.calcGroupBounds(e,this,n,t)},getGroupChildren:function(){return this.getChildren(!1)},getRendererClass:function(){return Z}}),je(i,r,{__toTypeString_Subview_$:function(){return ce},__className_:"subview",___zdefaults_:{shape:He("GVIEW_SUBVIEW_SHAPE"),width:He("GVIEW_SUBVIEW_WIDTH"),height:He("GVIEW_SUBVIEW_HEIGHT")}}),je(a,c,{__toTypeString_Link_$:function(){return se},__toTypeString_Subview_$:function(){return ce},__toTypeString_LinkSubview_$:function(){return de},__className_:"LinkSubview"}),{_point_templates:{},calcHMPointsValues:function(e){var t=0,n=0;return e.forEach(function(e){e=e.value;null!=e&&(t=it(t,e),n=rt(n,e))}),{min:t||0,max:n||0}},calcHMPointsBounds:function(e,r){if(null==e||0===e.length)return null;r|=0;var i=null,o=null,a=null,s=null;return e.forEach(function(e,t){var n=e.hasOwnProperty("radius")?0|e.radius:r;s=0===t?(i=e.x-n,o=e.y-n,a=e.x+n,e.y+n):(i=it(e.x-n,i),o=it(e.y-n,o),a=rt(e.x+n,a),rt(e.y+n,s))}),{x:i,y:o,width:a-i,height:s-o}},drawHM:function(e,t,n){var r=u._getShadowCtx(n.width,n.height);u._updateAlphaCtx(r,e.getRenderConfig("points"),n,e.getRenderConfig("heatmap_min_value"),e.getRenderConfig("heatmap_max_value"),e.getRenderConfig("heatmap_radius"),e.getRenderConfig("heatmap_blur")),u._colorize(r,n,e.getRenderConfig("heatmap_opacity"),e.getRenderConfig("heatmap_min_opacity"),e.getRenderConfig("heatmap_max_opacity"),e.getRenderConfig("heatmap_colors")),t.drawImage(u._shadowCVS,n.x,n.y)},_updateAlphaCtx:function(i,e,t,o,a,s,n){var l=1-n,c=t.x,d=t.y;e.forEach(function(e){var t=e.x-c,n=e.y-d,r=e.hasOwnProperty("radius")?0|e.radius:s;0<r&&(null!=(e=e.value)&&(e=rt(o,it(e,a)),i.globalAlpha=a!==o?(e-o)/(a-o):1),e=t-r,t=n-r,i.drawImage(u._getPointTemplate(r,l),e,t))})},_colorize:function(e,t,n,r,i,d){n=255*n|0,i=255*i|0,r=255*r|0;for(var t=e.getImageData(0,0,t.width,t.height),o=t.data,h=o.length,a=u._getColorPalette(d),s=3;s<h;s+=4){var l=o[s],c=4*l;c&&(l=0<n?n:l<i?l<r?r:l:i,o[s-3]=a[c],o[s-2]=a[1+c],o[s-1]=a[2+c],o[s]=l)}e.putImageData(t,0,0)},_getColorPalette:function(e){var t=Xe("canvas"),n=t.getContext("2d"),r=(t.setAttribute("width",256),t.setAttribute("height",1),n.createLinearGradient(0,0,256,1));return Fe(e||{},function(e,t){r.addColorStop(e,t)}),n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},_getShadowCtx:function(e,t){return u._shadowCVS||(u._shadowCVS=Xe("canvas"),u._shadowCTX=u._shadowCVS.getContext("2d")),u._shadowCVS.setAttribute("width",e),u._shadowCVS.setAttribute("height",t),u._shadowCTX},_getPointTemplate:function(e,t){var n=e+"$"+t;if(u._point_templates[n])return u._point_templates[n];var r=Xe("canvas"),i=r.getContext("2d"),o=e,a=e,s=2*e,s=(r.setAttribute("width",s),r.setAttribute("height",s),{x:0,y:0,width:s,height:s});return 1===t?mn.render(i,s,"circle",{fill:"rgba(0,0,0,1)"}):((t=i.createRadialGradient(o,a,e*t,o,a,e)).addColorStop(0,"rgba(0,0,0,1)"),t.addColorStop(1,"rgba(0,0,0,0)"),mn.render(i,s,"rect",{fill:t})),u._point_templates[n]=r}}),l={getCalcRenderProperty:function(e,t){e=e.getRenderConfig(K.CALC_RENDER_PROPS);if(e)return e[t]},getCalcRenderBodyBounds:function(e){return l.getCalcRenderProperty(e,"body_bounds")},getCalcRenderLabelProperty:function(e){e=l.getCalcRenderProperty(e,"label_render_props");if(e)return e.label},getCalcRenderLabelBoxProperty:function(e){e=l.getCalcRenderProperty(e,"label_render_props");if(e)return e.label_box},getCalcRenderInfoProperty:function(e){e=l.getCalcRenderProperty(e,"info_render_props");if(e)return e.info},getCalcRenderInfoBoxProperty:function(e){e=l.getCalcRenderProperty(e,"info_render_props");if(e)return e.info_box},isRenderBodyVisible:function(e){e=l.getCalcRenderBodyBounds(e);return e&&0<e.width&&0<e.height},updateLabelConfig:function(e,t,n,r){null!=e.getRenderConfig("label")&&(l.updatePropertiesRenderConfig(e,t,n,r,s.LabelProperties),r.label_font=b.getFont(r.label_font),r.label_in_front=e.getViewRenderConfig("label_in_front"))},updateInfoConfig:function(e,t,n,r){null!=e.getRenderConfig("info")&&(l.updatePropertiesRenderConfig(e,t,n,r,s.InfoProperties),r.info_font=b.getFont(r.info_font),r.info_in_front=e.getViewRenderConfig("info_in_front"))},updateSelectedConfig:function(e,t,n,r){!0===e.getRenderConfig("selected")&&l.updatePropertiesRenderConfig(e,t,n,r,s.SelectStyleProperties)},updatePropertiesRenderConfig:function(e,r,i,o,t,a){Fe(t,function(e,t){var n;o[e]=r.getDataViewProperty(i,e,n=a?a+"_"+e:n)})}},G={updateNodeConfig:function(e,t,n,r){var i=p.calcNodeRenderProperties(t,n);null!=i&&(r[K.CALC_RENDER_PROPS]=i,i=n.getType(),r.type=i,r.rotation=0|b.getNodeViewProperty(t,n,"rotation"),l.updatePropertiesRenderConfig(e,t,n,r,s.NodeProperties,"node"),"image"===i?G._updateNodeImageConfig(e,t,n,r):"path"===i?G._updateNodePathConfig(e,t,n,r):"heatmap"===i?G._updateNodeHeatMapConfig(e,t,n,r):G._updateNodeShapeConfig(e,t,n,r),G.updateNodeOutlineConfig(e,t,n,r))},_updateNodeImageConfig:function(e,t,n,r){var i;l.isRenderBodyVisible(e)&&(i=b.getNodeViewProperty(t,n,"image"),(r.image=i)&&(!(e=lt(i)?xe.get(i,e.updateData,e):i)||(i=b.getNodeViewProperty(t,n,"image_color"))&&((t=e.$_color_map=e.$_color_map||{})[i]=t[i]||xe.getColorImage(e,i,"canvas"),e=t[i]),r[K.NODE_IMAGE]=e))},_updateNodePathConfig:function(e,t,n,r){r.points=n.getProperty("points")||[]},_updateNodeHeatMapConfig:function(e,t,n,r){var i=n.getProperty("points")||[];0!==(r.points=i).length&&(l.updatePropertiesRenderConfig(e,t,n,r,s.HeatMapProperties,"node"),e=r.heatmap_min_value,t=r.heatmap_max_value,null!=e&&null!=t||(n=u.calcHMPointsValues(i),null==e&&(r.heatmap_min_value=n.min),null==t&&(r.heatmap_max_value=n.max)))},_updateNodeShapeConfig:function(e,t,n,r){},updateNodeOutlineConfig:function(e,t,n,r){l.getCalcRenderProperty(e,"outline_bounds")&&l.updatePropertiesRenderConfig(e,t,n,r,s.OutlineProperties,"node")}},F=function(e,t,n,r){var i=W.calcLinkRenderProperties(t,n);null!=i&&(r[K.CALC_RENDER_PROPS]=i,l.updatePropertiesRenderConfig(e,t,n,r,s.LinkProperties,"link"),r.type=n.get("type"),r.loop=n.isLoop(),r.from=n.get("from"),r.to=n.get("to"),r.link_gap=e.getViewRenderConfig("link_gap"),r.from_agent=f.getFromNodeAgent(t,n),r.to_agent=f.getToNodeAgent(t,n),r.label_rotation=t.getDataViewProperty(n,"label_rotation","link_label_rotation"))},j=function(e,t,n,r){var i,o=t.isExpanded(n),a=(r.expand=o,N.calcGroupRenderProperties(t,n,o));null!=a&&((r[K.CALC_RENDER_PROPS]=a).is_group&&o&&(l.updatePropertiesRenderConfig(e,t,n,i={},s.GroupProperties,"group"),Fe(i,function(e,t){r[e.substring(7)]=i[e]}),r.rotation=0,a=(o=a.expand_render_props).type,"path"===(r.type=a)&&(r.points=o.points)),G.updateNodeOutlineConfig(e,t,n,r))},q={drawNodePathArrow:function(e,t){var n,r,i=l.getCalcRenderProperty(e,"path_arrow_render_props");i&&((r=i.begin)&&("shape"===(n=r.type)?q._drawShapeArrow(e,t,r,"begin_arrow","stroke"):"path"===n&&q._drawPathArrow(e,t,r,"begin_arrow","stroke")),(n=i.end)&&("shape"===(r=n.type)?q._drawShapeArrow(e,t,n,"end_arrow","stroke"):"path"===r&&q._drawPathArrow(e,t,n,"end_arrow","stroke")))},drawLinkArrow:function(e,t){var n,r,i=l.getCalcRenderProperty(e,"arrow_render_props");i&&((r=i.from)&&("shape"===(n=r.type)?q._drawShapeArrow(e,t,r,"from_arrow","stroke"):"path"===n&&q._drawPathArrow(e,t,r,"from_arrow","stroke")),(n=i.to)&&("shape"===(r=n.type)?q._drawShapeArrow(e,t,n,"to_arrow","stroke"):"path"===r&&q._drawPathArrow(e,t,n,"to_arrow","stroke")))},_drawShapeArrow:function(r,e,i,o,a){var s=i.shape_bounds,t=s.x+s.width/2,n=s.y+s.height/2,l=i.rotation;_n(e,l,{x:t,y:n},function(e){var t=i.shape,n=_.getStrokeOpt(r,s,o+"_stroke");un(e,n.attr,function(){mn.render(e,s,t,{fill:_.getStyle(r,s,o+"_fill")||_.getStyle(r,s,a),stroke:n.stroke},{radius:.2})})})},_drawPathArrow:function(e,t,n,r,i){var o,a=n.shape,s=n.bounds,l=_.getStrokeOpt(e,s,r+"_stroke"),c=l.stroke,l=l.attr;"open_arrow"!==a?o=_.getStyle(e,s,r+"_fill")||_.getStyle(e,s,i):null!=c&&null!=l||(a=_.getStrokeOpt(e,s,i),c=c||a.stroke,l=l||a.attr),un(t,l,function(){yn.render(t,n.points,{fill:o,stroke:c})})}},_={getStrokeAttr:function(e,t){return{lineWidth:e.getRenderConfig(t+"_line_width"),lineDash:e.getRenderConfig(t+"_line_dash"),lineDashOffset:e.getRenderConfig(t+"_line_dash_offset")}},getStrokeOpt:function(e,t,n){var r,t=_.getStyle(e,t,n);return!t||(r=_.getStrokeAttr(e,n)).lineWidth<=0&&(t=null),{stroke:t,attr:r}},getStyle:function(e,t,n){var r=e.getRenderConfig(n);return t={x:t.x,y:t.y,width:rt(1,t.width),height:rt(1,t.height)},"linear_gradient"===r?gn.createRectDirectionLinearGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"radial_gradient"===r?gn.createRectDirectionRadialGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"conic_gradient"===r?gn.createRectConicGradient(t,e.getRenderConfig(n+"_gradient_colors"),0):"pattern"===r?Cn.createPattern(e.getRenderConfig(n+"_pattern_image")):r},drawLabel:function(e,t){var n,r,i,o=l.getCalcRenderLabelProperty(e);!o||(n=o.render_props)&&(r=n.bounds,i=_.getStrokeOpt(e,r,"label_stroke"),un(t,i.attr,function(){bn.render(t,e.getRenderConfig("label"),n.point,{fill:_.getStyle(e,r,"label_fill"),stroke:i.stroke},n.direction,{align:e.getRenderConfig("label_align"),font:e.getRenderConfig("label_font"),text_size:n.size,rotation:n.rotation})}))},drawLabelBox:function(n,r){var i,e,t=l.getCalcRenderLabelBoxProperty(n);!t||(t=t.render_props)&&(i=t.bounds,t=0|t.rotation,e={x:i.x+i.width/2,y:i.y+i.height/2},_n(r,t,e,function(){var e=_.getStrokeOpt(n,i,"label_box_stroke"),t=_.getStyle(n,i,"label_box_fill");un(r,e.attr,function(){mn.render(r,i,"rect",{fill:t,stroke:e.stroke})})}))},drawInfo:function(e,t){var n,r,i,o=l.getCalcRenderInfoProperty(e);!o||(n=o.render_props)&&(r=n.bounds,i=_.getStrokeOpt(e,r,"info_stroke"),un(t,i.attr,function(){bn.render(t,e.getRenderConfig("info"),n.point,{fill:_.getStyle(e,r,"info_fill"),stroke:i.stroke},n.direction,{align:e.getRenderConfig("info_align"),font:e.getRenderConfig("info_font"),text_size:n.size,rotation:n.rotation})}))},drawInfoBox:function(e,t){var n,r,i,o,a=l.getCalcRenderInfoBoxProperty(e);!a||(a=a.render_props)&&(n=a.bounds,r=a.points,i=_.getStrokeOpt(e,n,"info_box_stroke"),o=_.getStyle(e,n,"info_box_fill"),un(t,i.attr,function(){yn.render(t,r,{fill:o,stroke:i.stroke})}))}},$={draw:function(e,t){var n,r=l.getCalcRenderBodyBounds(e);r&&("image"===(n=e.getRenderConfig("type"))?$._drawImage(e,t,r):"path"===n?$._drawPath(e,t,r):"heatmap"===n?$._drawHeatMap(e,t,r):$._drawShape(e,t,r),$._drawOutline(e,t,r))},_drawImage:function(e,t,n){e=e.getRenderConfig(K.NODE_IMAGE);e?t.drawImage(e,n.x,n.y,n.width,n.height):mn.render(t,n,"rect",{strokeStyle:"#ccc",fillStyle:"#eee"},!0)},_drawPath:function(e,t,n){var r=_.getStrokeOpt(e,n,"stroke");un(t,r.attr,function(){yn.render(t,e.getRenderConfig("points"),{fill:_.getStyle(e,n,"fill"),stroke:r.stroke},!0)}),q.drawNodePathArrow(e,t)},_drawHeatMap:function(e,t,n){u.drawHM(e,t,n)},_drawShape:function(e,t,n){var r,i=e.getRenderConfig("shape");i&&(r=_.getStrokeOpt(e,n,"stroke"),un(t,r.attr,function(){mn.render(t,n,i,{fill:_.getStyle(e,n,"fill"),stroke:r.stroke},{radius:e.getRenderConfig("roundrect_radius")},!0)}))},_drawOutline:function(e,t,n){var r,i=l.getCalcRenderProperty(e,"outline_bounds");!i||(r=_.getStrokeOpt(e,n,"outline_stroke")).stroke&&un(t,r.attr,function(){mn.render(t,i,"rect",{stroke:r.stroke})})},drawSelectBorder:function(e,t){var n,r;"border"===e.getRenderConfig("select_style")&&(!(n=l.getCalcRenderProperty(e,"border_bounds"))||(r=_.getStrokeOpt(e,n,"select_border_stroke")).stroke&&un(t,r.attr,function(){mn.render(t,n,"rect",{stroke:r.stroke})}))}},X={draw:function(e,t){var n,r,i=l.getCalcRenderProperty(e,"draw_points");null==i||i.length<2||(X._drawSelectBorder(e,t,i),r=l.getCalcRenderBodyBounds(e),n=_.getStrokeOpt(e,r,"stroke"),(r=X._getLinkLinearGradientStroke(e,i))&&(n.stroke=r),un(t,n.attr,function(){yn.render(t,i,{stroke:n.stroke},!0)}),q.drawLinkArrow(e,t))},_getLinkLinearGradientStroke:function(e,t){if(1<t.length&&"linear_gradient"===e.getRenderConfig("stroke"))return gn.createLinearGradient(t[0],t[t.length-1],e.getRenderConfig("stroke_gradient_colors"))},_drawSelectBorder:function(e,t,n){var r,i,o;"border"===e.getRenderConfig("select_style")&&(r=l.getCalcRenderBodyBounds(e),i=0|e.getRenderConfig("stroke_line_width"),(o=_.getStrokeOpt(e,r,"select_border_stroke")).attr=o.attr||{},o.attr.lineWidth=i+rt(2*(0|o.attr.lineWidth),2),un(t,o.attr,function(){yn.render(t,n,{stroke:o.stroke},!0)}))}},K={CALC_RENDER_PROPS:"calc_render_props_$",NODE_IMAGE:"node_image_$",NODE_SELECT_BORDER_BOUNDS:"node_select_border_bounds_$"},J=(je(g,Gn,{updateRenderConfig:function(e,t,n){g.superClass.updateRenderConfig.apply(this,arguments),n.alpha=e.getDataViewProperty(t,"alpha","data_alpha"),n.style=e.getDataViewProperty(t,"style","data_style"),l.updateLabelConfig(this,e,t,n),l.updateInfoConfig(this,e,t,n),l.updateSelectedConfig(this,e,t,n)},doDraw:function(e,t){g.superClass.doDraw.apply(this,arguments),null!=this.getRenderConfig(K.CALC_RENDER_PROPS)&&this._updateRenderAttributes(e,t,function(e){this._drawBody(e),!0!==t&&(!0!==this.getRenderConfig("label_in_front")&&this.drawLabel(e),!0!==this.getRenderConfig("info_in_front")&&this.drawInfo(e))})},_updateRenderAttributes:function(e,t,n){var r={globalAlpha:this.getRenderConfig("alpha")},i=this.getRenderConfig("style");return i&&(r=Ge(r,i),!0===t&&delete r.shadowColor),!0!==t&&((i=this.getRenderConfig("hover_style"))&&(r=Ge(r,i)),null!=(t=this.getRenderConfig("select_style"))&&("shadow"===t?(r.shadowBlur=this.getRenderConfig("select_shadow_blur"),r.shadowColor=this.getRenderConfig("select_shadow_color"),i=this.getRenderConfig("select_shadow_offset"),r.shadowOffsetX=i.x,r.shadowOffsetY=i.y):We(t)&&(r=Ge(r,t)))),un(e,r,n,this),r},_drawBody:function(e){var t=this._data.drawBody;t&&!1===t.apply(this._data,[e,this._data,this._view,this])||this.drawBody(e)},drawBody:function(e){},drawLabel:function(e,t){!0===t?this._updateRenderAttributes(e,!1,this._drawLabel):this._drawLabel(e)},_drawLabel:function(e){_.drawLabelBox(this,e),_.drawLabel(this,e)},drawInfo:function(e,t){!0===t?this._updateRenderAttributes(e,!1,this._drawInfo):this._drawInfo(e)},_drawInfo:function(e){_.drawInfoBox(this,e),_.drawInfo(this,e)},hits:function(e,t){var n=l.getCalcRenderProperty(this,"bounds");return null!=n&&(n=be.createGrowRect(n,30,30),!1!==Ce.rectContainsPoint(n,e)&&g.superClass.hits.apply(this,arguments))}}),function(){J.superClass.constructor.apply(this,arguments)}),Y=(je(J,g,{updateRenderConfig:function(e,t,n){J.superClass.updateRenderConfig.apply(this,arguments),G.updateNodeConfig(this,e,t,n)},doDraw:function(e,t){J.superClass.doDraw.apply(this,arguments),null!=this.getRenderConfig(K.CALC_RENDER_PROPS)&&$.drawSelectBorder(this,e)},_updateRenderAttributes:function(e,t,n){var r=arguments,i=this.getRenderConfig("rotation");if(null==i||0===i)return J.superClass._updateRenderAttributes.apply(this,r);_n(e,i,be.getRectCenter(l.getCalcRenderBodyBounds(this)),function(e){J.superClass._updateRenderAttributes.apply(this,r)},this)},drawBody:function(e){J.superClass.drawBody.apply(this,arguments),$.draw(this,e)},getBounds:function(e){return!0===e?l.getCalcRenderProperty(this,"body_bounds_render"):l.getCalcRenderProperty(this,"bounds_render")}}),function(){Y.superClass.constructor.apply(this,arguments)}),Z=(je(Y,g,{updateRenderConfig:function(e,t,n){Y.superClass.updateRenderConfig.apply(this,arguments),F(this,e,t,n)},drawBody:function(e){Y.superClass.drawBody.apply(this,arguments),X.draw(this,e)},getBounds:function(e){return!0===e?l.getCalcRenderProperty(this,"body_bounds"):l.getCalcRenderProperty(this,"bounds")}}),function(){Z.superClass.constructor.apply(this,arguments)});je(Z,J,{updateRenderConfig:function(e,t,n){Z.superClass.updateRenderConfig.apply(this,arguments),j(this,e,t,n)}}),je(y,Hn,{getViewDefaultTypes:function(){return["mousedown"]},isDraggable:function(e,t){return!1},onDragStart:function(e,t){},onDragEnd:function(e,t){},onDrag:function(e,t){},getDragCursor:function(e){},reset:function(e,t){},handle_mousedown:function(e,t){this.isDraggable(e,t)&&(this._mousedown_point=this.getView().getEventRelativePoint(e),this._addDragListener(),this.onDragStart(e,t))},handle_drag_mousemove:function(e){null!=this._mousedown_point&&(e.preventDefault(),!0!==this._drag_cursor_set&&(this._drag_cursor_set=!0),Xn(this,this.getDragCursor()),this.onDrag(e,this.getView()))},handle_drag_mouseup:function(e){var t=this.getView();this.onDragEnd(e,t),this._removeDragListener(),this._reset(e,t)},_reset:function(e,t){Xn(this,"default"),delete this._mousedown_point,delete this._drag_cursor_set,this.reset(e,t)},_addDragListener:function(){!0!==this._drag_listener_added&&(this._drag_listener_added=!0,Kt(e,"mousemove",this.handle_drag_mousemove,this),Kt(e,"mouseup",this.handle_drag_mouseup,this))},_removeDragListener:function(){!0===this._drag_listener_added&&(this._drag_listener_added=!1,Jt(e,"mousemove",this.handle_drag_mousemove,this),Jt(e,"mouseup",this.handle_drag_mouseup,this))}}),je(v,y,{getViewDefaultTypes:function(){return["wheel","mousedown"]},handle_wheel:function(e,t){var n,r;0<e.buttons||(e.preventDefault(),n=t.getProperty("zoom_factor"),r=t.getProperty("zoom"),en.isWheelDown(e)?r/=n:r*=n,t.zoomByPoint(r,t.getEventRelativePoint(e)))},isDraggable:function(e,t){return!!qt.isMouseAuxiliaryButton(e)||!e.ctrlKey&&!t.getDataAt(e,Kn(t))},onDragStart:function(e,t){this._mousedown_translate_x=t.getProperty("translate_x"),this._mousedown_translate_y=t.getProperty("translate_y")},onDrag:function(e,t){var n;null!=this._mousedown_translate_x&&(n=(e=t.getEventRelativePoint(e)).x-this._mousedown_point.x,e=e.y-this._mousedown_point.y,n=this._mousedown_translate_x+n,e=this._mousedown_translate_y+e,t.translate(n,e))},getDragCursor:function(){return"grabbing"},reset:function(e,t){this._mousedown_translate_x=null,this._mousedown_translate_y=null}}),je(C,Hn,{getViewDefaultTypes:function(){return["click","dblclick","contextmenu"]},handle_contextmenu:function(e,t){e.preventDefault()},handle_click:function(e,t){var n=t.getDataAt(e,Kn(t));n&&(t._isDisabled(n)||t._onDataClick(n,e))},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e,Kn(t));n?t._isDisabled(n)||(k(n)?this._isSubviewDrillOnDblClick(t,n)&&t.setCurrentSubview(n):h(n)&&t._isExpandable(n)&&this._isGroupExpandOnDblClick(t,n)&&t.toggleExpand(n),t._onDataDblClick(n,e)):!this._isSubviewDrillOnDblClick(t,n)||(e=t.getCurrentSubview())&&t.setCurrentSubview(e.getProperty("parent"))},_isGroupExpandOnDblClick:function(e,t){return!1!==e.getDataViewProperty(t,"expand_on_dblclick","group_expand_on_dblclick")},_isSubviewDrillOnDblClick:function(e,t){return t?!1!==e.getDataViewProperty(t,"drill_on_dblclick","subview_drill_on_dblclick"):!1!==e.getProperty("subview_drill_on_dblclick")}}),je(m,y,{getViewDefaultTypes:function(){return["mousedown"]},_isMultipleSelect:function(){return"multiple"===this.getView().getSelectMode()},isDraggable:function(e,t){return e.ctrlKey&&!t.getDataAt(e,Kn(t))&&this._isMultipleSelect()},getDragCursor:function(){return"crosshair"},reset:function(e,t){!(this._mousemove_point=null)===this._drag_draw_added&&(this._drag_draw_added=!1,t.removeControllerDraw(this.drawAreaSelect,this))},handle_mousedown:function(e,t){var n;if(!qt.isMouseAuxiliaryButton(e))return n=t.getDataAt(e,Kn(t)),n?t._isDisabled(n)||!t.isSelectable(n)?void 0:void(e.ctrlKey?t.isSelected(n)?t.removeSelect(n):this._isMultipleSelect()?t.addSelect(n):t.setSelect(n):t.isSelected(n)||t.setSelect(n)):this.isDraggable(e,t)?m.superClass.handle_mousedown.apply(this,arguments):void(n||t.clearSelect())},onDrag:function(e,t){this._mousemove_point=t.getEventRelativePoint(e),t.updateControllerCanvas()},onDragStart:function(e,t){!0!==this._drag_draw_added&&(this._drag_draw_added=!0,t.addControllerDraw(this.drawAreaSelect,this))},onDragEnd:function(e,t){var n=this._getSelectRect();n&&(n=t.getDataArrayAtRect(n),e.ctrlKey?n.forEach(function(e){t.isSelected(e)?t.removeSelect(e):t.addSelect(e)}):t.setSelect(n))},drawAreaSelect:function(e){var t=this._getSelectRect();t&&dn.saveAndSet2DAttributes(e,{lineWidth:.6},function(){mn.render(e,t,"rect",{fill:"rgba(51,153,255,0.2)",stroke:"#3399ff"})})},_getSelectRect:function(){var e=this._mousedown_point,t=this._mousemove_point;if(null==e||null==t)return null;var n=it(e.x,t.x),r=it(e.y,t.y);return{x:n,y:r,width:rt(e.x,t.x)-n,height:rt(e.y,t.y)-r,intersect:n<t.x&&r<t.y}}}),je(x,y,{isDraggable:function(e,t){if(!qt.isMouseMainButton(e))return!1;e=t.getDataAt(e,Kn(t));return null!=e&&!t._isDisabled(e)},onDragStart:function(e,t){this._mousemove_point=t.getTransformedPoint(e)},reset:function(){delete this._move_node_arr},onDrag:function(e,n){var r,i,e=n.getTransformedPoint(e);null==this._move_node_arr&&(r=[],(i=n.getSelected(!1)).forEach(function(e){var t;d(e)&&!n._isDisabled(e)&&n._isMovable(e)&&(t=E.getSameSubviewAncestorArray(e),pt(t,function(e){return-1<i.indexOf(e)})||(h(e)?ht(r,this._getGroupChildren(e,n)):r.push(e)))},this),this._move_node_arr=r),this._move(e.x-this._mousemove_point.x,e.y-this._mousemove_point.y),this._mousemove_point=e},_getGroupChildren:function(e,t){return _t(Rn.getAddedDescendantArray(t.getProvider(),e),function(e){return d(e)&&!h(e)})},_move:function(n,r){this._move_node_arr.forEach(function(e){var t=e.getPosition();e.setPosition(t.x+n,t.y+r)},this)}}),je(w,Q,{___zdefaults_:{movable_on_selected:!1,stop_on_complete:!1,start_on_change:!1},afterSetProperty:function(e,t,n){zn.superClass.afterSetProperty.apply(this,arguments),"start_on_change"===e&&this._updateStartOnChange()},_updateStartOnChange:function(){this._gView&&(!0===this.get("start_on_change")?this._addChangeListener():this._removeChangeListener())},_addChangeListener:function(){!0!==this._on_model_change&&(this._on_model_change=!0,this._gView.onModelChange(this._handleModelChange,this))},_removeChangeListener:function(){!0!==this._on_model_change&&this._gView.offModelChange(this._handleModelChange,this)},_handleModelChange:function(e){var t;!0!==this._is_updating&&"data"===e.type&&(t=(e=e.event).data,"x"!==(e=e.property)&&"y"!==e||!this._isLayoutNode(t)||this.start())},start:function(){},stop:function(){},layout:function(){},rebuild:function(){},step:function(){},onComplete:function(){},getProvider:function(){return this._gView.getProvider()},getNodeBounds:function(e){return e.getBounds(this._gView)},isSelected:function(e){return!!this._gView&&this._gView.isSelected(e)},isVisible:function(e){return!this._gView||this._gView._isVisible(e)},_isLayoutNode:function(e){return!!d(e)&&(!h(e)||!!this._gView&&!this._gView.isExpanded(e))},_getLayoutNodes:function(e){var t=this,n=this.getGView();return(e=null==e&&n?n.getDataArray():e)?_t(e,function(e){return t.isVisible(e)&&t._isLayoutNode(e)}):[]},isMovable:function(e){return!this._gView||!1!==this._gView.isMovable(e)&&((!1!==this.get("movable_on_selected")||!this.isSelected(e))&&(!!d(e)&&(!h(e)||!this._gView.isExpanded(e))))},getGView:function(){return this._gView}}),je(P,w,{___zdefaults_:{start_on_change:!0,stop_on_complete:!0,node_repulsion:.8,link_repulsion:.2,link_limit:30,limit_bounds:null,motion_limit:.01},start:function(){this._damper=1,this._timer||(this._hasFix=!1,this._timer=xt(this._step,this))},stop:function(){this._timer&&(Ct.cancelCallRAFInterval(this._timer),this._timer=null),this._hasFix=!1},layout:function(){for(this._damper=1;"complete"!==this._step(););},_step:function(){if(this._rebuild(),this._doRelax(),this._updatePosition(),this.step(),this._isComplete())return!0===this.get("stop_on_complete")&&this.stop(),this.onComplete(),"complete"},_isComplete:function(){return this._damper<.1&&this._maxMotion<this.get("motion_limit")},_doRelax:function(){for(var e=0;e<8;e++){var t=this._sNodeArr.length;this._sLinkArr.forEach(this._relaxLink,this);for(var n=0;n<t;n++)for(var r=0;r<t;r++){var i=this._sNodeArr[n],o=this._sNodeArr[r];i!==o&&this._relaxNodePair(i,o)}this._adjustNodes()}},_updatePosition:function(){var e=this._sNodeArr.length;this._is_updating=!0;for(var t=0;t<e;t++){var n=this._sNodeArr[t];n.fix||n.data.setPosition(n.x,n.y)}this._is_updating=!1},_adjustNodes:function(){var i,o,a,s,l=this,e=this._maxMotion,c=0,d=this.get("limit_bounds");d&&(i=d.x,o=d.y,a=d.x+d.width,s=d.y+d.height),this._sNodeArr.forEach(function(e){var t=e.dx,n=e.dy,r=(t*=l._damper,n*=l._damper,e.dx=t/2,e.dy=n/2,ee.sqrt(t*t+n*n));e.fix||(e.x=e.x+ee.max(-30,ee.min(30,t)),e.y=e.y+ee.max(-30,ee.min(30,n)),d?(e.x<i&&(e.x=i,l._adjustLocation(1,0)),e.y<o&&(e.y=o,l._adjustLocation(0,1)),(t=l.getNodeBounds(e.data))&&(e.x+t.width>a&&(e.x=a-t.width,l._adjustLocation(-1,0)),e.y+t.height>s&&(e.y=s-t.height,l._adjustLocation(0,-1)))):!0!==l._hasFix&&(e.x<1&&l._adjustLocation(1,0),e.y<1&&l._adjustLocation(0,1))),c=ee.max(r,c)}),this._maxMotion=c,0<this._maxMotion?this._motionRatio=e/this._maxMotion-1:this._motionRatio=0,this._damp()},_damp:function(){this._motionRatio<=.001&&((this._maxMotion<.2||1<this._maxMotion&&this._damper<.9)&&.01<this._damper?this._damper-=.01:this._maxMotion<.4&&.003<this._damper?this._damper-=.003:1e-4<this._damper&&(this._damper-=1e-4)),this._maxMotion<this.get("motion_limit")&&(this._damper=0)},_relaxLink:function(e){var t=e.to.x-e.from.x,n=e.to.y-e.from.y,r=ee.sqrt(t*t+n*n),i=100*e.length,t=.25*t/i,n=.25*n/i;e.to.dx=e.to.dx-t*r,e.to.dy=e.to.dy-n*r,e.from.dx=e.from.dx+t*r,e.from.dy=e.from.dy+n*r},_relaxNodePair:function(e,t){var n=0,r=0,i=e.x-t.x,o=e.y-t.y,a=i*i+o*o,i=(0==a?(n=ee.random(),r=ee.random()):a<36e4&&(n=i/a,r=o/a),e.repulsion*t.repulsion/400);e.dx+=n*i,e.dy+=r*i,t.dx-=n*i,t.dy-=r*i},_rebuild:function(){var n=this._sNodeMap={},r=this._sNodeArr=[],t=this._sLinkArr=[],i=this.getGView(),o=this,a=[],s=[],l={};i.eachData(function(e){var t,n;i._isVisible(e)&&(d(e)?h(e)&&i.isExpanded(e)||a.push(e):A(e)&&(n=f.getFromNodeAgent(i,e),t=f.getToNodeAgent(i,e),n&&t&&((n=[n.id(),t.id()]).sort(),n=n.join(","),l.hasOwnProperty(n)||(l[n]=!0,s.push(e)))))}),a.forEach(function(e){var t=o._createNode(e);n[e.id()]=t,r.push(t)}),s.forEach(function(e){e=o._createLink(e);e&&t.push(e)})},_createLink:function(e){if(!e.isLoop()){var t=f.getFromNodeAgent(this._gView,e),n=f.getToNodeAgent(this._gView,e);if(t&&n){var r=this._sNodeMap[t.id()],i=this._sNodeMap[n.id()];if(r&&i)return e={data:e,from:r,to:i},r=this.getNodeBounds(t),i=this.getNodeBounds(n),t=r.width+i.width,n=r.height+r.height,(i=ee.floor(ee.sqrt(t*t+n*n)*this.get("link_repulsion")))<=this.get("link_limit")&&(i=this.get("link_limit")),e.length=i,e}}},_createNode:function(e){var t=e.getPosition(),t={data:e,x:t.x,y:t.y,dx:0,dy:0,fix:!this.isMovable(e),repulsion:this._getRepulsion(e)};return this._hasFix=t.fix||this._hasFix,t},_getRepulsion:function(e){var t,e=this.getNodeBounds(e);return t=!e||(t=ee.floor(ee.sqrt(e.width*e.width+e.height*e.height)*this.get("node_repulsion")))<=0?100:t},_adjustLocation:function(e,t){for(var n=this.get("limit_bounds"),r=0,i=this._sNodeArr.length;r<i;r++){var o=this._sNodeArr[r],a=this.getNodeBounds(o.data);if(!a)return;0!==e&&(0<e?(null==n||o.x+a.width+e<n.x+n.width)&&(o.x+=e):(null==n||o.x+e>n.x)&&(o.x+=e)),0!==t&&(0<t?(null==n||o.y+a.height+t<n.y+n.height)&&(o.y+=t):(null==n||o.y+t>n.y)&&(o.y+=t))}}});je(R,Fn,Ge({__toTypeString_GView_$:function(){return oe},__className_:"GView",___zdefaults_:{link_gap:16,label_in_front:!1,info_in_front:!1,hit_padding:2,movable:!0,select_mode:"multiple",group_expand_on_dblclick:!0},_drawData:function(t){var e;R.superClass._drawData.apply(this,arguments),!0===this.getProperty("label_in_front")&&(e=this.getDrawDataArray()).forEach(function(e){e=this.getDataRenderer(e);e&&e.drawLabel(t,!0)},this),!0===this.getProperty("info_in_front")&&(e||this.getDrawDataArray()).forEach(function(e){e=this.getDataRenderer(e);e&&e.drawInfo(t,!0)},this)},getDrawDataArray:function(){return ht(o.getDrawGroupArray(this),_t(this.getDataArray(!1),function(e){return A(e)}),o.getDrawNodeArray(this))},translateCenter:function(e){!0===e?bt(function(){this._transformFit(!0)},this):this._transformFit(!0)},zoomFit:function(e){!0===e?bt(this._transformFit,this):this._transformFit()},_transformFit:function(e){var t,n,r,i,o,a,s=b.getVisibleDataBounds(this);s&&(t=s.width,n=s.height,i=this.getRootSize(),r=it(30,it(i.width,i.height)/10),a=i.width-2*r,i=i.height-2*r,0<t&&0<n&&0<a&&0<i&&(!0===e?o=this.get("zoom"):(o=it(a/t,i/n),(o=(e=this.get("max_zoom"))<o?e:o)<(e=this.get("min_zoom"))&&(o=e)),e=r+(a-t*o)/2-s.x*o,a=r+(i-n*o)/2-s.y*o,this.set("zoom",o),this.translate(e,a)))},getDataRendererClass:function(e){if(e.getRendererClass)return e.getRendererClass()},toImage:function(e){var t=new Image;return t.src=b.toDataURL(this,e),t},eachNode:function(e,t,n){var r=this.filterData(function(e){return(!0!==n||!h(e))&&d(e)});0<r.length&&ut(r,e,t)},eachLink:function(e,t){var n=this.filterData(function(e){return A(e)});0<n.length&&ut(n,e,t)}},(D=R,Ge({_isSuperVisible:function(e){return D.superClass._isVisible.apply(this,arguments)},_isVisible:function(e){if(!1===this._isVisible_(e))return!1;var t=A(e);if(t){var n=f.getFromNodeAgent(this,e);if(null==n||!1===this._isVisible(n))return!1;var r=f.getToNodeAgent(this,e);if(null==r||!1===this._isVisible(r))return!1;if(n===r&&(e.get("from")!==n||e.get("from")!==r))return!1}if(!t&&this.getCurrentSubview()!=E.getDataSubview(e))return!1;var n=L.getGroupAncestorArray(e),i=!0;if(n.forEach(function(e){i=i&&this.isExpanded(e)},this),!0!==i)return!1;var r=E.getSameSubviewAncestorArray(e),o=!0;return r.forEach(function(e){o=o&&this._isVisible(e)},this),!0===o}},{afterSetProperty:function(e,t,n){D.superClass.afterSetProperty.apply(this,arguments),"current_subview"===e&&this._updateSubviewTransform(t,n)},setCurrentSubview:function(e){null!=e&&!k(e)||this.setProperty("current_subview",e)},getCurrentSubview:function(){return this.getProperty("current_subview")},_updateSubviewTransform:function(e,t){var n=null,n=t?t.id():"default",t=(this._subViewTransform[n]={zoom:this.get("zoom"),translate_x:this.get("translate_x"),translate_y:this.get("translate_y")},null),t=e?e.id():"default",n=this._subViewTransform[t];this.set(n=null==n?{zoom:1,translate_x:0,translate_y:0}:n)}},En(),{expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=_t(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},_isExpandable:function(e){return!!h(e)&&this.isExpandable.apply(this,arguments)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)}},{_getDataRelatedDataArray:function(e,t,n){var r=[];return d(e)?(r=ht(r,Rn.getAddedDescendantArray(this.getProvider(),e),Rn.getAncestorArray(e)),r=ht(r,f.getNodeAgentLinks(this,e))):A(e)&&(r=f.getSibling(this,e)),r.forEach(function(e){d(e)&&r.push.apply(r,f.getNodeAgentLinks(this,e))},this),r}})))),Ze.gv={GView:R,Node:r,Link:c,Group:n,Subview:i,LinkSubview:a,isNode:d,isLink:A,isGroup:h,isSubview:k,isLinkSubview:S,layout:{Layout:w,ForceLayout:P}},Ge(Ze.type,{isNode:d,isLink:A,isGroup:h,isSubview:k,isLinkSubview:S})}(s)}(window),"undefined"!=typeof module&&module.exports&&(module.exports=z);