/*! Focus UI v2.0 | http://focus-ui.com/ | 2021-08-29 | Licensed to Cisco */
!function(s,p){"use strict";var Ue={},l=s.Object,t=s.Array,n=s.String,He=s.document,Q=s.Math,We=s.parseInt,Fe=s.parseFloat,ee=s.devicePixelRatio||1,r=l.prototype.toString,i=t.prototype.push,c=t.prototype.slice,h=l.keys,o=He.createElement.bind(He),d=Q.PI,u=Q.pow,te=Q.sqrt,a=Q.atan2,Ge=Q.abs,je=Q.max,qe=Q.min,ne=Q.cos,re=Q.sin,_=Q.acos,g=Q.tan,$e=Q.floor,Xe=Q.ceil,f=Q.round,y=Q.random;function Ke(e,t){Qe(e)?ct(e,function(e,t){E(v,e,t)}):E(v,e,t)}function Je(e){return ht(v,e)}"function"!=typeof l.assign&&l.defineProperty(l,"assign",{value:function(e,t){if(null==e)throw new TypeError("Cannot convert undefined or null to object");for(var n=l(e),r=arguments.length,i=1;i<r;i++){var a=arguments[i];if(null!=a)for(var o in a)l.prototype.hasOwnProperty.call(a,o)&&(n[o]=a[o])}return n},writable:!0,configurable:!0}),n.prototype.startsWith||(n.prototype.startsWith=function(e,t){t=0<t?0|t:0;return this.substring(t,t+e.length)===e}),n.prototype.endsWith||(n.prototype.endsWith=function(e,t){return(t===p||t>this.length)&&(t=this.length),this.substring(t-e.length,t)===e}),Number.isInteger||(Number.isInteger=function(e){return"number"==typeof e&&isFinite(e)&&Q.floor(e)===e});var v={},e={capitalize:function(e){return e.charAt(0).toUpperCase()+e.substring(1).toLowerCase()}},C=e.capitalize,m="fu_model",b="fu_data",x="fu_provider",w="fu_view",ie="fu_gview",ae="fu_node",oe="fu_link",se="fu_group",le="fu_subview",ce="fu_linksubview",P={isArray:function(e){return t.isArray(e)},isString:function(e){return P.isPrimitiveType(e,"String")},isBoolean:function(e){return P.isPrimitiveType(e,"Boolean")},isObject:function(e){return P.isPrimitiveType(e,"Object")},isFunction:function(e){return P.isPrimitiveType(e,"Function")},isNumber:function(e){return P.isPrimitiveType(e,"Number")},isPrimitiveType:function(e,t){return!!t&&(t="[object "+t+"]",r.apply(e)===t)}},Ye=P.isArray,Ze=P.isString,R=P.isBoolean,Qe=P.isObject,et=P.isFunction,tt=P.isNumber,D={merge:function(e){for(var t=arguments.length,n=1;n<t;n++)i.apply(e,arguments[n]);return e},each:function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(!1===t.apply(n,[e[i],i]))return},filter:function(e,t,n){return e.filter(t,n)},find:function(e,t,n){for(var r=e.length,i=0;i<r;i++)if(!0===t.apply(n,[e[i],i]))return e[i];return p},removeItem:function(e,t,n){for(var r=e.length,i=0;i<r;i++){var a=e[i];if(!0===t.apply(n,[a,i]))return e.splice(i,1),a}return p},toMap:function(e,t,n){var r={};return et(t)?e.forEach(function(e){r[t.apply(n,[e])]=e}):e.forEach(function(e){r[e[t]]=e}),r},_removeByItem:function(e,t,n){var r=e.length,i=0;if(!0===n)for(i=r-1;-1<i;i--)e[i]===t&&e.splice(i,1);else for(i=0;i<r;i++)if(e[i]===t)return e.splice(i,1),e;return e}},nt=D.merge,rt=D.each,it=D.filter,at=D.find,k=D.removeItem,A=D.toMap,ot=D._removeByItem,S={merge:function(){return l.assign.apply(null,arguments)},deepMerge:function(t){for(var e=arguments.length,n={},r=1;r<e;r++){var i=arguments[r];h(i).forEach(function(e){S.createKVMap(n,e,i[e])})}return h(n).forEach(function(e){S.setDeepValue(t,e,n[e])}),t},getDeepKVMap:function(t){var n={};return h(t).forEach(function(e){S.createKVMap(n,e,t[e])}),n},createKVMap:function(t,e,n){var r;Qe(n)?(r=e+".",h(n).forEach(function(e){S.createKVMap(t,r+e,n[e])})):t[e]=n},each:function(e,t,n){for(var r=h(e),i=r.length,a=0;a<i;a++){var o=r[a];if(!1===t.apply(n,[o,e[o]]))return}},filter:function(e,t,n){for(var r=h(e),i=r.length,a={},o=0;o<i;o++){var s=r[o],l=e[s];!0===t.apply(n,[s,l])&&(a[s]=l)}return a},getDeepValue:function(e,t,n){n=n||".";var r,i=t.split(n),a=i.length;if(1===a)return e[t];var o=i[0];if(e.hasOwnProperty(o)){r=e[o];var s=a-1;if(Qe(r))for(var l=1;l<a;){if(o=i[l],!r.hasOwnProperty(o)){r=p;break}if(r=r[o],l!==s&&!Qe(r)){r=p;break}l++}else r=p}else r=p;return r},setDeepValue:function(e,t,n,r){r=r||".";var i=t.split(r),r=i.length;if(1!==r){var a=i[0],o=e[a];Qe(o)||(o={},e[a]=o);for(var s=1,l=r-1;s<l;){var c=o[a=i[s]];Qe(c)||(c={},o[a]=c),o=c,s++}o[i[l]]=n}else e[t]=n},getValues:function(e){for(var t=h(e),n=t.length,r=[],i=0;i<n;i++)r.push(e[t[i]]);return r}};function st(){this._array=[],this._map={}}l.values&&(S.getValues=function(e){return l.values(e)});var lt=S.merge,T=S.deepMerge,ct=S.each,L=S.filter,ht=S.getDeepValue,E=S.setDeepValue,dt=S.getValues,V={i18n_map:l.create(null),i18n_count:0,getLabel:function(e,t){t=V.i18n_map[t||V.getLocal()];if(t){e=ht(t,e);if(null!=e)return e}return""},setLocal:function(e){V.local=e},getLocal:function(){return V.local},add:function(e,t,n){var r=V.i18n_map[e];r?!0===n?Qe(t)?V.i18n_map[e]=t:(delete V.i18n_map[e],V.i18n_count--):T(r,t):Qe(t)&&(V.i18n_map[e]=t,0===V.i18n_count&&null==V.local&&V.setLocal(e),V.i18n_count++)}},ut={extend:function(l,e,t){function n(){}n.prototype=e.prototype,l.prototype=new n,(l.prototype.constructor=l).superClass=e.prototype,l.__zsuperClass_=e,t&&ct(t,function(e,t){if(0===e.indexOf("___z"))if("___zdefaults_"===e)t&&ct(t,function(e,t){ut.setClassDefault(l,e,t)});else{var n="";"___zsg"===e?n="get":"___zsi"===e&&(n="is");for(var r=t.length,i=0;i<r;i++){var a,o,s=t[i];!s||(a=s.trim())&&(o=ut.getSetFuncName(a),s=ut.getGetFuncName(a,n),l.prototype[o]=ut.createSetFunc(a),l.prototype[s]=ut.createGetFunc(a))}}else"__className_"===e?(ut.__classNameMap[t]=l).__className_=t:l.prototype[e]=t})},getSetFuncName:function(e){var e=e.split("_"),t="set";return e.forEach(function(e){t+=C(e)}),t},getGetFuncName:function(e,t){var e=e.split("_"),n=t;return e.forEach(function(e){n+=C(e)}),n},createSetFunc:function(t){return function(e){this.setProperty(t,e)}},createGetFunc:function(e){return function(){return this.getProperty(e)}},getClassDefault:function(e,t){var n=e.___zdefaults_;return null!=n&&n.hasOwnProperty(t)?n[t]:e.__zsuperClass_?ut.getClassDefault(e.__zsuperClass_,t):null},setClassDefault:function(e,t,n){var r=e.___zdefaults_;null==r&&(r={},e.___zdefaults_=r),r[t]=n},_setClassDefault:function(n,e,t){var r=arguments.length;2===r?ct(e,function(e,t){ut.setClassDefault(n,e,t)}):2<r&&ut.setClassDefault(n,e,t)},_extendPrototype:function(n,e,t){var r=arguments.length;2===r?ct(e,function(e,t){n.prototype[e]=t}):2<r&&(n.prototype[e]=t)},__classNameMap:{},createInstance:function(e,t){return(e=e&&(Ze(e)?ut.getClassByName(e):e))?2===arguments.length?ut.__createInstance(e,t):new e:null},__createInstance:function(e,t){switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6]);case 8:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7]);case 9:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8]);case 10:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9]);case 11:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10]);case 12:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11]);case 13:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12]);case 14:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13]);case 15:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14]);case 16:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6],t[7],t[8],t[9],t[10],t[11],t[12],t[13],t[14],t[14]);default:throw new Error("So many parameters(>16) are not supported...")}},getClassByName:function(e){if(ut.__classNameMap.hasOwnProperty(e))return ut.__classNameMap[e];var t=e.split("."),n=t.length,e=null;if(0<n){for(var r=s[t[0]],i=1;r&&i<n;)r=r[t[i]],i++;e=r}return e},newClass:function(e,t,n,r){var i=function(){i.superClass.constructor.apply(this,arguments),t.apply(this,arguments)};return ut.extend(i,e||l,n),r&&ct(r,function(e,t){ut.setClassDefault(i,e,t)}),i}},_t=ut.extend;_t(st,l,{add:function(e,t,n){if(!0===this.has(e)){var r=this._map[e];if(r===t)return;ot(this._array,r)}this._map[e]=t,3<=arguments.length?this._array.splice(n,0,t):this._array.push(t)},remove:function(e){var t;return!0===this.has(e)&&(t=this._map[e],delete this._map[e],ot(this._array,t)),t},clear:function(){this._array.length=0,this._map={}},has:function(e){return this._map.hasOwnProperty(e)},get:function(e){return this._map[e]},keys:function(){return h(this._map)},size:function(){return this._array.length},toArray:function(e){return!1===e?this._array:nt([],this._array)},eachObject:function(e,t){return ct(this._map,e,t)},eachArray:function(e,t){return rt(this._array,e,t)},findArray:function(e,t){return at(this._array,e,t)},filterArray:function(e,t){return it(this._array,e,t)}});var O=s.setTimeout,z=s.clearTimeout,pt={__callLaterListMap:new st,__callIntervalListMap:new st,__callRAFIntervalListMap:new st,callBatch:function(e,t){var n=(t=t||{}).object||t.context||s,r=t.key||"_call_batch_key";if(!0===n[r])return!1;n[r]=!0;return pt.callRAFLater(function(){e.apply(t.context),!1!==t.reset&&delete n[r]}),!0},callLater:function(t,e,n){var r=U.guid(),i=function(){var e=i.id;null!=e&&(t.apply(n,[]),pt.__deleteCallLater(e))};i.id=r;var a=pt.__setTimeout(i,e);return pt.__callLaterListMap.add(r,{id:r,timeout_id:a,later_callBack:i,callBack:t,delay:e,context:n}),r},cancelCallLater:function(t,n,r){et(t)?pt.__callLaterListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(pt.__deleteCallLater(e.id),!1)}):pt.__deleteCallLater(t)},callInterval:function(t,n,r,e,i){if(!0!==e||!1!==t.apply(r)){var e=U.guid(),a=function(){var e=a.id;null!=e&&(!0===i&&He&&"visible"!==He.visibilityState||!1!==t.apply(r,arguments)?pt.__setTimeout(a,n):pt.__deleteInterval(e))};return a.id=e,pt.__callIntervalListMap.add(e,{id:e,later_callBack:a,callBack:t,delay:n,context:r}),pt.__setTimeout(a,n),e}},cancelCallInterval:function(t,n,r){et(t)?pt.__callIntervalListMap.eachArray(function(e){return e.callBack!==t||e.delay!==n||e.context!==r||(pt.__deleteInterval(e.id),!1)}):pt.__deleteInterval(t)},callRAFLater:function(e,t){return pt.requestAnimationFrame(e,t)},callRAFInterval:function(t,n,e){if(!0===e&&!1===t.apply(n))return;var e=U.guid(),r=function(){var e=r.id;null!=e&&(!1!==t.apply(n,arguments)?pt.requestAnimationFrame(r):pt.__deleteRAFInterval(e))};return r.id=e,pt.__callRAFIntervalListMap.add(e,{id:e,later_callBack:r,callBack:t,context:n},r),pt.requestAnimationFrame(r),e},cancelCallRAFInterval:function(t,n){et(t)?pt.__callRAFIntervalListMap.eachArray(function(e){return e.callBack!==t||e.context!==n||(pt.__deleteRAFInterval(e.id),!1)}):pt.__deleteRAFInterval(t)},__setTimeout:function(e,t,n){var r=e;return null!=n&&(r=e.bind(n)),O(r,t)},__deleteCallLater:function(e){e=pt.__callLaterListMap.remove(e);e&&(delete e.later_callBack.id,(e=e.timeout_id)&&z(e))},__deleteInterval:function(e){e=pt.__callIntervalListMap.remove(e);e&&delete e.later_callBack.id},__deleteRAFInterval:function(e){e=pt.__callRAFIntervalListMap.remove(e);e&&delete e.later_callBack.id}};pt.__raf=s.requestAnimationFrame||s.webkitRequestAnimationFrame||s.mozRequestAnimationFrame||s.oRequestAnimationFrame||s.msRequestAnimationFrame,pt.__raf?pt.requestAnimationFrame=function(e,t){if(e){var n=e;return null!=t&&(n=e.bind(t)),pt.__raf.call(s,n)}return p}:pt.requestAnimationFrame=function(e,t){return pt.__setTimeout(e,17,t)};var M=pt.callBatch,ft=pt.callLater,B=pt.callInterval,gt=pt.callRAFLater,yt=pt.callRAFInterval;function I(e){var n,t=e&&e.forEach?e:[].slice.call(arguments),r=!1;"object"==typeof t[0]&&(r=t.length,n=[],t.forEach(function(t){["x","y","z"].forEach(function(e){void 0!==t[e]&&n.push(t[e])})}),t=n);var i=!1,a=t.length;if(r){if(4<r){if(1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");i=!0}}else if(6!==a&&8!==a&&9!==a&&12!==a&&1!==arguments.length)throw new Error("Only new Bezier(point[]) is accepted for 4th and higher order curves");for(var o=!i&&(9===a||12===a)||e&&e[0]&&void 0!==e[0].z,s=[],l=0,c=(this._3d=o)?3:2;l<a;l+=c){var h={x:t[l],y:t[l+1]};o&&(h.z=t[l+2]),s.push(h)}this.order=s.length-1,this.points=s,e=["x","y"],o&&e.push("z"),this.dims=e,this.dimlen=e.length,function(e){for(var t=e.order,n=e.points,r=F.align(n,{p1:n[0],p2:n[t]}),i=0;i<r.length;i++)if(1e-4<F.abs(r[i].y))return e._linear=!1;e._linear=!0}(this),this._t1=0,this._t2=1,this.update()}Ke("COLOR_NAME_HEX_MAP",{AliceBlue:"f0f8ff",AntiqueWhite:"faebd7",Aqua:"00ffff",Aquamarine:"7fffd4",Azure:"f0ffff",Beige:"f5f5dc",Bisque:"ffe4c4",Black:"000000",BlanchedAlmond:"ffebcd",Blue:"0000ff",BlueViolet:"8a2be2",Brown:"a52a2a",BurlyWood:"deb887",CadetBlue:"5f9ea0",Chartreuse:"7fff00",Chocolate:"d2691e",Coral:"ff7f50",CornflowerBlue:"6495ed",Cornsilk:"fff8dc",Crimson:"dc143c",Cyan:"00ffff",DarkBlue:"00008b",DarkCyan:"008b8b",DarkGoldenRod:"b8860b",DarkGray:"a9a9a9",DarkGrey:"a9a9a9",DarkGreen:"006400",DarkKhaki:"bdb76b",DarkMagenta:"8b008b",DarkOliveGreen:"556b2f",DarkOrange:"ff8c00",DarkOrchid:"9932cc",DarkRed:"8b0000",DarkSalmon:"e9967a",DarkSeaGreen:"8fbc8f",DarkSlateBlue:"483d8b",DarkSlateGray:"2f4f4f",DarkSlateGrey:"2f4f4f",DarkTurquoise:"00ced1",DarkViolet:"9400d3",DeepPink:"ff1493",DeepSkyBlue:"00bfff",DimGray:"696969",DimGrey:"696969",DodgerBlue:"1e90ff",FireBrick:"b22222",FloralWhite:"fffaf0",ForestGreen:"228b22",Fuchsia:"ff00ff",Gainsboro:"dcdcdc",GhostWhite:"f8f8ff",Gold:"ffd700",GoldenRod:"daa520",Gray:"808080",Grey:"808080",Green:"008000",GreenYellow:"adff2f",HoneyDew:"f0fff0",HotPink:"ff69b4",IndianRed:"cd5c5c",Indigo:"4b0082",Ivory:"fffff0",Khaki:"f0e68c",Lavender:"e6e6fa",LavenderBlush:"fff0f5",LawnGreen:"7cfc00",LemonChiffon:"fffacd",LightBlue:"add8e6",LightCoral:"f08080",LightCyan:"e0ffff",LightGoldenRodYellow:"fafad2",LightGray:"d3d3d3",LightGrey:"d3d3d3",LightGreen:"90ee90",LightPink:"ffb6c1",LightSalmon:"ffa07a",LightSeaGreen:"20b2aa",LightSkyBlue:"87cefa",LightSlateGray:"778899",LightSlateGrey:"778899",LightSteelBlue:"b0c4de",LightYellow:"ffffe0",Lime:"00ff00",LimeGreen:"32cd32",Linen:"faf0e6",Magenta:"ff00ff",Maroon:"800000",MediumAquaMarine:"66cdaa",MediumBlue:"0000cd",MediumOrchid:"ba55d3",MediumPurple:"9370db",MediumSeaGreen:"3cb371",MediumSlateBlue:"7b68ee",MediumSpringGreen:"00fa9a",MediumTurquoise:"48d1cc",MediumVioletRed:"c71585",MidnightBlue:"191970",MintCream:"f5fffa",MistyRose:"ffe4e1",Moccasin:"ffe4b5",NavajoWhite:"ffdead",Navy:"000080",OldLace:"fdf5e6",Olive:"808000",OliveDrab:"6b8e23",Orange:"ffa500",OrangeRed:"ff4500",Orchid:"da70d6",PaleGoldenRod:"eee8aa",PaleGreen:"98fb98",PaleTurquoise:"afeeee",PaleVioletRed:"db7093",PapayaWhip:"ffefd5",PeachPuff:"ffdab9",Peru:"cd853f",Pink:"ffc0cb",Plum:"dda0dd",PowderBlue:"b0e0e6",Purple:"800080",RebeccaPurple:"663399",Red:"ff0000",RosyBrown:"bc8f8f",RoyalBlue:"4169e1",SaddleBrown:"8b4513",Salmon:"fa8072",SandyBrown:"f4a460",SeaGreen:"2e8b57",SeaShell:"fff5ee",Sienna:"a0522d",Silver:"c0c0c0",SkyBlue:"87ceeb",SlateBlue:"6a5acd",SlateGray:"708090",SlateGrey:"708090",Snow:"fffafa",SpringGreen:"00ff7f",SteelBlue:"4682b4",Tan:"d2b48c",Teal:"008080",Thistle:"d8bfd8",Tomato:"ff6347",Turquoise:"40e0d0",Violet:"ee82ee",Wheat:"f5deb3",White:"ffffff",WhiteSmoke:"f5f5f5",Yellow:"ffff00",YellowGreen:"9acd32"}),Ke("COLOR_DEFAULTS",["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc","#7cb5ec","#434348","#90ed7d","#f7a35c","#8085e9","#f15c80","#e4d354","#2b908f","#f45b5b","#91e8e1"]);var N={defaults:function(e){var t=Je("COLOR_DEFAULTS");return 0<arguments.length?t[e]:t.slice()},random:function(e,t){e=(e||"hex").toLowerCase();var n=Je("COLOR_NAME_HEX_MAP"),r=h(n);if("name"===e)return r[r.length*y()|0];n=dt(n),n="#"+n[n.length*y()|0];if("hex"===e)return n;n=N._getRGBByHex(n);return"rgba"!==e&&"hsla"!==e||(n.alpha=(11*y()|0)/10),N.convert(n,e,t)},toRGB:function(e,t){return N.convert(e,"rgb",t)},toRGBA:function(e,t){return N.convert(e,"rgba",t)},toHSL:function(e,t){return N.convert(e,"hsl",t)},toHSLA:function(e,t){return N.convert(e,"hsla",t)},toHex:function(e){return N.convert(e,"hex")},toName:function(e){return N.convert(e,"name")},convert:function(e,t,n){var r,i;if(t=t.toLowerCase(),null!=e&&(i=Qe(e)?N._roundRGBObj(e):(r=N._getColorType(e),N._getColorRGBObject(e,r))),!0===n)switch(t){case"rgb":case"rgba":return i;case"hsl":case"hsla":return N._rgbObjToHSLAObj(i)}if(i)switch(t){case"rgb":return N._rgbObjToRGBStr(i);case"rgba":return N._rgbObjToRGBAStr(i);case"hsl":return N._rgbObjToHSLStr(i);case"hsla":return N._rgbObjToHSLAStr(i);case"hex":return N._rgbObjToHexStr(i);case"name":return N._rgbObjToNameStr(i)}return""},lighten:function(e,t,n,r){return null==t&&(t=.1),N._adjustLightness(e,t,n,r)},darken:function(e,t,n,r){return null==t?t=-.1:t*=-1,N._adjustLightness(e,t,n,r)},_adjustLightness:function(e,t,n,r){n=(n=null==n&&"name"===(n=N._getColorType(e))?"hsl":n).toLowerCase();var i,e=N.toHSL(e,!0);return e&&(Ge(t)<1&&(t*=100),i=e.lightness,e.lightness=he.range(i+t,0,100),(i=N._hslToRGB(e.hue,e.saturation,e.lightness)).alpha=e.alpha),N.convert(i,n,r)},saturate:function(e,t,n,r){return null==t&&(t=.1),N._adjustSaturation(e,t,n,r)},desaturate:function(e,t,n,r){return null==t?t=-.1:t*=-1,N._adjustSaturation(e,t,n,r)},_adjustSaturation:function(e,t,n,r){n=(n=null==n&&"name"===(n=N._getColorType(e))?"hsl":n).toLowerCase();var i,e=N.toHSL(e,!0);return e&&(Ge(t)<1&&(t*=100),i=e.saturation,e.saturation=he.range(i+t,0,100),(i=N._hslToRGB(e.hue,e.saturation,e.lightness)).alpha=e.alpha),N.convert(i,n,r)},_getColorType:function(e){return(e=e.trim().toLowerCase()).startsWith("#")?"hex":e.startsWith("rgba")?"rgba":e.startsWith("rgb")?"rgb":e.startsWith("hsla")?"hsla":e.startsWith("hsl")?"hsl":N._getHexByName(e)?"name":""},_roundRGBObj:function(e){return e&&{red:f(e.red),green:f(e.green),blue:f(e.blue),alpha:e.alpha}},_rgbToHex:function(e){return((1<<24)+(e.red<<16)+(e.green<<8)+e.blue).toString(16).slice(1)},_getNameByHex:function(n){var r;return n=n.toLowerCase(),ct(Je("COLOR_NAME_HEX_MAP"),function(e,t){if(t.toLowerCase()===n)return r=e,!1}),r},_getHexByName:function(n){var r;return n=n.toLowerCase(),ct(Je("COLOR_NAME_HEX_MAP"),function(e,t){if(e.toLowerCase()===n)return r=t,!1}),r},_hslToRGB:function(e,t,n){return t/=100,e/=60,t=2*(n/=100)-(n=n<=.5?n*(t+1):n+t-n*t),{red:255*N._hueToRGB(t,n,e+2),green:255*N._hueToRGB(t,n,e),blue:255*N._hueToRGB(t,n,e-2)}},_hueToRGB:function(e,t,n){return n<0&&(n+=6),6<=n&&(n-=6),n<1?(t-e)*n+e:n<3?t:n<4?(t-e)*(4-n)+e:e},_rgbToHSL:function(e){for(var t,n,r=[e.red/255,e.green/255,e.blue/255],i=r[0],a=r[0],o=0,s=0;s<2;s++)r[s+1]<=i&&(i=r[s+1]),a<=r[s+1]&&(a=r[s+1],o=s+1);return 0===o&&(n=(r[1]-r[2])/(a-i)),1===o&&(n=2+(r[2]-r[0])/(a-i)),2===o&&(n=4+(r[0]-r[1])/(a-i)),isNaN(n)&&(n=0),(n*=60)<0&&(n+=360),t=(i+a)/2,e=i===a?0:t<.5?(a-i)/(a+i):(a-i)/(2-a-i),{hue:f(n),saturation:f(100*e),lightness:f(100*t)}},_rgbObjToHSLAObj:function(e){if(e){var t=e.alpha,e=N._rgbToHSL(e);return e.alpha=t,e}return null},_rgbObjToRGBStr:function(e){return e?"rgb("+e.red+", "+e.green+", "+e.blue+")":""},_rgbObjToRGBAStr:function(e){return e?"rgba("+e.red+", "+e.green+", "+e.blue+", "+e.alpha+")":""},_rgbObjToHSLStr:function(e){if(e){var t=e.alpha;return(e=N._rgbToHSL(e)).alpha=t,"hsl("+e.hue+", "+e.saturation+"%, "+e.lightness+"%)"}return""},_rgbObjToHSLAStr:function(e){if(e){var t=e.alpha;return(e=N._rgbToHSL(e)).alpha=t,"hsla("+e.hue+", "+e.saturation+"%, "+e.lightness+"%, "+e.alpha+")"}return""},_rgbObjToHexStr:function(e){return e?"#"+N._rgbToHex(e):""},_rgbObjToNameStr:function(e){if(e){e=N._rgbToHex(e);return N._getNameByHex(e)||""}return""},_getColorRGBObject:function(e,t){if(!t)return null;var n;switch(e=e.trim().toLowerCase(),t){case"hex":n=N._getRGBByHex(e);break;case"rgba":n=N._getRGBObjByRGBA(e);break;case"rgb":n=N._getRGBObjByRGB(e);break;case"hsla":n=N._getRGBObjByHSLA(e);break;case"hsl":n=N._getRGBObjByHSL(e);break;case"name":n=N._getRGBObjByName(e)}return n=N._roundRGBObj(n)},_getColorArgs:function(e){var t=[],e=e.match(/(?<=\()(.*?)(?=\))/g);return e&&e[0].split(",").forEach(function(e){-1<(e=e.trim()).indexOf("%")&&(e=e.replace("%","")),t.push(Fe(e))}),t},_getRGBObjByHSL:function(e){e=N._getColorArgs(e);if(2<e.length){e=N._hslToRGB(e[0],e[1],e[2]);return{red:e.red,green:e.green,blue:e.blue,alpha:1}}return null},_getRGBObjByHSLA:function(e){var t=N._getColorArgs(e);if(3<t.length){e=N._hslToRGB(t[0],t[1],t[2]);return{red:e.red,green:e.green,blue:e.blue,alpha:Fe(t[3])}}return null},_getRGBObjByRGB:function(e){e=N._getColorArgs(e);return 2<e.length?{red:e[0],green:e[1],blue:e[2],alpha:1}:null},_getRGBObjByRGBA:function(e){e=N._getColorArgs(e);return 3<e.length?{red:e[0],green:e[1],blue:e[2],alpha:e[3]}:null},_getRGBObjByName:function(e){e=N._getHexByName(e);return e?N._getRGBByHex(e):null},_getRGBByHex:function(e){var t=1;return 8===(e=3===(e=e.replace("#","")).length||4===e.length?e.replace(/(.)/g,"$1$1"):e).length&&(t=Fe((We(e.substr(6,2),16)/255).toFixed(2)),e=e.substr(0,6)),6===e.length?{red:We(e.substr(0,2),16),green:We(e.substr(2,2),16),blue:We(e.substr(4,2),16),alpha:t}:null}},U={__uid:0,guid:function(){return"_z-i-"+U.__uid++},logError:function(e){console.error(e)},throwError:function(e){throw new Error(e)},exec:function(e,t,n){n=e.replace(n||/([\[({])(.+?)([\])}])/g,function(e){e=e.substr(1,e.length-2),e=ht(t,e);return null!=(e=Ze(e)&&!e.startsWith("'")&&!e.startsWith('"')?"'"+e+"'":e)?e:e||"''"});return new Function("return "+n).apply({},[])}},H=180,W=360;I.prototype={update:function(){this.dpoints=[];for(var e=this.points,t=e.length,n=t-1;1<t;t--,n--){for(var r,i=[],a=0;a<n;a++)r={x:n*(e[a+1].x-e[a].x),y:n*(e[a+1].y-e[a].y)},this._3d&&(r.z=n*(e[a+1].z-e[a].z)),i.push(r);this.dpoints.push(i),e=i}this.computedirection()},computedirection:function(){var e=this.points,e=F.angle(e[0],e[this.order],e[1]);this.clockwise=0<e},length:function(){return F.length(this.derivative.bind(this))},_lut:[],getLUT:function(e){if(e=e||100,this._lut.length===e)return this._lut;this._lut=[];for(var t=0;t<=e;t++)this._lut.push(this.compute(t/e));return this._lut},project:function(e){var t=this.getLUT(),n=t.length-1,r=F.closest(t,e),i=r.mdist,t=r.mpos;if(0===t||t===n){var a=t/n,r=this.compute(a);return r.t=a,r.d=i,r}var o,s,l,c=(t+1)/n,h=.1/n;for(i+=1,o=a=(t-1)/n;a<c+h;a+=h)s=this.compute(a),(l=F.dist(e,s))<i&&(i=l,o=a);return(s=this.compute(o)).t=o,s.d=i,s},get:function(e){return this.compute(e)},compute:function(e){if(0===e)return this.points[0];if(1===e)return this.points[this.order];var t=this.points,n=1-e;if(1===this.order)return c={x:n*t[0].x+e*t[1].x,y:n*t[0].y+e*t[1].y},this._3d&&(c.z=n*t[0].z+e*t[1].z),c;if(this.order<4){var r,i,a,o=n*n,s=e*e,l=0;2===this.order?(t=[t[0],t[1],t[2],F.ZERO],r=o,i=n*e*2,a=s):3===this.order&&(r=o*n,i=o*e*3,a=n*s*3,l=e*s);var c={x:r*t[0].x+i*t[1].x+a*t[2].x+l*t[3].x,y:r*t[0].y+i*t[1].y+a*t[2].y+l*t[3].y};return this._3d&&(c.z=r*t[0].z+i*t[1].z+a*t[2].z+l*t[3].z),c}for(var h=JSON.parse(JSON.stringify(this.points));1<h.length;){for(var d=0;d<h.length-1;d++)h[d]={x:h[d].x+(h[d+1].x-h[d].x)*e,y:h[d].y+(h[d+1].y-h[d].y)*e},void 0!==h[d].z&&(h[d]=h[d].z+(h[d+1].z-h[d].z)*e);h.splice(h.length-1,1)}return h[0]},raise:function(){for(var e,t,n=this.points,r=[n[0]],i=n.length,a=1;a<i;a++)e=n[a],t=n[a-1],r[a]={x:(i-a)/i*e.x+a/i*t.x,y:(i-a)/i*e.y+a/i*t.y};return r[i]=n[i-1],new I(r)},derivative:function(e){var t,n,r=1-e,i=0,a=this.dpoints[0];2===this.order&&(a=[a[0],a[1],F.ZERO],t=r,n=e),3===this.order&&(t=r*r,n=r*e*2,i=e*e);e={x:t*a[0].x+n*a[1].x+i*a[2].x,y:t*a[0].y+n*a[1].y+i*a[2].y};return this._3d&&(e.z=t*a[0].z+n*a[1].z+i*a[2].z),e},normal:function(e){return this._3d?this.__normal3(e):this.__normal2(e)},__normal2:function(e){var t=this.derivative(e),e=F.sqrt(t.x*t.x+t.y*t.y);return{x:-t.y/e,y:t.x/e}},__normal3:function(e){var t=this.derivative(e),n=this.derivative(e+.01),r=F.sqrt(t.x*t.x+t.y*t.y+t.z*t.z),e=F.sqrt(n.x*n.x+n.y*n.y+n.z*n.z);t.x/=r,t.y/=r,t.z/=r,n.x/=e,n.y/=e,n.z/=e;e={x:n.y*t.z-n.z*t.y,y:n.z*t.x-n.x*t.z,z:n.x*t.y-n.y*t.x},n=F.sqrt(e.x*e.x+e.y*e.y+e.z*e.z);e.x/=n,e.y/=n,e.z/=n;e=[e.x*e.x,e.x*e.y-e.z,e.x*e.z+e.y,e.x*e.y+e.z,e.y*e.y,e.y*e.z-e.x,e.x*e.z-e.y,e.y*e.z+e.x,e.z*e.z];return{x:e[0]*t.x+e[1]*t.y+e[2]*t.z,y:e[3]*t.x+e[4]*t.y+e[5]*t.z,z:e[6]*t.x+e[7]*t.y+e[8]*t.z}},hull:function(e){var t,n,r=this.points,i=[],a=[],o=0,s=0;for(a[o++]=r[0],a[o++]=r[1],a[o++]=r[2],3===this.order&&(a[o++]=r[3]);1<r.length;){for(i=[],s=0,n=r.length-1;s<n;s++)t=F.lerp(e,r[s],r[s+1]),a[o++]=t,i.push(t);r=i}return a},split:function(e,t){if(0===e&&t)return this.split(t).left;if(1===t)return this.split(e).right;var n=this.hull(e),n={left:2===this.order?new I([n[0],n[3],n[5]]):new I([n[0],n[4],n[7],n[9]]),right:2===this.order?new I([n[5],n[4],n[2]]):new I([n[9],n[8],n[6],n[3]]),span:n};return n.left._t1=F.map(0,0,1,this._t1,this._t2),n.left._t2=F.map(e,0,1,this._t1,this._t2),n.right._t1=F.map(e,0,1,this._t1,this._t2),n.right._t2=F.map(1,0,1,this._t1,this._t2),t?(t=F.map(t,e,1,0,1),n.right.split(t).left):n},extrema:function(){var e,n,t=this.dims,r={},i=[];return t.forEach(function(t){n=function(e){return e[t]},e=this.dpoints[0].map(n),r[t]=F.droots(e),3===this.order&&(e=this.dpoints[1].map(n),r[t]=r[t].concat(F.droots(e))),r[t]=r[t].filter(function(e){return 0<=e&&e<=1}),i=i.concat(r[t].sort())}.bind(this)),i=i.sort().filter(function(e,t){return i.indexOf(e)===t}),r.values=i,r},bbox:function(){var t=this.extrema(),n={};return this.dims.forEach(function(e){n[e]=F.getminmax(this,e,t[e])}.bind(this)),n},overlaps:function(e){var t=this.bbox(),e=e.bbox();return F.bboxoverlap(t,e)},offset:function(n,e){if(void 0!==e){var t=this.get(n),r=this.normal(n),i={c:t,n:r,x:t.x+r.x*e,y:t.y+r.y*e};return this._3d&&(i.z=t.z+r.z*e),i}if(this._linear){var a=this.normal(0),i=this.points.map(function(e){var t={x:e.x+n*a.x,y:e.y+n*a.y};return e.z&&r.z&&(t.z=e.z+n*a.z),t});return[new I(i)]}return this.reduce().map(function(e){return e.scale(n)})},simple:function(){if(3===this.order){var e=F.angle(this.points[0],this.points[3],this.points[1]),t=F.angle(this.points[0],this.points[3],this.points[2]);if(0<e&&t<0||e<0&&0<t)return!1}var n=this.normal(0),e=this.normal(1),t=n.x*e.x+n.y*e.y;return this._3d&&(t+=n.z*e.z),F.abs(F.acos(t))<F.pi/3},reduce:function(){var e,t,n=0,r=0,i=[],a=[],o=this.extrema().values;for(-1===(o=-1===o.indexOf(0)?[0].concat(o):o).indexOf(1)&&o.push(1),n=o[0],e=1;e<o.length;e++)r=o[e],(t=this.split(n,r))._t1=n,t._t2=r,i.push(t),n=r;return i.forEach(function(e){for(r=n=0;r<=1;)for(r=n+.01;r<=1.01;r+=.01)if(!(t=e.split(n,r)).simple()){if(r-=.01,F.abs(n-r)<.01)return[];(t=e.split(n,r))._t1=F.map(n,0,1,e._t1,e._t2),t._t2=F.map(r,0,1,e._t1,e._t2),a.push(t),n=r;break}n<1&&((t=e.split(n,1))._t1=F.map(n,0,1,e._t1,e._t2),t._t2=e._t2,a.push(t))}),a},scale:function(a){var o=this.order,s="function"==typeof a?a:!1;if(s&&2===o)return this.raise().scale(s);var l=this.clockwise,n=s?s(0):a,r=s?s(1):a,i=[this.offset(0,10),this.offset(1,10)],c=F.lli4(i[0],i[0].c,i[1],i[1].c);if(!c)throw new Error("cannot scale this curve. Try reducing it first.");var h=this.points,d=[];return[0,1].forEach(function(e){var t=d[e*o]=F.copy(h[e*o]);t.x+=(e?r:n)*i[e].n.x,t.y+=(e?r:n)*i[e].n.y}.bind(this)),[0,1].forEach((s?function(e){var t,n,r,i;2===this.order&&e||(n={x:(t=h[e+1]).x-c.x,y:t.y-c.y},r=s?s((e+1)/o):a,s&&!l&&(r=-r),i=F.sqrt(n.x*n.x+n.y*n.y),n.x/=i,n.y/=i,d[e+1]={x:t.x+r*n.x,y:t.y+r*n.y})}:function(e){var t,n;2===this.order&&e||(t=d[e*o],n=this.derivative(e),n={x:t.x+n.x,y:t.y+n.y},d[e+1]=F.lli4(t,n,c,h[e+1]))}).bind(this)),new I(d)},intersects:function(e,t){return e?e.p1&&e.p2?this.lineIntersects(e):(e instanceof I&&(e=e.reduce()),this.curveintersects(this.reduce(),e,t)):this.selfintersects(t)},lineIntersects:function(e){var t=F.min(e.p1.x,e.p2.x),n=F.min(e.p1.y,e.p2.y),r=F.max(e.p1.x,e.p2.x),i=F.max(e.p1.y,e.p2.y),a=this;return F.roots(this.points,e).filter(function(e){e=a.get(e);return F.between(e.x,t,r)&&F.between(e.y,n,i)})},selfintersects:function(e){for(var t,n,r=this.reduce(),i=r.length-2,a=[],o=0;o<i;o++)t=r.slice(o,o+1),n=r.slice(o+2),n=this.curveintersects(t,n,e),a=a.concat(n);return a},curveintersects:function(e,n,t){var r=[];e.forEach(function(t){n.forEach(function(e){t.overlaps(e)&&r.push({left:t,right:e})})});var i=[];return r.forEach(function(e){e=F.pairiteration(e.left,e.right,t);0<e.length&&(i=i.concat(e))}),i}};var F={abs:Q.abs,cos:Q.cos,sin:Q.sin,acos:Q.acos,atan2:Q.atan2,sqrt:Q.sqrt,pow:Q.pow,crt:function(e){return e<0?-F.pow(-e,1/3):F.pow(e,1/3)},pi:Q.PI,tau:2*Q.PI,quart:Q.PI/2,epsilon:1e-6,nMax:9007199254740991,nMin:-9007199254740991,min:Q.min,max:Q.max,ZERO:{x:0,y:0,z:0},Tvalues:[-.06405689286260563,.06405689286260563,-.1911188674736163,.1911188674736163,-.3150426796961634,.3150426796961634,-.4337935076260451,.4337935076260451,-.5454214713888396,.5454214713888396,-.6480936519369755,.6480936519369755,-.7401241915785544,.7401241915785544,-.820001985973903,.820001985973903,-.8864155270044011,.8864155270044011,-.9382745520027328,.9382745520027328,-.9747285559713095,.9747285559713095,-.9951872199970213,.9951872199970213],Cvalues:[.12793819534675216,.12793819534675216,.1258374563468283,.1258374563468283,.12167047292780339,.12167047292780339,.1155056680537256,.1155056680537256,.10744427011596563,.10744427011596563,.09761865210411388,.09761865210411388,.08619016153195327,.08619016153195327,.0733464814110803,.0733464814110803,.05929858491543678,.05929858491543678,.04427743881741981,.04427743881741981,.028531388628933663,.028531388628933663,.0123412297999872,.0123412297999872],arcfn:function(e,t){t=t(e),e=t.x*t.x+t.y*t.y;return void 0!==t.z&&(e+=t.z*t.z),F.sqrt(e)},between:function(e,t,n){return t<=e&&e<=n||F.approximately(e,t)||F.approximately(e,n)},approximately:function(e,t,n){return F.abs(e-t)<=(n||F.epsilon)},length:function(e){for(var t,n=0,r=F.Tvalues.length,i=0;i<r;i++)t=.5*F.Tvalues[i]+.5,n+=F.Cvalues[i]*F.arcfn(t,e);return.5*n},map:function(e,t,n,r,i){return r+(i-r)*((e-t)/(n-t))},lerp:function(e,t,n){var r={x:t.x+e*(n.x-t.x),y:t.y+e*(n.y-t.y)};return t.z&&n.z&&(r.z=t.z+e*(n.z-t.z)),r},copy:function(e){return JSON.parse(JSON.stringify(e))},angle:function(e,t,n){var r=t.x-e.x,i=t.y-e.y,a=n.x-e.x,o=n.y-e.y,t=r*o-i*a,n=F.sqrt(r*r+i*i),e=F.sqrt(a*a+o*o),o=(r/=n)*(a/=e)+(i/=n)*(o/=e);return F.atan2(t,o)},dist:function(e,t){var n=e.x-t.x,t=e.y-t.y;return F.sqrt(n*n+t*t)},closest:function(e,n){var r,i,a=F.pow(2,63);return e.forEach(function(e,t){(i=F.dist(n,e))<a&&(a=i,r=t)}),{mdist:a,mpos:r}},lli8:function(e,t,n,r,i,a,o,s){var l=(e-n)*(a-s)-(t-r)*(i-o);return 0!=l&&{x:((e*r-t*n)*(i-o)-(e-n)*(i*s-a*o))/l,y:((e*r-t*n)*(a-s)-(t-r)*(i*s-a*o))/l}},lli4:function(e,t,n,r){var i=e.x,a=e.y,o=t.x,s=t.y,e=n.x,t=n.y,n=r.x,r=r.y;return F.lli8(i,a,o,s,e,t,n,r)},lli:function(e,t){return F.lli4(e,e.c,t,t.c)},getminmax:function(e,t,n){if(!n)return{min:0,max:0};var r,i=F.nMax,a=F.nMin;-1===(n=-1===n.indexOf(0)?[0].concat(n):n).indexOf(1)&&n.push(1);for(var o=0,s=n.length;o<s;o++)r=n[o],(r=e.get(r))[t]<i&&(i=r[t]),r[t]>a&&(a=r[t]);return{min:i,mid:(i+a)/2,max:a,size:a-i}},align:function(e,t){var n=t.p1.x,r=t.p1.y,i=-F.atan2(t.p2.y-r,t.p2.x-n);return e.map(function(e){return{x:(e.x-n)*F.cos(i)-(e.y-r)*F.sin(i),y:(e.x-n)*F.sin(i)+(e.y-r)*F.cos(i)}})},roots:function(e,t){t=t||{p1:{x:0,y:0},p2:{x:1,y:0}};var n=e.length-1,e=F.align(e,t),t=function(e){return 0<=e&&e<=1};if(2==n){if(0===(s=(a=e[0].y)-2*(o=e[1].y)+(l=e[2].y)))return o!==l&&0===s?[(2*o-l)/2*(o-l)].filter(t):[];var r=-F.sqrt(o*o-a*l),i=-a+o;return[-(r+i)/s,-(-r+i)/s].filter(t)}var a,o,n=e[0].y,r=e[1].y,i=e[2].y,i=(e=(3*(o=(-3*n+3*r)/(s=3*r-n-3*i+e[3].y))-(a=(3*n-6*r+3*i)/s)*a)/3)/3,s=(2*a*a*a-9*a*o+27*(l=n/s))/27,l=s/2,i=l*l+i*i*i;if(i<0){e=-e/3,e=e*e*e,e=F.sqrt(e),s=-s/(2*e),s=s<-1?-1:1<s?1:s,s=F.acos(s),e=2*F.crt(e);return[e*F.cos(s/3)-a/3,e*F.cos((s+F.tau)/3)-a/3,e*F.cos((s+2*F.tau)/3)-a/3].filter(t)}if(0==i)return[2*(c=l<0?F.crt(-l):-F.crt(l))-a/3,-c-a/3].filter(t);var c,i=F.sqrt(i);return[(c=F.crt(-l+i))-F.crt(l+i)-a/3].filter(t)},droots:function(e){if(3===e.length){var t=e[0],n=e[1],r=e[2],i=t-2*n+r;if(0===i)return n!==r&&0===i?[(2*n-r)/(2*(n-r))]:[];var a=-F.sqrt(n*n-t*r),r=-t+n;return[-(a+r)/i,-(-a+r)/i]}if(2===e.length)return(t=e[0])!==(n=e[1])?[t/(t-n)]:[]},bboxoverlap:function(e,t){for(var n,r,i,a=["x","y"],o=a.length,s=0;s<o;s++)if(n=e[i=a[s]].mid,r=t[i].mid,i=(e[i].size+t[i].size)/2,F.abs(n-r)>=i)return!1;return!0},pairiteration:function(e,t,n){var r=e.bbox(),i=t.bbox(),a=n||.5;if(r.x.size+r.y.size<a&&i.x.size+i.y.size<a)return[(1e5*(e._t1+e._t2)/2|0)/1e5+"/"+(1e5*(t._t1+t._t2)/2|0)/1e5];var e=e.split(.5),t=t.split(.5),t=(t=[{left:e.left,right:t.left},{left:e.left,right:t.right},{left:e.right,right:t.right},{left:e.right,right:t.left}]).filter(function(e){return F.bboxoverlap(e.left.bbox(),e.right.bbox())}),o=[];return 0===t.length?o:(t.forEach(function(e){o=o.concat(F.pairiteration(e.left,e.right,a))}),o=o.filter(function(e,t){return o.indexOf(e)===t}))},__createBezier:function(e){var t=e[0],n=e[1],r=e[2],i=e.length;if(3===i)return new I(t.x,t.y,n.x,n.y,r.x,r.y);if(4===i){e=e[3];return new I(t.x,t.y,n.x,n.y,r.x,r.y,e.x,e.y)}},getLength:function(e){return F.__createBezier.apply(F,[e]).length()},getBounds:function(e){e=F.__createBezier.apply(F,[e]).bbox();return{x:e.x.min,y:e.y.min,width:e.x.size,height:e.y.size}},getClosestPointOnBezier:function(e,t){return F.__createBezier.apply(F,[e]).project(t)},getLUT:function(e,t){return F.__createBezier.apply(F,[e]).getLUT(t)}},he={range:function(e,t,n){return je(t,qe(n,e))},toDegrees:function(e){return e*H/d},toRadians:function(e){return e/H*d},to360Degrees:function(e){return(e%W+W)%W},calcDistance:function(e,t){var n=t.x-e.x,e=t.y-e.y;return te(n*n+e*e)},calcAngle:function(e,t){return he.to360Degrees(he.toDegrees(a(t.y-e.y,t.x-e.x)))},isAngleInRange:function(e,t,n){return e=he.to360Degrees(e),t=he.to360Degrees(t),n=he.to360Degrees(n),t<e&&(t+=W),n<=t&&e<=n||W<t&&e<=(n+=W)&&n<=t},getArgsPoint:function(e){var t=arguments.length;return 1===t?e:1<t?{x:e,y:arguments[1]}:null},getArgsSize:function(e){var t=arguments.length;return 1===t?e:1<t?{width:e,height:arguments[1]}:null}},de=he.toRadians,ue=he.calcDistance,_e=he.calcAngle,pe=he.to360Degrees,fe={cross:function(e,t,n){return(e.x-n.x)*(t.y-n.y)-(e.y-n.y)*(t.x-n.x)},convexHull:function(e){(e=e.slice()).sort(function(e,t){return e.x===t.x?e.y-t.y:e.x-t.x});for(var t=e.length,n=[],r=0;r<t;r++){for(;2<=n.length&&fe.cross(n[n.length-2],n[n.length-1],e[r])<=0;)n.pop();n.push(e[r])}var i=[];for(r=t-1;0<=r;r--){for(;2<=i.length&&fe.cross(i[i.length-2],i[i.length-1],e[r])<=0;)i.pop();i.push(e[r])}return i.pop(),n.pop(),n.concat(i)}},ge={calc2LinesIntersection:function(e,t,n,r,i){var a=e.x,o=e.y,s=t.x,l=t.y,c=n.x,h=n.y,d=r.x,u=r.y,_=(a-s)*(h-u)-(o-l)*(c-d);if(0==_)return p;_={x:((a*l-o*s)*(c-d)-(a-s)*(c*u-h*d))/_,y:((a*l-o*s)*(h-u)-(o-l)*(c*u-h*d))/_};return!1===i||ge.isPointOnLineSegment(_,e,t)&&ge.isPointOnLineSegment(_,n,r)?_:p},calcRectLineIntersection:function(e,t,n,r){for(var i=e.x,a=e.y,o=e.width,s=e.height,l=t.x,c=t.y,h=n.x,d=n.y,u={x:i,y:a},_={x:i+o,y:a},e={x:i,y:a+s},a={x:i+o,y:a+s},s=[u,_],_=[_,a],a=[a,e],u=[e,u],p=l<h?c<d?[u,s,_,a]:[a,u,s,_]:c<d?[s,_,a,u]:[_,a,u,s],f=[],g=0;g<4;g++){var y=p[g],v=y[0],C=y[1],y=ge.calc2LinesIntersection(v,C,t,n,r);y&&ge.isPointOnLineSegment(y,v,C)&&(f.push(y),0!==g&&2!==g||g++)}return f},calcPointToLineClosestPoint:function(e,t,n){var r=t.x,i=t.y,a=n.x,t=n.y;if(r===a&&i===t)return{x:r,y:i};n=u(r-a,2)+u(i-t,2),n=((e.x-r)*(a-r)+(e.y-i)*(t-i))/n;return n<0?{x:r,y:i}:1<n?{x:a,y:t}:{x:r+n*(a-r),y:i+n*(t-i)}},isPointsOnLineSameSide:function(t,n,e){if(e.length<2)return!0;var r=[];t.x===n.x?e.forEach(function(e){r.push(e.x-t.x)}):t.y===n.y?e.forEach(function(e){r.push(e.y-t.y)}):e.forEach(function(e){r.push((e.y-t.y)*(n.x-t.x)-(e.x-t.x)*(n.y-t.y))});var i=[];return r.forEach(function(e){e<0?e=-1:0<e&&(e=1),i.indexOf(e)<0&&i.push(e)}),-1<i.indexOf(1)&&-1<i.indexOf(1)},isPointOnLineSegment:function(e,t,n){var r=ue(e,t),e=ue(e,n),n=ue(t,n);return Ge(r+e-n)<1e-4},calcOffsetPointOnLine:function(e,t,n,r){var i=ue(t,e);return(n=!0===r&&0<=n&&n<=1?he.range(n*i,0,i):n)<=0?e:i<=n?t:{x:(i-n)/i*(e.x-t.x)+t.x,y:n/i*(t.y-e.y)+e.y}}},ye={calc3PointsCircleCenter:function(e,t,n){var r=(t.y-e.y)/(t.x-e.x),i=(n.y-t.y)/(n.x-t.x),i=(r*i*(n.y-e.y)+r*(t.x+n.x)-i*(e.x+t.x))/(2*(r-i));return{x:i,y:(e.y+t.y)/2-1/r*(i-(e.x+t.x)/2)}},calc3PointsAngle:function(e,t,n){var r=te(u(t.x-e.x,2)+u(t.y-e.y,2)),t=te(u(t.x-n.x,2)+u(t.y-n.y,2)),e=te(u(n.x-e.x,2)+u(n.y-e.y,2));return he.toDegrees(_((t*t+r*r-e*e)/(2*t*r)))},calcPointOnCircle:function(e,t,n){n=de(pe(n));return{x:e.x+ne(n)*t,y:e.y+re(n)*t}},calcPointOnEllipse:function(e,t){var n=e.x,r=e.y,i=e.width,a=e.height,o=n+i/2,e=r+a/2;t=pe(t);n=de(t),r=g(n),n=i/2,i=a/2,a=n*n,n=i*i,i=te(a*n/(n+a*r*r)),n=i*r,a=i+o,r=n+e,i=-i+o,n=-n+e,e=_e({x:o,y:e},{x:a,y:r});return 0<=t&&t<H?0<=e&&e<H?{x:a,y:r}:{x:i,y:n}:H<=e&&e<W?{x:a,y:r}:{x:i,y:n}},calcRotatedPoint:function(e,t,n){var r=e.x,i=e.y,e=t.x,t=t.y,n=de(pe(n));return{x:r+(e-r)*ne(n)-(t-i)*re(n),y:i+(t-i)*ne(n)+(e-r)*re(n)}},calcParallelogramPoints:function(t,e){var n=t.length;if(0<n){for(var r=t[0],i=r.x,a=r.x,o=r.y,s=r.y,l=r,c=r,h=1;h<n;h++)r=t[h],o=qe(o,r.y),s=je(s,r.y),r.x<i&&(i=r.x,l=r),r.x>a&&(a=r.x,c=r);for(var d=g(de(e%90)),u=l.x-(s-l.y)/d,_=c.x-(s-c.y)/d,p=0,f=0;!function(){for(;p<n;p++){r=t[p];var e=s-d*(r.x-u);if(r.y<e)return u=r.x-(s-r.y)/d-1,!1}return!0}(););for(;!function(){for(;f<n;f++)if((r=t[f]).x>_){var e=s-d*(r.x-_);if(r.y>e)return _=r.x-(s-r.y)/d+1,!1}return!0}(););e=(s-o)/d;return[{x:u,y:s},{x:u+e,y:o},{x:_+e,y:o},{x:_,y:s}]}return t},calcPointsBounds:function(e){var t=(e=e||[]).length;if(0===t)return null;for(var n=e[0],r=n.x,i=n.y,a=n.x,o=n.y,s=1;s<t;s++)n=e[s],r=qe(r,n.x),i=qe(i,n.y),a=je(a,n.x),o=je(o,n.y);return{x:r,y:i,width:a-r,height:o-i}},rectContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width,a=e.height,e=t.x,t=t.y;return!(i<=0||a<=0)&&(n<=e&&e<=n+i&&r<=t&&t<=r+a)},circleContainsPoint:function(e,t,n){return ue(e,n)<=t},ellipseContainsPoint:function(e,t){var n=e.x,r=e.y,i=e.width/2,e=e.height/2,n=t.x-(n+i),r=t.y-(r+e);return n*n/(i*i)+r*r/(e*e)<=1},pieContainsPoint:function(e,t,n,r,i){return!!ye.circleContainsPoint(e,t,i)&&(Ge(r-n)>=W||he.isAngleInRange(n,r,_e(e,i)))}},ve={calcPathBounds:function(e){var t=(e=e||[]).length;if(t<1)return null;var n=e[0],r=n.x,i=n.y,a=n.x,o=n.y;return 1<t&&ve.splitPath(e).forEach(function(e){var t,n=e.type,e=e.points;"lt"===n||"mt"===n?t=ye.calcPointsBounds(e):"qt"!==n&&"ct"!==n||(t=F.getBounds(e)),t&&(r=qe(r,t.x),i=qe(i,t.y),a=je(a,t.x+t.width),o=je(o,t.y+t.height))}),{x:r,y:i,width:a-r,height:o-i}},calcPointToPathClosestPoint:function(n,e){if((e=e||[]).length<2)return e[0];var r=[];ve.splitPath(e).forEach(function(e){var t=e.type,e=e.points;"lt"===t||"mt"===t?r.push(ge.calcPointToLineClosestPoint(n,e[0],e[1])):"qt"!==t&&"ct"!==t||r.push(F.getClosestPointOnBezier(e,n))});var t=r[0],i=ue(n,t),a=i;return r.forEach(function(e){(i=ue(n,e))<a&&(a=i,t=e)}),t},calcPathLength:function(e){e=e||[];var n=0;return ve.splitPath(e).forEach(function(e){var t=e.type,e=e.points;"lt"===t?n+=ue(e[0],e[1]):"qt"!==t&&"ct"!==t||(n+=F.getLength(e))}),n},calcOffsetPointOnPath:function(e,d,t){var u,_,n,r=(e=e||[]).length;return r<2?null:(d<=0?(u=e[0],_=_e(u,e[1])):(n=ve.calcPathLength(e),!0===t&&d<=1&&0<=d&&(1<=d?(u=e[r-1],_=_e(e[r-2],u)):d=he.range(d*n,0,n)),n<=d&&(u=e[r-1],_=_e(e[r-2],u))),u?lt({angle:_},u):(rt(ve.splitPath(e),function(e){var t=e.type,n=e.points,r=n.length,i=0;if("lt"===t?i=ue(n[0],n[1]):"qt"!==t&&"ct"!==t||(i=F.getLength(n)),!(i<d)){if("lt"===t)u=ve._getPathOffsetPoint(ge.calcOffsetPointOnLine(n[0],n[1],d),e);else if("qt"===t||"ct"===t)for(var a=F.getLUT(n,je(0|i,20)),o=a.length,s=1;s<o;s++){var l=a[s-1],c=a[s],h=ue(l,c);if(!(h<d)){u=d<h/2?ve._getPathOffsetPoint(l,e,a,s-1):ve._getPathOffsetPoint(c,e,a,s);break}d-=h}return null==u&&(u=n[r-1],_=_e(n[r-2],n)),!1}d-=i}),u?lt({angle:_},u):void 0))},_getPathOffsetPoint:function(e,t,n,r){var i=t.type,a=t.points,t=a.length;return"qt"===i||"ct"===i?(0===r&&(r=1),e.angle=_e(n[r-1],n[r])):e.angle=_e(a[0],a[t-1]),e},splitPath:function(e){var t=e.length;if(t<2)return[];for(var n,r,i=[],a=e[0],o=a.seg,s=a,l=1;l<t;l++)a=e[l],null!=o?"mt"===o?i.push({type:"mt",points:[e[l-1],a]}):"qt"===o?l<t-1?(r=a,a=e[++l],i.push({type:"qt",points:[s,r,a]})):i.push({type:"lt",points:[s,a]}):"ct"===o&&(l<t-2?(n=a,r=a=e[++l],a=e[++l],i.push({type:"ct",points:[s,n,r,a]})):i.push({type:"lt",points:[s,a]})):i.push({type:"lt",points:[e[l-1],a]}),o=a.seg,s=a;return i},roundPath:function(e,t,n){if(1<t&&e){var r=e.length;if(2<r){!0===n&&(e=nt([e[r-1]],e,[e[0]]),r+=2);var i=[];i.push(e[0]);for(var a=1;a<r-1;a++){var o=e[a],s=e[a-1],l=e[a+1],c=ue(s,o),h=ue(o,l);!0===n?(c/=2,h/=2):(1!==a&&(c/=2),a!==r-2&&(h/=2));h=qe(c,h,t),s=ye.calcPointOnCircle(o,h,_e(o,s));s.seg="qt",i.push(s),i.push(o),i.push(ye.calcPointOnCircle(o,h,_e(o,l)))}return i.push(e[r-1]),!0===n&&(i.shift(),i.pop()),i}}return e}},Ce={createGrowRect:function(e,t,n){return 2===arguments.length&&(n=t),{x:e.x-t,y:e.y-n,width:e.width+2*t,height:e.height+2*n}},getRectCenter:function(e){return{x:e.x+e.width/2,y:e.y+e.height/2}},intersectsRect:function(e,t){return!(e.width<=0||e.height<=0||t.width<=0||t.height<=0)&&(t.x+t.width>e.x&&t.y+t.height>e.y&&t.x<e.x+e.width&&t.y<e.y+e.height)},containsRect:function(e,t){var n=e.width,r=e.height,i=t.width,a=t.height;if(n<=0||r<=0||i<0||a<0)return!1;var o=e.x,s=e.y,e=t.x,t=t.y;return o<=e&&s<=t&&e+i<=o+n&&t+a<=s+r},calcRectsUnion:function(e){if(0===e.length)return null;var t=e[0],n=t.x,r=t.y,i=n+t.width,a=r+t.height;return e.slice(1).forEach(function(e){n=qe(n,e.x),r=qe(r,e.y),i=je(i,e.x+e.width),a=je(a,e.y+e.height)}),{x:n,y:r,width:i-n,height:a-r}},calcRectsIntersection:function(e){if(0===e.length)return null;var t=e[0],s={x:t.x,y:t.y,width:t.width,height:t.height};return e.slice(1).forEach(function(e){if(!Ce.intersectsRect(s,e))return p;var t=s.x,n=s.y,r=e.x,i=e.y,a=je(t,r),o=je(n,i);s={x:a,y:o,width:qe(t+s.width,r+e.width)-a,height:qe(n+s.height,i+e.height)-o}}),s},calcRotatedRect:function(e,t,n){if(null==e)return null;var r=e.x,i=e.y,a=e.width,o=e.height;if(t%360==0)return{x:r,y:i,width:a,height:o};n=n||{x:e.x+a/2,y:e.y+o/2};var s=ye.calcRotatedPoint(n,{x:r,y:i},t),e=ye.calcRotatedPoint(n,{x:r+a,y:i},t),a=ye.calcRotatedPoint(n,{x:r+a,y:i+o},t),i=ye.calcRotatedPoint(n,{x:r,y:i+o},t),o=qe(s.x,e.x,a.x,i.x),t=qe(s.y,e.y,a.y,i.y);return{x:o,y:t,width:je(s.x,e.x,a.x,i.x)-o,height:je(s.y,e.y,a.y,i.y)-t}}},G={calcCubicBezier:function(e,t,n,r,i){return u(1-i,3)*e+3*i*u(1-i,2)*t+3*u(i,2)*(1-i)*n+u(i,3)*r},calcCubicBezierT:function(e,t,n,r,i){if(i===e||i===r)return i;for(var a,o,s=0,l=1;;){if(o=s+(l-s)/2,a=G.calcCubicBezier(e,t,n,r,o),Ge(a=a-i)<1e-6)break;0<a?l=o:s=o}return o}},j={linear:function(e){return e},ease:function(e){return j._calcCubicBezierTiming({x:.25,y:.1},{x:.25,y:1},e)},"ease-in":function(e){return j._calcCubicBezierTiming({x:.42,y:0},{x:1,y:1},e)},"ease-out":function(e){return j._calcCubicBezierTiming({x:0,y:0},{x:.58,y:1},e)},"ease-in-out":function(e){return j._calcCubicBezierTiming({x:.42,y:0},{x:.58,y:1},e)},"cubic-bezier":function(e,t,n,r,i){return j._calcCubicBezierTiming({x:t,y:n},{x:r,y:i},e)},_calcCubicBezierTiming:function(e,t,n){n=G.calcCubicBezierT(0,e.x,t.x,1,n);return G.calcCubicBezier(0,e.y,t.y,1,n)},getTimingFunc:function(e){var t,n,r,i;return Ze(e)&&(j.hasOwnProperty(e)?e=j[e]:!(t=e.match(/^\s*[(\w+)-]\s*\((.*)\)/))||(n=t[1])&&j.hasOwnProperty(n)&&(r=j[n],i=t[1].split(","),e=function(e){return r.apply(null,[e].concat(i))})),e=!et(e)?j.linear:e}},q={cancelAnimate:function(e){pt.cancelCallRAFInterval(e)},animate:function(r,e){var i=0|(e=e||{}).duration;if(!(i<=0)){var a=j.getTimingFunc(e.timing_function||e.easing),o=0|e.delay,s=e.direction,l=!0===(l=e.iteration_count||e.iterations)||l===1/0?1/0:je(1,0|l),c=performance.now(),h=1,d=1;return yt(function(){var e=performance.now(),t=e-c;if(0<o){if(t<=o)return;c=e,t=o=0}var n=t/i,t=!1;1<=n&&(t=!0,n=1);n=a(-1===h?1-n:n),n=r(n,d);if(!1===n)return n;if(!0===t){if(l<=d)return!1;d++,c=e,"alternate"===s&&(h*=-1)}})}}},me={_loadingMap:{},_cachedMap:{},_errorMap:{},clearCache:function(){me._loadingMap={},me._cachedMap={},me._errorMap={}},register:function(e,t){var n;t&&(Ze(t)?(null==(n=me._loadingMap[e])&&(n=[],me._loadingMap[e]=n),me.load(e,t)):me._cachedMap[e]=t)},get:function(e,t,n){if(me._cachedMap.hasOwnProperty(e))return me._cachedMap[e];if(1<me._errorMap[e])return!1;var r=me._loadingMap[e],i=null==r;!0==i&&(r=[],me._loadingMap[e]=r),t&&r.push({callBack:t,context:n}),!0==i&&me.load(e,e)},load:function(e,t){var n=new Image;n.onload=function(){me.cache(e,n)},n.onerror=function(){console.error("Load Image Error:"+t),me.cache(e,null)},n.onabort=function(){console.error("Load Image Abort:"+t),me.cache(e,null)},n.src=t},cache:function(e,t){t?me._cachedMap[e]=t:me._errorMap[e]=1+(0|me._errorMap[e]);var n=me._loadingMap[e];n&&(n.forEach(function(e){e.callBack.apply(e.context,[t])}),delete me._loadingMap[e])},getColorImage:function(e,t,n){var r=me._createImgCanvas(e),i=r.getContext("2d"),a=r.getAttribute("width"),e=r.getAttribute("height"),e=i.getImageData(0,0,a,e);return $.rgb(e,t),i.putImageData(e,0,0),"canvas"===n?r:r.toDataURL(n)},_createImgCanvas:function(e){var t=e.width,n=e.height,r=Ot("canvas");return r.setAttribute("width",t),r.setAttribute("height",n),r.getContext("2d").drawImage(e,0,0),r}},$={rgb:function(e,t){for(var n,t=N.toRGB(t,!0),r=t.red,i=t.green,a=t.blue,o=e.data,s=o.length,l=0;l<s;l+=4)0!==o[l+3]&&(n=(.34*o[l]+.5*o[l+1]+.16*o[l+2])/255,o[l]=n*r,o[l+1]=n*i,o[l+2]=n*a,o[l+3]=o[l+3])}},be=function(e){this instanceof be||U.throwError("Instance must be constructed via new"),this.__zid__=U.guid(),this.__props__={},this.__getProps__={},Qe(e)&&ct(e,function(e,t){et(t)?this[e]=t:this.__initSetProperty(e,t)},this)};function X(){this._typeListenersMap=l.create(null)}_t(be,l,{id:function(){return this.__zid__},_bind:function(r){var i;Qe(r)&&(i=this,ct(r,function(t,e){var n=e;l.defineProperty(r,t,{set:function(e){et(n=e)?i[t]=n:i.setProperty(t,n)},get:function(){return n}})}))},setCallBack:function(e,t,n){this["_default_"+e]=this.constructor.prototype[e],this[e]=function(){t.apply(n||this,arguments)}},resetCallBack:function(e){this[e]=this["_default_"+e]},getClassName:function(){return this.constructor.__className_},set:function(e,t){return this.setProperty.apply(this,arguments)},setProperty:function(e,t){var n=arguments.length;return 1===n&&Qe(e)?ct(e,function(e,t){this._setProperty(e,t)},this):1<n&&this._setProperty(e,t),this},isPropertyValid:function(e,t,n){return!0},beforeSetProperty:function(e,t,n){},afterSetProperty:function(e,t,n){},__initSetProperty:function(e,t){var n=this.__props__[e];return!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n)),this},_setProperty:function(e,t){var n=p;return this.hasProperty(e)&&(n=this.__props__[e])===t||!1===this.isPropertyValid(e,t,n)||(this.beforeSetProperty(e,t,n),this.__props__[e]=t,delete this.__getProps__[e],this.afterSetProperty(e,t,n),n!==t&&this._onPropertyChange(e,t,n)),this},_onPropertyChange:function(e,t,n){},get:function(e){return this.getProperty(e)},getProperty:function(e){if(this.__getProps__.hasOwnProperty(e))return this.__getProps__[e];var t=this._getProperty(e);return this.__getProps__[e]=t},_getProperty:function(e){return this.hasProperty(e)?this.__props__[e]:ut.getClassDefault(this.constructor,e)},remove:function(e){return this.removeProperty(e)},removeProperty:function(e){if(this.hasProperty(e)){var t=this.__props__[e];if(t!==p){if(!1===this.isPropertyValid(e,p,t))return this;this.beforeSetProperty(e,p,t),delete this.__props__[e],delete this.__getProps__[e],this.afterSetProperty(e,p,t),this._onPropertyChange(e,p,t)}else delete this.__props__[e],delete this.__getProps__[e]}return this},has:function(e){return this.hasProperty(e)},hasProperty:function(e){return this.__props__.hasOwnProperty(e)},gets:function(){return this.getProperties.apply(this,arguments)},getProperties:function(e){if(0===arguments.length)return this._getAllProperties();if(!1===e)return this._getAllProperties(!1);var t={};return Ye(e)&&e.forEach(function(e){t[e]=this.getProperty(e)},this),t},_getAllProperties:function(e){return!1===e?this.__props__:lt({},this.__props__)}}),_t(X,l,{add:function(e,t,n){var r=this._typeListenersMap[e];null==r&&(r=[],this._typeListenersMap[e]=r);n={listener:t,context:n};return r.push(n),n},remove:function(e,t,n){var r=this._typeListenersMap[e];if(r)for(var i=r.length,a=0;a<i;a++){var o=r[a];if(o.listener===t&&o.context===n)return void r.splice(a,1)}},dispatch:function(e,t){var n=this._typeListenersMap[e];if(n)for(var r=n.length,i=0;i<r;i++){var a=n[i],o=a.listener,a=a.context;o.apply(a,[t])}}});var K=function(){this._dispatcher=new X,K.superClass.constructor.apply(this,arguments)};_t(K,be,{_onPropertyChange:function(e,t,n){K.superClass._onPropertyChange.apply(this,arguments),this.dispatchChangeEvent(e,t,n)},getDispatcher:function(){return this._dispatcher},addListener:function(e,t,n){this._dispatcher.add(e,t,n)},removeListener:function(e,t,n){this._dispatcher.remove(e,t,n)},dispatchEvent:function(e,t){this._dispatcher.dispatch(e,t)},addChangeListener:function(e,t){this.addListener("change",e,t)},removeChangeListener:function(e,t){this.removeListener("change",e,t)},dispatchChangeEvent:function(e,t,n){this.dispatchEvent("change",{source:this,property:e,new_value:t,old_value:n,newValue:t,oldValue:n})},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)}});var J,Y,Z=s.localStorage,xe=s.sessionStorage,we={setCookie:function(e,t,n){var r,t=2<arguments.length?((r=new Date).setTime(r.getTime()+6e4*n),t+"; expires="+r.toUTCString()):t;He.cookie=e+"="+t},getCookie:function(e){e=He.cookie.match(new RegExp(e+"=([^;]+)"));return e?e[1]:p},removeCookie:function(e){we.setCookie(e,"",-1)}},Pe={_call:function(e,t,n){return(n=c.call(n)).unshift(t),e.apply(null,n)},setItem:function(e,t,n,r){n!==p?3<arguments.length&&0<r?(r=6e4*(0|r)+Date.now(),e.setItem(t,JSON.stringify({_zexpires_time:Date.now()+r,value:n}))):e.setItem(t,JSON.stringify(n)):Pe.removeItem(e,t)},getItem:function(e,t){var n=e.getItem(t);if(n){try{n=JSON.parse(n)}catch(e){}if(Qe(n))if(n.hasOwnProperty("_zexpires_time"))return n._zexpires_time<Date.now()?p:n.value;return n}return p},removeItem:function(t,n){if(!et(n))return t.removeItem(n);h(t).forEach(function(e){!0===n(e)&&t.removeItem(e)})},clear:function(e){return e.clear()}},Re={setItem:function(e,t,n){return Pe._call(Pe.setItem,Z,arguments)},getItem:function(e){return Pe._call(Pe.getItem,Z,arguments)},removeItem:function(e){return Pe._call(Pe.removeItem,Z,arguments)},clear:function(){return Pe._call(Pe.clear,Z,arguments)}},De={setItem:function(e,t,n){return Pe._call(Pe.setItem,xe,arguments)},getItem:function(e){return Pe._call(Pe.getItem,xe,arguments)},removeItem:function(e){return Pe._call(Pe.removeItem,xe,arguments)},clear:function(){return Pe._call(Pe.clear,xe,arguments)}},ke={getURLQuery:function(e){var t=location.search;if(0===arguments.length){var i={};return t.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,t,n,r){i[t]=r}),i}t=new RegExp("[?&]"+e.replace(/[\[\]]/g,"\\$&")+"(=([^&#]*)|&|#|$)").exec(t);return t?t[2]:p},getURLHash:function(e){var t=location.hash;if(t){if(0===arguments.length)return t.substr(1);e=location.hash.match(new RegExp(e+"=([^&]*)"));return e?e[1]:""}return""},getQueryString:function(e){if(e){if(Ze(e))return e;if(Qe(e)){var n=[];return ct(S.getDeepKVMap(e),function(e,t){n.push(encodeURI(e+"="+t))}),n.join("&")}}return""}},Ae={};J=navigator.userAgent,Y=J.match(/(opera|chrome|safari|firefox|msie|trident(?=\/))\/?\s*(\d+)/i)||[],(Se=/trident/i.test(Y[1])?["IE",(Se=/\brv[ :]+(\d+)/g.exec(J)||[])[1]]:"Chrome"===Y[1]&&null!=(Se=J.match(/\b(OPR|Edge)\/(\d+)/))?Se=Se.slice(1):(Y=Y[2]?[Y[1],Y[2]]:[navigator.appName,navigator.appVersion,"-?"],null!=(Se=J.match(/version\/(\d+)/i))&&Y.splice(1,1,Se[1]),Y))?(Y=(Y=Se[0])&&("ie"===(Y=Y.toLowerCase())||"msie"===Y?"IE":"opr"===Y?"Opera":C(Y)),Ae.browser=Y,Ae.version=0|Se[1]):Ae.browser="Unknown",Element&&(Element.prototype.matches||(Element.prototype.matches=Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector),Element.prototype.closest||(Element.prototype.closest=function(e){var t=this;do{if(t.matches(e))return t}while(null!==(t=t.parentElement||t.parentNode)&&1===t.nodeType);return null})),s.parent!==s&&(U.nowTime=Date.now(),U.guid=function(){return"_z-t-"+U.nowTime+"-i-"+U.__uid++});var Se="IE"===Ae.browser,vt={querySelector:function(e,t){return(1<arguments.length?t:He).querySelector(e)},querySelectorAll:function(e,t){var e=(1<arguments.length?t:He).querySelectorAll(e),n=[];return rt(e,function(e){n.push(e)}),n},querySelectorChild:function(e,t){return(t=vt.queryElement(t))?at(vt.querySelectorAll(e,t),function(e){return e.parentNode===t}):null},querySelectorChildren:function(e,t){return(t=vt.queryElement(t))?it(vt.querySelectorAll(e,t),function(e){return e.parentNode===t}):[]},queryNode:function(e){return Ze(e)?vt.querySelector.apply(null,arguments):Ie(e)?e:null},queryElement:function(e){return Ze(e)?vt.querySelector.apply(null,arguments):Be(e)?e:null},queryEventElement:function(e){return e===s||e===He?e:vt.queryElement.apply(null,arguments)}},Ct=vt.querySelector,mt=vt.querySelectorAll,bt=vt.queryElement,Te=vt.queryNode,Le=vt.queryEventElement,Ee={add:function(e,t){t=Ee.formatClass(c.call(arguments,1));e=e.classList;e.add.apply(e,t)},remove:function(e,t){t=Ee.formatClass(c.call(arguments,1));e=e.classList;e.remove.apply(e,t)},toggle:function(e,t,n){var r=e.classList,i=c.call(arguments,1),e=arguments[arguments.length-1];R(e)?(n=e,i.pop(),(i=Ee.formatClass(i)).forEach(function(e){r.toggle.apply(r,[e,n])})):(i=Ee.formatClass(i)).forEach(function(e){r.toggle.apply(r,[e])})},set:function(e,t){t=Ee.formatClass(c.call(arguments,1)),e.className=t.join(" ")},contains:function(e,t){return e.classList.contains(t)},formatClass:function(e){var t=[];return e.forEach(function(e){e&&(0<=e.indexOf(" ")?e.split(" ").forEach(function(e){e&&t.push(e)}):t.push(e))}),t}};Se&&(Ee.add=function(e){var t=e.className.split(" ");Ee.formatClass(c.call(arguments,1)).forEach(function(e){t.indexOf(e)<0&&t.push(e)}),e.className=t.join(" ")},Ee.remove=function(e){var t=e.className.split(" "),n=Ee.formatClass(c.call(arguments,1)),t=it(t,function(e){return n.indexOf(e)<0});e.className=t.join(" ")},Ee.toggle=function(t,e,n){var r=c.call(arguments),i=arguments[arguments.length-1];R(i)?(n=i,r.pop(),(!0===n?Ee.add:Ee.remove).apply(Ee,r)):(r=Ee.formatClass(r)).forEach(function(e){Ee.contains(t,e)?Ee.remove(t,e):Ee.add(t,e)})},Ee.contains=function(e,t){return null!=e.className.match(new RegExp("(\\s|^)"+t+"(\\s|$)"))});var xt=Ee.add,wt=Ee.remove,Pt=Ee.set,Rt=Ee.toggle,Dt=Ee.contains,Ve=(Ee.formatClass,{setStyle:function(e,t,n){e.style[t]=n},setStyles:function(n,e,t){if(!Qe(e))return Ve.setStyle(n,Oe(e),t);ct(e,function(e,t){Ve.setStyle(n,Oe(e),t)})},getStyle:function(e,t){return s.getComputedStyle(e,null).getPropertyValue(t)},removeStyle:function(e,t){e.style[t]=""},formatStyle:function(e){return e.replace(/([A-Z])/g,"-$1").toLowerCase()},parseStyle:function(e,n){var r={};return e.split(";").forEach(function(e){var t=(e=e.split(":")).shift().trim();""!==t&&(!0===n&&(t=Oe(t)),r[t]=e.join(":").trim())}),r}}),kt=Ve.setStyle,At=Ve.getStyle,St=Ve.removeStyle,Oe=Ve.formatStyle,Tt={__valueHooks:{multiple_select:{setValue:function(e,n){e=e.options;0!==e.length&&(null==n&&rt(e,function(e){e.selected=!1}),Ye(n)||(n=[n]),rt(e,function(e){var t=e.hasAttribute("value")?e.value:e.text;e.selected=0<=n.indexOf(t)}))},getValue:function(e){var t=[];return rt(e.options,function(e){!0===e.selected&&(e.hasAttribute("value")?t.push(e.value):t.push(e.text))}),t}},radio:{setValue:function(e,t){var n=e.getAttribute("name");n?mt("input[type='radio'][name='"+n+"']").forEach(function(e){e.checked=e.value===t}):e.checked=!0===t},getValue:function(e){var t=e.getAttribute("name");if(t){t=Ct("input[type='radio'][name='"+t+"']:checked");return t?t.value:null}return e.checked}},file:{setValue:function(e,t){e.value=t},getValue:function(e){return e.files}}},setValue:function(e,t){if(e.setValue)return e.setValue(t);var n=Tt.getValueField(e),r=Tt.__valueHooks[n];return r?r.setValue(e,t):e[n]=t},getValue:function(e){if(e.getValue)return e.getValue();var t=Tt.getValueField(e),n=Tt.__valueHooks[t];return n?n.getValue(e):e[t]},getValueField:function(e){return Lt.isInput(e)?Lt.isCheckBox(e)?"checked":Lt.isRadio(e)?"radio":Lt.isFileInput(e)?"file":"value":Lt.isSelect(e)?Lt.isMultipleSelect(e)?"multiple_select":"value":Lt.isTextArea(e)?"value":Lt.isImage(e)?"src":"innerHTML"}},ze=Tt.getValue,Me=Tt.setValue,Lt={isTagType:function(e,t){return e.tagName===t},isInput:function(e){return Lt.isTagType(e,"INPUT")},isCheckBox:function(e){return!!Lt.isInput(e)&&Lt.isAttributeType(e,"CHECKBOX")},isRadio:function(e){return!!Lt.isInput(e)&&Lt.isAttributeType(e,"RADIO")},isFileInput:function(e){return!!Lt.isInput(e)&&Lt.isAttributeType(e,"FILE")},isTextArea:function(e){return Lt.isTagType(e,"TEXTAREA")},isSelect:function(e){return Lt.isTagType(e,"SELECT")},isMultipleSelect:function(e){return!!Lt.isSelect(e)&&e.hasAttribute("multiple")},isImage:function(e){return Lt.isTagType(e,"IMG")},isElement:function(e){return!(!e||"object"!=typeof e)&&(1===e.nodeType&&"string"==typeof e.nodeName&&null!=e.style&&"object"==typeof e.style&&"number"==typeof e.clientWidth)},isNode:function(e){return!(!e||"object"!=typeof e)&&(null!==e.nodeType&&"string"==typeof e.nodeName)},isAttributeType:function(e,t){e=e.getAttribute("type");return!!e&&e.toUpperCase()===t}},Be=Lt.isElement,Ie=Lt.isNode,Ne=Lt.isTagType,Et={getWindowPageOffset:function(){var e=He.documentElement,t=s.pageXOffset||e.scrollLeft||0,n=s.pageYOffset||e.scrollTop||0;return{x:t-(e.clientLeft||0),y:n-(e.clientTop||0)}},getWindowSize:function(){var e=He.body,t=He.documentElement;return{width:s.innerWidth||t.clientWidth||e.clientWidth,height:s.innerHeight||t.clientHeight||e.clientHeight}},getWindowPageBounds:function(){var e=Et.getWindowPageOffset(),t=Et.getWindowSize();return{x:e.x,y:e.y,width:t.width,height:t.height}},getElementWindowOffset:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top}},getElementPageOffset:function(e){var t=e.getBoundingClientRect(),e=Et.getWindowPageOffset();return{x:e.x+t.left,y:e.y+t.top}},getElementWindowBounds:function(e){e=e.getBoundingClientRect();return{x:e.left,y:e.top,width:e.width,height:e.height,left:e.left,top:e.top,right:e.right,bottom:e.bottom}},getEventWindowOffset:function(e){return{x:e.clientX,y:e.clientY}},getEventPageOffset:function(e){var t=e.pageX;if(null!=t)return{x:t,y:e.pageY};t=Et.getWindowPageOffset();return{x:e.clientX+t.x,y:e.clientY+t.y}}},Vt={create:function(e,t,n){var r,i,a=/^<([A-z]+)([^\d].*)?>(.*<\/\1>)?$/.test(e.trim())?Vt._createByHtml(e):o(e);return null!=t&&(Qe(t)?(r=t.className||t.class,i=t.attributes,e=t.style,null!=r&&(a.className=r),null!=e&&Ve.setStyles(a,e),null!=i&&ct(i,function(e,t){a.setAttribute(e,t)})):a.className=t),n&&n.forEach(function(e){a.appendChild(e)}),a},_createByHtml:function(e){var t=o("div");t.innerHTML=e.trim();t=t.firstElementChild;return t.parentNode.removeChild(t),t},remove:function(e){var t=e.parentNode;return t&&t.removeChild(e),e},appendText:function(e,t){e.appendChild(He.createTextNode(t))},empty:function(e){for(;e.lastChild;)e.removeChild(e.lastChild)},scrollIntoView:function(e,t,n){n=n||10;var r=e.offsetTop,i=t.scrollTop,a=e.offsetHeight,o=t.clientHeight;r<i+n?t.scrollTop=r-n:i+o-n<r+a&&(t.scrollTop=r+a+n-o);r=e.offsetLeft,a=t.scrollLeft,o=e.offsetWidth,e=t.clientWidth;r-n<a?t.scrollLeft=r-n:a+e<r+o+n&&(t.scrollLeft=r+o+n-e)},isInDom:function(e){return He.contains(e)},getAttributeSelector:function(e,t){return 1<arguments.length?"["+e+"='"+t+"']":"["+e+"]"}};He.contains||(Vt.isInDom=function(e){return He.body.contains(e)}),s.HTMLTemplateElement&&(Vt._createByHtml=function(e){var t=o("template");t.innerHTML=e.trim();t=t.content.firstElementChild;return t.parentNode.removeChild(t),t});var Ot=Vt.create,zt=Vt.remove,Mt=Vt.empty,Bt=Vt.appendText,It=Vt.isInDom,Nt=Vt.getAttributeSelector,Ut={initSelectOptions:function(e,r,t){var i,a,o,s,l;Qe(t)?(i=t.value_field,a=t.label_field,o=t.value,s=t.restore_value,l=t.children_field):Ze(t)&&(i=t),l=l||"children",Ze(e)?e=mt(e):Ye(e)||(e=[e]),null==r?r=[]:Ye(r)||(r=[r]),e.forEach(function(n){var e,t;(n=bt(n))&&(e=ze(n),Mt(n),r.forEach(function(e){var t;Qe(e)?e.hasOwnProperty(l)?(t=Ut._createSelectOptionGroup(n,e,a),e.children.forEach(function(e){Ut._createSelectOption(t,e,a,i)})):Ut._createSelectOption(n,e,a,i):Ut._createSelectOption(n,{label:e},a,i)}),null!=o?Me(n,o):!1!==s&&""!==e&&(t=ze(n),Me(n,e),""===ze(n)&&Me(n,t)))})},_createSelectOptionGroup:function(e,t,n){var r=Ot("optgroup"),t=n?t[n]:Ut._getValueByOrder(t,["label","name"],"");return r.setAttribute("label",t),e.appendChild(r),r},_createSelectOption:function(e,t,n,r){Qe(t)||(t={label:t});var i=Ot("option"),n=n?t[n]:Ut._getValueByOrder(t,["label","name"],""),r=r?t[r]:Ut._getValueByOrder(t,["value","id"]);null!=r&&i.setAttribute("value",r),null==n&&(n=r),i.innerHTML=n;t=t.attributes;t&&Ue.dom.setAttribute(i,t),e.appendChild(i)},_getValueByOrder:function(t,e,n){var r=null;return rt(e,function(e){if(t.hasOwnProperty(e))return r=t[e],!1}),null==r?n:r}},Ht={stop:function(e){e.stopPropagation()},prevent:function(e){e.preventDefault()},ctrl:function(e){return!0===e.ctrlKey},shift:function(e){return!0===e.shiftKey},alt:function(e){return!0===e.altKey},meta:function(e){return!0===e.metaKey},keyboardKey:function(e,t){return e.key===t}},Wt=function(e,t,n){return Ht.hasOwnProperty(t)?Ht[t]:"keydown"===e||"keyup"===e||"keypress"===e?Ht.keyboardKey:void 0},Ft={_wrapperList:[],addEventListener:function(e,t,n,r){r=Ft._addWrapper(e,t,n,r);e.addEventListener(r._event,r._listener,!1)},removeEventListener:function(e,t,n,r){r=Ft._removeWrapper(e,t,n,r);r&&e.removeEventListener(r._event,r._listener,!1)},addTypeEventListener:function(e,t,n,r){return"resize"===t?Kt.addResizeListener(e,n,r):"wheel"===t?Yt.addWheelListener(e,n,r):Ft.addEventListener(e,t,n,r)},removeTypeEventListener:function(e,t,n,r){return"resize"===t?Kt.removeResizeListener(e,n,r):"wheel"===t?Yt.removeWheelListener(e,n,r):Ft.removeEventListener(e,t,n,r)},getEventTarget:function(e,t){return e.target.closest(t)},isPointerEvent:function(e){return P.isPrimitiveType(e,"MouseEvent")||P.isPrimitiveType(e,"Touch")||P.isPrimitiveType(e,"PointerEvent")},_addWrapper:function(e,t,i,a){var o,n=t.split("."),s=n[0];n=n.length<=1?function(e){i.apply(a,arguments)}:(o=n.slice(1),function(n){var r=!0;rt(o,function(e){var t=Wt(s,e,n);if(t&&!1===t(n,e))return r=!1}),!1!==r&&i.apply(a,arguments)});n={element:e,type:t,listener:i,context:a,_event:s,_listener:n};return Ft._wrapperList.push(n),n},_removeWrapper:function(n,r,i,a){return k(Ft._wrapperList,function(e,t){return e.element===n&&e.type===r&&e.listener===i&&e.context===a})}},Gt=Ft.addEventListener,jt=Ft.removeEventListener,qt=Ft.addTypeEventListener,$t=Ft.removeTypeEventListener,Xt={_readyListeners:[],addReadyListener:function(e,t){Xt._isDocumentReady()?e.apply(t):(0===Xt._readyListeners.length&&Ft.addEventListener(He,"DOMContentLoaded",Xt._handleReady),Xt._readyListeners.push({listener:e,context:t}))},_handleReady:function(t){gt(function(){Xt._readyListeners.forEach(function(e){e.listener.apply(e.context,[t])})})},_isDocumentReady:function(){var e=He.readyState;return"complete"===e||!!He.body&&"interactive"===e}},Kt={_createResizeTrigger:function(e){var t=o("object");return((t.__ze_resize_element__=e).__ze_resize_trigger__=t).setAttribute("style","display:block;position:absolute;top:0;left:0;height:100%;width:100%;overflow:hidden;opacity:0;pointer-events:none;z-index: -1;"),t.onload=Kt._handleObjLoad,t.type="text/html",gt(function(){e.insertBefore(t,e.firstChild),t.data="about:blank"}),t},_handleObjLoad:function(e){var t=this.contentDocument;t&&t.defaultView&&(t.defaultView.__ze_resize_trigger__=this.__ze_resize_element__,t.defaultView.addEventListener("resize",Kt._handleResize))},_handleResize:function(n){(n.target||n.srcElement).__ze_resize_trigger__.__ze_resize_listeners__.forEach(function(e){var t=e.listener,e=e.context;t.apply(e,[n])})}};He.attachEvent?(Kt.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(r=[],e.__ze_resize_listeners__=r,(e.__ze_resize_trigger__=e).attachEvent("onresize",Kt._handleResize)),r.push({listener:t,context:n})},Kt.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(k(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&(e.detachEvent("onresize",Kt._handleResize),delete e.__ze_resize_listeners__))}):(Kt.addResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r||(r=[],e.__ze_resize_listeners__=r,"static"===Ve.getStyle(e,"position")&&Ve.setStyle(e,"position","relative"),Kt._createResizeTrigger(e)),r.push({listener:t,context:n})},Kt.removeResizeListener=function(e,t,n){var r=e.__ze_resize_listeners__;r&&(k(r,function(e){return e.listener===t&&e.context===n}),0===r.length&&((r=e.__ze_resize_trigger__)&&(r.contentDocument.defaultView.removeEventListener("resize",Kt._handleResize),e.removeChild(r),delete e.__ze_resize_trigger__),delete e.__ze_resize_listeners__))});var Jt="onwheel"in o("div")?"wheel":He.onmousewheel!==p?"mousewheel":"MozMousePixelScroll",Yt={addWheelListener:function(e,t,n){Ft.addEventListener(e,Jt,t,n)},removeWheelListener:function(e,t,n){Ft.removeEventListener(e,Jt,t,n)},isWheelDown:function(e){return e.wheelDelta<0||0<e.deltaY||0<e.detail}},Zt={_clickListeners:[],addClickListener:function(e,t){0===Zt._clickListeners.length&&Gt(He,"click",Zt._handleClick),Zt._clickListeners.push({listener:e,context:t})},removeClickListener:function(t,n){k(Zt._clickListeners,function(e){return e.listener===t&&e.context===n}),0===Zt._clickListeners.length&&jt(He,"click",Zt._handleClick)},_handleClick:function(t){Zt._clickListeners.forEach(function(e){e.listener.apply(e.context,[t])})}},Qt=function(e,t,n){var r=n||/<%(.+?)%>/;if(!0!==r.test(e))return e;r=new RegExp(r,"g");for(var i,a,o=/(^( )?(var|if|for|else|switch|case|break|{|}|;))(.*)?/g,s="with(obj) { var r=[];\n",l=0,c=function(e,t){return s+=t?e.match(o)?e+"\n":"r.push("+e+");\n":""!==e?'r.push("'+e.replace(/"/g,'\\"')+'");\n':"",c};i=r.exec(e);)c(e.slice(l,i.index))(i[1],!0),l=i.index+i[0].length;c(e.substr(l,e.length-l)),s=(s+'return r.join(""); }').replace(/[\r\t\n]/g," ");try{a=new Function("obj",s).apply(t,[t])}catch(e){console.error("Template Engine error:'"+e.message+"' in \n\nCode:\n"+s+"\n",null,"error")}return a};Ke({AJAX_PROMISE:!1,AJAX_TIMEOUT:12e4,AJAX_HEADERS:{"X-Requested-With":"XMLHttpRequest"}});var en={get:function(e){var t=c.call(arguments);return t.unshift("GET"),en.ajax.apply(null,t)},post:function(e){var t=c.call(arguments);return t.unshift("POST"),en.ajax.apply(null,t)},ajax:function(n,r){n=n.toUpperCase();var i=en._getAjaxParams.apply(null,c.call(arguments,2)),e=null!=s.Promise;if(e=e&&(i.hasOwnProperty("promise")?!0===i.promise:!0===Je("AJAX_PROMISE")))return new Promise(function(e,t){en._request(n,r,i,e,t)});en._request(n,r,i)},_request:function(e,t,n,r,i){var a,o,s=n.data,l=n.complete,c=n.context,h=n.timeout||Je("AJAX_TIMEOUT"),d=n.responseType,u=n.headers,_=n.data_type,p=!1!==n.async,n=Je("AJAX_BEFORE_SEND");et(n)&&(a=n);n=Je("AJAX_COMPLETE");et(n)&&(o=n),"GET"===e&&null!=s&&((f=ke.getQueryString(s))&&(t=t+(/\?/.test(t)?"&":"?")+f),s=null);var f=lt({},Je("AJAX_HEADERS"));s&&(Qe(s)||Ye(s)?(f["Content-Type"]="application/json; charset=utf-8",s=JSON.stringify(s)):"POST"===e&&(f["Content-Type"]="application/x-www-form-urlencoded; charset=utf-8"));var g=!1,y=new XMLHttpRequest;return p&&(y.onreadystatechange=function(){y.readyState===XMLHttpRequest.DONE&&(g=!0,en._callBack(y,_,l,c,r,i),o&&o(y))}),d&&(y.responseType=d),y.open(e,t,p),ct(lt(f,u),function(e,t){!1!==t&&y.setRequestHeader(e,t)}),a&&a(y),y.send(s),!1==p?(en._callBack(y,_,l,c,r,i),o&&o(y)):ft(function(){!0!==g&&(y&&(y.onreadystatechange=null),l&&l.apply(c,[408]),o&&o(y,!0),i&&i(408),y=null)},h),y},_callBack:function(e,t,n,r,i,a){var o,s=e.status;t?t=t.trim().toUpperCase():(l=e.getResponseHeader("Content-Type"))&&0<=l.indexOf("json")&&(t="JSON");var l=e.responseType;!t||""!==l&&"text"!==l?o=e.response:(o=e.responseText,"JSON"===t&&(o=JSON.parse(o))),n&&n.apply(r,[s,o]),i&&i(o)},_getAjaxParams:function(){var e,t=arguments.length;return 1===t?e=arguments[0]:1<t&&(e=lt({data:arguments[0]},arguments[1])),Qe(e)?e:{}},setup:function(e){}},tn={jsonp:function(e){var t=en._getAjaxParams.apply(null,c.call(arguments,1)),n=t.data,r=t.complete,i=t.context,t=t.timeout||Je("AJAX_TIMEOUT");!n||(n=ke.getQueryString(n))&&(e=e+(/\?/.test(e)?"&":"?")+n);var a="_z_jsonp_callback_"+Date.now(),o=!1;s[a]=function(e){o=!0,delete s[a],r.apply(i,[!1,!0,e])},e=e+(/\?/.test(e)?"&":"?")+"callback="+a,tn._loadJS(e),ft(function(){!0!==o&&(delete s[a],r.apply(i,[!0]))},t)},_loadJS:function(e){var t=o("script");t.type="text/javascript",t.onload=function(){t.onload=null,t.parentNode.removeChild(t)},t.onerror=function(){t.onerror=null,t.parentNode.removeChild(t)},(Ct("head")||Ct("body")).appendChild(t),t.src=e}};Ue.$={Defaults:v,StrUtil:e,TypeCheck:P,ArrayUtil:D,ObjectUtil:S,I18nUtil:V,ClassUtil:ut,ArrayMap:st,TimeUtil:pt,ColorUtil:N,Util:U,MathUtil:he,MathConvexHullUtil:fe,MathLineUtil:ge,MathPointUtil:ye,MathRectUtil:Ce,AnimationUtil:q,ImageUtil:me,ZObject:be,EventDispatcher:X,ChangeSupport:K,CookieUtil:we,LocalStorageUtil:Re,SessionStorageUtil:De,URLUtil:ke,BrowserUtil:Ae,DomQuery:vt,DomClass:Ee,DomStyle:Ve,DomValue:Tt,DomType:Lt,DomGeom:Et,DomUtil:Vt,DomEle:Ut,DomEventUtil:Ft,DomReadyEventUtil:Xt,DomResizeEventUtil:Kt,DomWheelEventUtil:Yt,DomClickEventUtil:Zt,AjaxUtil:en,JSONPUtil:tn},Ue.util={isArray:Ye,isString:Ze,isBoolean:R,isObject:Qe,isFunction:et,isNumber:tt,mergeArray:nt,eachArray:rt,filterArray:it,findArray:at,removeArrayItem:k,toArrayMap:A,mergeObject:lt,deepMergeObject:T,eachObject:ct,filterObject:L,getObjectDeepValue:ht,setObjectDeepValue:E,getObjectValues:dt,getObjectDeepKVMap:S.getDeepKVMap,extendClass:_t,newClass:ut.newClass,exec:U.exec,callBatch:function(e,t,n,r,i){M(e,t,n=n||s,r=r||"_call_batch_flag",i)},callLater:function(e,t,n){return ft(e,t=null==t||t<=0?20:t,n)},cancelCallLater:function(e,t,n){return(null==t||t<=0)&&(t=20),pt.cancelCallLater(e,t,n)},callInterval:function(e,t,n,r,i){return B(e,t=null==t||t<=0?20:t,n,r,i)},cancelCallInterval:function(e,t,n){return(null==t||t<=0)&&(t=20),pt.cancelCallInterval(e,t,n)},callRAFLater:gt,callRAFInterval:yt,cancelCallRAFInterval:pt.cancelCallRAFInterval,animate:q.animate,color:{toRGB:N.toRGB,toRGBA:N.toRGBA,toHSL:N.toHSL,toHSLA:N.toHSLA,toHex:N.toHex,toName:N.toName,lighten:N.lighten,darken:N.darken,saturate:N.saturate,desaturate:N.desaturate,random:N.random,defaults:N.defaults},image:{register:me.register,get:me.get,clear:me.clearCache}},Ue.type={isArray:Ye,isString:Ze,isBoolean:R,isObject:Qe,isFunction:et,isNumber:tt},Ue.dom={query:function(e,t){return t?(t=bt(t))?bt(e,t):null:bt(e)},queryAll:function(e,t){return t?(t=bt(t))?mt(e,t):[]:mt(e)},nextElementSibling:function(e){return bt(e).nextElementSibling},previousElementSibling:function(e){return bt(e).previousElementSibling},addClass:function(e,t){var n=c.call(arguments,1);return n.unshift(bt(e)),xt.apply(null,n)},removeClass:function(e,t){var n=c.call(arguments,1);return n.unshift(bt(e)),wt.apply(null,n)},toggleClass:function(e,t,n){var r=c.call(arguments,1);return r.unshift(bt(e)),Rt.apply(null,r)},setClass:function(e,t){var n=c.call(arguments,1);return n.unshift(bt(e)),Pt.apply(null,n)},containsClass:function(e,t){return e=bt(e),Dt(e,t)},setStyle:function(e,t,n){e=bt(e),Ve.setStyles(e,t,n)},getStyle:function(e,t){return At(bt(e),Oe(t))},removeStyle:function(e,t){return St(bt(e),Oe(t))},setAttribute:function(n,e,t){if(n=bt(n),!Qe(e))return n.setAttribute(e,t);ct(e,function(e,t){n.setAttribute(e,t)})},getAttribute:function(e,t){return(e=bt(e)).getAttribute(t)},removeAttribute:function(e,t){return(e=bt(e)).removeAttribute(t)},hasAttribute:function(e,t){return(e=bt(e)).hasAttribute(t)},getAttributes:function(e){for(var t=(e=bt(e)).attributes,n={},r=t.length-1;0<=r;r--){var i=t[r];n[i.name]=i.value}return n},setValue:function(e,t){return e=bt(e),Tt.setValue(e,t)},getValue:function(e){return e=bt(e),Tt.getValue(e)},isTagType:function(e,t){return e=bt(e),Lt.isTagType(e,t.toUpperCase())},create:Ot,appendText:function(e,t){return Bt(Te(e),t)},remove:function(e){return zt(Te(e))},empty:function(e){return Mt(Te(e))},insertBefore:function(e,t){return e=Te(e),(t=Te(t)).parentNode.insertBefore(e,t),e},insertAfter:function(e,t){return e=Te(e),(t=Te(t)).parentNode.insertBefore(e,t.nextSibling),e},insertFirst:function(e,t){return e=Te(e),(t=Te(t)).insertBefore(e,t.firstChild),e},appendChild:function(e,t){return e=bt(e),(t=bt(t)).appendChild(e),e},focus:function(e,t){gt(function(){ft(function(){bt(e).focus(t)},60)})},initSelectOptions:Ut.initSelectOptions,event:{ready:Xt.addReadyListener,addEventListener:function(e,t,n,r){return qt(Le(e),t,n,r)},removeEventListener:function(e,t,n,r){return $t(Le(e),t,n,r)},on:function(e,t,n,r){return qt(Le(e),t,n,r)},off:function(e,t,n,r){return $t(Le(e),t,n,r)},onclick:function(e,t,n){return Gt(Le(e),"click",t,n)},onchange:function(e,t,n){return Gt(Le(e),"change",t,n)},onresize:function(e,t,n){return Kt.addResizeListener(Le(e),t,n)},onwheel:function(e,t,n){return Yt.addWheelListener(Le(e),t,n)},getTarget:function(e,t){return Ft.getEventTarget(e,t)}}},Ue.bom={setCookie:we.setCookie,getCookie:we.getCookie,removeCookie:we.removeCookie,setLocalStorage:Re.setItem,getLocalStorage:Re.getItem,removeLocalStorage:Re.removeItem,clearLocalStorage:Re.clear,setSessionStorage:De.setItem,getSessionStorage:De.getItem,removeSessionStorage:De.removeItem,clearSessionStorage:De.clear,getURLQuery:ke.getURLQuery,getURLHash:ke.getURLHash,browser:Ae.browser,browserVersion:Ae.version},Ue.ajax={get:en.get,post:en.post,ajax:en.ajax,setup:en.setup,jsonp:tn.jsonp},Ue.math={toRadians:he.toRadians,toDegrees:he.toDegrees,calcDistance:he.calcDistance,calcAngle:he.calcAngle,calcPointOnCircle:ye.calcPointOnCircle,calcPointOnEllipse:ye.calcPointOnEllipse,calcRotatedPoint:ye.calcRotatedPoint,calcPathLength:ve.calcPathLength,calcOffsetPointOnPath:ve.calcOffsetPointOnPath,createGrowRect:Ce.createGrowRect},Ue.Defaults=v,Ue.setDefault=Ke,Ue.getDefault=Je,Ue.ready=Xt.addReadyListener,Ue.i18n=V,Ue.ArrayMap=st,Ue.ZObject=be;var nn=s.z;Ue.noConflict=function(){return s.z===Ue&&(s.z=nn),Ue},s.z=Ue,Ke({CANVAS_2D_TEXT_NEWLINE:"\n",CANVAS_2D_TEXT_LINE_SPACING:2,CANVAS_2D_TEXT_MULTILINE_ALIGN:"center"}),L=Ot("canvas"),kt(L,"display","block");var rn=L.getContext("2d"),an=Ot("span");an.innerHTML="gM";var on={getRenderStyle:function(e){if(null==e)return{};var t={},n=e.fillStyle||e.fill||e.fill_style;n&&(t.fillStyle=n);e=e.strokeStyle||e.stroke||e.stroke_style;return e&&(t.strokeStyle=e),t},isNoneRenderStyle:function(e){return null==e.fillStyle&&null==e.strokeStyle},set2DAttribute:function(e,t,n){return on._set2DAttribute(e,t,n)},set2DAttributes:function(n,e){var r=!1;return ct(e,function(e,t){r=on._set2DAttribute(n,e,t)||r}),r},_set2DAttribute:function(e,t,n,r){return"lineDash"===t?on._setLineDash(e,n,r):e[t]!==n&&(!0===r&&e.save(),e[t]=n,!0)},_setLineDash:function(e,t,n){return!!Ye(t)&&(e.getLineDash().join(",")!==t.join(",")&&(!0===n&&e.save(),e.setLineDash(t),!0))},saveAndSet2DAttribute:function(e,t,n,r,i){n=on._set2DAttribute(e,t,n,!0);return r&&(r.apply(i,[e]),!0===n)?(e.restore(),!1):n},rotateAround:function(e,t,n,r,i){0!==t&&(e.save(),e.translate(n.x,n.y),e.rotate(de(t)),e.translate(-n.x,-n.y)),r.apply(i,[e]),0!==t&&e.restore()},saveAndSet2DAttributes:function(n,e,t,r){var i=!1;return e&&ct(e,function(e,t){i=on._set2DAttribute(n,e,t,!i)||i}),t&&(t.apply(r,[n]),!0===i)?(n.restore(),!1):i},renderPath:function(e,t,n,r){var i=t.fillStyle,a=t.strokeStyle,o=null!=i||null!=a;!0==o&&e.beginPath(),n.apply(null,[e]),!0==o&&(!0!==r&&e.closePath(),ln(e,t,function(){null!=i&&e.fill(),null!=a&&e.stroke()}))},clear:function(e){return e.width=e.width+0,e},ctxClear:function(e,t,n){return e.clearRect(0,0,t,n),e},isOpaque:function(e,t){try{for(var n=e.getImageData(t.x,t.y,t.width,t.height),r=n.data,i=0;i<n.width;i++)for(var a=0;a<n.height;a++)if(0!==r[3+4*(a*n.width+i)])return"yes"}catch(e){return"error"}return"no"}},sn=on.set2DAttribute,ln=(on.set2DAttributes,on.saveAndSet2DAttributes),cn=on.rotateAround,hn=on.renderPath,dn={_resetAlphaCanvas:function(){dn._alpha_cvs=null},_getAlphaCanvas:function(e,t){var n=dn._alpha_cvs;return null==n&&(n=Ot("canvas"),dn._alpha_cvs=n),on.clear(n),n},_getAlphaC2d:function(e,t){var n=this._getAlphaCanvas();n.width=e,n.height=t;n=n.getContext("2d");return n.restore(),n.save(),n},isDrawRectOpaque:function(e,t){var n=dn._getAlphaC2d(t.width,t.height);n.translate(-t.x,-t.y);t={x:0,y:0,width:t.width,height:t.height};e(n);t=on.isOpaque(n,t);return"error"===t&&dn._resetAlphaCanvas(),"yes"===t}},un={createRectDirectionLinearGradient:function(e,t,n){var r,i=e.x,a=e.y,o=e.width,s=e.height,l=he.calcAngle({x:i,y:a},{x:i+o,y:a+s});switch(t){case"lt_to_rb":r=l;break;case"t_to_b":r=90;break;case"rt_to_lb":r=H-l;break;case"r_to_l":r=H;break;case"rb_to_lt":r=H+l;break;case"b_to_t":r=270;break;case"lb_to_rt":r=360-l;break;default:r=0}return un.createRectLinearGradient(e,r,n)},createRectLinearGradient:function(e,t,n){var r=e.x,i=e.y,a=e.width,o=e.height,i={x:r+a/2,y:i+o/2},o=ge.calcRectLineIntersection(e,i,ye.calcPointOnCircle(i,je(a,o),t),!1),t=o[0],o=o[1];return un.createLinearGradient(t,o,n)},createLinearGradient:function(e,t,n){var r=rn.createLinearGradient(e.x,e.y,t.x,t.y);return ct(n||{},function(e,t){r.addColorStop(e,t)}),r},createRectDirectionRadialGradient:function(e,t,n){var r,i=e.x,a=e.y,o=e.width,s=e.height;switch(t){case"lt_to_rb":r={x:i,y:a};break;case"t_to_b":r={x:i+o/2,y:a};break;case"rt_to_lb":r={x:i+o,y:a};break;case"r_to_l":r={x:i+o,y:a+s/2};break;case"rb_to_lt":r={x:i+o,y:a+s};break;case"b_to_t":r={x:i+o/2,y:a+s};break;case"lb_to_rt":r={x:i,y:a+s};break;case"l_to_r":r={x:i,y:a+s/2};break;default:r={x:i+o/2,y:a+s/2}}return un.createRectRadialGradient(e,r,n)},createRectRadialGradient:function(e,t,n){var r=e.x,i=e.y,a=e.width,e=e.height,e=je(ue(t,{x:r,y:i}),ue(t,{x:r+a,y:i}),ue(t,{x:r+a,y:i+e}),ue(t,{x:r,y:i+e}));return un.createRadialGradient(t,0,t,e,n)},createRadialGradient:function(e,t,n,r,i){var a=rn.createRadialGradient(e.x,e.y,t,n.x,n.y,r);return ct(i||{},function(e,t){a.addColorStop(e,t)}),a}},_n={path:function(e,t){var n=t.length;if(!(n<1)){var r=t[0];e.moveTo(r.x,r.y);for(var i,a,o,s,l=r.seg,c=1;c<n;c++)r=t[c],null!=l?"mt"===l?e.moveTo(r.x,r.y):"qt"===l?c<n-1?(o=r.x,s=r.y,r=t[++c],e.quadraticCurveTo(o,s,r.x,r.y)):e.lineTo(r.x,r.y):"ct"===l&&(c<n-2?(i=r.x,a=r.y,o=(r=t[++c]).x,s=r.y,r=t[++c],e.bezierCurveTo(i,a,o,s,r.x,r.y)):e.lineTo(r.x,r.y)):e.lineTo(r.x,r.y),"close"===(l=r.seg)&&(l=r.next_seg,e.closePath())}},render:function(e,t,n,r){var i,a;n=on.getRenderStyle(n),!0!==r&&on.isNoneRenderStyle(n)||((i=t.length)<1||(a=n.fillStyle,hn(e,n,function(){_n.path(e,t),2<i&&null!=a&&"close"!==t[i-1].seg&&e.closePath()},!0)))}},pn=_n.path,fn={createPattern:function(e){if(e=Ze(e)?me.get(e):e)return rn.createPattern(e,"repeat")}},gn={_custom_shapes:{},register:function(e,t){gn._custom_shapes[e]=t},render:function(e,t,n,r,i,a){r=on.getRenderStyle(r),!0!==a&&on.isNoneRenderStyle(r)||hn(e,r,function(){gn.rectShape(e,t,n,i)},!0)},rectShape:function(e,t,n,r){if(gn._custom_shapes.hasOwnProperty(n))return gn._custom_shapes[n](e,t);switch(n){case"rect":gn.rect(e,t);break;case"circle":gn.circle(e,t);break;case"ellipse":gn.ellipse(e,t);break;case"roundrect":r&&r.radius,gn.roundRect(e,t,r.radius||0);break;case"triangle":gn.triangle(e,t);break;case"diamond":gn.diamond(e,t);break;case"pentagon":gn.pentagon(e,t);break;case"hexagon":gn.hexagon(e,t);break;case"star":gn.star(e,t);break;case"parallelogram":gn.parallelogram(e,t);break;case"cloud":gn.cloud(e,t)}},cloud:function(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=n+i/2,s=r+a/2,l=qe(a/40,i/60),t={x:51*l+(n=o-(i=60*l)/2),y:18*l+(r=s-(a=40*l)/2)},o={x:60*l+n,y:30*l+r},i={x:50*l+n,y:40*l+r},s=ye.calc3PointsCircleCenter(t,o,i),a=ue(s,t);e.moveTo(t.x,t.y),gn.arc(e,{x:s.x-a,y:s.y-a,width:2*a,height:2*a},_e(s,t),_e(s,i)),t={x:9*l+n,y:40*l+r},e.lineTo(t.x,t.y),o={x:0*l+n,y:30*l+r},i={x:9*l+n,y:16*l+r},s=ye.calc3PointsCircleCenter(t,o,i),a=ue(s,t),gn.arc(e,{x:s.x-a,y:s.y-a,width:2*a,height:2*a},_e(s,t),_e(s,i)),t={x:22*l+n,y:10*l+r},o={x:11*l+n,y:11*l+r},s=ye.calc3PointsCircleCenter(t,o,i),a=ue(s,t),gn.arc(e,{x:s.x-a,y:s.y-a,width:2*a,height:2*a},_e(s,i),_e(s,t)),o={x:38*l+n,y:0*l+r},i={x:51*l+n,y:18*l+r},s=ye.calc3PointsCircleCenter(t,o,i),a=ue(s,t),gn.arc(e,{x:s.x-a,y:s.y-a,width:2*a,height:2*a},_e(s,t),_e(s,i)),e.closePath()},arc:function(e,t,n,r){var i=t.x,a=t.y,o=t.width,s=t.height,t=qe(o/2,s/2);e.save(),e.translate(i+o/2,a+s/2),o!==s&&(o=o/(2*t),s=s/(2*t),e.scale(o,s)),e.arc(0,0,t,de(n),de(r),!1),e.restore()},rect:function(e,t){e.rect(t.x,t.y,t.width,t.height)},roundRect:function(e,t,n){if(n<=0)return gn.rect(e,t);var r=t.x,i=t.y,a=t.width,t=t.height;n=n<1?qe(a*n,t*n,a/2,t/2):qe(n,a/2,t/2),e.moveTo(r+n,i),e.lineTo(r+a-n,i),e.quadraticCurveTo(r+a,i,r+a,i+n),e.lineTo(r+a,i+t-n),e.quadraticCurveTo(r+a,i+t,r+a-n,i+t),e.lineTo(r+n,i+t),e.quadraticCurveTo(r,i+t,r,i+t-n),e.lineTo(r,i+n),e.quadraticCurveTo(r,i,r+n,i),e.closePath()},circle:function(e,t){var n=t.width/2,r=t.height/2,i=t.x+n,t=t.y+r,r=qe(n,r);e.moveTo(i+r,t),e.arc(i,t,r,0,2*d,!1),e.closePath()},triangle:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;pn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t},{x:n,y:r+t}]),e.closePath()},diamond:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;pn(e,[{x:n+i/2,y:r},{x:n+i,y:r+t/2},{x:n+i/2,y:r+t},{x:n,y:r+t/2}]),e.closePath()},pentagon:function(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,t=n+i/2,n=r+a/2;pn(e,[{x:t,y:r},{x:t+i/2,y:n-a/6},{x:t+i/3,y:n+a/2},{x:t-i/3,y:n+a/2},{x:t-i/2,y:n-a/6}]),e.closePath()},hexagon:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;pn(e,[{x:n+i/4,y:r},{x:n+3*i/4,y:r},{x:n+i,y:r+t/2},{x:n+3*i/4,y:r+t},{x:n+i/4,y:r+t},{x:n,y:r+t/2}]),e.closePath()},star:function(e,t){var n=t.x,r=t.y,i=t.width,a=t.height,o=n+i/2,t=r+a/2;pn(e,[{x:n+.388*i,y:r+.332*a},{x:o+0,y:t-a/2},{x:n+.611*i,y:r+.332*a},{x:o+i/2,y:t-a/6},{x:n+.693*i,y:r+.579*a},{x:o+i/3,y:t+a/2},{x:n+i/2,y:r+.733*a},{x:o-i/3,y:t+a/2},{x:n+.306*i,y:r+.579*a},{x:o-i/2,y:t-a/6}]),e.closePath()},parallelogram:function(e,t){var n=t.x,r=t.y,i=t.width,t=t.height;pn(e,[{x:n,y:r+t},{x:n+i/4,y:r},{x:n+i,y:r},{x:n+3*i/4,y:r+t}]),e.closePath()}};rn.ellipse?gn.ellipse=function(e,t){var n,r=t.x,i=t.y,a=t.width,o=a/2,s=t.height/2;o!=s?(n=r+o,i+=s,e.moveTo(r+a,i),e.ellipse(n,i,o,s,0,de(360),!1)):gn.circle(e,t)}:gn.ellipse=function(e,t){var n,r,i,a=t.x,o=t.y,s=t.width,l=t.height;s!==l?(n=a+s/2,r=o+l/2,o=s/(2*(i=qe(s/2,l/2))),l/=2*i,e.moveTo(a+s,r),e.save(),e.translate(n,r),e.scale(o,l),e.arc(0,0,i,0,2*d,!1),e.restore(),e.closePath()):gn.circle(e,t)};var yn={_fontHeightMap:{},_textSizeMap:{},_defaultRenderConfig:{h_direction:"center",v_direction:"middle",wrap_text_align:"left"},render:function(t,n,r,i,a,o){null!=n&&(n+="",a=a||"center",i=on.getRenderStyle(i),on.isNoneRenderStyle(i)||(o=lt({newline:Je("CANVAS_2D_TEXT_NEWLINE"),line_spacing:Je("CANVAS_2D_TEXT_LINE_SPACING"),align:Je("CANVAS_2D_TEXT_MULTILINE_ALIGN")},o),cn(t,0|o.rotation,r,function(){var e;-1<n.indexOf(o.newline)?yn._renderMText(t,n,r,a,i,o):(e=yn._getTextAlign(a),ln(t,yn._getTextAttr(e.textAlign,e.textBaseline,o.font,i),function(){i.fillStyle&&t.fillText(n,r.x,r.y),i.strokeStyle&&t.strokeText(n,r.x,r.y)}))})))},_renderMText:function(t,e,n,r,i,a){e+="";var o,s,l=a.font,c=a.text_size;c&&(o=c.font_height,s=c.width),null==o&&(o=yn.calcFontHeight(l)),null==s&&(s=yn.calcTextWidth(l,e));var h,d=0|a.line_spacing,u=e.split(Je("CANVAS_2D_TEXT_NEWLINE")),_=u.length,p=n.x,e=n.y,n=a.align,a=yn._getHVDirection(r),r=a.horizontal,a=a.vertical;h="top"===a?e-(_*o+d*(_-1)):"bottom"===a?e:(a=$e(_/2),_%2==0?e-(a*o+(a-1)*d+d/2):e-(a*o+o/2+a*d)),"left"===r?"left"===n?p-=s:"right"===n||(p-=s/2):"right"===r?"left"===n||(p+="right"===n?s:s/2):"left"===n?p-=s/2:"right"===n&&(p+=s/2),ln(t,yn._getTextAttr(n,"top",l,i),function(){var e=0;if(i.strokeStyle)for(e=0;e<_;e++)t.strokeText(u[e],p,h+(o+d)*e);if(i.fillStyle)for(e=0;e<_;e++)t.fillText(u[e],p,h+(o+d)*e)})},_getTextAttr:function(e,t,n,r){var i={};return e&&(i.textAlign=e),t&&(i.textBaseline=t),n&&(i.font=n),r.fillStyle&&(i.fillStyle=r.fillStyle),r.strokeStyle&&(i.strokeStyle=r.strokeStyle),i},calcFontHeight:function(e){var t;return yn._fontHeightMap.hasOwnProperty(e)?t=yn._fontHeightMap[e]:(t=yn._calcFontHeight(e),yn._fontHeightMap[e]=t),t},calcTextSize:function(e,t,n){var r=[e,t+="",n].join("$");if(yn._textSizeMap.hasOwnProperty(r))return yn._textSizeMap[r];var i=yn.calcFontHeight(e),a=Je("CANVAS_2D_TEXT_NEWLINE");n=!0==(-1!==t.indexOf(a))?i*(a=t.split(a).length)+(a-1)*(n=0<=n?+n:Je("CANVAS_2D_TEXT_LINE_SPACING")):i;i={width:yn.calcTextWidth(e,t),height:n,font_height:i};return yn._textSizeMap[r]=i},calcTextWidth:function(e,t){if(null==t)return 0;var n=0,r=Je("CANVAS_2D_TEXT_NEWLINE"),i=-1!==t.indexOf(r);return sn(rn,"font",e),!0==i?t.split(r).forEach(function(e){n=je(n,rn.measureText(e).width)}):n=rn.measureText(t).width,n},getSystemFont:function(){if(null!=yn._systemFont)return yn._systemFont;if(He.body){var e=s.getComputedStyle(He.body,null);if(e){var t=e.font;if(t=t||e["font-style"]+" "+e["font-variant"]+" "+e["font-weight"]+" "+e["font-size"]+"/"+e["line-height"]+" "+e["font-family"])return yn._systemFont=t}}return"10px sans-serif"},_calcFontHeight:function(e){kt(an,"font",e),He.body.appendChild(an);e=an.offsetHeight;return He.body.removeChild(an),e},_getTextAlign:function(e){var t=e.startsWith("left")?"right":e.startsWith("right")?"left":"center",e=e.endsWith("top")?"bottom":e.endsWith("bottom")?"top":"middle";return{textAlign:t,textBaseline:e}},_getHVDirection:function(e){var t=e.startsWith("left")?"left":e.startsWith("right")?"right":"center",e=e.endsWith("top")?"top":e.endsWith("bottom")?"bottom":"middle";return{horizontal:t,vertical:e}}};lt(Ue.$,{canvas:{C2DUtil:on,C2DTextUtil:yn,C2DPathUtil:_n,C2DRectShapeUtil:gn,C2DGradientUtil:un,C2DPatternUtil:fn,C2DAlphaUtil:dn}}),Ue.canvas2d={clear:function(e){on.clear(bt(e))},renderText:yn.render,renderShape:gn.render,registerShape:gn.register,path:pn,renderPath:_n.render};var vn={isIModel:function(e){return!(null==e||!e.__toTypeString_Model_$)&&e.__toTypeString_Model_$()===m},_isIModelType:function(e,t,n){if(vn.isIModel(e)){t=e["__toTypeString_"+t+"_$"];if(t)return t.apply(e)===n}return!1},isData:function(e){return vn._isIModelType(e,"Data",b)},isView:function(e){return vn._isIModelType(e,"View",w)},isProvider:function(e){return vn._isIModelType(e,"Provider",x)}},Cn=vn.isData,q=vn.isView,Re=vn.isProvider,mn={isParentSettable:function(e,t){return e!==t&&!mn.isDescendantOf(t,e)},getDataRoot:function(e){for(var t=e.getProperty("parent");t;)t=(e=t).getProperty("parent");return e},isDescendantOf:function(e,t){for(var n=e.getProperty("parent");n;){if(t===n)return!0;n=n.getProperty("parent")}return!1},getAncestorArray:function(e,t){for(var n=[],r=e.getProperty("parent");r;){if(n.push(r),t===r)return n;r=r.getProperty("parent")}return n},getAddedDescendantArray:function(e,t){var n=[];return mn._getAddedDescendantArray(n,e,t),n},_getAddedDescendantArray:function(t,n,e){e=mn.getAddedChildren(n,e);0<e.length&&(nt(t,e),e.forEach(function(e){mn._getAddedDescendantArray(t,n,e)}))},getAddedChildren:function(e,t){return it(t.getChildren(!1),e.contains,e)},getAddedSiblingArray:function(e,t){t=t.getProperty("parent");return t?it(t.getChildren(!1),e.contains,e):e.toRootArray(!1)},isAncestorAdded:function(t,e){e=mn.getAncestorArray(e);if(0===e.length)return!0;var n=!0;return e.forEach(function(e){t.contains(e)||(n=!1)}),n}},bn={parse:function(e,t,n,r){n=bn.parseToObjectArray(e,t,n);return xn.parse(n,r)},parseToObjectArray:function(e,t,n){e=!0===t?bn._parseLevelHTMLData(e):bn._parseListHTMLData(e);return et(n)&&e.forEach(function(e){bn._convertItemAttr(e,n)}),e},_convertItemAttr:function(n,r){ct(n,function(e,t){n[e]=r(e,t)});var e=n.children;e&&e.forEach(function(e){bn._convertItemAttr(e,r)})},parseAttributes:function(e,t){for(var n=e.attributes,r=n.length,i=0;i<r;i++){var a=n[i],o=a.nodeName;"style"!==o&&"class"!==o&&(t[o]=a.nodeValue)}return t},_parseListHTMLData:function(e){for(var t=[],n=e.children,r=n.length,i=0;i<r;i++){var a=n[i],o={tag:a.tagName};bn.parseAttributes(a,o),bn.parseTemplate(a,o),"text"===o.content_type?bn._parseTextContent(a,o):bn._parseElementContent(a,o),t.push(o)}return t},parseTemplate:function(e,t){e=Ct("zw-template",e);return e&&(t.template=bn._htmlDecode(e.innerHTML),zt(e)),e},_htmlDecode:function(e){return n(e).replace(/&amp;/g,"&").replace(/&quot;/g,'"').replace(/&lt;/g,"<").replace(/&gt;/g,">")},_getChildren:function(e){var t=e.children;return 1===t.length&&(e=t[0],(Lt.isTagType(e,"UL")||Lt.isTagType(e,"OL"))&&(t=e.children)),t},_parseLevelHTMLData:function(e){for(var t=[],n=bn._getChildren(e),r=n.length,i=0;i<r;i++){var a=n[i],o={tag:a.tagName};bn.parseAttributes(a,o),bn.parseTemplate(a,o),bn._parseElementChildren(a,o),t.push(o)}return t},_parseElementChildren:function(e,t){var n=bn._getChildren(e),r=n.length;if(0===r)bn._parseTextContent(e,t);else{for(var i=[],a=0;a<r;a++){var o=n[a],s={tag:o.tagName};bn.parseAttributes(o,s),bn.parseTemplate(o,s),bn._parseElementChildren(o,s),i.push(s)}t.children=i}},_parseTextContent:function(e,t,n){var r=e.textContent.trim();return r&&(t.hasOwnProperty("content")||(t.content=e.innerHTML),t.hasOwnProperty("name")||(t.name=r)),t},_parseElementContent:function(e,t){var n,r=e.innerHTML,i=r.trim();i&&(t.hasOwnProperty("content")||(0<(e=nt([],e.children)).length?(n=Ot("div","element_content"),rt(e,function(e){n.appendChild(e)}),t.content={type:"element",content:n}):t.content=r),t.hasOwnProperty("name")||(t.name=i))}},xn={parse:function(e,t,n){var r=(t=lt({clazz:"clazz",parent:"parent",children:"children",link_from:"link_from",link_to:"link_to"},t)).clazz,i=t.parent,a=t.children,o=t.link_from,s=t.link_to,l=t.id,c=[r,i,a,o,s],h="_z_"+r,d="_z_"+i,u="_z_"+a,_=[];e.forEach(function(e){Cn(e)?_.push(e):Qe(e)?xn._createItemData(xn._replaceKeyword(e,c,a),_,h,u):Ze(e)&&xn._createItemData({name:e},_,h,u)});var p={},f=n?nt([],n,_):_;return l?f.forEach(function(e){e.hasProperty(l)&&(p[e.getProperty(l)]=e)}):["name","id"].forEach(function(t){f.forEach(function(e){e.hasProperty(t)&&(p[e.getProperty(t)]=e)})}),_.forEach(function(e){var t=e.getProperty(d);!t||(t=Cn(t)?t:p[t])&&e.set("parent",t)}),c=["_z_"+r,"_z_"+i,"_z_"+a,"_z_"+o,"_z_"+s],_.forEach(function(e){c.forEach(e.removeProperty,e)}),_},_replaceKeyword:function(e,t,n){var r={},i={};ct(e,function(e,t){Cn(t)?r[e]=t:i[e]=t});var a,o=T({},i),s=(o=lt(o,r))[n];return Ye(s)&&(a=[],s.forEach(function(e){Qe(e)?a.push(xn._replaceKeyword(e,t,n)):Ze(e)&&a.push({name:e})}),o[n]=a),t.forEach(function(e){o.hasOwnProperty(e)&&(o["_z_"+e]=o[e],delete o[e])}),o._$z_data=e,o},_createItemData:function(e,t,n,r,i){var a=e[n]||Rn,o=ut.createInstance(a,[e]);i&&o.set("parent",i),t.push(o);e=e[r];Ye(e)&&e.forEach(function(e){xn._createItemData(e,t,n,r,o)})}},wn=(De={getSingleObjectArg:function(e,t){if(1===e.length){e=e[0];if(Qe(e))return e[t]}}}).getSingleObjectArg,Pn=function(){Pn.superClass.constructor.apply(this,arguments)};_t(Pn,K,{__toTypeString_Model_$:function(){return m}});var Rn=function(e){if(!(this instanceof Rn))return ut.createInstance(Rn,arguments);this._childArrayMap=new st,Rn.superClass.constructor.apply(this,arguments)};_t(Rn,Pn,{___zsg:["parent"],___zdefaults_:{parent:p,name:p,icon:p},__toTypeString_Data_$:function(){return b},isPropertyValid:function(e,t,n){if("parent"===e){if(!0===this.__pcrChanging)return!1;if(t){if(!Cn(t))return!1;if(!mn.isParentSettable(this,t))return!1}}return Rn.superClass.isPropertyValid.apply(this,arguments)},beforeSetProperty:function(e,t,n){"parent"===e&&(this.__pcrChanging=!0,n&&n.removeChild(this)),Rn.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"parent"===e&&(t&&t.addChild(this),this.__pcrChanging=!1),Rn.superClass.afterSetProperty.apply(this,arguments)},addChild:function(e){!0!==this.__pcrChanging&&Cn(e)&&(this.isParentOf(e)||mn.isParentSettable(e,this)&&(this.__pcrChanging=!0,this._childArrayMap.add(e.id(),e),e.setProperty("parent",this),this.__pcrChanging=!1,this.dispatchChangeEvent("children",e,p)))},removeChild:function(e){!0!==this.__pcrChanging&&Cn(e)&&this.isParentOf(e)&&(this.__pcrChanging=!0,this._childArrayMap.remove(e.id()),e.removeProperty("parent"),this.__pcrChanging=!1,this.dispatchChangeEvent("children",null,e))},clearChildren:function(){this.__pcrChanging=!0;var e=this._childArrayMap.toArray();e.forEach(function(e){e.removeProperty("parent")}),this._childArrayMap.clear(),this.__pcrChanging=!1,this.dispatchChangeEvent("children",this._childArrayMap.toArray(),e)},getChildren:function(e){return this._childArrayMap.toArray(e)},isParentOf:function(e){return this._childArrayMap.has(e.id())},hasChildren:function(){return 0<this._childArrayMap.size()},eachChildren:function(e,t){this._childArrayMap.eachArray(e,t)},clone:function(n,e){var t=this.getProperties(!1),r={};return et(n)?ct(t,function(e,t){!1!==n(e,t)&&(r[e]=t)}):Qe(n)?ct(t,function(e,t){!1!==n[e]&&(r[e]=t)}):r=lt(r,t),ut.createInstance(this.constructor,[lt(r,e)])},_getAttachedDataArray:function(){return this._childArrayMap.toArray(!1)}});var Dn=function(){var e,t;this._dataArrayMap=new st,e=Ye(arguments[0])?(t=arguments[0],c.call(arguments,1)):arguments,Dn.superClass.constructor.apply(this,e),t&&t.forEach(this.add,this)};_t(Dn,Pn,{__toTypeString_Provider_$:function(){return x},add:function(e,n){var t=arguments.length;Ye(e)?1<t?e.forEach(function(e,t){this.add(e,n+t)},this):e.forEach(function(e){this.add(e)},this):(Cn(e)||U.throwError("Only z.Data instance is allowed"),!0!==this.isAddable(e)||this.contains(e)||(1<t?(this._dataArrayMap.add(e.id(),e,n),this._onAdd(e,n)):(this._dataArrayMap.add(e.id(),e),this._onAdd(e)),this.dispatchProviderChangeEvent("add",e)))},_onAdd:function(e){},isAddable:function(e){return!0},remove:function(e){this.contains(e)&&(this._dataArrayMap.remove(e.id()),this._onRemove(e),this.dispatchProviderChangeEvent("remove",e))},_onRemove:function(e){},clear:function(){var e;0<this._dataArrayMap.size()&&(e=this._dataArrayMap.toArray(),this._dataArrayMap.clear(),this._onClear(e),this.dispatchProviderChangeEvent("clear",e))},_onClear:function(e){},contains:function(e){return this._dataArrayMap.has(e.id())},find:function(t,n){if(Qe(t))return this._dataArrayMap.findArray(function(n){var r=!0;return ct(t,function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(et(t))return this._dataArrayMap.findArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.findArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.findArray(function(e){return e.getProperty(t)===n}):p},filter:function(t,n){if(Qe(t))return this._dataArrayMap.filterArray(function(n){var r=!0;return ct(function(e,t){if(n.getProperty(e)!==t)return r=!1}),r});if(et(t))return this._dataArrayMap.filterArray.apply(this._dataArrayMap,arguments);var e=arguments.length;return 1===e?this._dataArrayMap.filterArray(function(e){return e.hasProperty(t)}):2<=e?this._dataArrayMap.filterArray(function(e){return e.getProperty(t)===n}):[]},toArray:function(e){return this._dataArrayMap.toArray(e)},size:function(){return this._dataArrayMap.size()},each:function(e,t){this._dataArrayMap.eachArray(e,t)},addProviderChangeListener:function(e,t){this.addListener("provider.change",e,t)},removeProviderChangeListener:function(e,t){this.removeListener("provider.change",e,t)},dispatchProviderChangeEvent:function(e,t,n){this.dispatchEvent("provider.change",{type:e,data:t,info:n})}});var kn=function(){this._rootArrayMap=new st,kn.superClass.constructor.apply(this,arguments)};_t(kn,Dn,{_onAdd:function(e){null==e.getProperty("parent")&&this._rootArrayMap.add(e.id(),e),e.addChangeListener(this._handleDataChange,this)},_onRemove:function(e){var t=e._getAttachedDataArray();t&&t.forEach(this.remove,this),null==e.getProperty("parent")&&this._rootArrayMap.remove(e.id()),e.removeChangeListener(this._handleDataChange,this)},_onClear:function(e){this._rootArrayMap.clear(),e.forEach(function(e){e.removeChangeListener(this._handleDataChange,this)},this)},_handleDataChange:function(e){var t,n,r;"parent"===e.property&&(t=e.source,n=e.old_value,r=e.new_value,null==n&&null!=r?this._rootArrayMap.remove(t.id()):null==r&&null!=n&&this._rootArrayMap.add(t.id(),t)),e.data=e.source,this.dispatchDataChangeEvent(e)},addDataChangeListener:function(e,t){this.addListener("provider.data.change",e,t)},removeDataChangeListener:function(e,t){this.removeListener("provider.data.change",e,t)},dispatchDataChangeEvent:function(e){this.dispatchEvent("provider.data.change",e)},toRootArray:function(e){return this._rootArrayMap.toArray(e)},hEach:function(t,n){this._rootArrayMap.eachArray(function(e){return this._hEach(e,t,n)},this)},hEachByData:function(e,t,n){e.eachChildren(function(e){if(this.contains(e))return this._hEach(e,t,n)},this)},_hEach:function(e,t,n){var r=t.apply(n,[e]);return!1!==r&&(e.eachChildren(function(e){if(this.contains(e)&&!1===(r=this._hEach(e,t,n)))return!1},this),r)},getSelectProvider:function(){return null==this._selectProvider&&(this._selectProvider=new An(this)),this._selectProvider},getCheckProvider:function(){return null==this._checkProvider&&(this._checkProvider=new An(this)),this._checkProvider},getExpandProvider:function(){return null==this._expandProvider&&(this._expandProvider=new An(this)),this._expandProvider},moveToPrevious:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.splice(n-1,0,e),this.dispatchIndexChangeEvent(e,n,n-1))},moveToNext:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.splice(r+1,0,e),this.dispatchIndexChangeEvent(e,r+1,r))},moveToFirst:function(e){var t=this._getIndexArray(e),n=t.indexOf(e);0!==n&&(t.splice(n,1),t.unshift(e),this.dispatchIndexChangeEvent(e,0,n))},moveToLast:function(e){var t=this._getIndexArray(e),n=t.length,r=t.indexOf(e);r!==n-1&&(t.splice(r,1),t.push(e),this.dispatchIndexChangeEvent(e,n-1,r))},moveTo:function(e,t){var n=this._getIndexArray(e),r=n.indexOf(e);r!==t&&(n.splice(r,1),n.splice(t,0,e),this.dispatchIndexChangeEvent(e,t,r))},_getIndexArray:function(e){e=e.getProperty("parent");return e?e.getChildren(!1):this._rootArrayMap.toArray(!1)},addIndexChangeListener:function(e,t){this.addListener("provider.index.change",e,t)},removeIndexChangeListener:function(e,t){this.removeListener("provider.index.change",e,t)},dispatchIndexChangeEvent:function(e,t,n){this.dispatchEvent("provider.index.change",{data:e,new_index:t,old_index:n})}});var An=function(e){An.superClass.constructor.apply(this),this.setProvider(e)};function Sn(e){return{_isCheck_:!0,isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_updateCheckProvider:function(){this._removeCheckProviderListener(),this._provider&&(!1!==this.getProperty("model_check")?this._checkProvider=this._provider.getCheckProvider():(this._checkProvider||(this._checkProvider=new An(this._provider)),this._checkProvider.setProvider(this._provider)),this._addCheckProviderListener())},_removeCheckProviderListener:function(){this._checkProvider&&this._checkProvider.removeProviderChangeListener(this._handleCheckProviderChange,this)},_addCheckProviderListener:function(){this._checkProvider.addProviderChangeListener(this._handleCheckProviderChange,this)},_handleCheckProviderChange:function(e){var t=e.type;"add"===t?this._onCheckAdd(e.data):"remove"===t?this._onCheckRemove(e.data):"clear"===t?this._onCheckClear(e.data):"set"===t&&this._onCheckSet(e.data),this._onCheckChange(e)},_addCheckNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)},_onCheckAdd:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},onCheckAdd:function(e,t){this.addListener("on.check.add",e,t)},_onCheckRemove:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},onCheckRemove:function(e,t){this.addListener("on.check.remove",e,t)},_onCheckClear:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckClear","on.check.clear",e,[e])},onCheckClear:function(e,t){this.addListener("on.check.clear",e,t)},_onCheckSet:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},onCheckSet:function(e,t){this.addListener("on.check.set",e,t)},_onCheckChange:function(e){this._update(),this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)},check:function(e,t){e=this._getModelData(e);if(0!==e.length)return!0===t?this.addCheck(e):this.setCheck(e)},uncheck:function(e){e=this._getModelData(e);0!==e.length&&e.forEach(function(e){this.removeCheck(e)},this)},addCheck:function(e){return this._checkProvider.add(this._filterCheckableData(e))},removeCheck:function(e){return this._checkProvider.remove.apply(this._checkProvider,arguments)},clearCheck:function(){return this._checkProvider.clear.apply(this._checkProvider,arguments)},setCheck:function(e){return this._checkProvider.set(this._filterCheckableData(e))},checkAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=it(t,this._isVisible,this)),this._checkProvider.set(this._filterCheckableData(t))},uncheckAll:function(){return this.clearCheck()},getChecked:function(e){return this._checkProvider.toArray.apply(this._checkProvider,arguments)},getLastChecked:function(){return this._checkProvider.getLast.apply(this._checkProvider,arguments)},isChecked:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},toggleCheck:function(e){this.isChecked(e)?this.removeCheck(e):this.addCheck(e)},_filterCheckableData:function(e){return Cn(e)&&(e=[e]),e=Ye(e)?e.filter(function(e){return this.isCheckable(e)&&!this.isDisabled(e)},this):e}}}function Tn(e){return{_isExpand_:!0,_isExpandable:function(e){return this.isExpandable(e)},isExpandable:function(e){return!1!==this.getDataViewProperty(e,"expandable")},_isAccordion:function(){return!0===this.getProperty("accordion")},_updateExpandProvider:function(){this._removeExpandProviderListener(),this._provider&&(!1!==this.getProperty("model_expand")?this._expandProvider=this._provider.getExpandProvider():(this._expandProvider||(this._expandProvider=new An(this._provider)),this._expandProvider.setProvider(this._provider)),this._addExpandProviderListener())},_removeExpandProviderListener:function(){this._expandProvider&&this._expandProvider.removeProviderChangeListener(this._handleExpandProviderChange,this)},_addExpandProviderListener:function(){this._expandProvider.addProviderChangeListener(this._handleExpandProviderChange,this)},_handleExpandProviderChange:function(e){var t=e.type;"add"===t?this._onExpandAdd(e.data):"remove"===t?this._onExpandRemove(e.data):"clear"===t?this._onExpandClear(e.data):"set"===t&&this._onExpandSet(e.data),this._onExpandChange(e)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!0)},_onExpandAdd:function(t){var e,n;this._addExpandNeedUpdateData(t),this._callOn("onExpand","on.expand.add",t,[t]),this._isAccordion()&&(e=this._expandProvider.toArray(),n=mn.getAncestorArray(t),e.forEach(function(e){e!==t&&n.indexOf(e)<0&&this.collapse(e)},this))},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._addExpandNeedUpdateData(e,!1),this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){e.forEach(this._addExpandNeedUpdateData,this),this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._update(),this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)},getExpanded:function(e){return this._expandProvider.toArray.apply(this._expandProvider,arguments)},expand:function(e){e=this._getModelData(e);if(0!==e.length)return this._expandProvider.add(this._filterExpandableData(e))},collapse:function(e){e=this._getModelData(e);0!==e.length&&e.forEach(function(e){return this._expandProvider.remove(e)},this)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=it(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},collapseAll:function(){return this._expandProvider.clear.apply(this._expandProvider,arguments)},isExpanded:function(e){return this._expandProvider.contains(e)},toggleExpand:function(e){this.isExpanded(e)?this.collapse(e):this.expand(e)},_filterExpandableData:function(e){return Cn(e)&&(e=[e]),e=Ye(e)?e.filter(function(e){return this._isExpandable(e)&&!this.isDisabled(e)},this):e},_isDataAncestorExpanded:function(e){e=mn.getAncestorArray(e);if(0===e.length)return!0;var t=!0;return e.forEach(function(e){this.isExpanded(e)||(t=!1)},this),t}}}function Ln(t){return{_onDataRemove:function(e){t.superClass._onDataRemove.apply(this,arguments),this._removeHover(e,!1)},_onDataClear:function(){t.superClass._onDataClear.apply(this,arguments),this._clearHover(!1)},_onModelChange:function(e){t.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._clearHover(!1)},setHoverData:function(e){this._setHoverData(e,!0)},isHover:function(e){return!!e&&this._hoverData===e},hasHover:function(){return null!=this._hoverData},_isHoverable:function(e){return this.isHoverable(e)},isHoverable:function(e){return!0===this.getDataViewProperty(e,"hoverable")},_removeHover:function(e,t){e===this._hoverData&&this._setHoverData(null,t)},_clearHover:function(e){this._setHoverData(null,e)},_setHoverData:function(e,t){this._hoverData!==e&&((t=!1!==t)&&this._hoverData&&this._onHoverChange(this._hoverData,!1),this._hoverData=e,t&&this._hoverData&&this._onHoverChange(this._hoverData,!0))},_addHoverNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)},_onHoverChange:function(e,t){this._addHoverNeedUpdateData(e),this._update(),this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])},onHoverChange:function(e,t){this.addListener("on.hover.change",e,t)}}}_t(An,Dn,{set:function(e){this.clear(),Cn(e)?this.isAddable(e)&&this._dataArrayMap.add(e.id(),e):Ye(e)&&rt(e,function(e){Cn(e)&&this.isAddable(e)&&this._dataArrayMap.add(e.id(),e)},this),0<this._dataArrayMap.size()&&this.dispatchProviderChangeEvent("set",this._dataArrayMap.toArray())},getLast:function(){var e=this._dataArrayMap.toArray(!1);return e[e.length-1]},isAddable:function(e){return!this._provider||this._provider.contains(e)},setProvider:function(e){this._provider&&this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider=e,this.clear(),e&&e.addProviderChangeListener(this._handleProviderChange,this)},_handleProviderChange:function(e){var t=e.type;"remove"===t?this._dataArrayMap.remove(e.data.id()):"clear"===t&&this._dataArrayMap.clear()}});var En=function(e,t,n){return xn.parse(e,t,n)},Ae=function(e){return{_isMovable:function(e){return this.isMovable(e)},isMovable:function(e){return!1!==this.getDataViewProperty(e,"movable")}}},Vn=function(){var e=wn(arguments,"appendTo"),t=o("div");this._root=t,this._controllerArray=[],Vn.superClass.constructor.apply(this,arguments),!0===this.getProperty("onresize")&&!1===this.hasProperty("onresize")&&Kt.addResizeListener(t,this._handleViewResize,this),this._appendToUpdate(),kt(t,"visibility","hidden"),e&&this.appendTo(e),ft(function(){St(t,"visibility")},20)};_t(Vn,Pn,lt({__toTypeString_View_$:function(){return w},appendTo:function(e){(e=bt(e)).appendChild(this.getRoot())},_appendToUpdate:function(){var e=this.getRoot();yt(function(){if(It(e))return this.update(),this._displayToResize(),!1},this)},_displayToResize:function(){var n;!0===this.getProperty("onresize")&&(n=this.getRoot(),B(function(){for(var e=n.parentNode,t=!0;e;){if("none"===At(e,"display")){t=!1;break}if((e=e.parentNode)===He)break}if(t)return this._doResizeUpdate(),!1},600,this))},afterSetProperty:function(e,t,n){Vn.superClass.afterSetProperty.apply(this,arguments),this._onViewChange(e,t,n)},_onViewChange:function(e,t,n){this._callOn("onViewChange","on.view.change",{property:e,new_value:t,old_value:n},[e,t,n]),!0!==this._doViewCSSUpdate(e,t,n)&&!0!==this._doViewOnResizeUpdate(e,t,n)&&this._update()},onViewChange:function(e,t){this.addListener("on.view.change",e,t)},offViewChange:function(e,t){this.removeListener("on.view.change",e,t)},update:function(e){!0===e?(this._update(),this._handleViewResize()):(this._doBatchUpdate(),this._doBatchResizeUpdate())},_update:function(){this._callBatch(this._doBatchUpdate,"update_cb_")},_doBatchUpdate:function(){this._doUpdate(),this._onViewUpdate()},_onViewUpdate:function(){this._callOn("onViewUpdate","on.view.update",{},[])},onViewUpdate:function(e,t){this.addListener("on.view.update",e,t)},_doUpdate:function(){},_doViewCSSUpdate:function(e,t,n){if("style"===e){var r={};return Ze(n)&&(n=Ve.parseStyle(n)),Qe(n)&&h(n).forEach(function(e){r[e]=""}),Ze(t)&&(t=Ve.parseStyle(t)),Qe(t)&&(r=lt(r,t)),Ue.dom.setStyle(this._root,r),!0}if("class"===e)return n&&wt(this._root,n),t&&xt(this._root,t),!0},_callBatch:function(e,t){M(e,{key:t,context:this})},getRoot:function(){return this._root}},{_doViewOnResizeUpdate:function(e,t,n){if("onresize"===e)return!0===n&&Kt.removeResizeListener(this._root,this._handleViewResize,this),!0===t&&Kt.addResizeListener(this._root,this._handleViewResize,this),!0},_handleViewResize:function(){this._callBatch(this._doBatchResizeUpdate,"onresize_cb_")},_doBatchResizeUpdate:function(){var e=this.getRootSize();0<e.width&&0<e.height&&this._doResizeUpdate(),this._onViewResize()},_onViewResize:function(){this._callOn("onViewResize","on.view.resize",{},[])},onViewResize:function(e,t){this.addListener("on.view.resize",e,t)},_doResizeUpdate:function(){},getRootSize:function(){return{width:this._root.clientWidth,height:this._root.clientHeight}}},{_getControllerRoot:function(){return this._root},setControllers:function(e){this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=nt([],e),this._controllerArray.forEach(function(e){e.add(this)},this),this._onControllerChange("set")},addController:function(e){this._controllerArray.push(e),e.add(this),this._onControllerChange("add")},removeController:function(e){var t=this._controllerArray.indexOf(e);0<=t&&(e.remove(),this._controllerArray.splice(t,1),this._onControllerChange("remove"))},clearController:function(){0<this._controllerArray.length&&(this._controllerArray.forEach(function(e){e.remove()}),this._controllerArray=[],this._onControllerChange("clear"))},_onControllerChange:function(e){},_onDataClick:function(e,t){this._callOn("onDataClick","on.data.click",{data:e,event:t},[e,t])},onDataClick:function(e,t){this.addListener("on.data.click",e,t)},_onDataDblClick:function(e,t){this._callOn("onDataDblClick","on.data.dblclick",{data:e,event:t},[e,t])},onDataDblClick:function(e,t){this.addListener("on.data.dblclick",e,t)}}));var On=function(){var e=wn(arguments,"data");this._dataVisibleFilterArray=[],On.superClass.constructor.apply(this,arguments),this.setProvider(new kn),e&&this.setData(e)};_t(On,Vn,lt({makeVisible:function(e){},_isDisabled:function(e){return this.isDisabled(e)},isDisabled:function(e){return!0===this.getDataViewProperty(e,"disabled")},getDataViewProperty:function(e,t,n){if(e.hasProperty(t))return e.getProperty(t);if(n=n||t,this.hasProperty(n))return this.getProperty(n);t=e.getProperty(t);return null!=t?t:this.getProperty(n)},hasDataViewProperty:function(e,t,n){return!!e.hasProperty(t)||(n=n||t,!!this.hasProperty(n))},_getDataViewPropertyWithDataPrefix:function(e,t){return this.getDataViewProperty(e,t,"data_"+t)},_getVisibleProperty:function(e,t,n,r){return!0===e.getProperty(t)||!0===this.getProperty(n||t)},_getControlProperty:function(e,t,n,r){e=e.getProperty(t),t=this.getProperty(r||t);return!0===n?!1!==t&&(!1!==e&&!1!==e):!0===e||!0===t}},{setProvider:function(e){this._provider!==e&&(vn.isProvider(e)||U.throwError("Only z.Provider instance is allowed"),this._removeProviderListener(),this._provider=e,this._addProviderListener(),this._beforeModelChange("set_provider"),this._onProviderChange(),this._onModelChange("set_provider"))},getProvider:function(){return this._provider},_onProviderChange:function(){},_removeProviderListener:function(){this._provider&&(this._provider.removeProviderChangeListener(this._handleProviderChange,this),this._provider.removeDataChangeListener(this._handleProviderDataChange,this),this._provider.removeIndexChangeListener(this._handleProviderDataIndexChange,this))},_addProviderListener:function(){this._provider.addProviderChangeListener(this._handleProviderChange,this),this._provider.addDataChangeListener(this._handleProviderDataChange,this),this._provider.addIndexChangeListener(this._handleProviderDataIndexChange,this)},_handleProviderChange:function(e){this._beforeModelChange("provider",e);var t=e.type;"add"===t?this._onDataAdd(e.data):"remove"===t?this._onDataRemove(e.data):"clear"===t&&this._onDataClear(e.data),this._onModelChange("provider",e)},_handleProviderDataChange:function(e){this._beforeModelChange("data",e),this._onDataChange(e.data,e),this._onModelChange("data",e)},_handleProviderDataIndexChange:function(e){this._beforeModelChange("index",e),this._onDataIndexChange(e.data,e),this._onModelChange("index",e)},_beforeModelChange:function(e,t){},_onModelChange:function(e,t){this._update(),this._callOn("onModelChange","on.model.change",{type:e,event:t},[e,t])},onModelChange:function(e,t){this.addListener("on.model.change",e,t)},offModelChange:function(e,t){this.removeListener("on.model.change",e,t)},_onDataAdd:function(e){this._callOn("onDataAdd","on.data.add",e,[e])},onDataAdd:function(e,t){this.addListener("on.data.add",e,t)},_onDataRemove:function(e){this._callOn("onDataRemove","on.data.remove",e,[e])},onDataRemove:function(e,t){this.addListener("on.data.remove",e,t)},_onDataClear:function(e){this._callOn("onDataClear","on.data.clear",e,[e])},onDataClear:function(e,t){this.addListener("on.data.clear",e,t)},_onDataIndexChange:function(e,t){this._callOn("onDataIndexChange","on.data.index.change",{data:e,event:t},[e,t])},onDataIndexChange:function(e,t){this.addListener("on.data.index.change",e,t)},_onDataChange:function(e,t){this._callOn("onDataChange","on.data.change",{data:e,event:t},[e,t])},onDataChange:function(e,t){this.addListener("on.data.change",e,t)},setData:function(e,t){Ye(e)||(e=[e]);var n=new kn,e=En(e);!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))}),n.add(e),this.setProvider(n)},addData:function(e,t){return Cn(e)||(Ye(e)||(e=[e]),Cn(e[0])||(e=En(e,null,this.getDataArray()))),1<arguments.length?this._provider.add(e,t):this._provider.add(e)},removeData:function(e){e=this._getModelData(e);0!==e.length&&e.forEach(function(e){this._provider.remove(e)},this)},clearData:function(){return this._provider.clear.apply(this._provider,arguments)},containsData:function(e){return!!(e=!Cn(e)?this._provider.find.apply(this._provider,arguments):e)&&this._provider.contains.apply(this._provider,arguments)},findData:function(e,t){return this._provider.find.apply(this._provider,arguments)},filterData:function(e,t){return this._provider.filter.apply(this._provider,arguments)},eachData:function(e,t){if(this._provider)return this._provider.each.apply(this._provider,arguments)},hEachData:function(e,t){if(this._provider)return this._provider.hEach.apply(this._provider,arguments)},getDataArray:function(e){return this._provider.toArray.apply(this._provider,arguments)},getRootDataArray:function(e){return this._provider.toRootArray.apply(this._provider,arguments)},getDataSize:function(){return this._provider.size.apply(this._provider,arguments)},_getModelData:function(e){var t=[];return Cn(e)?t.push(e):Ye(e)?e.forEach(function(e){Cn(e)?t.push(e):!Qe(e)||(e=this.findData(e))&&t.push(e)},this):Qe(e)&&(e=this.findData(e))&&t.push(e),t}},{_isVisible:function(e){return this._isVisible_(e)},_isVisible_:function(e){return this.containsData(e)&&this.isVisible(e)&&this._isFilterVisible(e)},isVisible:function(e){return!1!==e.getProperty("visible")},_isFilterVisible:function(t){var n=!0;return 0<this._dataVisibleFilterArray.length&&rt(this._dataVisibleFilterArray,function(e){if(!1===e(t))return n=!1}),n},addVisibleFilter:function(e){this._dataVisibleFilterArray.push(e),this._update()},removeVisibleFilter:function(e){ot(this._dataVisibleFilterArray,e),this._update()},clearVisibleFilter:function(){this._dataVisibleFilterArray.length=0,this._update()}}));var zn=function(){this._rendererArrayMap=new st,this._needUpdateDataArray=[],this._needUpdateDataADMap={},zn.superClass.constructor.apply(this,arguments)};_t(zn,On,lt({___zdefaults_:{model_select:!1,model_expand:!1,model_check:!1,make_visible_on_select:!0,selectable:!0,label_field:"name",label_visible:!0},_onViewChange:function(e,t,n){this._updateAllDataVar(),zn.superClass._onViewChange.apply(this,arguments),this._doAttachProviderUpdate(e)},_onProviderChange:function(){zn.superClass._onProviderChange.apply(this,arguments),this._updateSelectProvider(),this._updateExpandProvider(),this._updateCheckProvider()},_doAttachProviderUpdate:function(e){return"model_select"===e?(this._updateSelectProvider(),!0):"model_expand"===e?(this._updateExpandProvider(),!0):"model_check"===e?(this._updateCheckProvider(),!0):void 0},_updateSelectProvider:function(){},_updateExpandProvider:function(){},_updateCheckProvider:function(){},_updateAllDataVar:function(){this._update_all_data_=!0,this._needUpdateDataArray.length=0},_updateAllData:function(){this._updateAllDataVar(),this._update()},_updateData:function(e){this._addNeedUpdateData(e),this._update()},_onModelChange:function(e){"set_provider"===e&&(this._updateAllDataVar(),this._clearDataRendererImpl(),this._initAllDataRenderer()),zn.superClass._onModelChange.apply(this,arguments)},update:function(){this._updateAllDataVar(),zn.superClass.update.apply(this,arguments)},_doUpdate:function(e,t,n){zn.superClass._doUpdate.apply(this,arguments),!0===this._update_all_data_?this._doUpdateDataArray(this.getDataArray(!1)):this._doUpdateDataArray(this._needUpdateDataArray),this._needUpdateDataArray.length=0,this._update_all_data_=!1},_doUpdateDataArray:function(e){var n=[];e.forEach(function(e){var t=e.id(),t=this._getDataRelatedDataArray(e,!0===this._needUpdateDataADMap[t+"_$_ancestor"],!0===this._needUpdateDataADMap[t+"_$_descendant"])||[];nt([e],t).forEach(function(e){var t=n.indexOf(e);-1<t&&n.splice(t,1),n.push(e)})},this),n.forEach(this._doUpdateDataRenderer,this),this._needUpdateDataADMap={}},_addNeedUpdateData:function(e,t,n){!0!==this._update_all_data_&&(this._needUpdateDataArray.push(e),e=e.id(),this._needUpdateDataADMap[e+"_$_ancestor"]=this._needUpdateDataADMap[e+"_$_ancestor"]||!1!==t,this._needUpdateDataADMap[e+"_$_descendant"]=this._needUpdateDataADMap[e+"_$_descendant"]||!1!==n)},_getDataRelatedDataArray:function(e,t,n){},getLabel:function(e){return e.getProperty(this.getProperty("label_field"))},_onDataAdd:function(e){this._addNeedUpdateData(e),this._addDataRenderer(e),zn.superClass._onDataAdd.apply(this,arguments)},_onDataRemove:function(e){this._addNeedUpdateData(e),this._removeDataRenderer(e),zn.superClass._onDataRemove.apply(this,arguments)},_onDataClear:function(){this._updateAllDataVar(),this._clearDataRendererImpl(),zn.superClass._onDataClear.apply(this,arguments)},_onDataChange:function(e,t){this._addNeedUpdateData(e),this._updateDataRenderer(e,t),zn.superClass._onDataChange.apply(this,arguments)},_onDataIndexChange:function(e){this._addNeedUpdateData(e);var t=this._rendererArrayMap.get(e.id());t&&this._updateDataRendererImpl(e,t,!0),zn.superClass._onDataIndexChange.apply(this,arguments)}},{isSelectable:function(e){return!1!==this.getDataViewProperty(e,"selectable")},getSelectMode:function(){return this.getProperty("select_mode")},_updateSelectProvider:function(){this._removeSelectProviderListener(),this._provider&&(!1!==this.getProperty("model_select")?this._selectProvider=this._provider.getSelectProvider():(this._selectProvider||(this._selectProvider=new An(this._provider)),this._selectProvider.setProvider(this._provider)),this._addSelectProviderListener())},_removeSelectProviderListener:function(){this._selectProvider&&this._selectProvider.removeProviderChangeListener(this._handleSelectProviderChange,this)},_addSelectProviderListener:function(){this._selectProvider.addProviderChangeListener(this._handleSelectProviderChange,this)},_handleSelectProviderChange:function(e){var t=e.type;"add"===t?this._onSelectAdd(e.data):"remove"===t?this._onSelectRemove(e.data):"clear"===t?this._onSelectClear(e.data):"set"===t&&this._onSelectSet(e.data),this._onSelectChange(e)},_addSelectNeedUpdateData:function(e){this._addNeedUpdateData(e,!1,!1)},_onSelectAdd:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectAdd","on.select.add",e,[e])},onSelectAdd:function(e,t){this.addListener("on.select.add",e,t)},_onSelectRemove:function(e){this._addSelectNeedUpdateData(e),this._callOn("onSelectRemove","on.select.remove",e,[e])},onSelectRemove:function(e,t){this.addListener("on.select.remove",e,t)},_onSelectClear:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectClear","on.select.clear",e,[e])},onSelectClear:function(e,t){this.addListener("on.select.clear",e,t)},_onSelectSet:function(e){e.forEach(this._addSelectNeedUpdateData,this),this._callOn("onSelectSet","on.select.set",e,[e])},onSelectSet:function(e,t){this.addListener("on.select.set",e,t)},_onSelectChange:function(e){this._update(),this._callOn("onSelectChange","on.select.change",e,[e]),this._callBatch(this._onSelectBatchChange,"select_batch_cb_")},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(){var e=this.getSelected();this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)},select:function(e,t){e=this._getModelData(e);if(0!==e.length)return!0===t?this.addSelect(e):this.setSelect(e)},unselect:function(e){e=this._getModelData(e);0!==e.length&&e.forEach(function(e){this.removeSelect(e)},this)},addSelect:function(e){return this._selectProvider.add(this._filterSelectableData(e))},removeSelect:function(e){return this._selectProvider.remove.apply(this._selectProvider,arguments)},clearSelect:function(){return this._selectProvider.clear.apply(this._selectProvider,arguments)},setSelect:function(e){return this._selectProvider.set(this._filterSelectableData(e))},selectAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=it(t,this._isVisible,this)),this._selectProvider.set(this._filterSelectableData(t))},getSelected:function(e){return this._selectProvider.toArray.apply(this._selectProvider,arguments)},getLastSelected:function(){return this._selectProvider.getLast.apply(this._selectProvider,arguments)},isSelected:function(e){return this._selectProvider.contains.apply(this._selectProvider,arguments)},_filterSelectableData:function(e){return Cn(e)&&(e=[e]),e=Ye(e)?e.filter(function(e){return this.isSelectable(e)&&!this.isDisabled(e)},this):e}},{_doUpdateDataRenderer:function(e){e=this.getDataRenderer(e);e&&e.update()},getDataRenderProperty:function(e,t){return e.getProperty(t)},_addDataRenderer:function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},_addDataRendererImpl:function(e,t){},_removeDataRenderer:function(e){var t=this._rendererArrayMap.get(e.id());t&&(this._rendererArrayMap.remove(e.id()),this._removeDataRendererImpl(e,t),t.dispose())},_removeDataRendererImpl:function(e,t){},_clearDataRendererImpl:function(){},_updateDataRenderer:function(e,t){var n=this._rendererArrayMap.get(e.id());n&&this._updateDataRendererImpl(e,n,"parent"===t.property)},_updateDataRendererImpl:function(e,t,n){},_initAllDataRenderer:function(){this.getDataArray(!1).forEach(function(e){var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),this._addDataRendererImpl(e,t))},this)},_reorderAllDataRenderer:function(){},getDataRenderer:function(e){return this._rendererArrayMap.get(e.id())},createDataRenderer:function(e){var t=this.getDataRendererClass(e);return ut.createInstance(t,[this,e])},getDataRendererClass:function(e){}}));var Mn=function(){Mn.superClass.constructor.apply(this,arguments)};_t(Mn,zn,{___zdefaults_:{sort_compare:null},update:function(){this.getProperty("sort_compare")&&this._reorderAllDataRenderer(),Mn.superClass.update.apply(this,arguments)},_onViewChange:function(e,t,n){"sort_compare"===e&&this._reorderAllDataRenderer(),Mn.superClass._onViewChange.apply(this,arguments)},_onViewUpdate:function(){Mn.superClass._onViewUpdate.apply(this,arguments),this._updateRendererVIndex()},_updateRendererVIndex:function(){mt(".item:not(.hidden)",this.getRendererRootContainer()).forEach(function(e,t){e.setAttribute("v_index",t),e.setAttribute("v_index_oe",t%2==0?"odd":"even")})},getRendererRootContainer:function(){return this.getRoot()},getRendererContainer:function(e){return this.getRoot()},_getSortDataArray:function(e){var t=this.getProperty("sort_compare");return et(t)?e.slice().sort(t):e},_removeDataRendererImpl:function(e,t){zt(t.getRenderer())},_clearDataRendererImpl:function(){Mt(this.getRendererRootContainer())},getDataRendererElement:function(e){e=this.getDataRenderer(e);return e?e.getRenderer():null},getDataAt:function(e){e=Ft.getEventTarget(e,"[__z_did_]");if(e){var t=e.getAttribute("__z_did_");return at(this.getDataArray(!1),function(e){return e.id()===t})}return null},makeVisible:function(e){var t;!e||(t=this.getDataRendererElement(e))&&gt(function(){Vt.scrollIntoView(t,this._getScrollView())},this)},_getScrollView:function(){return this.getRoot()}}),_t(L=function(e,t){this._view=e,this._data=t,this._renderConfig={}},l,{update:function(){var e=this._isRendererVisible(this._view,this._data);this._visible!==e&&(this._visible=e,this.onVisibleChange(e)),this._renderConfig={},!0===this._visible&&(this.updateRenderConfig(this._view,this._data,this._renderConfig),this.updateRenderer(this._view,this._data,this._renderConfig))},_isRendererVisible:function(e,t){return e._isVisible(t)},onVisibleChange:function(e){},updateRenderConfig:function(e,t,n){var r;!1===e.getDataViewProperty(t,"label_visible")||null!=(r=e.getLabel(t))&&(n.label_visible=!0,n.label=r,n.label_font=e.getDataViewProperty(t,"label_font"),n.label_color=e.getDataViewProperty(t,"label_color")),n.selected=e.isSelected(t),n.disabled=e._isDisabled(t)},updateRenderer:function(e,t,n){this.updateRendererStatus()},updateRendererStatus:function(e,t,n){},getRenderConfig:function(e){return this._renderConfig[e]},getViewRenderConfig:function(e){return this._view.getProperty(e)},updateData:function(){this._view._updateData(this._data)},dispose:function(){}});var Bn=function(){Bn.superClass.constructor.apply(this,arguments),kt(this.getRenderer(),"display","none"),this.getRenderer().setAttribute("__z_did_",this._data.id())};function In(){this._typeMap={}}_t(Bn,L,{getRenderer:function(){return this._renderer},updateRenderConfig:function(e,t,n){Bn.superClass.updateRenderConfig.apply(this,arguments);t=e.getDataRenderProperty(t,"icon");t&&(n.icon=t)},updateRendererStatus:function(e,t,n){Bn.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"disabled",!0===this.getRenderConfig("disabled")),Rt(this._renderer,"selected",!0===this.getRenderConfig("selected"))},onVisibleChange:function(e){Rt(this._renderer,"hidden",!1===e),!1===e?(kt(this._renderer,"display","none"),Mt(this._renderer)):(kt(this._renderer,"display",""),this.reBuildRenderer())},reBuildRenderer:function(){}}),_t(In,l,{addViewListener:function(e){this._addListener(this._controllerRoot,"view",e)},removeViewListener:function(e){this._removeListener(this._controllerRoot,"view",e)},addWindowListener:function(e){this._addListener(s,"window",e)},removeWindowListener:function(e){this._removeListener(s,"window",e)},add:function(e){this._view=e,this._controllerRoot=e._getControllerRoot(),(this.getViewDefaultTypes()||[]).forEach(this.addViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this)},remove:function(){(this.getViewDefaultTypes()||[]).forEach(this.removeViewListener,this),(this.getWindowDefaultTypes()||[]).forEach(this.addWindowListener,this),this._view=null,this._controllerRoot=null,this._typeMap={}},update:function(){},getViewDefaultTypes:function(){},getWindowDefaultTypes:function(){},getView:function(){return this._view},getViewRoot:function(){return this._controllerRoot},getViewProperty:function(e){return this._view.getProperty(e)},_addListener:function(e,t,n){var r,i=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(i)||((r=this[i])?(t=function(e){r.apply(this,[e,this.getView()])},this._typeMap[i]=t,qt(e,n,t,this)):console.error(i+" is null"))},_removeListener:function(e,t,n){var r=this._getHandlerName(t,n);this._typeMap.hasOwnProperty(r)&&(t=this._typeMap[r],$t(this._controllerRoot,n,t,this),delete this._typeMap[r])},_getHandlerName:function(e,t){var n;return"window"===e?n="handle_window_"+t:"view"===e&&(n="handle_"+t),n}}),lt(Ue.$,{iview:{Data:Rn,Provider:kn,CheckInterface:Sn,ExpandInterface:Tn,HoverInterface:Ln,MoveInterface:Ae,IView:Vn,IDataView:On,IDataRendererView:zn,IDataRenderer:L,IDataElementRendererView:Mn,IDataElementRenderer:Bn,IViewController:In,ModelTypeCheck:vn,ArgsUtil:De,DataLevelUtil:mn,JSONDataParser:xn,HTMLDataParser:bn}}),Ue.Data=Rn,Ue.Provider=kn,Ue.view={isData:function(e){return Cn(e)},isView:function(e){return vn.isView(e)}},lt(Ue.type,{isData:Cn,isView:q,isProvider:Re});var Nn={drawGridLine:function(e,t){var n,r,i,a;!0!==e.getProperty("grid_line_visible")||(n=e.getProperty("grid_line_stroke"))&&(a=Nn._calcLinePoints(e),r=a.line,i=a.axis,a={lineWidth:e.getProperty("grid_line_stroke_line_width"),lineDash:e.getProperty("grid_line_stroke_line_dash")},0<r.length&&ln(t,a,function(){_n.render(t,r,{stroke:n})}),0<i.length&&(a.lineWidth=e.getProperty("grid_line_axis_stroke_line_width"),ln(t,a,function(){_n.render(t,i,{stroke:n})})))},_calcLinePoints:function(e){var t=e.getRootSize(),n=e.getProperty("zoom"),r=e.getProperty("grid_line_space")*n,i=t.width*ee,a=t.height*ee,o=$e(a/r)+2,s=$e(i/r)+2,l=e.getProperty("translate_x"),c=e.getProperty("translate_y"),h=Ge($e(c/r))+1,d=Ge($e(l/r))+1,e=[],u=[];if(0<=c&&c<=a&&(e.push({x:0,y:c}),e.push({x:i,y:c,seg:"mt"})),0<=l&&l<=i&&(e.push({x:l,y:0}),e.push({x:l,y:a,seg:"mt"})),0<c)for(var _=1;_<h;_++){var p=c-r*_;0<=p&&(u.push({x:0,y:p}),u.push({x:i,y:p,seg:"mt"}))}else o+=h;for(var f=1;f<o;f++){var g=c+r*f;g<=a&&(u.push({x:0,y:g}),u.push({x:i,y:g,seg:"mt"}))}if(0<l)for(var y=1;y<d;y++){var v=l-r*y;0<=v&&(u.push({x:v,y:0}),u.push({x:v,y:a,seg:"mt"}))}else s+=d;for(var C=1;C<s;C++){var m=l+r*C;m<=i&&(u.push({x:m,y:0}),u.push({x:m,y:a,seg:"mt"}))}return{axis:e,line:u}}},Un=function(e){return Qe(e)&&e.hasOwnProperty("x")&&e.hasOwnProperty("y")},Hn=function(){Hn.superClass.constructor.apply(this,arguments)};_t(Hn,In,{getViewDefaultTypes:function(){return["mousemove","mouseleave"]},handle_mousemove:function(e,t){if(!0===t.getProperty("hoverable")){e=t.getDataAt(e,!0);if(e&&!t._isDisabled(e)&&t._isHoverable(e))return t.setHoverData(e),void(!0===t.getProperty("select_on_hover")&&t.isSelectable(e)&&(t.isSelected(e)||t.setSelect(e)));t.setHoverData(null)}},handle_mouseleave:function(e,t){t.setHoverData(null)}});var Wn=function(){Wn.superClass.constructor.apply(this,arguments)};_t(Wn,L,{updateRenderConfig:function(e,t,n){Wn.superClass.updateRenderConfig.apply(this,arguments),this.updateHoverConfig(e,t,n)},updateHoverConfig:function(e,t,n){var r=e.isHover(t);!0===(n.hover=r)&&(n.hover_style=e.getDataViewProperty(t,"hover_style"))},draw:function(e){!0===this._visible&&this._doDraw(e)},_doDraw:function(e,t){!1!==this._doCustomDraw(e,t)&&this.doDraw(e,t)},_doCustomDraw:function(e,t){var n=this._data.draw;return!n||!1!==n.apply(this._data,[e,this._data,this._view,t,this])},doDraw:function(e,t){},_hitsDraw:function(e,t){return this._doDraw(e,t)},hits:function(e,t){var n=0|this.getViewRenderConfig("hit_padding"),n={x:e.x-n,y:e.y-n,width:2*n,height:2*n},r=this;return dn.isDrawRectOpaque(function(e){r._hitsDraw(e,t)},n)},contained:function(e,t){t=this.getBounds(t);return!!t&&Ce.containsRect(e,t)},getBounds:function(e){}});var Fn=function(){this._initCanvasView(),Fn.superClass.constructor.apply(this,arguments);var e=this.getRoot();kt(e,"width","100%"),kt(e,"height","100%"),kt(e,"overflow","hidden"),kt(e,"position","relative"),this._appendCanvas(this._dataCanvas),this.addController(new Hn)};_t(Fn,zn,lt({___zdefaults_:{onresize:!0,hoverable:!1,select_on_hover:!1,translate_x:0,translate_y:0,zoom:1,zoom_factor:1.05,max_zoom:20,min_zoom:.2,grid_line_visible:!1,grid_line_space:50,grid_line_stroke:"#e6e6e6",grid_line_stroke_line_width:.6,grid_line_axis_stroke_line_width:1.2},_initCanvasView:function(){this._canvasArray=[],this._dataCanvas=Ot("canvas"),this._dataC2d=this._dataCanvas.getContext("2d")},_doUpdate:function(){Fn.superClass._doUpdate.apply(this,arguments),this.draw()},_doResizeUpdate:function(){Fn.superClass._doResizeUpdate.apply(this,arguments),this._resizeCanvas(),this.draw()},_resizeCanvas:function(){var e=this.getRootSize(),t=e.width,n=e.height,r=t*ee,i=n*ee;this._canvasArray.forEach(function(e){kt(e,"width",t+"px"),kt(e,"height",n+"px"),e.setAttribute("width",r),e.setAttribute("height",i)},this)},_appendCanvas:function(e){kt(e,"position","absolute"),kt(e,"left","0"),kt(e,"top","0"),this._canvasArray.push(e),this.getRoot().appendChild(e)},_removeCanvas:function(e){ot(this._canvasArray,e),zt(e)}},{getDataAt:function(e,t){var n=this.getTransformedPoint(e);return null==n?null:at(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAt:function(e,t){var n=this.getTransformedPoint(e);return null==n?null:it(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.hits(n,t))return!0},this)},getDataArrayAtRect:function(e){if(null==e)return[];var t=this.getTransformedRect(e);return it(this._getDrawDataReverseArray(),function(e){e=this.getDataRenderer(e);if(e&&e.contained(t,!0))return!0},this)}},{draw:function(){var e=this._dataC2d;on.ctxClear(e,this._dataCanvas.width,this._dataCanvas.height),this._improveDrawPerf(),e.save();var t=ee;1!==t&&e.scale(t,t),Nn.drawGridLine(this,e);var n=this.getProperty("translate_x")*t,r=this.getProperty("translate_y")*t,t=this.get("zoom")*t;0==n&&0==r&&1==t||e.setTransform(t,0,0,t,n,r),this._drawData(e),e.restore()},_improveDrawPerf:function(){var e=this._dataC2d,t=this.getProperty("label_font")||yn.getSystemFont();e.font!==t&&(e.font=t),e.textAlign="center",e.textBaseline="middle"},_drawData:function(t){var e=this.getDrawDataArray(this.getDataArray(!1));e.forEach(function(e){this._rendererDraw(t,e)},this),this._draw_data_reverse_array=(e||[]).reverse()},_rendererDraw:function(e,t){t=this.getDataRenderer(t);t&&t.draw(e)},getDrawDataArray:function(e){return e},_getDrawDataReverseArray:function(){return this._draw_data_reverse_array||[]}},{resetTransform:function(){this.set({zoom:1,translate_x:0,translate_y:0})},zoomIn:function(e){var t=this.getProperty("zoom")*this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this.zoomByPoint(t,{x:0,y:0})},zoomOut:function(e){var t=this.getProperty("zoom")/this.getProperty("zoom_factor");!1!==e?this._zoomCenter(t):this._zoomByPoint(t,{x:0,y:0})},zoomCenter:function(e){this._zoomCenter(e)},zoomByPoint:function(e,t){this._zoomByPoint(e,t)},translate:function(e,t){this.setProperty("translate_x",e),this.setProperty("translate_y",t)},_zoomCenter:function(e){var t=this.getRootSize(),n=t.width/2,t=t.height/2;this._zoomByPoint(e,{x:n,y:t})},_zoomByPoint:function(e,t){t=t||{x:0,y:0},e=this._getZoom(e);var n,r=this.getProperty("zoom");e!==r&&(this.set("zoom",e),n=t.x,t=t.y,r=e/r,this.translate(n-(n-this.getProperty("translate_x"))*r,t-(t-this.getProperty("translate_y"))*r))},_getZoom:function(e){var t=this.get("min_zoom"),n=this.get("max_zoom");return e<t?t:n<e?n:e},getTransformedPoint:function(e){var t;return Un(e)?t=e:Ft.isPointerEvent(e)&&(t=this.getEventRelativePoint(e)),this._getTransformedPoint(t)},getTransformedRect:function(e){var t=this._getTransformedPoint({x:e.x,y:e.y}),e=this._getTransformedPoint({x:e.x+e.width,y:e.y+e.height});return{x:t.x,y:t.y,width:e.x-t.x,height:e.y-t.y}},getEventRelativePoint:function(e){var t=Et.getEventWindowOffset(e),e=Et.getElementWindowOffset(this.getRoot());return{x:t.x-e.x,y:t.y-e.y}},getDataWindowBounds:function(e,t){return this._getDataRelativeBounds(e,t,Et.getElementWindowOffset(this.getRoot()))},getDataPageBounds:function(e,t){return this._getDataRelativeBounds(e,t,Et.getElementPageOffset(this.getRoot()))},_getDataRelativeBounds:function(e,t,n){e=e.getBounds(this,t);if(e){t=this._getRelativePoint({x:e.x,y:e.y}),e=this._getRelativePoint({x:e.x+e.width,y:e.y+e.height});return n=n||{x:0,y:0},{x:t.x+n.x,y:t.y+n.y,width:e.x-t.x,height:e.y-t.y}}return null},_getTransformedPoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:(e.x-this.getProperty("translate_x"))/t,y:(e.y-this.getProperty("translate_y"))/t}},_getRelativePoint:function(e){if(null==e)return null;var t=this.get("zoom");return{x:e.x*t+this.getProperty("translate_x"),y:e.y*t+this.getProperty("translate_y")}}},Ae(),{_initControllerCanvas:function(){this._controllerCanvas=Ot("canvas"),this._controllerC2d=this._controllerCanvas.getContext("2d"),this._controllerDrawArray=[],this._appendCanvas(this._controllerCanvas)},addControllerDraw:function(e,t){this._controllerDrawArray.push({draw:e,context:t}),this.updateControllerCanvas()},removeControllerDraw:function(t,n){k(this._controllerDrawArray,function(e){return e.draw===t&&e.context===n}),this.updateControllerCanvas()},updateControllerCanvas:function(){this._drawControllerCanvas()},_drawControllerCanvas:function(){on.clear(this._controllerCanvas);var t=this._controllerC2d;t.save(),1!==ee&&t.scale(ee,ee),this._controllerDrawArray.forEach(function(e){e.draw.apply(e.context,[t])}),t.restore()}},Ln(Fn))),lt(Ue.$,{cvs_view:{IDataCanvasRendererView:Fn,IDataCanvasRenderer:Wn}}),function(s){function e(e){return lt({checkbox_visible:!1,checkbox_unchecked_icon_template:f.checkbox_unchecked,checkbox_checked_icon_template:f.checkbox_checked,checkbox_indeterminate_icon_template:f.checkbox_indeterminate,three_states_check:!0,check_on_click:!1},e)}function t(e){return lt({expand_icon_visible:!0,expand_collapsed_icon_template:f.expand_collapsed,expand_expanded_icon_template:f.expand_expanded,expand_on_click:!1,expand_on_dbl_click:!1,accordion:!1},e)}function n(e){return lt({sortable:!1,sort_mode:"single",multiple_sort_key:"ctrl",sort_orders:["asc","desc",null],sort_asc_icon_template:f.sort_asc,sort_desc_icon_template:f.sort_desc},e)}function r(e){return lt({minimize_icon_template:p,minimize_width:20,minimize_label:"..."},e)}function i(e){return{setCurrentContent:function(e,t){!0===t&&g.releaseContent(this._currentContentObj),this._currentContentObj=e,this._currentContentObj&&(this.appendContent(this._currentContentObj),this._showContent(this._currentContentObj))},appendContent:function(e,t){e&&(!0===t&&g.hideContent(e),t=e.contentEle,e=this.getContentContainer(),t.parentNode!==e&&e.appendChild(t))},_showContent:function(e){e&&!1!==this.beforeShowContent(e)&&g.showContent(e)},beforeShowContent:function(e){},_hideContent:function(e){e&&!1!==this.beforeHideContent(e)&&g.hideContent(e)},beforeHideContent:function(e){}}}function a(e){return lt({_getDataContentArrayMap:function(){return this._dataContentArrayMap||(this._dataContentArrayMap=new st),this._dataContentArrayMap},isDataContentAdded:function(e){return this._getDataContentArrayMap().hasOwnProperty(e.id())},setCurrentDataContent:function(e){var n=e.id();this._getDataContentArrayMap().eachObject(function(e,t){e!==n&&this._hideContent(t)},this),this._getDataContentArrayMap().has(n)||this.addDataContent(e),e=this._getDataContentArrayMap().get(n),this.setCurrentContent(e)},addDataContent:function(e){var t=g.getContentObject(e.getProperty("content")),e=e.id();return t&&(t._id=e),this._getDataContentArrayMap().add(e,t),this.appendContent(t,!0),t},removeDataContent:function(e){var t=e.id(),e=this._getDataContentArrayMap().get(t);this._getDataContentArrayMap().remove(t),g.releaseContent(e),e===this._currentContentObj&&(this._currentContentObj=null)},clearDataContent:function(){this._currentContentObj=null,this._getDataContentArrayMap().eachArray(g.releaseContent),this._getDataContentArrayMap().clear()},getDataContent:function(e){return this._getDataContentArrayMap()[e.id()]}},i())}function o(r){return lt({_isTreeStatesCheck:function(){return!1!==this.getProperty("three_states_check")},_isCheckedByDefault:function(e){return this._checkProvider.contains.apply(this._checkProvider,arguments)},_onCheckAddByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckAdd","on.check.add",e,[e])},_onCheckRemoveByDefault:function(e){this._addCheckNeedUpdateData(e),this._callOn("onCheckRemove","on.check.remove",e,[e])},_onCheckSetByDefault:function(e){e.forEach(this._addCheckNeedUpdateData,this),this._callOn("onCheckSet","on.check.set",e,[e])},_isAllChildrenOrDataChecked:function(e){var t=mn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!0;return rt(t,function(e){if(!this._isAllChildrenOrDataChecked(e))return n=!1},this),n},_hasChildrenChecked:function(e){var e=mn.getAddedChildren(this.getProvider(),e),t=!1;return rt(e,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(t=!0)},this),t},_hasChildrenCheckedImpl:function(e){var t=mn.getAddedChildren(this.getProvider(),e);if(0===t.length)return this._isCheckedByDefault(e);var n=!1;return rt(t,function(e){if(!0===this._hasChildrenCheckedImpl(e))return!(n=!0)},this),n},_addDescendantCheck:function(e){e=mn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)||this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_addAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,rt(mn.getAncestorArray(e),function(e){return!(this._isCheckedByDefault(e)||!this._isAllChildrenOrDataChecked(e))&&void this.addCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeAncestorCheck:function(e){this._isUpdatingRelatedDataCheck=!0,rt(mn.getAncestorArray(e),function(e){return!!this._isCheckedByDefault(e)&&void this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1},_removeDescendantCheck:function(e){e=mn.getAddedDescendantArray(this.getProvider(),e);0!==e.length&&(this._isUpdatingRelatedDataCheck=!0,e.forEach(function(e){this._isCheckedByDefault(e)&&this.removeCheck(e)},this),this._isUpdatingRelatedDataCheck=!1)},_onDataAdd:function(e){r.superClass._onDataAdd.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataRemove:function(e){r.superClass._onDataRemove.apply(this,arguments),this._isTreeStatesCheck()&&this._updateParentCheck(e.getProperty("parent"))},_onDataChange:function(e,t){var n;r.superClass._onDataChange.apply(this,arguments),this._isTreeStatesCheck()&&"parent"===t.property&&(n=t.old_value,t=t.new_value,this._updateParentCheck(n),this._updateParentCheck(t))},_updateParentCheck:function(e){e&&(this._isCheckedByDefault(e)?this._isAllChildrenOrDataChecked(e)||this.removeCheck(e):this._isAllChildrenOrDataChecked(e)&&this.addCheck(e))}},Sn(),{isChecked:function(e){return this._isTreeStatesCheck()?this._isAllChildrenOrDataChecked(e):this._isCheckedByDefault(e)},_onCheckAdd:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._addAncestorCheck(e),this._addDescendantCheck(e)),this._onCheckAddByDefault(e)},_onCheckRemove:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(this._removeAncestorCheck(e),this._removeDescendantCheck(e)),this._onCheckRemoveByDefault(e)},_onCheckSet:function(e){this._isTreeStatesCheck()&&!0!==this._isUpdatingRelatedDataCheck&&(e.forEach(this._addAncestorCheck,this),e.forEach(this._addDescendantCheck,this)),this._onCheckSetByDefault(e)}})}function l(n){return{getRendererContainer:function(e){var t=e.getProperty("parent");return t?this.getDataRenderer(t).getChildrenRendererContainer(e):n.superClass.getRendererContainer.apply(this,arguments)},_initAllDataRenderer:function(){return b.initAllDataRenderer(this)},_reorderAllDataRenderer:function(){return b.reorderAllDataRenderer(this)},_addDataRenderer:function(e){if(mn.isAncestorAdded(this.getProvider(),e))return n.superClass._addDataRenderer.apply(this,arguments)},_addDataRendererImpl:function(e,t){return b.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(mn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return n.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),b.insertElementRenderer(this,e,t,!0))}else b.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){if(!0===n||this.getProperty("sort_compare"))return b.insertElementRenderer(this,e,t)},expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=it(t,this._isLevelVisible,this)),this._expandProvider.set(this._filterExpandableData(t))},_getDataLevel:function(e){var t=this.getProperty("root_data"),n=0,r=e.getProperty("parent");if(t){for(n++;r&&r!==t;)n++,r=r.getProperty("parent");if(r!==t)return-1}else for(;r;)n++,r=r.getProperty("parent");return n},hasChildrenVisible:function(e){return w.hasChildrenVisible(this,e)},_isLevelVisible:function(e){return!1!==this.isVisible(e)&&(!1!==this._isFilterVisible(e)||this._hasDescendantVisible(e))},_hasDescendantVisible:function(e){var e=mn.getAddedDescendantArray(this.getProvider(),e),t=!1;return rt(e,function(e){if(this._isLevelVisible(e))return!(t=!0)},this),t},_isVisible:function(e){return!1!==this._isLevelVisible(e)&&!(!0===this._isExpand_&&!this._isDataAncestorExpanded(e))},_getDataRelatedDataArray:function(e,t,n){t=t?mn.getAncestorArray(e):[],e=n?mn.getAddedDescendantArray(this.getProvider(),e):[];return nt(e,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||(0<=mn.getAncestorArray(t).indexOf(e)||0<=mn.getAddedDescendantArray(this.getProvider(),t).indexOf(e)))},_isBodyVisibleByRootData:function(e){var t=this.getProperty("root_data");return!(t&&0<=mn.getAncestorArray(t).indexOf(e))},_isRootData:function(e){var t=this.getProperty("root_data");return!!t&&t===e}}}Ke({WIDGET_MESSAGEBOX_CONFIRM_CLASS:"z-button primary",WIDGET_MESSAGEBOX_CONFIRM_TEXT:"OK",WIDGET_MESSAGEBOX_CANCEL_CLASS:"z-button",WIDGET_MESSAGEBOX_CANCEL_TEXT:"Cancel"});var c="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='15 18 9 12 15 6'></polyline></svg></span>",h="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='9 18 15 12 9 6'></polyline></svg></span>",d="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='18 15 12 9 6 15'></polyline></svg></span>",u="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='6 9 12 15 18 9'></polyline></svg></span>",_="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='12' y1='2' x2='12' y2='6'></line><line x1='12' y1='18' x2='12' y2='22'></line><line x1='4.93' y1='4.93' x2='7.76' y2='7.76'></line><line x1='16.24' y1='16.24' x2='19.07' y2='19.07'></line><line x1='2' y1='12' x2='6' y2='12'></line><line x1='18' y1='12' x2='22' y2='12'></line><line x1='4.93' y1='19.07' x2='7.76' y2='16.24'></line><line x1='16.24' y1='7.76' x2='19.07' y2='4.93'></line></svg></span>",p="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='5' y1='12' x2='19' y2='12'></line></svg></span>",f={remove:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><line x1='18' y1='6' x2='6' y2='18'></line><line x1='6' y1='6' x2='18' y2='18'></line></svg></span>",refresh:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='1 4 1 10 7 10'></polyline><polyline points='23 20 23 14 17 14'></polyline><path d='M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15'></path></svg></span>",expand_collapsed:h,expand_expanded:u,checkbox_unchecked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='3' width='18' height='18' rx='2' ry='2'></rect></svg></span>",checkbox_checked:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><polyline points='20 6 9 17 4 12'></polyline></svg></span>",checkbox_indeterminate:p,sort_asc:d,sort_desc:u,pagination_to_prev:c,pagination_to_next:h,pagination_to_prev_more:A="<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='1'></circle><circle cx='19' cy='12' r='1'></circle><circle cx='5' cy='12' r='1'></circle></svg></span>",pagination_to_next_more:A,tabs_scroll_to_left_arrow:c,tabs_scroll_to_right_arrow:h,tabs_scroll_to_up_arrow:d,tabs_scroll_to_down_arrow:u,notify_success:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><path d='M22 11.08V12a10 10 0 1 1-5.93-9.14'></path><polyline points='22 4 12 14.01 9 11.01'></polyline></svg></span>",notify_info:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='16' x2='12' y2='12'></line><line x1='12' y1='8' x2='12' y2='8'></line></svg></span>",notify_warning:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='12' y1='8' x2='12' y2='12'></line><line x1='12' y1='16' x2='12' y2='16'></line></svg></span>",notify_error:"<span><svg xmlns='http://www.w3.org/2000/svg' class='zw-svg-icon' width='1em' height='1em' viewBox='0 0 24 24' stroke='currentColor' stroke-width='2' fill='none' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='10'></circle><line x1='15' y1='9' x2='9' y2='15'></line><line x1='9' y1='9' x2='15' y2='15'></line></svg></span>"},g={getContentInfo:function(e){var t,n;return e?(Ze(e)?n=e.startsWith("url:")?(t="url",e.substr(4)):e.startsWith("element:")?(t="element",e.substr(8)):(t="string",e):Lt.isElement(e)?(t="element",n=e):Qe(e)&&(t=e.type,n=e.content),{type:t,content:n}):null},getContentElement:function(e){e=g.getContentInfo(e);if(e&&"element"===e.type){e=e.content;if(e)return bt(e)}return null},getLabelContent:function(e){return Qe(e)?e:{content:null==e?"":e+""}},getContentObject:function(e){var t=g.getContentInfo(e);if(t){var n,r,e=t.type,t=t.content;if(t)if("string"===e?(r=Ot("div","text-content")).innerHTML=t:"element"===e?(r=bt(t))&&(n=r._z_$_init_parentNode||r.parentNode,n={parent:r._z_$_init_parentNode=n,display:At(r,"display")}):"url"===e&&(r=g.createContentIFrame(t)),r)return{type:e,contentEle:r,contentReleaseConfig:n}}return null},createContentIFrame:function(e){var t=Ot("iframe");return t.src=e,t},releaseContent:function(e){var t,n;e&&(t=e.contentReleaseConfig,n=e.contentEle,zt(n),t&&((e=t.parent)&&e.appendChild(n),delete n._z_$_init_parentNode,kt(n,"display",t.display)))},showContent:function(e){var t;e&&(e.vislbe=!0,t=e.type,e=e.contentEle,"string"===t||"element"===t?kt(e,"display","block"):"url"===t&&(St(e,"visibility"),St(e,"opacity"),St(e,"width"),St(e,"height")))},hideContent:function(e){var t;e&&(e.vislbe=!1,t=e.type,e=e.contentEle,"string"===t||"element"===t?kt(e,"display","none"):"url"===t&&(kt(e,"visibility","hidden"),kt(e,"opacity",0),kt(e,"width",0),kt(e,"height",0)))}},y={addWidgetClass:function(e){xt(e,"z-widget"),e.setAttribute("tabindex",-1)},isEvtInRendererNode:function(e){for(var t=e.target;t&&t!==He;){if("node"===t.getAttribute("role"))return!0;t=t.parentNode}return!1},preventDefault:function(e){e.preventDefault()},findNextUsableDataByDom:function(e,t){var n=mt("[__z_did_]",e.getRendererRootContainer());if(0<n.length){if(t){var r=it(n,function(e){return e.parentNode===t.parentNode});if(r=y._findNextUsableDataByArray(e,r,t))return r}r=y._findNextUsableDataByArray(e,n,t)}return r},_findNextUsableDataByArray:function(e,t,n){var r,i=t.length;if(0<i){for(var a=-1,o=(a=n?t.indexOf(n):-1)+1;o<i;o++)if(r=y._isRenderDataUsable(e,t[o]))return r;for(var s=a-1;0<=s;s--)if(r=y._isRenderDataUsable(e,t[s]))return r}},_isRenderDataUsable:function(e,t){var n=t.getAttribute("__z_did_"),t=at(e.getDataArray(!1),function(e){return e.id()===n});if(t&&e.isVisible(t)&&!e._isDisabled(t)&&e.isSelectable(t))return t}},v=function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t))})},C=function(n){n._getSortDataArray(n.getDataArray(!1)).forEach(function(e){var t=n.getDataRenderer(e);!t||(t=t.getRenderer())&&n.getRendererContainer(e).appendChild(t)})},m=function(e,t,n){for(var r,i,a=e._getSortDataArray(e.getDataArray(!1)),o=a.indexOf(t),s=a.length,l=o+1;l<s;l++)if(r=e.getDataRenderer(a[l]),r&&(i=r.getRenderer()))return void i.parentNode.insertBefore(n.getRenderer(),i);e.getRendererContainer(t).appendChild(n.getRenderer())},b={initAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){b.appendDataRenderer(t,e)})},appendDataRenderer:function(e,t){var n=e.createDataRenderer(t);n&&(e._rendererArrayMap.add(t.id(),n),(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),b.appendDataChildrenRenderer(e,t)))},appendDataChildrenRenderer:function(t,e){e=it(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){b.appendDataRenderer(t,e)})},reorderAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){b.reAppendDataRenderer(t,e)})},reAppendDataRenderer:function(e,t){var n=e.getDataRenderer(t);!n||(n=n.getRenderer())&&(e.getRendererContainer(t).appendChild(n),b.reAppendDataChildrenRenderer(e,t))},reAppendDataChildrenRenderer:function(t,e){e=it(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){b.reAppendDataRenderer(t,e)})},insertElementRenderer:function(e,t,n,r){var i=e._getSortDataArray(mn.getAddedSiblingArray(e.getProvider(),t)),a=i.indexOf(t),a=i[a+1];a?(a=e.getDataRenderer(a).getRenderer()).parentNode.insertBefore(n.getRenderer(),a):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&b.appendDataChildrenRenderer(e,t)},removeDataRenderer:function(e,t){e.getDataRenderer(t)&&(e._removeDataRenderer(t),b.removeDataChildrenRenderer(e,t))},removeDataChildrenRenderer:function(t,e){e=it(e.getChildren(!1),t.containsData,t);0<e.length&&e.forEach(function(e){b.removeDataRenderer(t,e)})}},x={appendDataChildrenRenderer:function(n,e){e=mn.getAddedChildren(n.getProvider(),e);0<e.length&&(e=n._getSortDataArray(e)).forEach(function(e){var t=n.createDataRenderer(e);t&&(n._rendererArrayMap.add(e.id(),t),t.getRenderer()&&x.insertElementRenderer(n,e,t,!0))})},insertElementRenderer:function(e,t,n,r){var i=x._getNextData(e,t);i?(i=e.getDataRenderer(i).getRenderer()).parentNode.insertBefore(n.getRenderer(),i):e.getRendererContainer(t).appendChild(n.getRenderer()),!0===r&&x.appendDataChildrenRenderer(e,t)},_getNextData:function(e,t,n){if(!1!==n){var r=mn.getAddedChildren(e.getProvider(),t);if(0<r.length)return e._getSortDataArray(r)[0]}r=e._getSortDataArray(mn.getAddedSiblingArray(e.getProvider(),t)),r=r[r.indexOf(t)+1];return r||((t=t.getProperty("parent"))?x._getNextData(e,t,!1):void 0)},updateDataRenderer:function(t,e){var n=t.getDataRenderer(e);n&&n.getRenderer()&&(x.insertElementRenderer(t,e,n),0<(e=mn.getAddedChildren(t.getProvider(),e)).length&&(e=t._getSortDataArray(e)).forEach(function(e){x.updateDataRenderer(t,e)}))}},w={getVisibleChildren:function(t,e){return it(e.getChildren(!1),function(e){return t.containsData(e)&&t._isLevelVisible(e)})},hasChildrenVisible:function(e,t){return 0<w.getVisibleChildren(e,t).length}},P={initRenderNode:function(e){e._nodeWrapper=Ot("a","node"),e._nodeWrapper.setAttribute("role","node"),e._inWrapper=Ot("div","in"),e._nodeWrapper.appendChild(e._inWrapper),e.getRenderer().appendChild(e._nodeWrapper)},updateRenderCheckConfig:function(e,t,n,r){!0===t.getDataViewProperty(n,"checkbox_visible")&&(r.checkbox_visible=!0,r.checked=t.isChecked(n),r.checkable=t.isCheckable(n))},updateRenderLevelCheckConfig:function(e,t,n,r){!0===e.getRenderConfig("checkbox_visible")&&!0!==e.getRenderConfig("checked")&&t._isTreeStatesCheck()&&(r.indeterminate_checked=t._hasChildrenChecked(n))},updateRenderRemoveConfig:function(e,t,n,r){r.remove_icon_visible=!0===t.getDataViewProperty(n,"remove_icon_visible")},updateRenderExpandConfig:function(e,t,n,r){var i=t.hasChildrenVisible(n);(r.has_children=i)&&(r.expanded=t.isExpanded(n),r.expand_icon_visible=!1!==t.getDataViewProperty(n,"expand_icon_visible"),r.expandable=t.isExpandable(n))},updateRendererCheck:function(e,t,n,r){var i;!0===e.getRenderConfig("checkbox_visible")?((i=P._getCheckboxWrapper(e)).innerHTML=P._getCheckboxTemplate(e),e.insertToNodeWrapperFirst(i)):e._checkBoxWrapper&&zt(e._checkBoxWrapper)},_getCheckboxTemplate:function(e){return!0===e.getRenderConfig("checked")?e.getViewRenderConfig("checkbox_checked_icon_template"):!0===e.getRenderConfig("indeterminate_checked")?e.getViewRenderConfig("checkbox_indeterminate_icon_template"):e.getViewRenderConfig("checkbox_unchecked_icon_template")},_getCheckboxClass:function(e){var t=["checkbox"];return!0===e.getRenderConfig("checked")?t.push("checked"):!0===e.getRenderConfig("indeterminate_checked")?t.push("indeterminate"):t.push("unchecked"),!0===e.getRenderConfig("checkable")?t.push("checkable"):t.push("uncheckable"),t.join(" ")},_getCheckboxWrapper:function(e){return e._checkBoxWrapper||(e._checkBoxWrapper=Ot("span","checkbox"),e._checkBoxWrapper.setAttribute("__z_dop_","check")),e._checkBoxWrapper},updateRendererRemove:function(e,t,n,r){var i;!0===e.getRenderConfig("remove_icon_visible")?(i=P._getRemoveWrapper(e),e.appendToNodeWrapper(i)):e._removeWrapper&&zt(e._removeWrapper)},_getRemoveWrapper:function(e){return e._removeWrapper||(e._removeWrapper=Ot("span","remove"),e._removeWrapper.innerHTML=e.getViewRenderConfig("remove_icon_template"),e._removeWrapper.setAttribute("__z_dop_","remove")),e._removeWrapper},updateRendererExpand:function(e,t,n,r){var i;!0===e.getRenderConfig("expand_icon_visible")?((i=P._getExpandWrapper(e)).innerHTML=e._getExpandTemplate(),Pt(i,P._getExpandClass(e)),e.insertToNodeWrapperFirst(i)):e._expandWrapper&&zt(e._expandWrapper)},_getExpandTemplate:function(e){return!0===e.getRenderConfig("expanded")?e.getViewRenderConfig("expand_expanded_icon_template"):e.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(e){var t=["expand"];return!0===e.getRenderConfig("expanded")?t.push("expanded"):t.push("collapsed"),!0===e.getRenderConfig("expandable")?t.push("expandable"):t.push("unexpandable"),t.join(" ")},_getExpandWrapper:function(e){return e._expandWrapper||(e._expandWrapper=Ot("span"),e._expandWrapper.setAttribute("__z_dop_","expand")),e._expandWrapper},updateRenderIn:function(e,t,n,r){var i=e._inWrapper;Mt(i);var a=t.render;if(et(a)){if(!1===a.apply(t,[n,i,e._renderer]))return}else{t=e.getRenderConfig("template");if(t)return void(i.innerHTML=Qt(t,n.getProperties(!1)))}var o,n=e.getRenderConfig("icon");n&&((o=Ot("img")).setAttribute("src",n),i.appendChild(o)),!0===e.getRenderConfig("label_visible")&&((o=Ot("span","label")).innerHTML=e.getRenderConfig("label"),i.appendChild(o))},updateRenderAttributes:function(n,e,t,r){n._nodeAttributes&&ct(n._nodeAttributes,function(e,t){P._removeNodeWrapperAttribute(n,e,t)}),n._nodeAttributes=n.getRenderConfig("attributes"),n._nodeAttributes&&ct(n._nodeAttributes,function(e,t){P._setNodeWrapperAttribute(n,e,t)})},_removeNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?wt(e,n):e.removeAttribute(t,n)},_setNodeWrapperAttribute:function(e,t,n){e=e.getRenderer();"class"===t?xt(e,n):e.setAttribute(t,n)}},R=function(e,t,n,r){var i;e&&(t&&e?(i=function(){n&&n.apply(r),jt(e,"animationend",i),delete e._animationendListener_$,wt(e,t)},Gt(e,"animationend",i),e._animationendListener_$=i,xt(e,t)):n&&n.apply(r))},D=function(e){var t;!e||(t=e._animationendListener_$)&&(t(),delete e._animationendListener_$)},k={VIEW_ATTR_TYPE_MAP:{label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove_icon_visible:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",select_on_hover:"boolean",expand_on_click:"boolean",expand_on_dbl_click:"boolean",make_visible_on_select:"boolean",accordion:"boolean",auto_select:"boolean",three_states_check:"boolean",check_on_click:"boolean",sortable:"boolean"},VIEW_ATTR_METHOD_MAP:{on_data_click:"onDataClick",on_data_dblclick:"onDataDblClick",on_expand:"onExpand",on_collapse:"onCollapse"},VIEW_ATTR_INIT_METHOD_MAP:{init_expand_all:"expandAll"},DATA_ATTR_TYPE_MAP:{visible:"boolean",label_visible:"boolean",expand_icon_visible:"boolean",checkbox_visible:"boolean",remove:"boolean",selectable:"boolean",checkable:"boolean",expandable:"boolean",remove_icon_visible:"boolean",disabled:"boolean"},VIEWS:{"zw-pagination":{level:!1,view:"Pagination"},"zw-grid":{level:!1,view:"Grid",parse:function(e,t,n){var r,i,a,o,s=mt("tr>th",t),l=[];return 0<s.length&&(r=[],s.forEach(function(e){e=e.parentNode;r.indexOf(e)<0&&r.push(e)}),i=[],r.forEach(function(e){i=nt(i,bn.parseToObjectArray(e,!0,n))}),a=i.length,mt("tr>td",t).forEach(function(e,t){t%a==0&&(o={},bn.parseAttributes(e.parentNode,o),l.push(o));t=i[t%a];o[t.field]=e.innerHTML}),et(n)&&l.forEach(function(e){bn._convertItemAttr(e,n)}),e.setColumns(i)),l}},"zw-listview":{level:!1,view:"ListView"},"zw-tree":{level:!0,view:"Tree"},"zw-collapse":{level:!1,view:"Collapse"},"zw-carousel":{level:!1,view:"Carousel"},"zw-tabs":{level:!1,view:"Tabs"}},parse:function(r,i){r=r||{},ct(k.VIEWS,function(t,e){var n=Ue.dom.queryAll(t,i);0!==n.length&&rt(n,function(e){k.parseView(t,e,r)})})},parseView:function(e,t,n){n=n||{};var r,i,a=k.VIEWS[e],o=k.VIEW_ATTR_TYPE_MAP,s=k.DATA_ATTR_TYPE_MAP,l=function(e,t){return k._convertAttrValue(e,t,s,n)},c=k.VIEW_ATTR_METHOD_MAP,h=k.VIEW_ATTR_INIT_METHOD_MAP,d=k.parseViewArgs(t,function(e,t){return k._convertAttrValue(e,t,o,n)});d.hasOwnProperty("var_name")&&(r=d.var_name,delete d.var_name),d.hasOwnProperty("data")&&(i=n[d.data],delete d.data);var u,_,p,e=ut.createInstance(a.view,[d]);if(e)return r&&(n[r]=e),l=et(a.parse)?a.parse(e,t,l):bn.parseToObjectArray(t,!0===a.level,l),l=nt(l,i),e.addData&&(l=xn.parse(l,n.data_keyword_mapping),u=[],_=[],p=[],l.forEach(function(e){k.filterDataAttach(e,"selected",u),k.filterDataAttach(e,"checked",_),k.filterDataAttach(e,"expanded",p)}),e.addData(l),k.setViewAttachData(e,e.addSelect,u),k.setViewAttachData(e,e.addCheck,_),k.setViewAttachData(e,e.expand,p)),k.callViewInitMethod(e,d,h),k.setViewCallBackMethod(e,d,n,c),t.parentNode.insertBefore(e.getRoot(),t.nextSibling),e.update(),zt(t),e},parseViewArgs:function(e,n){var r={};return bn.parseAttributes(e,r),bn.parseTemplate(e,r),et(n)&&ct(r,function(e,t){r[e]=n(e,t)}),r},callViewInitMethod:function(r,e,i){ct(e,function(e,t){var n;i.hasOwnProperty(e)&&(n=r[i[e]],et(n)&&(r.removeProperty(e),n.apply(r,[])))})},setViewCallBackMethod:function(n,e,r,i){return ct(e,function(e,t){i.hasOwnProperty(e)&&((t=r[t])&&n.setCallBack(i[e],t,r),n.removeProperty(e))}),e},filterDataAttach:function(e,t,n){return"true"===e.getProperty(t)&&(n.push(e),e.removeProperty(t)),n},setViewAttachData:function(e,t,n){0<n.length&&t&&t.apply(e,[n])},_convertAttrValue:function(e,t,n,r){if(n.hasOwnProperty(e)){e=n[e];if("boolean"===e)return"true"===t;"app_value"===e&&(t=r[t])}return t}},A=function(e){return{_initAllDataRenderer:function(){return v(this)},_reorderAllDataRenderer:function(){return C(this)},_addDataRendererImpl:function(e,t){return m(this,e,t)},_updateDataRendererImpl:function(e,t,n){if(this.getProperty("sort_compare"))return m(this,e,t)}}},S=function(){S.superClass.constructor.apply(this,arguments),y.addWidgetClass(this.getRoot()),this.addController(new L),this.addController(new E)};_t(S,Mn,lt({___zdefaults_:{template:null,remove_icon_visible:!1,remove_icon_template:f.remove,auto_select:!1,select_on_hover:!1,hoverable:!1},_onViewChange:function(e,t,n){S.superClass._onViewChange.apply(this,arguments),"auto_select"===e&&this._selectProvider&&this._doViewAutoSelectUpdate()},_doViewAutoSelectUpdate:function(){var e;!this._needAutoSelect()||(e=y.findNextUsableDataByDom(this))&&this.setSelect(e)},beforeRemove:function(e){},_onDataAdd:function(e){S.superClass._onDataAdd.apply(this,arguments),this._needAutoSelect()&&this._isDataAutoSelectable(e)&&this.setSelect(e)},_needAutoSelect:function(e){return 0<arguments.length?this.getLastSelected()===e&&!1!==this.getProperty("auto_select"):!this.getLastSelected()&&!1!==this.getProperty("auto_select")},_isDataAutoSelectable:function(e){return null!=e&&this.isVisible(e)&&!this._isDisabled(e)&&this.isSelectable(e)}},Ln(S),{_onDataRemove:function(e){var t,n;this._needAutoSelect(e)&&((t=this.getDataRenderer(e))&&(n=t.getRenderer()),n=y.findNextUsableDataByDom(this,n)),S.superClass._onDataRemove.apply(this,arguments),n&&this.setSelect(n),this._removeHover(e,!1)},_onModelChange:function(e){S.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&(!this._needAutoSelect()||(e=y.findNextUsableDataByDom(this))&&this.setSelect(e),this._clearHover(!1))}}));var T=function(){T.superClass.constructor.apply(this,arguments)};_t(T,Bn,{getChildrenRendererContainer:function(e){return this._childrenRendererContainer},updateRenderConfig:function(e,t,n){T.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"template"),n.selectable=e.isSelectable(t),n.hover=e.isHover(t)},updateRendererStatus:function(e,t,n){T.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"unselectable",!0!==this.getRenderConfig("selectable")),Rt(this._renderer,"hover",!0===this.getRenderConfig("hover"))}});var L=function(){L.superClass.constructor.apply(this,arguments)};_t(L,In,{getViewDefaultTypes:function(){return["click","dblclick"]},handle_click:function(e,t){var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this.isHitRemove(e)?this.handleRemove(n,e):this.isHitCheckBox(e)?this.handleCheck(n,e):this.isHitExpand(e)?this.handleExpand(n,e):(this._handleClickAction(n,e),t._onDataClick(n,e))))},_handleClickAction:function(e,t){var n=this.getView();return!(!n._isExpandable||!n._isExpandable(e)||!0!==n.getProperty("expand_on_click")||!0!==this.handleExpand(e,t))||(!!(n.isCheckable&&(!0===n.getDataViewProperty(e,"checkbox_visible")||n.hasCheckColumn&&!0===n.hasCheckColumn())&&n.isCheckable(e)&&!0===n.getProperty("check_on_click")&&!0===this.handleCheck(e,t))||void this.handleSelect(e,t))},handleRemove:function(e,t){var n=this.getView(),r=n.beforeRemove(e);et(r)?r(function(){n.removeData(e)}):!1!==r&&n.removeData(e)},handleSelect:function(e,t){var n=this.getView();return!!n.isSelectable(e)&&(n.isSelected(e)||n.setSelect(e),!0)},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},handleExpand:function(e,t){var n=this.getView();return!(!n.toggleExpand||!n.isExpandable(e))&&(n.toggleExpand(e),!0)},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e);n&&(t._isDisabled(n)||(this._isHitOPTarget(e)||!0!==t.getProperty("expand_on_click")&&!0===t.getProperty("expand_on_dbl_click")&&this.handleExpand(n,e),t._onDataDblClick(n,e)))},isHitCheckBox:function(e){return this._isHitOPTypeTarget(e,"check")},isHitRemove:function(e){return this._isHitOPTypeTarget(e,"remove")},isHitExpand:function(e){return this._isHitOPTypeTarget(e,"expand")},_isHitOPTarget:function(e){return null!=Ft.getEventTarget(e,"[__z_dop_]")},_isHitOPTypeTarget:function(e,t){e=Ft.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t}});var E=function(){E.superClass.constructor.apply(this,arguments)};_t(E,In,{getViewDefaultTypes:function(){return["mouseover","mouseleave"]},handle_mouseover:function(e,t){var n;!0===t.getProperty("hoverable")&&((n=t.getDataAt(e))?t._isDisabled(n)||t._isHoverable(n)&&(t.setHoverData(n),!0===t.getProperty("select_on_hover")&&t.isSelectable(n)&&(t.isSelected(n)||t.setSelect(n))):(e=Ft.getEventTarget(e,"[__z_did_]"))&&t.getRoot().contains(e)||t.setHoverData(null))},handle_mouseleave:function(e,t){!0===t.getProperty("hoverable")&&t.setHoverData(null)}});var V=function(){this._rootUL=Ot("ul","items"),V.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._rootUL)};_t(V,S,{getRendererRootContainer:function(){return this._rootUL},getRendererContainer:function(e){return this._rootUL},getDataRendererClass:function(e){return M}});var O=function(){O.superClass.constructor.apply(this,arguments)};_t(O,V,lt({___zdefaults_:e()},A(),Sn()));var z=function(){z.superClass.constructor.apply(this,arguments)};_t(z,V,lt({___zdefaults_:lt(e(),t()),_onViewChange:function(e,t,n){z.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},getDataRendererClass:function(e){return B},getDataAt:function(e){return y.isEvtInRendererNode(e)?z.superClass.getDataAt.apply(this,arguments):null},makeVisible:function(e){e&&(mn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),z.superClass.makeVisible.apply(this,arguments))}},l(z),o(z),Tn(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)?!0:t)&&!1!==this.isExpandable(e)}}));var M=function(){this._renderer=Ot("li","item"),P.initRenderNode(this),M.superClass.constructor.apply(this,arguments)};_t(M,T,{updateRenderConfig:function(e,t,n){M.superClass.updateRenderConfig.apply(this,arguments),n.attributes=e.getDataRenderProperty(t,"attributes"),P.updateRenderCheckConfig(this,e,t,n),P.updateRenderRemoveConfig(this,e,t,n)},updateRenderer:function(e,t,n){M.superClass.updateRenderer.apply(this,arguments),P.updateRendererCheck(this,e,t,n),P.updateRendererRemove(this,e,t,n),P.updateRenderIn(this,e,t,n),P.updateRenderAttributes(this,e,t,n)},updateRendererStatus:function(e,t,n){M.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Rt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});var B=function(){this._childrenRendererContainer=Ot("ul","children"),B.superClass.constructor.apply(this,arguments)};_t(B,M,{_isRendererVisible:function(e,t){var n=B.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},_isRendererBodyVisible:function(e,t){return e._isBodyVisibleByRootData(t)},updateRenderConfig:function(e,t,n){B.superClass.updateRenderConfig.apply(this,arguments),n.body_visible=this._isRendererBodyVisible(e,t),n.is_root_data=e._isRootData(t),P.updateRenderLevelCheckConfig(this,e,t,n),P.updateRenderExpandConfig(this,e,t,n)},updateRenderer:function(e,t,n){var r=this._renderer;Rt(r,"body_hidden",!1===this.getRenderConfig("body_visible")),!1===this.getRenderConfig("body_visible")?kt(this.getNodeWrapper(),"display","none"):St(this.getNodeWrapper(),"display"),Rt(r,"root_data",!0===this.getRenderConfig("is_root_data")),B.superClass.updateRenderer.apply(this,arguments),Rt(r,"leaf",!0!==this.getRenderConfig("has_children")),P.updateRendererExpand(this,e,t,n),this._updateChildrenRendererContainer()},updateRendererStatus:function(e,t,n){B.superClass.updateRendererStatus.apply(this,arguments);var r=this._renderer;Rt(r,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked")),Rt(r,"expanded",!0===this.getRenderConfig("expanded")),Rt(r,"unexpandable",!1===this.getRenderConfig("expandable"))},_getExpandTemplate:function(){return P._getExpandTemplate(this)},_updateChildrenRendererContainer:function(){var e=this._childrenRendererContainer;!0===this.getRenderConfig("has_children")?(e.parentNode||this._renderer.appendChild(e),!0===this.getRenderConfig("expanded")?St(e,"display"):kt(e,"display","none")):zt(e)}});var I=function(){this._table=Ot("table","table"),this._tableColGroup=Ot("colgroup"),this._table.appendChild(this._tableColGroup),I.superClass.constructor.apply(this,arguments),this.getRoot().appendChild(this._table)};_t(I,S,{getRendererContainer:function(e){return this._table},getColGroup:function(){return this._tableColGroup}});var N={isAscSort:function(e){return"asc"===e},getColumnNextOrder:function(e,t){e=e.getDataViewProperty(t,"sort_orders"),t=t.getProperty("sort"),t=N.getSortOrder(t),t=e.indexOf(t);return t===e.length-1?e[0]:e[t+1]},getSortOrder:function(e){return e?Qe(e)?e.order:e:null},getSortIndex:function(e){return Qe(e)?e.index+1:null},getSortedColumnArray:function(e){e=e.filter(function(e){return e.hasProperty("sort")});return e.sort(N._sortMultipleColumnArray),e},getSortCompare:function(e,t){var n,o,s=N._getSortedColumnCompareArray(e,t);return!s||0<(o=s.length)&&(n=function(e,t){for(var n=0;n<o;n++){var r,i=s[n],a=i.compare;if(0!==(r=N.isAscSort(i.order)?a(e,t):-a(e,t)))return r}return r}),n},_getSortedColumnCompareArray:function(r,e){var e=N.getSortedColumnArray(e),t=[];return e.forEach(function(n){var e=n.compare;et(e)||(e=function(e,t){e=r._getCellValue(e,n),t=r._getCellValue(t,n);return t<e?1:e<t?-1:0}),t.push({order:N.getSortOrder(n.getProperty("sort")),compare:e})}),t},setColumnSort:function(e,t,n,r){var i,a;n?r?0===(a=(i=N.getSortedColumnArray(e)).length)?t.set("sort",n):1===a?i[0]===t?t.set("sort",n):(t.set("sort",{order:n,index:1}),N.updateColumnSortIndex(e)):(a=0<=i.indexOf(t)?t.getProperty("sort").index:a,t.set("sort",{order:n,index:a})):(N._clearOtherColumnSort(e,t),t.set("sort",n)):r?(t.removeProperty("sort"),N.updateColumnSortIndex(e)):N.clearColumnSort(e)},clearColumnSort:function(e){e.each(function(e){e.removeProperty("sort")})},_clearOtherColumnSort:function(e,t){e.each(function(e){t!==e&&e.removeProperty("sort")})},updateColumnSortIndex:function(e){var t,n=N.getSortedColumnArray(e),r=n.length;1===r?(e=(t=n[0]).getProperty("sort"),Qe(e)&&t.set("sort",e.order)):1<r&&n.forEach(function(e,t){var n=e.getProperty("sort"),r=Qe(n);r&&n.index===t||e.set("sort",{order:r?n.order:n,index:t})})},_sortMultipleColumnArray:function(e,t){var n=e.getProperty("sort"),r=t.getProperty("sort"),e=Qe(n),t=Qe(r);if(e&&!t)return 1;if(!e&&t)return-1;if(e&&t){n=n.index,r=r.index;if(n<r)return-1;if(r<n)return 1}return 0}},U={calcMaxLevel:function(t){var i=0;return t.toRootArray(!1).forEach(function(n){var e=mn.getAddedDescendantArray(t,n),r=1;e.forEach(function(e){e=e.getProperty("parent");for(var t=1;e&&(t++,e!==n);)e=e.getProperty("parent");r=je(r,t)}),i=je(i,r)}),i},calcDataRowIndex:function(e){var t=0;for(e=e.getProperty("parent");e;)t++,e=e.getProperty("parent");return t},calcColSpan:function(t,e){var n=0;return mn.getAddedDescendantArray(t.getProvider(),e).forEach(function(e){t._isVisible(e)&&!t.hasChildrenVisible(e)&&n++}),je(1,n)},calcRowSpan:function(e,t){return e.hasChildrenVisible(t)?1:U.calcMaxLevel(e.getProvider())-U.calcDataRowIndex(t)},appendAllDataRenderer:function(t){t._getSortDataArray(t.getProvider().toRootArray(!1)).forEach(function(e){U._appendDataRenderer(t,e)})},_appendDataRenderer:function(e,t){var n=e.getDataRenderer(t);n&&(e.getRendererContainer(t).appendChild(n.getRenderer()),U.appendDataChildrenRenderer(e,t))},appendDataChildrenRenderer:function(t,e){e=it(e.getChildren(!1),t.containsData,t);0<e.length&&(e=t._getSortDataArray(e)).forEach(function(e){U._appendDataRenderer(t,e)})}},H=function(){this._tableHead=Ot("thead"),this._rowTRArray=[],H.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableHead),this.setControllers([new W]),xt(this.getRoot(),"z-thead")};_t(H,I,lt({___zdefaults_:lt({model_select:!0,model_check:!0,template:null},e({checkbox_visible:!1}),n(),r()),getRendererRootContainer:function(){return this._tableHead},getDataRendererClass:function(e){return F},isCheckColumn:function(e){return this.getProvider()._checkColumn===e},hasCheckColumn:function(e){return null!=this.getProvider()._checkColumn},isTreeColumn:function(e){return this.getProvider()._treeColumn===e},_onModelChange:function(e,t){U.appendAllDataRenderer(this),H.superClass._onModelChange.apply(this,arguments)},_clearDataRendererImpl:function(){H.superClass._clearDataRendererImpl.apply(this,arguments),this._updateHeadTR()},_beforeModelChange:function(e,t){"data"===e&&"parent"!==t.property||this._updateHeadTR(),H.superClass._beforeModelChange.apply(this,arguments)},_updateHeadTR:function(){var e=U.calcMaxLevel(this.getProvider());this._rowTRArray=[],Mt(this._tableHead);for(var t=0;t<e;t++){var n=Ot("tr");this._rowTRArray[t]=n,this._tableHead.appendChild(n)}},getRowTRArray:function(){return this._rowTRArray},_onViewUpdate:function(){this._updateColGroup(),H.superClass._onViewUpdate.apply(this,arguments)},_updateColGroup:function(){Mt(this._tableColGroup);var e,t=this.getProvider();this._colGroupWidth=0,t&&((e=this.getProperty("root_data"))?this.hasChildrenVisible(e)?t.hEachByData(e,this._appendColGroupItem,this):this._appendColGroupItem(e):t.hEach(this._appendColGroupItem,this)),this.onColGroupChange(this._tableColGroup)},onColGroupChange:function(){},_getColGroupWidth:function(){return this._colGroupWidth},_isColNeedAdded:function(e){if(!1===this.isVisible(e))return!1;if(this._isAllChildrenHidden(e))return!1;if(this.hasChildrenVisible(e))return!1;var t=this._isVisible(e);return!(!t&&!e.getProperty("parent"))&&{visible:t}},_isAllChildrenHidden:function(e){return!!e.hasChildren()&&!this.hasChildrenVisible(e)},_appendColGroupItem:function(e){var t,n,r=this._isColNeedAdded(e);!1!==r&&(t=0,n=Ot("col"),!0===r.visible&&(t=this.isColumnMinimized(e)?0|this.getProperty("minimize_width"):Fe(e.getProperty("width"))),t=je(0,t),this._colGroupWidth+=t,n._width=t,kt(n,"width",t+"px"),this._tableColGroup.appendChild(n))},hEachColumn:function(n,r){var e,t=this.getProvider();t&&((e=this.getProperty("root_data"))?t.hEachByData(e,function(e){var t=this._isColNeedAdded(e);!1!==t&&n.apply(r,[e,t.visible])},this):t.hEach(function(e){var t;this.hasChildrenVisible(e)||!1!==(t=this._isColNeedAdded(e))&&n.apply(r,[e,t.visible])},this))},setColumnMinimize:function(e,t){!0===t?e.set("minimized",!0):e.remove("minimized")},isColumnMinimized:function(e){return!0===e.get("minimized")}},l(H),o(H),{getRendererContainer:function(e){e=U.calcDataRowIndex(e);return this._rowTRArray[e]}}));var W=function(){W.superClass.constructor.apply(this,arguments)};_t(W,In,{getViewDefaultTypes:function(){return["click"]},handle_click:function(e,t){var n,r,i,a=t.getDataAt(e);a&&(t._isDisabled(a)||(t.isColumnMinimized(a)?t.setColumnMinimize(a,!1):this.isCheckBox(e)?this.handleCheck(a,e):this.isMinimize(e)?t.setColumnMinimize(a,!0):(this._isSortable(a)&&(n=N.getColumnNextOrder(t,a),(r="multiple"===t.getDataViewProperty(a,"sort_mode"))&&("ctrl"!==(i=t.getProperty("multiple_sort_key"))||e.ctrlKey||(r=!1),"alt"!==i||e.altKey||(r=!1)),N.setColumnSort(t.getProvider(),a,n,r)),t._onDataClick(a,e))))},isCheckBox:function(e){return this._isOPTypeTarget(e,"check")},isRemove:function(e){return this._isOPTypeTarget(e,"remove")},isExpand:function(e){return this._isOPTypeTarget(e,"expand")},isMinimize:function(e){return this._isOPTypeTarget(e,"minimize")},_isOPTarget:function(e){return null!=Ft.getEventTarget(e,"[__z_dop_]")},_isOPTypeTarget:function(e,t){e=Ft.getEventTarget(e,"[__z_dop_]");return!!e&&e.getAttribute("__z_dop_")===t},handleCheck:function(e,t){var n=this.getView();return!(!n.toggleCheck||!n.isCheckable(e))&&(n.toggleCheck(e),!0)},_isSortable:function(e){var t=this.getView();return!t.hasChildrenVisible(e)&&!0===t.getDataViewProperty(e,"sortable")}});var F=function(){this._renderer=Ot("th"),P.initRenderNode(this),F.superClass.constructor.apply(this,arguments)};_t(F,T,{_isRendererVisible:function(e,t){var n=F.superClass._isRendererVisible.apply(this,arguments);return n=!0===(n=!0===(n=!0===n?e._isVisibleByRootData(t):n)?e._isBodyVisibleByRootData(t):n)?!e._isAllChildrenHidden(t):n},updateRenderConfig:function(e,t,n){F.superClass.updateRenderConfig.apply(this,arguments),n.template=e.getDataViewProperty(t,"head_template"),n.is_root_data=e._isRootData(t),n.colspan=U.calcColSpan(e,t),n.rowspan=U.calcRowSpan(e,t),n.tree_column=e.isTreeColumn(t),n.has_children=e.hasChildrenVisible(t);var r=e.getDataRenderProperty(t,"attributes");this.updateRenderMinimizeConfig(e,t,n),!0!==this.getRenderConfig("minimized")?(this.updateRenderCheckConfig(e,t,n),P.updateRenderLevelCheckConfig(this,e,t,n),this.updateRenderSortConfig(e,t,n)):(t=this.getRenderConfig("label"))&&(null==r?r={title:t}:Qe(r)&&(r.hasOwnProperty("title")||(r.title=t))),n.attributes=r},updateRenderCheckConfig:function(e,t,n){e.isCheckColumn(t)?(n.check_column=!0,n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t)):P.updateRenderCheckConfig(this,e,t,n)},updateRenderer:function(e,t,n){F.superClass.updateRenderer.apply(this,arguments),Rt(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),Rt(this._renderer,"leaf",!0!==this.getRenderConfig("has_children")),this._renderer.setAttribute("colspan",this.getRenderConfig("colspan")),this._renderer.setAttribute("rowspan",this.getRenderConfig("rowspan"));var r=!0===this.getRenderConfig("minimized");Rt(this._renderer,"minimized",r),P.updateRenderAttributes(this,e,t,n),r?(this._checkBoxWrapper&&zt(this._checkBoxWrapper),this._sortWrapper&&zt(this._sortWrapper),this._minimizeWrapper&&zt(this._minimizeWrapper),this._inWrapper.innerHTML=this.getRenderConfig("minimize_label")):(P.updateRendererCheck(this,e,t,n),P.updateRenderIn(this,e,t,n),this.updateRendererSort(e,t,n),this.updateRendererMinimize(e,t,n))},updateRendererStatus:function(e,t,n){F.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"tree-column",!0===this.getRenderConfig("tree_column")),Rt(this._renderer,"check-column",!0===this.getRenderConfig("check_column")),Rt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Rt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable")),Rt(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},updateRenderSortConfig:function(e,t,n){!0!==this.getRenderConfig("has_children")?(n.sortable=!0===e.getDataViewProperty(t,"sortable"),n.sort=e.getDataRenderProperty(t,"sort")):n.sortable=!1},updateRendererSort:function(e,t,n){Rt(this._renderer,"sortable",!0===this.getRenderConfig("sortable"));var r,i,a=this.getRenderConfig("sort");!0!==this.getRenderConfig("has_children")&&null!=a?(r=this._getSortWrapper(),i=this._getSortTemplate(),0<(a=N.getSortIndex(a))&&(i+="<span class='index'>"+a+"</span>"),r.innerHTML=i,Pt(r,this._getSortClass()),this.appendToNodeWrapper(r)):this._sortWrapper&&zt(this._sortWrapper)},_getSortClass:function(){var e=["sort"],t=this.getRenderConfig("sort");return null!=t&&(e.push("sorted"),e.push(N.getSortOrder(t))),!0===this.getRenderConfig("sortable")?e.push("sortable"):e.push("unsortable"),e.join(" ")},_getSortWrapper:function(){return this._sortWrapper||(this._sortWrapper=Ot("span"),this._sortWrapper.setAttribute("__z_dop_","sort")),this._sortWrapper},_getSortTemplate:function(){return N.isAscSort(N.getSortOrder(this.getRenderConfig("sort")))?this.getViewRenderConfig("sort_asc_icon_template"):this.getViewRenderConfig("sort_desc_icon_template")},updateRenderMinimizeConfig:function(e,t,n){var r;!0!==this.getRenderConfig("has_children")?(r=!0===e.getDataViewProperty(t,"minimizable"),(n.minimizable=r)&&(t=e.isColumnMinimized(t),(n.minimized=t)?(n.minimize_width=this.getViewRenderConfig("minimize_width"),n.minimize_label=this.getViewRenderConfig("minimize_label")):n.minimize_icon_template=this.getViewRenderConfig("minimize_icon_template"))):n.minimizable=!1},updateRendererMinimize:function(e,t,n){var r=this.getRenderConfig("minimizable");Rt(this._renderer,"minimizable",r),r?(r=this.getRenderConfig("minimized"),Rt(this._renderer,"minimized",r),r||this.appendToNodeWrapper(this._getMinimizeWrapper())):this._minimizeWrapper&&zt(this._minimizeWrapper)},_getMinimizeWrapper:function(){return this._minimizeWrapper||(this._minimizeWrapper=Ot("span","minimize"),this._minimizeWrapper.setAttribute("__z_dop_","minimize"),this._minimizeWrapper.innerHTML=this.getViewRenderConfig("minimize_icon_template")),this._minimizeWrapper},insertToNodeWrapperFirst:function(e){var t=this._nodeWrapper.firstElementChild;t!==e&&this._nodeWrapper.insertBefore(e,t)},appendToNodeWrapper:function(e){this._nodeWrapper.appendChild(e)},getNodeWrapper:function(){return this._nodeWrapper},reBuildRenderer:function(){this._renderer.appendChild(this._nodeWrapper)}});var G=function(e,t){var n,r=t.getProperty("field");return n=null==(n=r?ht(e.getProperties(!1),r):n)?null!=(t=t.getProperty("default"))?t:"":n},j=function(){this._tableBody=Ot("tbody"),j.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),xt(this.getRoot(),"z-tbody")};_t(j,I,lt({___zdefaults_:lt({model_select:!0,model_expand:!0,model_check:!0},e()),makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return!1},isCheckColumn:function(e){return!1},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return G(e,t)},getDataRendererClass:function(e){return q}},A(),Sn()));var q=function(){this._renderer=Ot("tr","item"),q.superClass.constructor.apply(this,arguments)};_t(q,Bn,{updateRenderConfig:function(e,t,n){q.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.row_template=e.getDataViewProperty(t,"row_template"),this._renderConfig.selectable=e.isSelectable(t),this._renderConfig.hover=e.isHover(t),e.hasCheckColumn()&&(n.checkbox_visible=!0,n.checked=e.isChecked(t),n.checkable=e.isCheckable(t))},updateRenderer:function(e,t,n){q.superClass.updateRenderer.apply(this,arguments),Mt(this._renderer);var r=this.getRenderConfig("row_template");r?this._renderer.innerHTML=Qt(r,t.getProperties(!1)):e.hEachColumn(this._renderColumn,this)},updateRendererStatus:function(e,t,n){q.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"unselectable",!1===this.getRenderConfig("selectable")),Rt(this._renderer,"hover",!0===this.getRenderConfig("hover")),Rt(this._renderer,"checked",!0===this.getRenderConfig("checked")),Rt(this._renderer,"uncheckable",!1===this.getRenderConfig("checkable"))},_renderColumn:function(e,t){var n=this._view,r=Ot("td",{className:e.get("className")||e.get("class"),style:e.get("style"),attributes:e.get("attributes")});return this._renderer.appendChild(r),!0===t&&(n.isColumnMinimized(e)||(this._renderCommonColumn(r,e),n.isCheckColumn(e)&&this._renderCheckColumn(r,e))),r},_renderCommonColumn:function(e,t){var n=this._view,r=this._data,i=t.render;et(i)?i.apply(n,[e,r,t,n,this._renderer]):(t=(i=t.getProperty("template"))?Qt(i,r.getProperties(!1)):n._getCellValue(r,t),e.innerHTML=t)},_renderCheckColumn:function(e,t){xt(e,"check-column");var n=P._getCheckboxWrapper(this);n.innerHTML=P._getCheckboxTemplate(this),e.insertBefore(n,e.firstChild)}});var $,X=function(){this._tableBody=Ot("tbody"),X.superClass.constructor.apply(this,arguments),this._table.appendChild(this._tableBody),xt(this.getRoot(),"z-tbody")};_t(X,I,lt({___zdefaults_:lt({model_select:!0,model_expand:!0,model_check:!0},e(),t()),_onViewChange:function(e,t,n){X.superClass._onViewChange.apply(this,arguments),this._doViewThreeStatesCheckUpdate(e)},_doViewThreeStatesCheckUpdate:function(e){"three_states_check"===e&&this._checkProvider&&this.clearCheck()},makeVisible:function(e){},setTableHead:function(e){this._tableHead=e},getRendererRootContainer:function(){return this._tableBody},getRendererContainer:function(e){return this._tableBody},hEachColumn:function(e,t){this._tableHead&&this._tableHead.hEachColumn(e,t)},isColumnMinimized:function(e){return!!this._tableHead&&this._tableHead.isColumnMinimized(e)},hasCheckColumn:function(){return this._tableHead.hasCheckColumn()},isCheckColumn:function(e){return this._tableHead.isCheckColumn(e)},isTreeColumn:function(e){return!0===e.getProperty("tree")},_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return G(e,t)},getDataRendererClass:function(e){return K}},(delete(A=l($=X)).getRendererContainer,lt(A,{_addDataRendererImpl:function(e,t){return x.insertElementRenderer(this,e,t,!0)},_updateDataRenderer:function(e){if(mn.isAncestorAdded(this.getProvider(),e)){if(this.getDataRenderer(e))return $.superClass._updateDataRenderer.apply(this,arguments);var t=this.createDataRenderer(e);t&&(this._rendererArrayMap.add(e.id(),t),x.insertElementRenderer(this,e,t,!0))}else b.removeDataRenderer(e)},_updateDataRendererImpl:function(e,t,n){!0!==n&&!this.getProperty("sort_compare")||x.updateDataRenderer(this,e,t)},_isVisibleByRootData:function(e){var t=this.getProperty("root_data");return!t||(t===e||0<=mn.getAddedDescendantArray(this.getProvider(),t).indexOf(e))}})),o(X),Tn(),{_isExpandable:function(e){var t=!1;return!0!==(t=!this.hasChildrenVisible(e)?!0:t)&&!1!==this.isExpandable(e)}}));var K=function(){K.superClass.constructor.apply(this,arguments)};_t(K,q,{_isRendererVisible:function(e,t){var n=K.superClass._isRendererVisible.apply(this,arguments);return n=!0===n?e._isVisibleByRootData(t):n},updateRenderConfig:function(e,t,n){K.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.is_root_data=e._isRootData(t),P.updateRenderLevelCheckConfig(this,e,t,n),P.updateRenderExpandConfig(this,e,t,n),this._renderConfig.data_level=e._getDataLevel(t)},updateRenderer:function(e,t,n){Rt(this._renderer,"root_data",!0===this.getRenderConfig("is_root_data")),K.superClass.updateRenderer.apply(this,arguments),Rt(this._renderer,"leaf",!0!==this.getRenderConfig("has_children"))},updateRendererStatus:function(e,t,n){K.superClass.updateRendererStatus.apply(this,arguments),Rt(this._renderer,"unexpandable",!1===this.getRenderConfig("expandable")),Rt(this._renderer,"indeterminate-checked",!0===this.getRenderConfig("indeterminate_checked"))},_renderColumn:function(e,t){var n=this._view,r=K.superClass._renderColumn.apply(this,arguments);!0===t&&(n.isColumnMinimized(e)||n.isTreeColumn(e)&&this._renderTreeColumn(r,e))},_renderTreeColumn:function(e,t){var n;xt(e,"tree-column"),!0===this.getRenderConfig("has_children")&&!1!==this.getRenderConfig("expand_icon_visible")&&((n=P._getExpandWrapper(this)).innerHTML=P._getExpandTemplate(this),Pt(n,P._getExpandClass(this)),e.insertBefore(n,e.firstChild));for(var r=this.getRenderConfig("data_level"),i=0;i<r;i++)e.insertBefore(Ot("span","indent"),e.firstChild)}});var J=function(){if(!(this instanceof J))return ut.createInstance(J,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-listview",e);J.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-listview")};_t(J,O,{__className_:"ListView"});var Y=function(){Y.superClass.constructor.apply(this,arguments)};_t(Y,In,{add:function(e){Y.superClass.add.apply(this,arguments);var t=e._prevEle;Gt(t,"mousedown",this.toPrev,this),Gt(t,"mouseup",this.stopScroll,this),Gt(t,"mouseleave",this.stopScroll,this);t=e._nextEle;Gt(t,"mousedown",this.toNext,this),Gt(t,"mouseup",this.stopScroll,this),Gt(t,"mouseleave",this.stopScroll,this),Yt.addWheelListener(e._tabsView,this.handleTabsWheel,this)},remove:function(){var e=this._view._prevEle;jt(e,"mousedown",this.toPrev,this),jt(e,"mouseup",this.stopScroll,this),jt(e,"mouseleave",this.stopScroll,this);e=this._view._nextEle;jt(e,"mousedown",this.toNext,this),jt(e,"mouseup",this.stopScroll,this),jt(e,"mouseleave",this.stopScroll,this),Yt.removeWheelListener(this._view._tabsView,this.handleTabsWheel,this),Y.superClass.remove.apply(this,arguments)},handleTabsWheel:function(e){var t=e.wheelDelta<0||0<e.deltaY||0<e.detail?10:-10,n=this._view.getProperty("tab_position"),r="top"===n||"bottom"===n?"scrollLeft":"scrollTop",n=this._view._rootUL[r];this._view._rootUL[r]+=t,n!==this._view._rootUL[r]&&e.preventDefault()},stopScroll:function(){this._scrollStop=!0},toPrev:function(){this.startScroll(-6)},toNext:function(){this.startScroll(6)},startScroll:function(e){this._scrollStop=!1,this._scrollOffset=e;e=this._view.getProperty("tab_position");this._scrollDirection="top"===e||"bottom"===e?"scrollLeft":"scrollTop",pt.cancelCallRAFInterval(this.scroll,this),yt(this.scroll,this)},scroll:function(){if(!0===this._scrollStop)return!1;var e=this._view._rootUL[this._scrollDirection];this._view._rootUL[this._scrollDirection]+=this._scrollOffset,e===this._view._rootUL[this._scrollDirection]&&this.stopScroll()}});var Z=function(){if(!(this instanceof Z))return ut.createInstance(Z,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-tabs",e);this._contentContainer=Ot("div","contents"),this._prevEle=Ot("span","to_prev"),this._nextEle=Ot("span","to_next"),this._tabsView=Ot("div","tabs"),Z.superClass.constructor.apply(this,arguments);e=this.getRoot();xt(e,"z-tabs"),this._tabsView.appendChild(this._rootUL),this._tabsView.appendChild(this._prevEle),this._tabsView.appendChild(this._nextEle),e.appendChild(this._tabsView),this._doTabPositionUpdate(),this._doTabContentVisibleUpdate(),this._doUpdateTabScrollAndSize(),this.addController(new Y)};_t(Z,O,lt({__className_:"Tabs",___zdefaults_:{onresize:!0,content_visible:!0,content_lazy_load:!1,content_auto_resize:!0,content_container:null,tab_position:"top",auto_select:!0,scroll_to_left_arrow_icon_template:f.tabs_scroll_to_left_arrow,scroll_to_right_arrow_icon_template:f.tabs_scroll_to_right_arrow,scroll_to_up_arrow_icon_template:f.tabs_scroll_to_up_arrow,scroll_to_down_arrow_icon_template:f.tabs_scroll_to_down_arrow},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_onViewUpdate:function(){Z.superClass._onViewUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_onViewChange:function(e,t,n){Z.superClass._onViewChange.apply(this,arguments),"tab_position"===e?this._doTabPositionUpdate():"content_visible"===e?this._doTabContentVisibleUpdate():"content_lazy_load"===e?this._doTabContentLazyLoadUpdate():"content_container"===e&&this._doTabContentContainerUpdate()},_doTabPositionUpdate:function(){var e=this.getRoot();wt(e,"top bottom left right"),xt(e,this.getProperty("tab_position")),this._isContentVisible()&&this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabScrollArrowUpdate()},_doTabScrollArrowUpdate:function(){var e=this.getProperty("tab_position");"left"===e||"right"===e?(this._prevEle.innerHTML=this.getProperty("scroll_to_up_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_down_arrow_icon_template")):(this._prevEle.innerHTML=this.getProperty("scroll_to_left_arrow_icon_template"),this._nextEle.innerHTML=this.getProperty("scroll_to_right_arrow_icon_template"))},_insertContentContainerByOrder:function(){var e=this.getRoot();"bottom"===this.getProperty("tab_position")?e.insertBefore(this._contentContainer,e.firstElementChild):e.appendChild(this._contentContainer)},_doTabContentVisibleUpdate:function(){var e;this._isContentVisible()?(this._isUseDefaultContentContainer()&&this._insertContentContainerByOrder(),this._doTabContentLazyLoadUpdate(),(e=this.getLastSelected())&&this.setCurrentDataContent(e)):(this.clearDataContent(),this._isUseDefaultContentContainer()&&zt(this._contentContainer))},_doTabContentLazyLoadUpdate:function(){this._isContentLazyLoad()||this.eachData(function(e){this.isDataContentAdded(e)||this.addDataContent(e)},this)},_doTabContentContainerUpdate:function(){this._isUseDefaultContentContainer()?this._isContentVisible()&&this._insertContentContainerByOrder():zt(this._contentContainer)},getContentContainer:function(){var e=this.getProperty("content_container");return e?bt(e):this._contentContainer},_isUseDefaultContentContainer:function(){return null==this.getProperty("content_container")},_onDataAdd:function(e){Z.superClass._onDataAdd.apply(this,arguments),this._isContentVisible()&&!this._isContentLazyLoad()&&this.addDataContent(e)},_onDataRemove:function(e){Z.superClass._onDataRemove.apply(this,arguments),this._isContentVisible()&&this.removeDataContent(e)},_onDataClear:function(){Z.superClass._onDataClear.apply(this,arguments),this._isContentVisible()&&this.clearDataContent()},_onDataChange:function(e,t){Z.superClass._onDataChange.apply(this,arguments),this._isContentVisible()&&"content"===t.property&&(this.removeDataContent(e),this.getLastSelected()===e?this.setCurrentDataContent(e):this._isContentLazyLoad()||this.addDataContent(e))},_onModelChange:function(e){Z.superClass._onModelChange.apply(this,arguments),"set_provider"===e&&this._doTabContentLazyLoadUpdate()},_onSelectBatchChange:function(){var e;Z.superClass._onSelectBatchChange.apply(this,arguments),!this._isContentVisible()||(e=this.getLastSelected())&&this.setCurrentDataContent(e)},_getScrollView:function(){return this._rootUL},_isContentVisible:function(){return!1!==this.getProperty("content_visible")},_isContentLazyLoad:function(){return!0===this.getProperty("content_lazy_load")},_doResizeUpdate:function(){Z.superClass._doResizeUpdate.apply(this,arguments),this._doUpdateTabScrollAndSize()},_doUpdateTabScrollAndSize:function(e){this._doUpdateTabScroll(),this._doUpdateTabSize()},_doUpdateTabScroll:function(){var e,t=this.getProperty("tab_position");St(this._tabsView,"padding-top"),St(this._tabsView,"padding-bottom"),St(this._tabsView,"padding-left"),St(this._tabsView,"padding-right"),"top"===t||"bottom"===t?(e=this._rootUL.scrollWidth,this._tabsView.clientWidth<e?("none"===At(this._prevEle,"display")&&(St(this._prevEle,"display"),St(this._nextEle,"display")),kt(this._tabsView,"padding-left",this._prevEle.offsetWidth+"px"),kt(this._tabsView,"padding-right",this._nextEle.offsetWidth+"px")):(kt(this._prevEle,"display","none"),kt(this._nextEle,"display","none"))):(e=this._rootUL.scrollHeight,this._tabsView.clientHeight<e?("none"===At(this._prevEle,"display")&&(St(this._prevEle,"display"),St(this._nextEle,"display")),kt(this._tabsView,"padding-top",this._prevEle.offsetHeight+"px"),kt(this._tabsView,"padding-bottom",this._nextEle.offsetHeight+"px")):(kt(this._prevEle,"display","none"),kt(this._nextEle,"display","none")))},_doUpdateTabSize:function(){if(this._isContentVisible()&&this._isUseDefaultContentContainer()){if(!1!==this.getProperty("content_auto_resize")){var e=this.getRoot().parentNode;if(e&&At(e,"height")){var t=this.getProperty("tab_position");if("top"===t||"bottom"===t){e=this.getRootSize(),t=this._rootUL.offsetHeight;return void kt(this._contentContainer,"height",e.height-t-1+"px")}}}St(this._contentContainer,"height")}}},a()));var Q=function(){if(!(this instanceof Q))return ut.createInstance(Q,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-tree",e);Q.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-tree")};_t(Q,z,{__className_:"Tree"});var ee=function(){this._contentContainer=Ot("div","content"),ee.superClass.constructor.apply(this,arguments)};_t(ee,M,{updateRenderConfig:function(e,t,n){ee.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.expanded=e.isExpanded(t);var r=!1!==e.getDataViewProperty(t,"expand_icon_visible");!0==(this._renderConfig.expand_icon_visible=r)&&(this._renderConfig.expandable=e.isExpandable(t)),this._renderConfig.content=e.getDataRenderProperty(t,"content")},updateRenderer:function(e,t,n){ee.superClass.updateRenderer.apply(this,arguments),Rt(this._renderer,"expanded",!0===this.getRenderConfig("expanded")),Rt(this._renderer,"unexpandable",!0!==this.getRenderConfig("expandable")),this._updateRendererExpand(),this._updateRendererContent()},_updateRendererExpand:function(){var e;!1!==this.getRenderConfig("expand_icon_visible")?((e=this._getExpandWrapper()).innerHTML=this._getExpandTemplate(),Pt(e,this._getExpandClass()),this.insertToNodeWrapperFirst(e)):this._expandWrapper&&zt(this._expandWrapper)},_getExpandTemplate:function(){return!0===this.getRenderConfig("expanded")?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template")},_getExpandClass:function(){var e=["expand"];return!0===this.getRenderConfig("expanded")?e.push("expanded"):e.push("collapsed"),!0===this.getRenderConfig("expandable")?e.push("expandable"):e.push("unexpandable"),e.join(" ")},_getExpandWrapper:function(){return this._expandWrapper||(this._expandWrapper=Ot("span"),this._expandWrapper.setAttribute("__z_dop_","expand")),this._expandWrapper},_updateRendererContent:function(){var e=this.getRenderConfig("content");this._currentContent!==e&&(g.releaseContent(this._currentContentObj),this._currentContent=e,this._currentContentObj=g.getContentObject(e),this._currentContentObj&&((e=this._currentContentObj.contentEle)&&this._contentContainer.appendChild(e),g.showContent(this._currentContentObj))),this._contentContainer.parentNode||this._renderer.appendChild(this._contentContainer),!0===this.getRenderConfig("expanded")?(g.showContent(this._currentContentObj),this._currentContentObj&&this._currentContentObj.contentEle?St(this._contentContainer,"display"):kt(this._contentContainer,"display","none")):(g.hideContent(this._currentContentObj),kt(this._contentContainer,"display","none"))},dispose:function(){ee.superClass.dispose.apply(this,arguments),this._currentContentObj&&g.releaseContent(this._currentContentObj)}});var te=function(){if(!(this instanceof te))return ut.createInstance(te,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-collapse",e);te.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-collapse")};_t(te,O,lt({__className_:"Collapse",___zdefaults_:lt({make_visible_on_select:!1},t({expand_on_click:!0})),getDataRendererClass:function(e){return ee},getDataAt:function(e){return y.isEvtInRendererNode(e)?te.superClass.getDataAt.apply(this,arguments):null}},Tn()));var ne=function(){if(!(this instanceof ne))return ut.createInstance(ne,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-carousel",e);this._contentContainer=Ot("div","contents"),this._initDataContentInterface(!0),this._indicatorView=Ot("div","indicators"),ne.superClass.constructor.apply(this,arguments),this._initIndicatorView(),xt(this.getRoot(),"z-carousel")};_t(ne,O,lt({__className_:"Carousel",___zdefaults_:{auto_select:!0,indicator_visible:!0,scroll_arrow_visible:!0,auto_play:!0,interval:3e3,hover_pause:!0,scroll_to_prev_arrow_template:"<a class='fz-icon fz-angle-left'></a>",scroll_to_next_arrow_template:"<a class='fz-icon fz-angle-right'></a>"},_initIndicatorView:function(){this._prevEle=Ot("span","to_prev"),this._prevEle.innerHTML=this._getCommonProperty("scroll_to_prev_arrow_template"),this._nextEle=Ot("span","to_next"),this._nextEle.innerHTML=this._getCommonProperty("scroll_to_next_arrow_template"),this._indicatorView.appendChild(this._rootUL),this.getRoot().appendChild(this._contentContainer),this.getRoot().appendChild(this._prevEle),this.getRoot().appendChild(this._nextEle),this.getRoot().appendChild(this._indicatorView)},_getPrevEle:function(){return this._prevEle},_getNextEle:function(){return this._nextEle},_getContentContainer:function(){return this._contentContainer},_onDataAdd:function(e){ne.superClass._onDataAdd.apply(this,arguments),this.addDataContent(e)},_onDataRemove:function(e){ne.superClass._onDataRemove.apply(this,arguments),this.removeDataContent(e)},_onDataClear:function(){ne.superClass._onDataClear.apply(this,arguments),this.clearDataContent()},_onDataChange:function(e,t){ne.superClass._onDataChange.apply(this,arguments),"content"===t.property&&(this.removeDataContent(e),this.getLastSelect()===e?this.setCurrentDataContent(e):this.addDataContent(e))},_onSelectBatchChange:function(){ne.superClass._onSelectBatchChange.apply(this,arguments);var e=this.getLastSelect();e&&this.setCurrentDataContent(e),pt.cancelCallLater(this.toNext,3e3,this),!0===this._getCommonProperty("auto_play")&&ft(this.toNext,1e3,this)},toNext:function(){var e=this._getNextData();e&&this.setSelect(e)},_getPrevData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=-1,n=0,r=this.getLastSelect();r&&(t=e.indexOf(r),n=1);r=e.length;0<=t&&((t=e.splice(t)).shift(),e.unshift.apply(e,t));for(var i=r-1;n<=i;i--){var a=e[i];if(this.isVisible(a)&&!this.isDisabled(a)&&this.isSelectable(a))return a}},_getNextData:function(){var e=this._getSortDataArray(this.getProvider().toRootArray(!1)),t=this.getLastSelect();t&&(t=e.splice(0,e.indexOf(t)),e.shift(),e.push.apply(e,t));for(var n=e.length,r=0;r<n;r++){var i=e[r];if(this.isVisible(i)&&!this.isDisabled(i)&&this.isSelectable(i))return i}}},i(),{beforeHideContent:function(e){this._lastContent=e;e=this.getLastSelect();e&&(e=this.getDataContent(e),this._lastContent._id,e._id)}}));var re=function(e,t,n,r,i){return 0===t?"to_prev":(--t,(n=je(1,n))<=i?t<=n-1?t:t===n?"to_next":void 0:r<=i/2?t===i-1?"to_next_more":t===i?n-1:t===i+1?"to_next":t<i-1?t:void 0:n-i/2-1<r?0===t?0:1===t?"to_prev_more":t===i+1?"to_next":t<=i?n+t-i-1:void 0:0===t?0:1===t?"to_prev_more":t===i+2?"to_next":t===i+1?n-1:t===i?"to_next_more":t<i?r-((i-2)/2|0)+(t-2):void 0)},ie=function(e){this._pager=e,ie.superClass.constructor.apply(this,[])};_t(ie,O,{_getPagerCommonProperty:function(e){return this._pager.getProperty(e)},_getPagerPageIndex:function(){return this._pager._getPageIndex()-1},_setPagerPageIndex:function(e){this._pager.set("page_index",e+1)},_getPagerPageNumber:function(){return this._pager._getPageNumber()},_getPagerPagerCount:function(){return this._pager._getPagerCount()},isVisible:function(e){return null!=e.getProperty("role")},getLabel:function(e){e=e.getProperty("role");return null!=e?"to_prev"===e?this._getPagerCommonProperty("to_prev_icon_template"):"to_next"===e?this._getPagerCommonProperty("to_next_icon_template"):"to_prev_more"===e?this._getPagerCommonProperty("to_prev_more_icon_template"):"to_next_more"===e?this._getPagerCommonProperty("to_next_more_icon_template"):e+1:e},isDisabled:function(e){var t=e.getProperty("role");if(null==t)return!0;e=this._getPagerPageIndex();return"to_prev"===t?e<=0:"to_next"===t&&e>=this._getPagerPageNumber()-1},_onDataClick:function(e){var t=e.getProperty("role");null!=t&&(tt(t)?this._setPagerPageIndex(t):(e=this._getPagerPageIndex(),"to_prev"===t?0<e&&this._setPagerPageIndex(e-1):"to_next"===t?e<this._getPagerPageNumber()-1&&this._setPagerPageIndex(e+1):"to_prev_more"===t?this._setPagerPageIndex(je(0,e-(this._getPagerPagerCount()-2))):"to_next_more"===t&&this._setPagerPageIndex(qe(this._getPagerPageNumber()-1,e+(this._getPagerPagerCount()-2)))))},updatePagerData:function(){this._updatePagerDataCount(),this._updatePagerDataRole()},_updatePagerDataCount:function(){var e=this._getPagerPagerCount()+4,t=this.getDataSize();if(t!==e)if(t<e)for(var n=t;n<e;n++)this.addData(new Rn);else for(var r=this.getDataArray(),i=e;i<t;i++)this.removeData(r[i])},_updatePagerDataRole:function(){var n=this._getPagerPageNumber(),r=this._getPagerPageIndex(),i=this._getPagerPagerCount();this.clearSelect(),this.eachData(function(e,t){t=re(e,t,n,r,i);e.set("role",t),t===r&&this.setSelect(e)},this),this.update()},getDataRendererClass:function(e){return ae}});var ae=function(){ae.superClass.constructor.apply(this,arguments)};_t(ae,M,{updateRenderConfig:function(e,t,n){ae.superClass.updateRenderConfig.apply(this,arguments),this._renderConfig.role=t.getProperty("role")},updateRenderer:function(e,t,n){ae.superClass.updateRenderer.apply(this,arguments),Rt(this._renderer,"to_prev","to_prev"===this.getRenderConfig("role")),Rt(this._renderer,"to_next","to_next"===this.getRenderConfig("role")),Rt(this._renderer,"to_prev_more","to_prev_more"===this.getRenderConfig("role")),Rt(this._renderer,"to_next_more","to_next_more"===this.getRenderConfig("role"))}});var oe=function(){oe.superClass.constructor.apply(this,arguments)};_t(oe,In,{add:function(e){oe.superClass.add.apply(this,arguments),Gt(e._gerRefreshWrapper(),"click",this.handleRefresh,this),Gt(e._gerSizeSelect(),"change",this.handleSizeChange,this)},remove:function(e){jt(this._view._gerRefreshWrapper(),"click",this.handleRefresh,this),jt(this._view._gerSizeSelect(),"change",this.handleSizeChange,this),oe.superClass.remove.apply(this,arguments)},handleRefresh:function(){this._view._onRefresh(this._view.getPageConfig())},handleSizeChange:function(){var e=0|this._view._gerSizeSelect().value;this._view.set("page_size",e)}});var se=function(){if(!(this instanceof se))return ut.createInstance(se,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-pagination",e);se.superClass.constructor.apply(this,arguments),this._initPageView(),y.addWidgetClass(this.getRoot()),xt(this.getRoot(),"z-pagination"),this.addController(new oe)};_t(se,Vn,{__className_:"Pagination",___zdefaults_:{layout:"sizes,pager,total,refresh",page_sizes:[20,50,100],page_size:20,total_template:"<%start%>-<%end%> | <%total%>",refresh_icon_template:f.refresh,page_index:1,total:0,pager_count:7,to_prev_icon_template:f.pagination_to_prev,to_next_icon_template:f.pagination_to_next,to_prev_more_icon_template:f.pagination_to_prev_more,to_next_more_icon_template:f.pagination_to_next_more},_initPageView:function(){this._pagerULView=new ie(this);var e=this._pagerULView.getRoot();xt(e,"pager"),this.getRoot().appendChild(e),this._updatePageSizeSelect(),this._handlePageChange(),this._doViewLayoutUpdate()},_onViewChange:function(e,t,n){switch(se.superClass._onViewChange.apply(this,arguments),e){case"page_index":this._doViewPageIndexUpdate();break;case"page_size":this._doViewPageSizeUpdate();break;case"total":this._doViewTotalUpdate();break;case"page_sizes":this._doViewPageSizesUpdate();break;case"pager_count":this._doViewPagerCountUpdate();break;case"layout":this._doViewLayoutUpdate();break;case"total_template":this._updateTotalInfo();break;case"to_prev_icon_template":case"to_next_icon_template":case"to_prev_more_icon_template":case"to_next_more_icon_template":this._updatePagerULView();break;case"refresh_icon_template":this._doViewRefreshIconUpdate()}},_doViewPageIndexUpdate:function(){this._handlePageChange()},_doViewPageSizeUpdate:function(){this._updatePageSizeSelect(!0),this._updatePageIndex(),this._handlePageChange()},_doViewTotalUpdate:function(){this._updatePageIndex(),this._handlePageChange()},_doViewPageSizesUpdate:function(){this._updatePageSizeSelect();var e=this.getProperty("page_sizes"),t=this._getPageSize();e.indexOf(t)<0&&this.set("page_size",e[0])},_updatePageSizeSelect:function(e){var t=this.getProperty("page_sizes"),n=this._gerSizeSelect();!0===e?n.value=this._getPageSize():1<t.length?(Mt(n),t.forEach(function(e){var t=Ot("option");t.setAttribute("value",e),t.innerHTML=e,n.appendChild(t)}),n.value=this._getPageSize()):zt(n)},_doViewPagerCountUpdate:function(){this._updatePagerULView()},_doViewLayoutUpdate:function(){var n=this.getRoot();Mt(n),this.getProperty("layout").split(",").forEach(function(e){var t;switch(e){case"sizes":t=this._gerSizeSelect();break;case"pager":this._pagerULView&&(t=this._pagerULView.getRoot());break;case"total":t=this._gerTotalWrapper();break;case"refresh":t=this._gerRefreshWrapper()}t&&n.appendChild(t)},this)},_gerSizeSelect:function(){return this._sizeSelect||(this._sizeSelect=Ot("select","sizes"),this._sizeSelect.setAttribute("__z_dop_","size_select")),this._sizeSelect},_gerTotalWrapper:function(){return this._totalWrapper||(this._totalWrapper=Ot("span","total")),this._totalWrapper},_gerRefreshWrapper:function(){return this._refreshWrapper||(this._refreshWrapper=Ot("span","refresh"),this._refreshWrapper.setAttribute("__z_dop_","refresh"),this._refreshWrapper.innerHTML=this.getProperty("refresh_icon_template")),this._refreshWrapper},_updatePagerULView:function(){this._pagerULView&&this._pagerULView.update()},_updateTotalInfo:function(){this._gerTotalWrapper().innerHTML=Qt(this.getProperty("total_template"),this.getPageConfig())},_doViewRefreshIconUpdate:function(){this._gerRefreshWrapper().innerHTML=this.getProperty("refresh_icon_template")},_updatePageIndex:function(){var e=je(1,this._getPageNumber()),t=this._getPageIndex();return e<t&&(t=e-1,this.set("page_index",t),!0)},_handlePageChange:function(){this._pagerULView&&(this._pagerULView.updatePagerData(),this._callBatch(this._onPageChange,"page_change_cb_"))},_onPageChange:function(){var e=this.getPageConfig();if(this._updateTotalInfo(),this._currentPagerConfig){if(this._currentPagerConfig.index===e.index&&this._currentPagerConfig.size===e.size)return;e.changed=!0}this._currentPagerConfig=lt({},e),this._callOn("onPageChange","on.page.change",e,[e])},_getPageNumber:function(){return Xe(this._getTotal()/this._getPageSize())},_getPageSize:function(){return this.getProperty("page_size")},_getTotal:function(){return this.getProperty("total")},_getPagerCount:function(){return this.getProperty("pager_count")},_getPageIndex:function(){return this.getProperty("page_index")},getPageConfig:function(){var e=this._getPageIndex(),t=e-1,n=this._getPageSize(),r=t*n,i=this._getTotal(),a=0,o=0;return 0<i&&(a=t*n+1,o=qe(i,(1+t)*n)),{index:e,size:n,skip:r,limit:n,offset:r,number:this._getPageNumber(),start:a,end:o,total:i}},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onRefresh:function(e){this._callOn("onRefresh","on.page.refresh",e,[e])},onRefresh:function(e,t){this.addListener("on.page.refresh",e,t)}});var le={sortable:function(e,t){e=e.getProperty("sortable");t.set("sortable",!0===e||"custom"===e)},sort_mode:"sort_mode",multiple_sort_key:"multiple_sort_key",sort_orders:"sort_orders",sort_asc_icon_template:"sort_asc_icon_template",sort_desc_icon_template:"sort_desc_icon_template",minimize_icon_template:"minimize_icon_template",minimize_width:"minimize_width",minimize_label:"minimize_label"},ce={selectable:"selectable",auto_select:"auto_select",row_template:"row_template",expand_icon_visible:"expand_icon_visible",expand_collapsed_icon_template:"expand_collapsed_icon_template",expand_expanded_icon_template:"expand_expanded_icon_template",expand_on_click:"expand_on_click",expand_on_dbl_click:"expand_on_dbl_click",accordion:"accordion",checkbox_unchecked_icon_template:"checkbox_unchecked_icon_template",checkbox_checked_icon_template:"checkbox_checked_icon_template",checkbox_indeterminate_icon_template:"checkbox_indeterminate_icon_template",check_on_click:"check_on_click",three_states_check:"three_states_check",root_data:"root_data"},he={getOffsetHeight:function(e){return Et.getElementWindowBounds(e).height},createFixedHeadView:function(e){var t=he._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=mn.getDataRoot(e).getProperty("fixed");return!0===e||"left"===e});return he.initHeadViewShareProperty(e,t),t},createFixedRightHeadView:function(e){var t=he._createHeadView(e,function(e){return!1!==e.getProperty("visible")&&"right"===mn.getDataRoot(e).getProperty("fixed")});return he.initHeadViewShareProperty(e,t),t},createCenterHeadView:function(e){return he._createHeadView(e,function(e){if(!1===e.getProperty("visible"))return!1;e=mn.getDataRoot(e).getProperty("fixed");return!0!==e&&"left"!==e&&"right"!==e})},_createHeadView:function(t,e){e=new H({isVisible:e,_hasChildrenChecked:function(e){return this.isCheckColumn(e)?de._hasDataChecked(t):H.prototype._hasChildrenChecked.apply(this,arguments)}});return e.onViewUpdate(t._onColumnUpdate,t),e},initHeadViewShareProperty:function(n,r){ct(le,function(e,t){et(t)?t(n,r):r.set(t,n.getProperty(e))},n)},createBodyView:function(e,t,n){var r=new j(he.getBodyOverridingMethods(e));return he._onBodyViewChange(e,r),!1!==n&&he.initBodyViewShareProperty(e,r),r.setTableHead(t),r},getBodyOverridingMethods:function(n){return{isHover:function(e){return n.isHover(e)},_getCellValue:function(e,t){return n._getCellValue(e,t)},_isFilterVisible:function(e){return n._isFilterVisible(e)},isVisible:function(e){return n.isVisible(e)},isCheckColumn:function(e){return n._isCheckColumn(e)},hasCheckColumn:function(){return n._hasCheckColumn()},isCheckable:function(e){return n.isCheckable(e)},isSelectable:function(e){return n.isSelectable(e)}}},_onBodyViewChange:function(t,e){e.onDataClick(function(e){t._onDataClick.apply(t,[e.data,e.event])}),e.onDataDblClick(function(e){t._onDataDblClick.apply(t,[e.data,e.event])}),e.onViewUpdate(function(){t._onBodyUpdate()})},initBodyViewShareProperty:function(n,r){ct(ce,function(e,t){et(t)?t(n,r):r.set(t,n.getProperty(e))},n)}},de={bubblingBodyEventToGrid:function(t){var e=t._bodyCenterTable;e.onCheckChange(function(e){t._onCheckChange(e)},t),e.onSelectChange(function(e){t._onSelectChange(e)}),e.onSelectBatchChange(function(e){t._onSelectBatchChange(e)})},syncHeadViewProperty:function(e,t,n,r){le.hasOwnProperty(t)&&(t=le[t],et(t)?(e._headCenterTable&&t(e,e._headCenterTable),e._headLeftTable&&t(e,e._headLeftTable),e._headRightTable&&t(e,e._headRightTable)):(e._headCenterTable&&e._headCenterTable.set(t,n),e._headLeftTable&&e._headLeftTable.set(t,n),e._headRightTable&&e._headRightTable.set(t,n)))},syncBodyViewProperty:function(e,t,n,r){ce.hasOwnProperty(t)&&(t=ce[t],et(t)?(e._bodyCenterTable&&t(e,e._bodyCenterTable),e._bodyLeftTable&&t(e,e._bodyLeftTable),e._bodyRightTable&&t(e,e._bodyRightTable)):(e._bodyCenterTable&&e._bodyCenterTable.set(t,n),e._bodyLeftTable&&e._bodyLeftTable.set(t,n),e._bodyRightTable&&e._bodyRightTable.set(t,n)))},syncBodyHeadCheck:function(t){t._headCenterTable.onCheckChange(function(e){de._syncBodyCheckFromHead(t)}),t._bodyCenterTable.onCheckChange(function(e){t._callBatch(function(){de._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")}),t._bodyCenterTable.onModelChange(function(e){e=e.type;"set_provider"!==e&&"provider"!==e||t._callBatch(function(){de._syncHeadCheckFromBody(t)},"sync_head_check_from_body__cb_")})},_syncHeadCheckFromBody:function(e){var t,n,r,i,a;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(a=e._columnProvider)||(t=a._checkColumn)&&(n=de._isAllDataChecked(e),i=(r=de._getCheckColumnTable(e)).isChecked(t),a=!0,n?i||(r.addCheck(t),a=!1):i&&(r.removeCheck(t),a=!1),a&&r._updateData(t)),delete e._$is_sync_body_head_check_columning)},_syncBodyCheckFromHead:function(e){var t,n;!0!==e._$is_sync_body_head_check_columning&&(e._$is_sync_body_head_check_columning=!0,!(n=e._columnProvider)||(t=n._checkColumn)&&((n=e._headCenterTable).isChecked(t)?(e._bodyCenterTable.checkAll(),de._isAllDataChecked(e)||n.removeCheck(t)):e._bodyCenterTable.clearCheck()),delete e._$is_sync_body_head_check_columning)},_isAllDataChecked:function(e){var t=e._bodyCenterTable.getDataArray(!1).length;return 0<t&&e._bodyCenterTable.getChecked(!1).length===t},_hasDataChecked:function(e){return 0<e._bodyCenterTable.getChecked(!1).length},_getCheckColumnTable:function(e){var t=e._columnProvider;if(t){var n,t=t._checkColumn;if(t)return(n=e._hasColumnFixed&&e._headLeftTable.isVisible(t)?e._headLeftTable:n)||e._hasColumnFixedRight&&e._headRightTable.isVisible(t)&&(n=e._headRightTable),n=n||e._headCenterTable}},syncColGroupUpdate:function(e,t){e.setCallBack("onColGroupChange",function(e){t._tableColGroup.innerHTML=e.innerHTML})}},ue=function(e){var t=!1,n=!1;return e.toRootArray(!1).forEach(function(e){e=e.getProperty("fixed");!0===e||"left"===e?t=!0:"right"===e&&(n=!0)}),{fixed:t,fixed_right:n}},_e=function(){_e.superClass.constructor.apply(this,arguments)};_t(_e,In,{add:function(e){_e.superClass.add.apply(this,arguments),Gt(e._vScrollbarDiv,"scroll",this.handleVScroll,this),Gt(e._hScrollbarDiv,"scroll",this.handleHScroll,this),Gt(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),Gt(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),Gt(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this)},remove:function(){var e=this._view;jt(e._vScrollbarDiv,"scroll",this.handleVScroll,this),jt(e._hScrollbarDiv,"scroll",this.handleHScroll,this),jt(e._bodyCenterDiv,"touchstart",this.handleTouchStart,this),jt(e._bodyCenterDiv,"touchmove",this.handleTouchMove,this),jt(e._bodyCenterDiv,"touchend",this.handleTouchEnd,this),_e.superClass.remove.apply(this,arguments)},getViewDefaultTypes:function(){return["keydown","wheel"]},handle_keydown:function(e,t){var n=e.keyCode,r=t._vScrollbarDiv;r.parentNode&&(i=r.scrollTop,38===n?r.scrollTop-=20:40===n?r.scrollTop+=20:33===n?r.scrollTop-=t._bodyDiv.clientHeight-3:34===n&&(r.scrollTop+=t._bodyDiv.clientHeight-3),38!==n&&40!==n&&33!==n&&34!==n||r.scrollTop!==i&&e.preventDefault());var i=t._hScrollbarDiv;i.parentNode&&(t=i.scrollLeft,37===n?i.scrollLeft-=20:39===n&&(i.scrollLeft+=20),37!==n&&39!==n||i.scrollLeft!==t&&e.preventDefault())},handle_wheel:function(e,t){var n=e.wheelDelta<0||0<e.deltaY||0<e.detail,r=t._vScrollbarDiv,i=t._hScrollbarDiv,a=e.target,t="v";"v"===(t=i.contains(a)?"h":t)?r.parentNode||(t=null):i.parentNode||(t=null),"v"===t?(a=r.scrollTop,n?r.scrollTop+=60:r.scrollTop-=60,r.scrollTop!==a&&e.preventDefault()):"h"===t&&(t=i.scrollLeft,n?i.scrollLeft+=60:i.scrollLeft-=60,i.scrollLeft!==t&&(e.preventDefault(),this._view._syncBodyHScroll()))},handleTouchStart:function(e){(this._view._hScrollbarDiv.parentNode||this._view._vScrollbarDiv.parentNode)&&(this._touchPoint=this._getTouchPoint(e))},handleTouchMove:function(e){var t,n;this._touchPoint&&(e.preventDefault(),n=(t=this._getTouchPoint(e)).x-this._touchPoint.x,e=t.y-this._touchPoint.y,Ge(n)>Ge(e)?this._view._hScrollbarDiv.parentNode&&(this._view._hScrollbarDiv.scrollLeft-=n):this._view._vScrollbarDiv.parentNode&&(this._view._vScrollbarDiv.scrollTop-=e),this._touchPoint=t)},handleTouchEnd:function(e){this._touchPoint=null},_getTouchPoint:function(e){e=e.touches[0];return{x:e.clientX,y:e.clientY}},handleVScroll:function(){this._view._syncBodyVScroll()},handleHScroll:function(){this._view._syncBodyHScroll()}});var pe=function(){if(!(this instanceof pe))return ut.createInstance(pe,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-grid",e);this._initGridView();var t=wn(arguments,"columns");pe.superClass.constructor.apply(this,arguments),this._initCenterTables(),this._initDefaultColumns();e=this.getRoot();y.addWidgetClass(e),xt(e,"z-grid"),e.appendChild(this._headDiv),e.appendChild(this._bodyDiv),e.appendChild(this._pagerDiv),this._doViewOverflowUpdate(),this._updateLayout(),this.addController(new _e),this.addController(new E),t&&this.setColumns(t)};_t(pe,On,lt({__className_:"Grid",___zdefaults_:lt({onresize:!0,overflow:"hidden",pageable:!1,hoverable:!1,selectable:!1,make_visible_on_select:!0},e(),n(),r()),_onViewChange:function(e,t,n){pe.superClass._onViewChange.apply(this,arguments),"pageable"!==e?("overflow"===e&&this._doViewOverflowUpdate(),de.syncHeadViewProperty(this,e,t,n),de.syncBodyViewProperty(this,e,t,n),this.update()):this._doViewPagerUpdate(e,t,n)},_doViewOverflowUpdate:function(){Rt(this.getRoot(),"overflow-scroll","scroll"===this.getProperty("overflow"))},makeVisible:function(e){var t;!e||(t=this._bodyCenterTable.getDataRendererElement(e))&&gt(function(){Vt.scrollIntoView(t,this._getScrollView()),this._syncVScrollByBody()},this)},_getScrollView:function(){return this._bodyDiv}},{_initGridView:function(){this._headDiv=Ot("div","head"),this._headLeftDiv=Ot("div","left"),this._headCenterDiv=Ot("div","center"),this._headRightDiv=Ot("div","right"),this._headDiv.appendChild(this._headCenterDiv),this._headDiv.appendChild(this._headLeftDiv),this._headDiv.appendChild(this._headRightDiv),this._bodyDiv=Ot("div","body"),this._bodyLeftDiv=Ot("div","left"),this._bodyCenterDiv=Ot("div","center"),this._bodyRightDiv=Ot("div","right"),this._bodyDiv.appendChild(this._bodyCenterDiv),this._bodyDiv.appendChild(this._bodyLeftDiv),this._bodyDiv.appendChild(this._bodyRightDiv),this._pagerDiv=Ot("div","pager"),this._vScrollbarHeightDiv=Ot("div"),this._vScrollbarDiv=Ot("div","v-scrollbar"),this._vScrollbarDiv.appendChild(this._vScrollbarHeightDiv),this._hScrollbarHeightDiv=Ot("div","scroll"),this._hScrollbarDiv=Ot("div","h-scrollbar"),this._hScrollbarDiv.appendChild(this._hScrollbarHeightDiv),this._headCenterTable=he.createCenterHeadView(this),this._headCenterTableRoot=this._headCenterTable.getRoot(),this._headCenterDiv.appendChild(this._headCenterTableRoot),this._bodyCenterTable=this._createBodyView(this._headCenterTable,!1),this._bodyCenterTableRoot=this._bodyCenterTable.getRoot(),this._bodyCenterDiv.appendChild(this._bodyCenterTableRoot),de.syncBodyHeadCheck(this)},_initCenterTables:function(){he.initHeadViewShareProperty(this,this._headCenterTable),he.initBodyViewShareProperty(this,this._bodyCenterTable),de.syncColGroupUpdate(this._headCenterTable,this._bodyCenterTable),de.bubblingBodyEventToGrid(this)}},{_onProviderChange:function(){pe.superClass._onProviderChange.apply(this,arguments),this._bodyCenterTable.setProvider(this.getProvider()),this._hasColumnFixed&&this._bodyLeftTable.setProvider(this.getProvider()),this._hasColumnFixedRight&&this._bodyRightTable.setProvider(this.getProvider())},_updateBodyData:function(e){e&&(this._bodyCenterTable&&this._bodyCenterTable._updateData(e),this._bodyLeftTable&&this._bodyLeftTable._updateData(e),this._bodyRightTable&&this._bodyRightTable._updateData(e))},_updateBodyAllData:function(){this._bodyCenterTable&&this._bodyCenterTable._updateAllData(),this._bodyLeftTable&&this._bodyLeftTable._updateAllData(),this._bodyRightTable&&this._bodyRightTable._updateAllData()},_updateHeadColumn:function(e){e&&(this._headCenterTable&&this._headCenterTable._updateData(e),this._headLeftTable&&this._headLeftTable._updateData(e),this._headRightTable&&this._headRightTable._updateData(e))},update:function(e){!0!==e?(pe.superClass.update.apply(this,arguments),this._updateBody(),this._headCenterTable&&this._headCenterTable.update(),this._headLeftTable&&this._headLeftTable.update(),this._headRightTable&&this._headRightTable.update()):this._updateBody()},_updateBody:function(){this._bodyCenterTable&&this._bodyCenterTable.update(),this._bodyLeftTable&&this._bodyLeftTable.update(),this._bodyRightTable&&this._bodyRightTable.update()}},{_initDefaultColumns:function(){this._columnProvider=new kn,this._headCenterTable.setProvider(this._columnProvider),this._addColumnProviderListener()},setColumns:function(e,t){Ye(e)||(e=[e]);e=xn.parse(e);!0===t&&e.forEach(function(e){e._bind(e.get("_$z_data"))});t=new kn;t.add(e),N.updateColumnSortIndex(t),this._setColumnProvider(t)},findColumn:function(e,t){return this._columnProvider.find.apply(this._columnProvider,arguments)},getColumnArray:function(e){return this._columnProvider.toArray.apply(this._columnProvider,arguments)},_beforeSetColumnProvider:function(e){e._checkColumn=e.find(function(e){return"check"===e.getProperty("type")&&!e.hasChildren()&&!e.getProperty("parent")})},_setColumnProvider:function(e){this._beforeSetColumnProvider(e),this._removeColumnProviderListener(),this._columnProvider=e,this._updateFixedColumns(),this._headCenterTable.setProvider(e),this._hasColumnFixed&&this._headLeftTable.setProvider(e),this._hasColumnFixedRight&&this._headRightTable.setProvider(e),this._addColumnProviderListener(),this._onColumnChange("set_provider"),this._sortBodyData()},_isCheckColumn:function(e){return!!e&&this._columnProvider._checkColumn===e},_hasCheckColumn:function(){return null!=this._columnProvider._checkColumn},_addColumnProviderListener:function(){this._columnProvider.addProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.addDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this)},_removeColumnProviderListener:function(){this._columnProvider&&(this._columnProvider.removeProviderChangeListener(this._handleColumnProviderChange,this),this._columnProvider.removeDataChangeListener(this._handleColumnChange,this),this._columnProvider.removeIndexChangeListener(this._handleColumnIndexChange,this))},_handleColumnProviderChange:function(e){this._updateFixedColumns(),N.updateColumnSortIndex(this._columnProvider),this._onColumnChange("provider",e)},_handleColumnChange:function(e){var t=e.property;"fixed"===t?this._updateFixedColumns():"sort"===t&&this._onSortChange(),this._onColumnChange("data",e)},_handleColumnIndexChange:function(e){this._onModelChange("index",e)},_onColumnChange:function(e,t){this._callOn("onColumnChange","on.column.change",{type:e,event:t},[e,t])},onColumnChange:function(e,t){this.addListener("on.column.change",e,t)},_updateFixedColumns:function(){var e=this._columnProvider,e=ue(e);this._hasColumnFixed===e.fixed&&this._hasColumnFixedRight===e.fixed_right||(this._hasColumnFixed=e.fixed,this._hasColumnFixedRight=e.fixed_right,this._hasColumnFixed?this._createLeftTables():this._removeFixedTable(this._headLeftTable,this._bodyLeftTable),this._hasColumnFixedRight?this._createRightTables():this._removeFixedTable(this._headRightTable,this._bodyRightTable))},_createLeftTables:function(){this._headLeftTable||(this._headLeftTable=he.createFixedHeadView(this)),this._bodyLeftTable||(this._bodyLeftTable=this._createBodyView(this._headLeftTable),de.syncColGroupUpdate(this._headLeftTable,this._bodyLeftTable));var e=this._headLeftTable.getRoot();e.parentNode||(this._headLeftDiv.appendChild(e),this._headLeftTable.setProvider(this._columnProvider));e=this._bodyLeftTable.getRoot();e.parentNode||(this._bodyLeftDiv.appendChild(e),this._bodyLeftTable.setProvider(this.getProvider())),this._bodyLeftTable.set("sort_compare",this._getSortCompare())},_createRightTables:function(){this._headRightTable||(this._headRightTable=he.createFixedRightHeadView(this)),this._bodyRightTable||(this._bodyRightTable=this._createBodyView(this._headRightTable),de.syncColGroupUpdate(this._headRightTable,this._bodyRightTable));var e=this._headRightTable.getRoot();e.parentNode||(this._headRightDiv.appendChild(e),this._headRightTable.setProvider(this._columnProvider));e=this._bodyRightTable.getRoot();e.parentNode||(this._bodyRightDiv.appendChild(e),this._bodyRightTable.setProvider(this.getProvider())),this._bodyRightTable.set("sort_compare",this._getSortCompare())},_removeFixedTable:function(e,t){t&&(zt(t.getRoot()),t.setProvider(new kn)),e&&(zt(e.getRoot()),e.setProvider(new kn))},_createBodyView:function(e,t){return he.createBodyView(this,e,t)}},{_onSortChange:function(){this._callBatch(this._onSortBatchChange,"sort_batch_change__cb_")},_onSortBatchChange:function(){var e=this.getSortConfig();"custom"!==this.getProperty("sortable")&&this._sortBodyData(),this._callOn("onSortChange","on.column.sort.change",e,[e])},_sortBodyData:function(){var e=this._getSortCompare();this._hasColumnFixed&&this._bodyLeftTable.set("sort_compare",e),this._hasColumnFixedRight&&this._bodyRightTable.set("sort_compare",e),this._bodyCenterTable.set("sort_compare",e)},onSortChange:function(e,t){this.addListener("on.column.sort.change",e,t)},clearSort:function(){N.clearColumnSort(this._columnProvider)},getSortConfig:function(){var e=N.getSortedColumnArray(this._columnProvider);if(0<e.length){if("multiple"===this.getProperty("sort_mode")){var n=[];return e.forEach(function(e,t){n.push({field:e.getProperty("field"),order:N.getSortOrder(e.getProperty("sort")),index:t})}),n}e=e[0],e.getProperty("sort");return{field:e.getProperty("field"),order:N.getSortOrder(e.getProperty("sort"))}}return null},_getSortCompare:function(){return N.getSortCompare(this,this._columnProvider)}},{_doViewPagerUpdate:function(){var e=this.getProperty("pageable");!0===e?this._addPager():Qe(e)?this._addPager(e):this._removePager()},_addPager:function(e){this._pager||(this._pager=new se,this._pagerDiv.appendChild(this._pager.getRoot()),this._pager.setCallBack("onPageChange",this._onPageChange,this),this._pager.setCallBack("onRefresh",this._onPageRefresh,this)),e&&this._pager.set(e)},_removePager:function(){this._pager&&(this._pager.resetCallBack("onPageChange"),this._pager.resetCallBack("onRefresh"),Mt(this._pagerDiv),this._pager=null)},_onPageChange:function(e){this._callOn("onPageChange","on.page.change",e,[e])},onPageChange:function(e,t){this.addListener("on.page.change",e,t)},_onPageRefresh:function(e){this._callOn("onPageRefresh","on.page.refresh",e,[e])},onPageRefresh:function(e,t){this.addListener("on.page.refresh",e,t)},getPagination:function(){return this._pager},getPageConfig:function(){if(this._pager)return this._pager.getPageConfig()}},{_onColumnUpdate:function(){this._callBatch(this._doColumnUpdateSync,"_do_column_update_sync_cb_")},_doColumnUpdateSync:function(){this._syncHeadRowHeight(),this._bodyCenterTable.update(),this._hasColumnFixed&&this._bodyLeftTable.update(),this._hasColumnFixedRight&&this._bodyRightTable.update()},_onBodyUpdate:function(){this._callBatch(this._doBodyUpdateSync,"_do_body_update_sync_cb_")},_doBodyUpdateSync:function(){this._updateLayout(),this._syncBodyRowHeight()},_doResizeUpdate:function(){pe.superClass._doResizeUpdate.apply(this,arguments),this._syncHeadRowHeight(),this._syncBodyRowHeight(),this._updateLayout()},_updateLayout:function(){this._updateFixedLayout(),this._updateFixedRightLayout(),this._updateScrollbar()},_updateScrollbar:function(){var e=this.getRoot(),t=this.getRootSize(),n=t.height,r=he.getOffsetHeight(this._headDiv),i=he.getOffsetHeight(this._pagerDiv),a=$e(n-r-i),o=t.width,n=this._headCenterDiv.scrollWidth,i=1<n-o;i&&(this._hScrollbarDiv.parentNode||e.insertBefore(this._hScrollbarDiv,this._pagerDiv),a-=he.getOffsetHeight(this._hScrollbarDiv)),kt(this._bodyDiv,"margin-top",r+"px");t=!1;"scroll"===this.getProperty("overflow")&&(1<Ge(a-he.getOffsetHeight(this._bodyDiv))&&kt(this._bodyDiv,"height",a+"px"),t=he.getOffsetHeight(this._bodyCenterDiv)>a),t?(this._vScrollbarDiv.parentNode||e.appendChild(this._vScrollbarDiv),o-=this._vScrollbarDiv.offsetWidth-1,kt(this._vScrollbarDiv,"height",a+r+"px"),kt(this._vScrollbarHeightDiv,"height",this._bodyDiv.scrollHeight+r+"px"),kt(this._headDiv,"width",o+"px"),kt(this._bodyDiv,"width",o+"px"),this._syncVScrollByBody()):(zt(this._vScrollbarDiv),St(this._headDiv,"width"),St(this._bodyDiv,"width")),i?(kt(this._hScrollbarDiv,"width",o+"px"),kt(this._hScrollbarHeightDiv,"width",n+"px")):zt(this._hScrollbarDiv)},_updateFixedLayout:function(){var e,t=0;this._hasColumnFixed&&(e=t=this._headLeftTable._getColGroupWidth(),0<t&&(e+=1),kt(this._headLeftDiv,"width",e+"px"),kt(this._bodyLeftDiv,"width",e+"px")),kt(this._headCenterTableRoot,"padding-left",t+"px"),kt(this._bodyCenterTableRoot,"padding-left",t+"px")},_updateFixedRightLayout:function(){var e,t=0;this._hasColumnFixedRight&&(e=t=this._headRightTable._getColGroupWidth(),0<t&&(e+=1),kt(this._headRightDiv,"width",e+"px"),kt(this._bodyRightDiv,"width",e+"px")),kt(this._headCenterTableRoot,"padding-right",t+"px"),kt(this._bodyCenterTableRoot,"padding-right",t+"px")},_syncHeadRowHeight:function(){var n,e=[this._headCenterTable];this._hasColumnFixed&&e.push(this._headLeftTable),this._hasColumnFixedRight&&e.push(this._headRightTable),e.forEach(function(e){e.getRowTRArray().forEach(function(e){St(e,"height")})}),1<e.length&&(n=[],e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){n[t]=je(0|n[t],e.offsetHeight)})}),e.forEach(function(e){e.getRowTRArray().forEach(function(e,t){kt(e,"height",n[t]+"px")})}))},_syncBodyRowHeight:function(){var e=[this._bodyCenterTable];this._hasColumnFixed&&e.push(this._bodyLeftTable),this._hasColumnFixedRight&&e.push(this._bodyRightTable);var n,r=[];e.forEach(function(e,t){e=mt("tr[__z_did_]",e._tableBody);(r[t]=e).forEach(function(e){St(e,"height")})}),1<e.length&&(n=[],r.forEach(function(e){e.forEach(function(e,t){n[t]=je(0|n[t],e.offsetHeight)})}),r.forEach(function(e){e.forEach(function(e,t){kt(e,"height",n[t]+"px")})}))}},{_syncBodyVScroll:function(){this._bodyDiv.scrollTop=this._vScrollbarDiv.scrollTop},_syncBodyHScroll:function(){this._headCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft,this._bodyCenterDiv.scrollLeft=this._hScrollbarDiv.scrollLeft},_syncVScrollByBody:function(){this._vScrollbarDiv.scrollTop=this._bodyDiv.scrollTop}},{_getCellValue:function(e,t){return this.getCellValue(e,t)},getCellValue:function(e,t){return G(e,t)}},{getDataAt:function(e){e=Ft.getEventTarget(e,"[__z_did_]");if(e){var t=e.getAttribute("__z_did_");return at(this.getDataArray(!1),function(e){return e.id()===t})}return null}},Ln(pe),{_onHoverChange:function(e,t){this._updateBodyData(e),this._callOn("onHoverChange","on.hover.change",{data:e,isHover:t},[e,t])}},{check:function(e,t){return this._bodyCenterTable.check.apply(this._bodyCenterTable,arguments)},uncheck:function(e){return this._bodyCenterTable.uncheck.apply(this._bodyCenterTable,arguments)},addCheck:function(e){return this._bodyCenterTable.addCheck.apply(this._bodyCenterTable,arguments)},removeCheck:function(e){return this._bodyCenterTable.removeCheck.apply(this._bodyCenterTable,arguments)},clearCheck:function(){return this._bodyCenterTable.clearCheck.apply(this._bodyCenterTable,arguments)},setCheck:function(e){return this._bodyCenterTable.setCheck.apply(this._bodyCenterTable,arguments)},checkAll:function(e){return this._bodyCenterTable.checkAll.apply(this._bodyCenterTable,arguments)},toggleCheck:function(e){return this._bodyCenterTable.toggleCheck.apply(this._bodyCenterTable,arguments)},getChecked:function(e){return this._bodyCenterTable.getChecked.apply(this._bodyCenterTable,arguments)},isChecked:function(e){return this._bodyCenterTable.isChecked.apply(this._bodyCenterTable,arguments)},isCheckable:function(e){return!1!==this.getDataViewProperty(e,"checkable")},_onCheckChange:function(e){this._callOn("onCheckChange","on.check.change",e,[e])},onCheckChange:function(e,t){this.addListener("on.check.change",e,t)}},{isSelectable:function(e){return!0===this.getDataViewProperty(e,"selectable")},select:function(e,t){return this._bodyCenterTable.select.apply(this._bodyCenterTable,arguments)},unselect:function(e){return this._bodyCenterTable.unselect.apply(this._bodyCenterTable,arguments)},addSelect:function(e){return this._bodyCenterTable.addSelect.apply(this._bodyCenterTable,arguments)},removeSelect:function(e){return this._bodyCenterTable.removeSelect.apply(this._bodyCenterTable,arguments)},clearSelect:function(){return this._bodyCenterTable.clearSelect.apply(this._bodyCenterTable,arguments)},setSelect:function(e){return this._bodyCenterTable.setSelect.apply(this._bodyCenterTable,arguments)},selectAll:function(e){return this._bodyCenterTable.selectAll.apply(this._bodyCenterTable,arguments)},getSelected:function(e){return this._bodyCenterTable.getSelected.apply(this._bodyCenterTable,arguments)},getLastSelected:function(){return this._bodyCenterTable.getLastSelected.apply(this._bodyCenterTable,arguments)},isSelected:function(e){return this._bodyCenterTable.isSelected.apply(this._bodyCenterTable,arguments)},_onSelectChange:function(e){this._callOn("onSelectChange","on.select.change",e,[e])},onSelectChange:function(e,t){this.addListener("on.select.change",e,t)},_onSelectBatchChange:function(e){this._callOn("onSelectBatchChange","on.select.batch.change",e,[e]),0<e.length&&!0===this.getProperty("make_visible_on_select")&&this.makeVisible(this.getLastSelected())},onSelectBatchChange:function(e,t){this.addListener("on.select.batch.change",e,t)}},{}));var fe=function(t,e,n){var r=new X(lt(he.getBodyOverridingMethods(t),{isTreeColumn:function(e){return t._isTreeColumn(e)},hasChildrenVisible:function(e){return t.hasChildrenVisible?t.hasChildrenVisible(e):X.prototype.hasChildrenVisible.apply(this,arguments)}}));return he._onBodyViewChange(t,r),!1!==n&&he.initBodyViewShareProperty(t,r),r.setTableHead(e),r},ge=function(t){var e=t._bodyCenterTable;e.onExpand(function(e){t._onExpandAdd.apply(t,arguments)}),e.onCollapse(function(e){t._onExpandRemove.apply(t,arguments)}),e.onCollapseAll(function(e){t._onExpandClear.apply(t,arguments)}),e.onExpandSet(function(e){t._onExpandSet.apply(t,arguments)}),e.onExpandChange(function(e){t._onExpandChange.apply(t,arguments)})},ye=function(){if(!(this instanceof ye))return ut.createInstance(ye,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-treegrid",e);ye.superClass.constructor.apply(this,arguments),ge(this),xt(this.getRoot(),"z-treegrid")};_t(ye,pe,{__className_:"TreeGrid",___zdefaults_:lt(t()),_createBodyView:function(e,t){return fe(this,e,t)},_beforeSetColumnProvider:function(e){ye.superClass._beforeSetColumnProvider.apply(this,arguments);var t=(t=e.find(function(e){return!0===e.getProperty("tree")&&!e.hasChildren()}))||((t=e._checkColumn)||e.find(function(e){return!e.hasChildren()}));e._treeColumn=t},_isTreeColumn:function(e){return!!e&&this._columnProvider._treeColumn===e},makeVisible:function(e){e&&(mn.getAncestorArray(e).forEach(function(e){this.expand(e)},this),ye.superClass.makeVisible.apply(this,arguments))},getExpanded:function(e){return this._bodyCenterTable.getExpanded.apply(this._bodyCenterTable,arguments)},expand:function(e){return this._bodyCenterTable.expand.apply(this._bodyCenterTable,arguments)},collapse:function(e){return this._bodyCenterTable.collapse.apply(this._bodyCenterTable,arguments)},expandAll:function(e){return this._bodyCenterTable.expandAll.apply(this._bodyCenterTable,arguments)},collapseAll:function(){return this._bodyCenterTable.collapseAll.apply(this._bodyCenterTable,arguments)},toggleExpand:function(e){return this._bodyCenterTable.toggleExpand.apply(this._bodyCenterTable,arguments)},isExpanded:function(e){return this._bodyCenterTable.isExpanded.apply(this._bodyCenterTable,arguments)},_onExpandAdd:function(e){this._callOn("onExpand","on.expand.add",e,[e])},onExpand:function(e,t){this.addListener("on.expand.add",e,t)},_onExpandRemove:function(e){this._callOn("onCollapse","on.expand.remove",e,[e])},onCollapse:function(e,t){this.addListener("on.expand.remove",e,t)},_onExpandClear:function(e){this._callOn("onCollapseAll","on.expand.clear",e,[e])},onCollapseAll:function(e,t){this.addListener("on.expand.clear",e,t)},_onExpandSet:function(e){this._callOn("onExpandSet","on.expand.set",e,[e])},onExpandSet:function(e,t){this.addListener("on.expand.set",e,t)},_onExpandChange:function(e){this._callOn("onExpandChange","on.expand.change",e,[e])},onExpandChange:function(e,t){this.addListener("on.expand.change",e,t)}});var ve={ROOT_POP_DIRECTION_MAP:{down:"down_right",down_right:"down_right",down_left:"down_left",up:"up_right",up_right:"up_right",up_left:"up_left",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"down_right"},SUB_POP_DIRECTION_MAP:{down:"right_down",down_right:"right_down",down_left:"left_down",up:"right_up",up_right:"right_up",up_left:"left_up",right:"right_down",right_down:"right_down",right_up:"right_up",left:"left_down",left_down:"left_down",left_up:"left_up",default:"right_down"},getPopDirection:function(e,t){var n=null==(n=e.getProperty("direction"))?e._isVertical()?"right":"bottom":n.toLowerCase();return ve.isRootMenu(t)?ve.ROOT_POP_DIRECTION_MAP[n]||ve.ROOT_POP_DIRECTION_MAP.default:ve.SUB_POP_DIRECTION_MAP[n]||ve.SUB_POP_DIRECTION_MAP.default},isRootMenu:function(e){return null==e.getProperty("parent")},getMenuExpandExpandedTemplate:function(e){if(ve.isRootMenu(data))return view._renderConfig.root}},Ce=function(){Ce.superClass.constructor.apply(this,arguments)};_t(Ce,In,{getViewDefaultTypes:function(){return["blur","click"]},handle_blur:function(){"debug"!==s.focus_ui_mode&&this.getView().collapseAll()},handle_click:function(e,t){t.getDataAt(e)||(t.collapseAll(),t.setHoverData(null))},add:function(e){Ce.superClass.add.apply(this,arguments),this.getView().getRoot().setAttribute("tabindex",0)},remove:function(){this.getView().getRoot().removeAttribute("tabindex"),Ce.superClass.remove.apply(this,arguments)}});var me=function(){me.superClass.constructor.apply(this,arguments)};_t(me,B,{updateRenderConfig:function(e,t,n){e.isDivider(t)?n.divider=!0:(me.superClass.updateRenderConfig.apply(this,arguments),this._updateMenuRenderConfig(e,t,n))},_updateMenuRenderConfig:function(e,t,n){var r=ve.isRootMenu(t);n.root_menu=r,!0===this.getRenderConfig("has_children")&&(n.pop_direction=ve.getPopDirection(e,t),r&&(n.expand_icon_visible=!0===e.getDataViewProperty(t,"expand_icon_visible","root_expand_icon_visible")))},updateRenderer:function(e,t,n){var r=!0===this.getRenderConfig("divider");Rt(this._renderer,"divider",r),r||(me.superClass.updateRenderer.apply(this,arguments),wt(this._renderer,"down_right down_left up_right up_left right_down right_up left_down left_up"),(r=this.getRenderConfig("pop_direction"))&&xt(this._renderer,r),Rt(this._renderer,!0===this.getRenderConfig("root_menu")&&!0===this.getRenderConfig("expand_icon_visible")))},_getExpandTemplate:function(){var e,t,n=!0===this.getRenderConfig("expanded");return!0===this.getRenderConfig("root_menu")?(t=n?this.getViewRenderConfig("root_expand_expanded_icon_template"):this.getViewRenderConfig("root_expand_collapsed_icon_template"))||(e=this.getRenderConfig("pop_direction"))&&(t=this.getViewRenderConfig("expand_"+e.split("_")[0]+"_icon_template")):t=(t=n?this.getViewRenderConfig("expand_expanded_icon_template"):this.getViewRenderConfig("expand_collapsed_icon_template"))||this.getViewRenderConfig("expand_right_icon_template"),t}});var be=function(){if(!(this instanceof be))return ut.createInstance(be,arguments);var e=arguments[0];if(Lt.isElement(e))return k.parseView("zw-menu",e);be.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-menu"),this._ToggleModeClass(),this.addController(new Ce)};_t(be,z,lt({__className_:"Menu",___zdefaults_:{selectable:!1,expand_on_click:!1,accordion:!0,hoverable:!0,three_states_check:!1,check_on_click:!0,hover_delay:200,mode:"horizontal",direction:null,root_expand_icon_visible:!1,root_expand_expanded_icon_template:null,root_expand_collapsed_icon_template:null,expand_icon_visible:!0,expand_expanded_icon_template:null,expand_collapsed_icon_template:null,expand_up_icon_template:d,expand_down_icon_template:u,expand_left_icon_template:c,expand_right_icon_template:h,open_on_hover:!1,close_on_click:!0},_displayToResize:function(){be.superClass._displayToResize.apply(this,arguments);var e=this.getRoot().parentNode;e&&kt(e,"overflow","visible")},_onViewChange:function(e,t,n){be.superClass._onViewChange.apply(this,arguments),this._doMenuViewUpdate(e)},_doMenuViewUpdate:function(e,t,n){"mode"===e&&this._ToggleModeClass()},_ToggleModeClass:function(){Rt(this.getRoot(),"horizontal",!this._isVertical()),Rt(this.getRoot(),"vertical",this._isVertical())},_isVertical:function(){return"vertical"===this.getProperty("mode")},_onExpandChange:function(){be.superClass._onExpandChange.apply(this,arguments),this._hasExpanded()&&this.getRoot().focus({preventScroll:!0})},_setHoverData:function(){var e=this._hoverData;be.superClass._setHoverData.apply(this,arguments);var t=this._hoverData;e!==t&&this._handleExpandByHover(e,t)},_handleExpandByHover:function(e,t){var n,r;t?(n=ve.isRootMenu(t),r=this._hasExpanded(),e&&this.isExpanded(e)&&!mn.isDescendantOf(t,e)&&(!n||!ve.isRootMenu(e)||this.isExpandable(t)&&this._hasDescendantVisible(t)||!1!==this.getProperty("open_on_hover"))&&this.collapse(e),n&&!r&&!1===this.getProperty("open_on_hover")||this._expandByHover(t)):e&&this.isExpanded(e)&&(ve.isRootMenu(e)&&!1===this.getProperty("open_on_hover")||this.collapse(e))},_expandByHover:function(e){var t;this.isExpandable(e)&&this._hasDescendantVisible(e)&&(t=this.getProperty("hover_delay"),!ve.isRootMenu(e)&&0<t?ft(function(){this._hoverData&&this.expand(this._hoverData)},t,this):this.expand(e))},_onDataClick:function(e,t){ve.isRootMenu(e)?this._isExpandable(e)?this.toggleExpand(e):this.collapseAll():!1===this.getProperty("close_on_click")||this.hasChildrenVisible(e)||this.collapseAll(),this.hasChildrenVisible(e)||this._onMenuItemClick(e,t),be.superClass._onDataClick.apply(this,arguments)},_onMenuItemClick:function(e,t){this._callOn("onMenuItemClick","on.menu.item.click",{data:e,event:t},[e,t])},onMenuItemClick:function(e,t){this.addListener("on.menu.item.click",e,t)},_hasExpanded:function(){return 0<this._expandProvider.size()},getDataRendererClass:function(e){return me},isDivider:function(e){return!0===e.getProperty("divider")}},{_isAccordion:function(){return!0},_isDisabled:function(e){return this.isDivider(e)||this.isDisabled(e)},makeVisible:function(){}}));var xe={_CachedPopUpViewMap:{},addCacheView:function(e){var t=e.getClassName(),n=xe._CachedPopUpViewMap[t];n||(n=[],xe._CachedPopUpViewMap[t]=n),n.push(e)},removeCacheView:function(e){var t=e.getClassName(),t=xe._CachedPopUpViewMap[t];t&&ot(t,e)},closeAll:function(e){nt([],xe._CachedPopUpViewMap[e]).forEach(function(e){e.close()})},z_index:1e4,open:function(e,t){xe.addCacheView(e),this.completeAnimations(e);var n=e.getRoot();e._beforeOpen();var r=At(n,"opacity");kt(n,"opacity",0),kt(n,"left","-10100px"),xe.resetStaticPosition(t),t.appendChild(n),gt(function(){xe.startAnimations(e),kt(n,"opacity",r),"-10100px"===At(n,"left")&&St(n,"left"),e._onOpen()})},_getAnimationEle:function(e){var t=e._bodyDiv;return t&&t.parentNode?e.getRoot():e._getContentEle()},completeAnimations:function(e){D(xe._getAnimationEle(e)),D(e._maskDiv)},startAnimations:function(t,n){xe._startMaskAnimations(t,n);var e,r,i=xe._getAnimationEle(t);i&&(e=!0===n?t.getProperty("close_animation"):t.getProperty("open_animation"),(r=t.getRoot()).scrollLeft=0,r.scrollTop=0,R(i,e,function(){var e;!0===n&&(!0!==t.getProperty("release_on_close")||(e=t._currentContentObj)&&r.contains(e.contentEle)&&g.releaseContent(e),zt(r))}))},_startMaskAnimations:function(e,t){var n=e._maskDiv;n&&(e=!0===t?e.getProperty("mask_close_animation"):e.getProperty("mask_open_animation"),R(n,e,function(){!0===t&&zt(n)}))},isOpen:function(e){return e&&e.getRoot().parentNode&&Dt(e.getRoot(),"open")},close:function(e){var t=e.beforeClose();!1!==t&&(s.event&&e instanceof Ne&&s.event.stopImmediatePropagation(),et(t)?t(function(){xe._doClose(e)}):xe._doClose(e))},_doClose:function(e){xe.removeCacheView(e),this.completeAnimations(e),xe.startAnimations(e,!0),e._beforeClose(),e._onClose(),e._afterClose()},setPosition:function(n,r){St(n,"left"),["left","right","top","bottom"].forEach(function(e){var t=r[e];null!=t?kt(n,e,t+"px"):St(n,e)})},resetStaticPosition:function(e){"static"===At(e,"position")&&kt(e,"position","relative")},addDismissListener:function(e,t,n){e&&mt(Nt("data-dismiss",n),e).forEach(function(e){Gt(e,"click",t.close,t)})},removeDismissListener:function(e,t,n){e&&mt(Nt("data-dismiss",n),e).forEach(function(e){jt(e,"click",t.close,t)})}},we={DIRECTION_CLASS_MAP:{right:"to-right",right_down:"to-right-down",right_up:"to-right-up",left:"to-left",left_down:"to-left-down",left_up:"to-left-up",up:"to-up",up_right:"to-up-right",up_left:"to-up-left",down:"to-down",down_right:"to-down-right",down_left:"to-down-left"},POSITION_CLASS_MAP:{top_right:"top-right",top_left:"top-left",bottom_right:"bottom-right",bottom_left:"bottom-left",center:"center"},POSITION_DIRECTION_MAP:{top_left:"down",top_right:"down",bottom_left:"up",bottom_right:"up"},setDirectionClass:function(e,t,n){wt(e,we.ALL_DIRECTION_CLASS),xt(e,we.DIRECTION_CLASS_MAP[t]||n)},setPositionClass:function(e,t,n){wt(e,we.ALL_POSITION_CLASS),xt(e,we.POSITION_CLASS_MAP[t]||n)},getScreenCenterDirection:function(e){var t,n;n=Ft.isPointerEvent(e)?(t=(n=Et.getEventWindowOffset(e)).x,n.y):Pe.isRect(e)?(t=e.x+e.width/2,e.y+e.height/2):(t=(r=e.getBoundingClientRect()).left+r.width/2,r.top+r.height/2);var e=Et.getWindowSize(),r=e.width,e=e.height;return t<r/3?n<e/3?"right_down":2*e/3<n?"right_up":"right":2*r/3<t?n<e/3?"left_down":2*e/3<n?"left_up":"left":!(n<e/3)&&2*e/3<n?"up":"down"},getStackPosition:function(e,t,n,r,i,a,o){switch(r){case"top_left":return we._getTopLeftStackPosition(e,t,n,i,a,o);case"bottom_left":return we._getBottomLeftStackPosition(e,t,n,i,a,o);case"bottom_right":return we._getBottomRightStackPosition(e,t,n,i,a,o);default:return we._getTopRightStackPosition(e,t,n,i,a,o)}},_getTopRightStackPosition:function(e,t,n,r,i,a){r=we.getPositionDirection("top_right",r);var o=we.DIRECTION_CLASS_MAP[r],o=n?mt("."+e+".top-right."+o,n):mt("."+e+".top-right."+o),o=o[o.length-1];if(!o)return{top:i,right:i};var s,l,c=t.offsetWidth,h=t.offsetHeight,d=0|We(At(o,"top")),u=0|We(At(o,"right")),_=o.offsetWidth,p=o.offsetHeight;switch(r){case"left":s=d,l=u+_+a;break;case"right":s=d,l=u-a-c;break;case"up":s=d-a-h,l=i;break;default:s=d+p+a,l=i}return{top:s,right:l}},_getBottomRightStackPosition:function(e,t,n,r,i,a){r=we.getPositionDirection("bottom_right",r);var o=we.DIRECTION_CLASS_MAP[r],o=n?mt("."+e+".bottom-right."+o,n):mt("."+e+".bottom-right."+o),o=o[o.length-1];if(!o)return{bottom:i,right:i};var s,l,c=t.offsetWidth,h=t.offsetHeight,d=0|We(At(o,"bottom")),u=0|We(At(o,"right")),_=o.offsetWidth,p=o.offsetHeight;switch(r){case"left":s=d,l=u+_+a;break;case"right":s=d,l=u-a-c;break;case"down":s=d-a-h,l=i;break;default:s=d+p+a,l=i}return{bottom:s,right:l}},_getTopLeftStackPosition:function(e,t,n,r,i,a){r=we.getPositionDirection("top_left",r);var o=we.DIRECTION_CLASS_MAP[r],o=n?mt("."+e+".top-left."+o,n):mt("."+e+".top-left."+o),o=o[o.length-1];if(!o)return{top:i,left:i};var s,l,c=t.offsetWidth,h=t.offsetHeight,d=0|We(At(o,"top")),u=0|We(At(o,"left")),_=o.offsetWidth,p=o.offsetHeight;switch(r){case"left":s=d,l=u-c-a;break;case"right":s=d,l=u+_+a;break;case"up":s=d-a-h,l=i;break;default:s=d+p+a,l=i}return{top:s,left:l}},_getBottomLeftStackPosition:function(e,t,n,r,i,a){r=we.getPositionDirection("bottom_left",r);var o=we.DIRECTION_CLASS_MAP[r],o=n?mt("."+e+".bottom-left."+o,n):mt("."+e+".bottom-left."+o),o=o[o.length-1];if(!o)return{bottom:i,left:i};var s,l,c=t.offsetWidth,h=t.offsetHeight,d=0|We(At(o,"bottom")),u=0|We(At(o,"left")),_=o.offsetWidth,p=o.offsetHeight;switch(r){case"left":s=d,l=u-c-a;break;case"right":s=d,l=u+a+_;break;case"down":s=d-a-h,l=i;break;default:s=d+p+a,l=i}return{bottom:s,left:l}},getPositionDirection:function(e,t){return t||we.POSITION_DIRECTION_MAP[e]||"down"}};we.ALL_DIRECTION_CLASS=dt(we.DIRECTION_CLASS_MAP).join(" "),we.ALL_POSITION_CLASS=dt(we.POSITION_CLASS_MAP).join(" ");var Pe={isRect:function(e){return!!Qe(e)&&(e.hasOwnProperty("x")&&e.hasOwnProperty("y")&&e.hasOwnProperty("width")&&e.hasOwnProperty("height"))},hostPopup:function(e,t,n,r){r=lt({},g.getLabelContent(r));var i=g.getContentElement(r.content);i&&!r.hasOwnProperty("release_on_close")&&(r.release_on_close=!0);var a=new e(r);return gt(function(){a.open(n)}),i&&(xe.addDismissListener(i,a,t),a._afterClose=function(){xe.removeDismissListener(i,a,t)}),a},open:function(e,t,n,r,i){"screen_center"===r&&(r=we.getScreenCenterDirection(n)),we.setDirectionClass(t,r,"to-top");var a=He.body;xe.open(e,a),Pe._positionOnHost(a,t,n,r,i)},_positionOnHost:function(e,t,n,r,i){var a,o,s,l,c=Ft.isPointerEvent(n)?(a=Et.getEventPageOffset(n),o=0):Pe.isRect(n)?((a=Et.getWindowPageOffset()).x+=n.x,a.y+=n.y,o=n.width,n.height):(a=Et.getElementPageOffset(n),o=n.offsetWidth,n.offsetHeight),h=a.x,d=a.y,u=t.offsetWidth,_=t.offsetHeight,p=0,f=0,g=Qe(i),f=g?(p=0|i.x,0|i.y):p=0|i;switch(r){case"right":l=d+c/2-_/2,s=h+o,g||(f=0);break;case"right_down":l=d,s=h+o,g||(f=0);break;case"right_up":l=d+c-_,s=h+o,g||(f=0);break;case"left":l=d+c/2-_/2,s=h-u,g||(f=0,p=-p);break;case"left_down":l=d,s=h-u,g||(f=0,p=-p);break;case"left_up":l=d+c-_,s=h-u,g||(f=0,p=-p);break;case"up_right":l=d-_,s=h,g||(p=0,f=-f);break;case"up_left":l=d-_,s=h+o-u,g||(p=0,f=-f);break;case"down":l=d+c,s=h+o/2-u/2,g||(p=0);break;case"down_right":l=d+c,s=h,g||(p=0);break;case"down_left":l=d+c,s=h+o-u,g||(p=0);break;default:l=d-_,s=h+o/2-u/2,g||(p=0,f=-f)}e=Et.getElementPageOffset(e);kt(t,"left",s+p-e.x+"px"),kt(t,"top",l+f-e.y+"px")}},Re=function(){Re.superClass.constructor.apply(this,arguments)};_t(Re,In,{add:function(e){Re.superClass.add.apply(this,arguments),Gt(e._closeWrapper,"click",this.handleCloseClick,this)},remove:function(){jt(this._view._closeWrapper,"click",this.handleCloseClick,this),Re.superClass.remove.apply(this,arguments)},handleCloseClick:function(e){e.stopPropagation(),this.getView().close()},getViewDefaultTypes:function(){return!0===this.getView().getProperty("close_on_press_escape")?["click","keydown"]:["click"]},handle_keydown:function(e,t){xe.isOpen(t)&&27===e.keyCode&&!0===t.getProperty("close_on_press_escape")&&t.close()},handle_click:function(e,t){xe.isOpen(t)&&(!0===t.getProperty("close_on_click")&&(e.stopPropagation(),t.close()),It(e.target)||e.stopPropagation())},getWindowDefaultTypes:function(){var e=[];return!0===this.getView().getProperty("close_on_click_outside")&&e.push("click"),!0===this.getView().getProperty("close_on_window_blur")&&e.push("blur"),e},handle_window_click:function(e,t){if(xe.isOpen(t)&&!0===t.getProperty("close_on_click_outside")){var n=t.getRoot();if(!Ct(".z-widget.popup.open",n)){e=e.target;if(!n.contains(e)||e===t._maskDiv){e=e.closest(".z-widget.popup.open");if(e&&e!==n){if(!e.contains(n))return;e=mt(".z-widget.popup.open",e);if(e[e.length-1]!==n)return}t.close()}}}},handle_window_blur:function(e,t){xe.isOpen(t)&&"debug"!==s.focus_ui_mode&&t.close()}});var De=function(){this._headerDiv=Ot("div","header "),this._bodyDiv=Ot("div","body"),this._closeWrapper=Ot("span","close"),De.superClass.constructor.apply(this,arguments);var e=this.getRoot();y.addWidgetClass(e),xt(e,"popup"),e.appendChild(this._headerDiv),e.appendChild(this._bodyDiv),this.addController(new Re)};_t(De,Vn,lt({___zdefaults_:{close_icon_visible:!1,close_icon_template:f.remove,close_on_click:!1,mask_visible:!1,release_on_close:!1,close_on_click_outside:!1,close_on_window_blur:!1,close_on_press_escape:!1,auto_focus:!0,open_animation:null,close_animation:null,mask_open_animation:"z-animation-fadeIn",mask_close_animation:"z-animation-fadeOut"},_appendToUpdate:function(){},open:function(){},_beforeOpen:function(){this._initPopUpView()},_onOpen:function(){xt(this.getRoot(),"open"),this._callOn("onOpen","on.open",{type:"open"},[])},onOpen:function(e,t){this.addListener("on.open",e,t)},close:function(){xe.close(this)},beforeClose:function(){},_beforeClose:function(){wt(this.getRoot(),"open")},_onClose:function(){this._callOn("onClose","on.close",{type:"close"},[])},_afterClose:function(){},onClose:function(e,t){this.addListener("on.close",e,t)},isOpen:function(){return xe.isOpen(this)},_getInsideRoot:function(){return this.getRoot()},getContentContainer:function(){return this._bodyDiv}},{_initPopUpView:function(){this._initPopUpTitle(),this._initPopUpMask(),this._initPopUpCloseIcon(),this._setPopUpContent()},_initPopUpTitle:function(){var e=this.getProperty("title");this._headerDiv.innerHTML=null==e?"":e},_initPopUpMask:function(){var e;!0===this.getProperty("mask_visible")?(this._maskDiv||(this._maskDiv=Ot("div","mask")),(e=this.getRoot()).insertBefore(this._maskDiv,e.firstChild)):this._maskDiv&&zt(this._maskDiv)},_initPopUpCloseIcon:function(){!0===this.getProperty("close_icon_visible")?(this._closeWrapper.innerHTML=this.getProperty("close_icon_template"),this.getRoot().appendChild(this._closeWrapper)):zt(this._closeWrapper)},_setPopUpContent:function(){var e,t=g.getContentObject(this.getProperty("content"));t&&(this.setCurrentContent(t,!0),e=this.getRoot(),(t=at(mt("[autofocus]",e),function(e){return!1===e.disabled}))?Ue.dom.focus(t,{preventScroll:!0}):!0===this.getProperty("auto_focus")&&Ue.dom.focus(e,{preventScroll:!0}))},_getContentEle:function(){return this._currentContentObj?this._currentContentObj.contentEle:null}},i()));var ke=function(){ke.superClass.constructor.apply(this,arguments);var e=this.getRoot();this._arrowDiv=Ot("div","arrow"),e.insertBefore(this._arrowDiv,e.firstElementChild)};_t(ke,De,{___zdefaults_:{delay:0,direction:"right",offset:2,close_on_click_outside:!0,close_on_window_blur:!0,auto_focus:!1,open_animation:"z-animation-fadeIn",close_animation:"z-animation-fadeOut"},open:function(e){var t,n,r,i;this._cancelLater(),(e=!Ft.isPointerEvent(e)&&!Pe.isRect(e)?bt(e):e)&&(t=this.getRoot(),n=this.getProperty("delay"),Qe(n)?n=0|n.open:n|=0,r=this.getProperty("direction"),i=this.getProperty("offset"),0<n?this._laterID=ft(function(){Pe.open(this,t,e,r,i)},n,this):Pe.open(this,t,e,r,i))},_onOpen:function(){this._laterID=null,ke.superClass._onOpen.apply(this,arguments)},close:function(){this._cancelLater();var e=this.getProperty("delay");Qe(e)?e=0|e.close:e|=0,0<e?this._laterID=ft(function(){xe.close(this)},e,this):xe.close(this)},_onClose:function(){this._laterID=null,ke.superClass._onClose.apply(this,arguments)},_cancelLater:function(){this._laterID&&(pt.cancelCallLater(this._laterID),this._laterID=null)}});var Ae={TRIGGER_EVENT:{hover:{open:"mouseenter",close:"mouseleave"},focus:{open:"focus",close:"blur"},click:{open:"click",close:"click"}},getTriggerEvent:function(e,t){return Ae.TRIGGER_EVENT[e]||Ae.TRIGGER_EVENT[t]},clearToggleTrigger:function(e,t){Ae._removeToggleTrigger(e,t),Ae._removeToggleTrigger(e,t,"close")},_removeToggleTrigger:function(e,t,n){e="_$z_toggle_"+e;n&&(e+="_"+n);n=t[e];n&&(jt(t,n.trigger,n.listener),delete t[e])},onTrigger:function(e,t,n,r,i){Gt(t,n,r);e="_$z_toggle_"+e;i&&(e+="_"+i),t[e]={trigger:n,listener:r}},getToggleItems:function(e,t){var n;if(0<t.length){if(!(n=Ct(t[0])))return}else n=He.body;t=mt(Nt("data-toggle",e="zw-"+e),n);return n.getAttribute("data-toggle")===e&&t.unshift(n),t}},Se={tooltip:function(e,t){return Pe.hostPopup(Te,"tooltip",e,t)},close:function(){xe.closeAll("Tooltip")},tooltipOn:function(e,t,n){(e=bt(e))&&Se._tooltipOn(e,t,n)},toggleInit:function(e){Ae.getToggleItems("tooltip",arguments).forEach(function(e){Se._tooltipOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_tooltipOn:function(e,t,n){Ae.clearToggleTrigger("tooltip",e);var r,t=Ae.getTriggerEvent(t,"hover");Ae.onTrigger("tooltip",e,t.open,function(){xe.isOpen(r)||(r=Se._openTooltip(e,r))}),!1!==n&&Ae.onTrigger("tooltip",e,t.close,function(){r&&r.close()},"close")},_openTooltip:function(e,t){var n=Se._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new Te).set(n),gt(function(){t.open(e)}),r&&xe.addDismissListener(g.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t,n;return e.hasAttribute("data-content")?t=e.getAttribute("data-content"):(t=e.getAttribute("title"))?(e._tooltip_title=t,e.removeAttribute("title")):t=e._tooltip_title,t?(e.hasAttribute("data-open-delay")&&(n={open:0|e.getAttribute("data-open-delay")}),e.hasAttribute("data-close-delay")&&(n?n.close=0|e.getAttribute("data-close-delay"):n={open:0|e.getAttribute("data-close-delay")}),n=n||0|e.getAttribute("data-delay"),{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",delay:n,offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click")}):null}},Te=function(){if(!(this instanceof Te))return ut.createInstance(Te,arguments);Te.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-tooltip")};_t(Te,ke,{__className_:"Tooltip"});var Le={popover:function(e,t){return Pe.hostPopup(Ee,"popover",e,t)},close:function(){xe.closeAll("Popover")},popoverOn:function(e,t,n){(e=bt(e))&&Le._popoverOn(e,t,n)},toggleInit:function(e){Ae.getToggleItems("popover",arguments).forEach(function(e){Le._popoverOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_popoverOn:function(e,t,n){Ae.clearToggleTrigger("popover",e);var r,t=Ae.getTriggerEvent(t,"click");Ae.onTrigger("popover",e,t.open,function(){xe.isOpen(r)||(r=Le._openPopover(e,r))}),!1!==n&&Ae.onTrigger("popover",e,t.close,function(){xe.isOpen(r)&&r.close()},"close")},_openPopover:function(e,t){var n=Le._getConfig(e);if(!n)return t;var r=null==t;return(t=t||new Ee).set(n),gt(function(){t.open(e)}),r&&xe.addDismissListener(g.getContentElement(t.get("content")),t,"popover"),t},_getConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,direction:e.getAttribute("data-direction")||"right",offset:0|e.getAttribute("data-offset"),class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}},Ee=function(){if(!(this instanceof Ee))return ut.createInstance(Ee,arguments);Ee.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-popover")};_t(Ee,ke,{__className_:"Popover"});var Ve={loading:function(e,t,n){if(t=bt(t)||He.body,!1!==e){var r=t._z_loader||new Oe;return r.set(lt({},g.getLabelContent(e),n)),(t._z_loader=r).open(t),r}t._z_loader?(t._z_loader.close(),delete t._z_loader):Ve._clearTargetLoader(t)},_clearTargetLoader:function(e){vt.querySelectorChildren(".z-loader",e).forEach(function(e){zt(e)})}},Oe=function(){if(!(this instanceof Oe))return ut.createInstance(Oe,arguments);this._loadindDiv=Ot("div","loading"),Oe.superClass.constructor.apply(this,arguments),this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"),this._bodyDiv.appendChild(this._loadindDiv),xt(this.getRoot(),"z-loader")};_t(Oe,De,{__className_:"Loader",___zdefaults_:{loading_icon_template:_,mask_visible:!0},_onViewChange:function(e,t,n){Oe.superClass._onViewChange.apply(this,arguments),"loading_icon_template"===e&&(this._loadindDiv.innerHTML=this.getProperty("loading_icon_template"))},open:function(e){e=bt(e)||He.body;var t=this.getRoot();e.lastElementChild!==t?xe.open(this,e):this._setPopUpContent()}});var ze={notify:function(e,t){if(!1!==e){Qe(t)&&(e=ze._getTypeLabel(e,t.type));e=new Me(lt({},t,g.getLabelContent(e)));return e.open(),e}xe.closeAll("Notification")},_getTypeLabel:function(e,t){if(e=null==e?"":e+"",t){var n=Ot("div","ntype "+t),t=f["notify_"+t]||"";return n.innerHTML=t?"<span class='icon'>"+t+"</span> <span>"+e+"</span>":e,n.outerHTML}return e}},Me=function(){if(!(this instanceof Me))return ut.createInstance(Me,arguments);Me.superClass.constructor.apply(this,arguments),xt(this.getRoot(),"z-notification")};_t(Me,De,{__className_:"Notification",___zdefaults_:{duration:0,type:"",position:"top_right",direction:null,offset:10,gap:6,close_on_click:!0,close_icon_visible:!0,auto_focus:!1},open:function(){var e=this.getRoot(),t=He.body,n=this.getProperty("position"),r=this.getProperty("direction"),i=0|this.getProperty("offset"),a=0|this.getProperty("gap");xe.open(this,t);a=we.getStackPosition("z-notification",e,t,n,r,i,a);xe.setPosition(e,a);r=we.getPositionDirection(n,r);we.setPositionClass(e,n,"top-right"),we.setDirectionClass(e,r,"to-down");r=0|this.getProperty("duration");0<r&&(this._laterID=ft(this.close,r,this))},_onClose:function(){this._laterID=null,Me.superClass._onClose.apply(this,arguments)}});var Be={modal:function(e,t,n){if(e=bt(e)){if(!1!==t)return Be._openModal(e,t,n);n=e._$z_modal;n&&Be._closeModal(e,n)}},close:function(e){var t;!(e=bt(e))||(t=e._$z_modal)&&Be._closeModal(e,t)},_openModal:function(e,t,n){var r=e._$z_modal||new Ne,i={content:e};return t&&ct(t,function(e,t){et(t)?r[e]=t:i[e]=t}),r.set(i),r.open(n),e._$z_modal||(xe.addDismissListener(e,r,"modal"),e._$z_modal=r),r},_closeModal:function(e,t){t.close(),xe.removeDismissListener(e,t,"modal"),delete e._$z_modal},modalOn:function(e,t,n){(e=bt(e))&&Be._modalOn(e,t,n)},toggleInit:function(e){Ae.getToggleItems("modal",arguments).forEach(function(e){Be._modalOn(e,e.getAttribute("data-trigger"),"false"!==e.getAttribute("data-auto-close"))})},_modalOn:function(e,t,n){Ae.clearToggleTrigger("modal",e);var r,t=Ae.getTriggerEvent(t,"click");Ae.onTrigger("modal",e,t.open,function(){xe.isOpen(r)||(r=Be._openHostModal(r,e))}),!1!==n&&Ae.onTrigger("modal",e,t.close,function(){xe.isOpen(r)&&r.close()},"close")},_openHostModal:function(e,t){var n=Be._getModalHostConfig(t);if(!n)return e;t=null==e;return(e=e||new Ne).set(n),gt(function(){e.open()}),t&&xe.addDismissListener(g.getContentElement(e.get("content")),e,"modal"),e},_getModalHostConfig:function(e){var t=e.getAttribute("data-content");return t?{title:e.getAttribute("data-title"),content:t,class:e.getAttribute("data-class"),close_on_click:"true"===e.getAttribute("data-close-on-click"),close_on_click_outside:"false"!==e.getAttribute("data-close-on-click-outside"),close_icon_visible:"true"===e.getAttribute("data-close-icon-visible")}:null}},Ie={alert:function(e,t,n,r){return Ie.box("alert",e,t,n,r)},confirm:function(e,t,n,r){return Ie.box("confirm",e,t,n,r)},prompt:function(e,t,n,r){return Ie.box("prompt",e,t,n,r)},box:function(n,r,i,a,o){if(s.Promise)return new Promise(function(e,t){Ie._box(n,r,i,a,o,e,t)});Ie._box(n,r,i,a,o)},_box:function(e,t,n,r,i,a,o){var s,r=r;Qe(r)?(p=r,s=i):et(r)&&(p=i,s=r),p=lt({confirm_class:Je("WIDGET_MESSAGEBOX_CONFIRM_CLASS"),cancel_class:Je("WIDGET_MESSAGEBOX_CANCEL_CLASS"),confirm_text:Je("WIDGET_MESSAGEBOX_CONFIRM_TEXT"),cancel_text:Je("WIDGET_MESSAGEBOX_CANCEL_TEXT")},p);var l=!1;p.hasOwnProperty("promise")?l=p.promise:"confirm"!==e&&"prompt"!==e||null!=s||(l=!0);var c="prompt"===e,h=c&&null,d=!1,u=Ot("div","zw-modal z-message-box "+e+" "+(p.class||"")),r=Ot("div","content");null!=n&&(r.innerHTML+="<div class='header'><span class='title'>"+n+"</span></div>");var _,n=Ot("div","body");n.innerHTML=t,c&&((_=Ot("input",p.input_class||"")).value=null==p.value?"":p.value,Gt(_,"keydown",function(e){13===e.keyCode&&(d=!0,h=Tt.getValue(_),Be.modal(u,!1))}),n.appendChild(_),_.select()),r.appendChild(n);t=Ot("div","footer"),n=Ot("button",p.confirm_class);n.setAttribute("data-dismiss","modal"),n.innerHTML=p.confirm_text,t.appendChild(n),_?(_.setAttribute("autofocus",!0),_.select()):n.setAttribute("autofocus",!0),"alert"!==e&&((e=Ot("button",p.cancel_class)).setAttribute("data-dismiss","modal"),e.innerHTML=p.cancel_text,t.appendChild(e)),r.appendChild(t),u.appendChild(r),Gt(n,"click",function(){d=!0,h=!c||Tt.getValue(_)});var p={close_on_click_outside:!0!==p.close_on_click_outside,close_on_press_escape:!0};(s||a)&&(p.onClose=function(){s&&s(h),!0===l&&a&&(!0===d?a:o)(h)}),Be.modal(u,p)}},Ne=function(){if(!(this instanceof Ne))return ut.createInstance(Ne,arguments);Ne.superClass.constructor.apply(this,arguments),zt(this._bodyDiv),zt(this._headerDiv),xt(this.getRoot(),"z-modal")};_t(Ne,De,{__className_:"Modal",___zdefaults_:{mask_visible:!0,release_on_close:!0,close_on_click_outside:!0,open_animation:"z-animation-fadeInDown",close_animation:"z-animation-fadeOutUp"},_getInsideRoot:function(){return this._getContentEle()},open:function(e){e=bt(e)||He.body,xe.open(this,e)},getContentContainer:function(){return this.getRoot()}}),Ue.widget={ListView:J,Tabs:Z,Tree:Q,Collapse:te,Pagination:se,Grid:pe,TreeGrid:ye,Menu:be,Tooltip:Te,Popover:Ee,Loader:Oe,Notification:Me,tooltip:Se.tooltipOn,popover:Le.popoverOn,modal:Be.modal,alert:Ie.alert,confirm:Ie.confirm,prompt:Ie.prompt,loading:Ve.loading,notify:ze.notify,$interface:{DataContentInterface:a}},Ue.widget.tooltip.init=Se.toggleInit,Ue.widget.tooltip.open=Se.tooltip,Ue.widget.tooltip.close=Se.close,Ue.widget.popover.init=Le.toggleInit,Ue.widget.popover.open=Le.popover,Ue.widget.popover.close=Le.close,Ue.widget.modal.init=Be.toggleInit,Ue.widget.modal.on=Be.modalOn}(s),function(n){Ke({FORM_VALIDATOR_RULES_ATTRIBUTE:"v-rules",FORM_VALIDATOR_ATTRIBUTE_PREFIX:"v-",FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE:"v-message-for",FORM_FORM_MODEL_ATTRIBUTE:"ze-model",FORM_FORM_MODEL_TYPE_ATTRIBUTE:"ze-model-type",FORM_FORM_MODEL_EXCLUDE:"ze-exclude",FORM_FORM_MODEL_FOR:"for-ze-model",FORM_FORM_VISIBLE_ATTRIBUTE:"ze-visible",FORM_FORM_HIDDEN_ATTRIBUTE:"ze-hidden",FORM_FORM_DISABLED_ATTRIBUTE:"ze-disabled",FORM_FORM_EVENT_ATTRIBUTE:"ze-on"});var o=function(e){return"none"!==At(e,"display")&&"hidden"!==At(e,"visibility")&&0<e.offsetWidth&&0<e.offsetHeight},r=function(e,t,n){!0!==t?("none"===At(e,"display")&&(t=n&&"none"!==n?n:e._$z_default_display&&"none"!==e._$z_default_display?e._$z_default_display:"",kt(e,"display",t)),delete e._$z_default_display):("hidden"===At(e,"visibility")&&(n=n&&"hidden"!==n?n:e._$z_default_visibility&&"hidden"!==e._$z_default_visibility?e._$z_default_visibility:"visible",kt(e,"visibility",n)),delete e._$z_default_visibility)},i=function(e,t){!0!==t?(e._$z_default_display=At(e,"display"),kt(e,"display","none")):(e._$z_default_visibility=At(e,"visibility"),kt(e,"visibility","hidden"))},a=function(e){e.setAttribute("disabled","")},s=function(e){e.removeAttribute("disabled")},l={required:"The field is required",integer:"The field must be an integer",numeric:"The field must contain only numbers",alphanumeric:"The field must only contain alpha-numeric characters",alphanumeric_dash:"The field must only contain alpha-numeric characters, underscores and dashes",alphanumeric_space:"The field must only contain alpha-numeric characters and space characters",email:"The field must be a valid email address",ipv4:"The field must be a valid IP",minlength:"The field must be at least %p characters in length",maxlength:"The field must not exceed %p characters in length",greaterthan:"The field must contain a number greater than %p",lessthan:"The field must contain a number less than %p",equal:"The field must be equal to %p",match:"The field must match %p field"},c={appendMessages:function(t,e,n){!1!==n&&(c.clearMessage(t,n),e.forEach(function(e){c._appendMessageItem(t,e,n)}))},appendMessageItem:function(e,t,n){var r;!1!==n&&(r=t.element,c._removeMessageItem(e,r,n),c._appendMessageItem(e,t,n))},_appendMessageItem:function(e,t,n){var r,i,a=t.message,o=t.element,s=n.message_class,t=n.invalid_class,n=n.container;xt(o,t),n?(i=Ne(n,"UL")||Ne(n,"OL")?"li":"span",r=Ot(i,s)):(e=c._getMessageEle(o,e,s))?r=e:i="span",i&&(r=Ot(i,s),o._val_msg_ele=r,n?n.appendChild(r):Ue.dom.insertAfter(r,o)),r.innerHTML=null==a?"":a},removeMessageItem:function(e,t,n){!1!==n&&c._removeMessageItem(e,t,n)},_removeMessageItem:function(e,t,n){var r=n.invalid_class,n=n.message_class;wt(t,r);r=t._val_msg_ele;r?(zt(r),delete t._val_msg_ele):(n=c._getMessageEle(t,e,n))&&Mt(n)},_getMessageEle:function(e,t,n){var r,i=e.getAttribute("name");return(r=i?bt(Nt(Je("FORM_VALIDATOR_MESSAGE_FOR_ATTRIBUTE"),i),t):r)||(e=e.nextElementSibling)&&Dt(e,n)&&(r=e),r},clearMessage:function(t,n){var e;!1!==n&&((e=n.container)&&Mt(e),e="."+n.invalid_class,mt(e,t).forEach(function(e){c._removeMessageItem(t,e,n)}))}};lt(c,{getMessageText:function(e,t,n){if(e.hasOwnProperty("message")?r=e.message:t&&(r=l[t]),r){var r,e=e.name;return(r=r.replace("%f",e||"")).replace("%p",n||"")}return null},registerMessage:function(e,t){Qe(e)?ct(e,function(e,t){c._registerMessage(e,t)}):c._registerMessage(e,t)},_registerMessage:function(e,t){null==t?delete l[e]:l[e]=t}});var h={RULE_REGEX:/^(.+?)\[(.+)\]$/,INTEGER:/^-?\d+$/,NUMERIC:/^-?\d*\.?\d+$/,ALPHANUMERIC:/^[a-zA-Z0-9]+$/,ALPHANUMERIC_DASH:/^[a-zA-Z0-9_\-]+$/,ALPHANUMERIC_SPACE:/^[a-zA-Z0-9 ]+$/,MAIL:/^([a-zA-Z0-9_\.\+-]+)@([\da-zA-Z\.-]+)\.([a-zA-Z\.]{2,6})$/,IPV4:/^(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/},d=function(e,t){var n;return e.hasOwnProperty("element")?n=e.element:e.hasOwnProperty("selector")?n=bt(e.selector,t):e.hasOwnProperty("id")?n=He.getElementById(e.id):e.hasOwnProperty("name")&&(n=bt(Nt("name",e.name),t)),n},u=function(e){var t=[],r=Je("FORM_VALIDATOR_ATTRIBUTE_PREFIX"),i=r.length;return mt("["+Je("FORM_VALIDATOR_RULES_ATTRIBUTE")+"]",e).forEach(function(e){var n={element:e};ct(Ue.dom.getAttributes(e),function(e,t){"name"===e&&(n[e]=t),e.startsWith(r)&&(n[e.substring(i)]=t)}),t.push(n)}),t},_={required:function(e){e=ze(e);return R(e)?!0===e:Ze(e)?""!==e.trim():null!=e},integer:function(e){return h.INTEGER.test(ze(e))},numeric:function(e){return h.NUMERIC.test(ze(e))},alphanumeric:function(e){return h.ALPHANUMERIC.test(ze(e))},alphanumeric_dash:function(e){return h.ALPHANUMERIC_DASH.test(ze(e))},alphanumeric_space:function(e){return h.ALPHANUMERIC_SPACE.test(ze(e))},email:function(e){return h.MAIL.test(ze(e))},ipv4:function(e){return h.IPV4.test(ze(e))},minlength:function(e,t){e=ze(e);return!!Ze(e)&&(e=e.trim()).length>=t},maxlength:function(e,t){e=ze(e);return!!Ze(e)&&(e=e.trim()).length<=t},greaterthan:function(e,t){e=ze(e);return!!_._isNumeric(e)&&+e>+_._getCompareValue(t)},lessthan:function(e,t){e=ze(e);return!!_._isNumeric(e)&&+e<+_._getCompareValue(t)},equal:function(e,t){return ze(e)===_._getCompareValue(t)},match:function(e,t){return ze(e)===_._getCompareValue(t)},_isNumeric:function(e){return h.NUMERIC.test(e)},_getCompareValue:function(e){if(_._isNumeric(e))return e;try{var t=bt(e)||bt(Nt("name",e));if(t)return ze(t)}catch(e){}return e}},p=function(e,t,n){et(t)&&(_[e]=t),n&&c.registerMessage(e,n)},e=function(e){var t=[];Ze(e)?t=e.split("|"):Ye(e)&&(t=e);var i=[];return t.forEach(function(e){var t,n,r;Ze(e)?((r=h.RULE_REGEX.exec(e))?(t=r[1],n=r[2]):t=e,(r=_[t])&&i.push({rule_name:t,method:r,param:n})):et(e)&&i.push({method:e})}),i},f={validate:function(e,t,n){if(!(e=bt(e)))return[];var r=f._getConfig(n);n=r.config;var i,r=r.msg_config,t=nt(u(e),t),t=f.doValidate(e,t);return c.appendMessages(e,t,r),!1===n.autofocus||(i=t[0])&&ft(function(){i.element.focus()},60),t},reset:function(e,t){if(!(e=bt(e)))return[];var n=f._getConfig(t);t=n.config;n=n.msg_config;c.clearMessage(e,n)},_getConfig:function(e){e=lt({invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:!0,autofocus:!0},e);return{config:e,msg_config:!1!==e.message&&{container:bt(e.message_container),invalid_class:e.invalid_class,message_class:e.message_class}}},doValidate:function(n,e,r){var i=[],a=[];return e.forEach(function(e){var t=d(e,n);t&&(!1!==r&&!o(t)||0<=a.indexOf(t)||(e=f.doValidateRulesItem(t,e))&&(i.push(e),a.push(e.element)))}),i},doValidateRulesItem:function(r,i){var a;return rt(e(i.rules),function(e){var t=e.method,n=e.param;if(!1===t(r,n)){e=e.rule_name;return!(a={reason:e,element:r,message:c.getMessageText(i,e,n),rule:i})}}),a}},g=function(e,t,n){if(!(this instanceof g))return ut.createInstance(g,arguments);this._rules=[],g.superClass.constructor.apply(this,[n]),this.set("form",e),t&&this.set("rules",t)};_t(g,K,{___zdefaults_:{invalid_class:"z-validator-invalid",message_class:"z-validator-message",visible_only:!0,autofocus:!0},afterSetProperty:function(e,t,n){switch(g.superClass.afterSetProperty.apply(this,arguments),e){case"rules":this.reset(),this._doRulesUpdate();break;case"form":this.reset(),this._doFormUpdate(t);break;case"message":case"message_container":case"invalid_class":case"message_class":case"visible_only":this.reset()}},_doFormUpdate:function(e){this.reset(),this._setRuleEleChangeListener("off"),this._form=bt(e),this._doRulesUpdate()},update:function(){this._form&&(this.reset(),this._doRulesUpdate())},_doRulesUpdate:function(){this._form&&(this._setRuleEleChangeListener("off"),this._rules=nt(u(this._form),this.get("rules")),this._setRuleEleChangeListener("on"))},_setRuleEleChangeListener:function(n){var r,i;this._form&&(r=this._form,i=[],this._rules.forEach(function(e){var t=d(e,r);t&&(0<=i.indexOf(t)||(i.push(t),e=this._getChangeEvent(t),("on"===n?Gt:jt)(t,e,this._handleChange,this)))},this))},_getChangeEvent:function(e){var t=this.getChangeEvent(e);if(t)return t;if(Lt.isInput(e)){t=e.getAttribute("type");if(null==t||"text"===t||"email"===t||"password"===t||"number"===t||"url"===t)return"input"}return Lt.isTextArea(e)?"input":"change"},getChangeEvent:function(e){},_handleChange:function(e){var t,n,r;this._form&&(t=e.target,n=f.doValidate(this._form,this._rules,this.getProperty("visible_only")),(r=at(n,function(e){return e.element===t}))?c.appendMessageItem(this._form,r,this._getMessageConfig()):c.removeMessageItem(this._form,t,this._getMessageConfig()),this._onValidate(n,r,e))},_onValidate:function(e,t,n){this._callOn("onValidate","on.validate",{errors:e,current:t,event:n},[e,t,n])},_callOn:function(e,t,n,r){var i=this[e];i===this.constructor.prototype[e]?this.dispatchEvent(t,n):i.apply(this,r)},onValidate:function(e,t){this.addListener("on.validate",e,t)},_getMessageConfig:function(){return!1!==this.get("message")&&{container:bt(this.get("message_container")),invalid_class:this.get("invalid_class"),message_class:this.get("message_class")}},reset:function(){this._form&&c.clearMessage(this._form,this._getMessageConfig())},validate:function(){if(this._form){var e,t=f.doValidate(this._form,this._rules,this.getProperty("visible_only"));return c.appendMessages(this._form,t,this._getMessageConfig()),!1===this.get("autofocus")||(e=t[0])&&ft(function(){e.element.focus()},60),t}},registerRule:function(e,t,n){return p(e,t,n)},registerRuleMessage:function(e,t){return c.registerMessage(e,t)}});var y={integer:function(e){return null==e?null:(e=e.trim(),/^-?\d+$/.test(e)?0|e:null)},array:function(e){return null==e?null:it(e.split(","),function(e){return""!==e.trim()})}},v={set:function(e,r){Qe(r)||(r={}),ct(v._queryModelEleMap(e),function(e,t){var n=ht(r,e);null==n&&(n=""),1===t.length?Me(t[0],n):Ye(n)?t.forEach(function(e,t){t=n[t];Me(e,t=null==t?"":t)}):t.forEach(function(e){Me(e,n)})})},get:function(e,r){var i={};return ct(v._queryModelEleMap(e),function(e,t){var n;1===(t=!0===r?it(t,function(e){return!v._isExclude(e)}):t).length?n=v._getEleValue(t[0]):(n=[],t.forEach(function(e){n.push(v._getEleValue(e))})),E(i,e,n)}),i},_isExclude:function(e){var t=Je("FORM_FORM_MODEL_EXCLUDE");return e.hasOwnProperty(t)&&"false"!==e.getAttribute(t)},_queryModelEleMap:function(e){var r=Je("FORM_FORM_MODEL_ATTRIBUTE"),i={};return mt("["+r+"]",e).forEach(function(e){var t,n=e.getAttribute(r).trim();n&&((t=i[n])||(t=[],i[n]=t),t.push(e))}),i},_getEleValue:function(e){var t=ze(e),e=y[e.getAttribute(Je("FORM_FORM_MODEL_TYPE_ATTRIBUTE"))];return t=e?e(t):t},clear:function(e){v.set(e)}},C={updateStatus:function(e,t){C.updateVisible(e,t),C.updateDisable(e,t)},updateVisible:function(e,t){C._doUpdate(e,Je("FORM_FORM_VISIBLE_ATTRIBUTE"),t,function(e,t){(!0===t?r:i)(e)}),C._doUpdate(e,Je("FORM_FORM_HIDDEN_ATTRIBUTE"),t,function(e,t){(!0===t?i:r)(e)})},updateDisable:function(e,t){C._doUpdate(e,Je("FORM_FORM_DISABLED_ATTRIBUTE"),t,function(e,t){(!0===t?a:s)(e)})},_doUpdate:function(e,n,r,i){mt("["+n+"]",e).forEach(function(e){var t=(e.getAttribute(n)||"").trim();t&&i(e,U.exec(t,r))})}},t=function(e,t,n){mt("["+Je("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){Gt(e,"change",t,n)})},m=function(e,t,n){mt("["+Je("FORM_FORM_MODEL_ATTRIBUTE")+"]",e).forEach(function(e){jt(e,"change",t,n)})},b=function(e,t){if(!(this instanceof b))return ut.createInstance(b,arguments);b.superClass.constructor.apply(this,[t]),this.set("form",e),this._doValidateUpdate(),this._updateStatus()};_t(b,K,{___zdefaults_:{validate:!0},afterSetProperty:function(e,t,n){switch(b.superClass.afterSetProperty.apply(this,arguments),e){case"form":this._doFormUpdate(t);break;case"validate":this._doValidateUpdate()}},update:function(){this._form&&(m(this._form,this._handleFormModelElementChange,this),t(this._form,this._handleFormModelElementChange,this),this._updateStatus()),this._validator&&this._validator.update()},_doFormUpdate:function(e){this._form&&(m(this._form,this._handleFormModelElementChange,this),w.removeForListener(this._form)),this._form=bt(e),this._validator&&this._validator.set("form",this._form),this._form&&(t(this._form,this._handleFormModelElementChange,this),w.addForListener(this._form))},_doValidateUpdate:function(){!1!==this.getProperty("validate")?this._validator||(this._validator=g(this._form)):this._validator&&(this._validator.set("form",null),delete this._validator)},_handleFormModelElementChange:function(e){this._updateStatus(),this._callOn("onFormChange","on.form.change",e,[e])},onFormChange:function(e,t){this.addListener("on.form.change",e,t)},_updateStatus:function(e){C.updateStatus(this._form,lt(this._getValue(),e))},_getValue:function(){return this._form?v.get(this._form):{}},setValue:function(e){this._form&&(e=lt({},e),v.set(this._form,e),this._updateStatus(e),this._validator&&this._validator.reset())},getValue:function(e){if(!1===e)return this._getValue();if(!this._form)return null;if(this._validator&&0<this._validator.validate().length)return null;return v.get(this._form)},clearValue:function(){if(!this._form)return null;v.clear(this._form),this._updateStatus(),this._validator&&this._validator.reset()},getValidator:function(){return this._validator}});var x={on:function(e,t){x._each(e,t,!1),x._each(e,t,!0)},off:function(e,t){x._each(e,t,!1)},_each:function(r,e,i){r=r||n;var t,a=Je("FORM_FORM_EVENT_ATTRIBUTE");if(e){if(!(e=Le(e)))return;t=mt("["+a+"]",e)}else t=mt("["+a+"]");t.forEach(function(n){n.getAttribute(a).split(";").forEach(function(e){var t,e=e.trim().split(":");2!==e.length||(t=e[0].trim())&&e[1].split(",").forEach(function(e){(e=e.trim())&&(e=ht(r,e),et(e)&&(!0===i?qt:$t)(n,t,e,r))})})})}},w={addForListener:function(e){mt(Nt(Je("FORM_FORM_MODEL_FOR")),e).forEach(function(e){Gt(e,"click",w._handleForClick)})},removeForListener:function(e){mt(Nt(Je("FORM_FORM_MODEL_FOR")),e).forEach(function(e){jt(e,"click",w._handleForClick)})},_handleForClick:function(e){var t=Je("FORM_FORM_MODEL_FOR"),e=Ft.getEventTarget(e,"["+t+"]"),t=Ct(Nt(Je("FORM_FORM_MODEL_ATTRIBUTE"),e.getAttribute(t)));t&&t.focus()}};Ue.form={Validator:g,Form:b,bindEvent:x.on,unbindEvent:x.off,attrOn:x.on,attrOff:x.off},Ue.form.Validator.validate=f.validate,Ue.form.Validator.reset=f.reset,Ue.form.Validator.registerRule=p,Ue.form.Validator.registerRuleMessage=c.registerMessage}(s),function(e){Ke({GVIEW_NODE_WIDTH:32,GVIEW_NODE_HEIGHT:32,GVIEW_GROUP_WIDTH:36,GVIEW_GROUP_HEIGHT:32,GVIEW_SUBVIEW_WIDTH:60,GVIEW_SUBVIEW_HEIGHT:36});var a={getGroupVisibleNodes:function(t,e){e=it(e.getGroupChildren(),function(e){return d(e)});return t?it(e,function(e){return t._isVisible_(e)}):e},setPosition:function(e,t,n){var r=t.getBounds(e);a.updateChildrenPositionByOffset(e,t,n.x-r.x,n.y-r.y)},updateChildrenPositionByOffset:function(n,e,r,i){e.getGroupChildren().forEach(function(e){var t=e.getBounds(n);e.setPosition({x:t.x+r,y:t.y+i})})}},h={getSubview:function(e){for(var t=e.get("parent");t&&!vn.isSubview(t);)t=t.get("parent");return t},getGroupAncestorArray:function(e){for(var t=[],n=e.get("parent");n;)u(n)&&t.push(n),n=n.get("parent");return t},getSameSubviewAncestorArray:function(e){for(var t=[],n=e.get("parent");n&&!_(n);)t.push(n),n=n.get("parent");return t},getSameSubviewDescendantArray:function(e,t){var e=mn.getAddedDescendantArray(e.getProvider(),t),n=h.getSubview(t);return it(e,function(e){return n===h.getSubview(e)})},moveData:function(n,e,t){var r=[];e.forEach(function(t){var e;d(t)&&!n._isDisabled(t)&&n._isMovable(t)&&(e=h.getSameSubviewAncestorArray(t),at(e,function(e){return-1<t.indexOf(e)})||(u(t)?nt(r,this._getGroupChildren(t,n)):r.push(t)))},this)}},o={getDrawGroupArray:function(e){return it(o._getDrawNodeArray(e),function(e){return u(e)})},getDrawNodeArray:function(e){return it(o._getDrawNodeArray(e),function(e){return d(e)&&!u(e)})},_getDrawNodeArray:function(n){var e=n.getCurrentSubview(),r=e?e.getChildren():n.getRootDataArray(),t=[];return r.sort(function(e,t){return o._indexCompare(n,r,e,t)}),r.forEach(function(e){o._fillIndexArr(n,e,t)}),it(t,function(e){return d(e)})},_fillIndexArr:function(n,e,t){var r;d(e)&&(t.push(e),e.hasChildren()&&((r=e.getChildren()).sort(function(e,t){return o._indexCompare(n,r,e,t)}),r.forEach(function(e){o._fillIndexArr(n,e,t)})))},_indexCompare:function(e,t,n,r){var i=o._getSelectIndex(e,n),e=o._getSelectIndex(e,r);return i===e&&(i=t.indexOf(n),e=t.indexOf(r)),e<i?1:i<e?-1:0},_getSelectIndex:function(t,n){var r=[o._getDataSelectIndex(t,n)];return d(n)&&h.getSameSubviewDescendantArray(t,n).forEach(function(e){r.push(o._getDataSelectIndex(t,n))}),je.apply(null,r)},_getDataSelectIndex:function(e,t){return e.getSelected(!1).indexOf(t)}},b={getNodeViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"node",r)},getLinkViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"link",r)},getGroupViewProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,"group",r)},getDataViewLabelProperty:function(e,t,n,r){return b._getDataViewPrefixProperty(e,t,n,null,r)},getDataViewVisibleLabel:function(e,t){return e?!1!==e.getDataViewProperty(t,"label_visible")?e.getLabel(t):null:t.getProperty("name")},getFont:function(e){return e||yn.getSystemFont()},_getDataViewPrefixProperty:function(e,t,n,r,i){return e?(null==i&&(i=r?r+"_"+n:n),e.getDataViewProperty(t,n,i)):t.getProperty(n)},getVisibleDataBounds:function(t){var n=[];return it(t.getDataArray(!1),function(e){!t._isVisible(e)||(e=e.getBounds(t,!0))&&n.push(e)}),Ce.calcRectsUnion(n)},toDataURL:function(e,t){var n=b.getVisibleDataBounds(e);if(null==n)return null;var r=n.width,i=n.height,a=Ot("canvas");a.setAttribute("width",r+10),a.setAttribute("height",i+10);r=a.getContext("2d"),i=e.getProperty("label_font")||yn.getSystemFont();r.font!==i&&(r.font=i),1!==ee&&r.scale(ee,ee);i=-(n.x-5),n=-(n.y-5);return 0==i&&0==n||r.setTransform(1,0,0,1,i,n),e._drawData(r),a.toDataURL(t||"image/png")}};lt(vn,{isNode:function(e){return vn._isIModelType(e,"Node",ae)},isLink:function(e){return vn._isIModelType(e,"Link",oe)},isGroup:function(e){return vn._isIModelType(e,"Group",se)},isSubview:function(e){return vn._isIModelType(e,"Subview",le)},isLinkSubview:function(e){return vn._isIModelType(e,"LinkSubview",ce)},isGView:function(e){return vn._isIModelType(e,"GView",ie)}});var d=vn.isNode,l=vn.isLink,u=vn.isGroup,_=vn.isSubview,t=vn.isLinkSubview,f={getLoopSibling:function(t,e){var n=e.getProperty("from"),e=it(n.getFromLinks(!1),function(e){return n===e.getProperty("to")});return t?it(e,function(e){return t._isVisible(e)}):e},getSiblingByType:function(e,t,n){return f._getSibling(e,t,n,!0)},getSibling:function(e,t,n){return f._getSibling(e,t,n,!1)},_getSibling:function(t,e,n,r){var i,a,o=f.getFromNodeAgent(t,e),s=f.getToNodeAgent(t,e),l=[];return o&&s&&(i=b.getLinkViewProperty(t,e,"type"),e=f.getNodeAgentLinks(t,o),a=f.getNodeAgentLinks(t,s),e.forEach(function(e){a.indexOf(e)<0||t&&!t._isVisible(e)||!0===n&&f.getFromNodeAgent(t,e)!==o||!0===r&&b.getLinkViewProperty(t,e,"type")!==i||l.push(e)})),l},getNodeAgentLinks:function(t,n){var r=[];return t&&mn.getAddedDescendantArray(t.getProvider(),n).forEach(function(e){!d(e)||0<(e=e.getLinks()).length&&e.forEach(function(e){f.getFromNodeAgent(t,e)!==n&&f.getToNodeAgent(t,e)!==n||r.push(e)})}),it(nt(r,n.getLinks()),function(e,t){return r.indexOf(e)===t})},getFromNodeAgent:function(e,t){if(e){var n=f._getCurrentSubviewAgent(e,t.getProperty("from")),r=f._getCurrentSubviewAgent(e,t.getProperty("to"));return n===r?n:f._getSpanSubviewAgent(e,n,r)}return t.getProperty("from")},getToNodeAgent:function(e,t){if(e){var n=f._getCurrentSubviewAgent(e,t.get("to")),r=f._getCurrentSubviewAgent(e,t.get("from"));return r===n?n:f._getSpanSubviewAgent(e,n,r)}return t.getProperty("to")},_getCurrentSubviewAgent:function(e,t){if(!t)return null;for(var n=t.get("parent");u(n);){if(!u(n.get("parent")))return!0===e.isExpanded(n)?t:n;!0!==e.isExpanded(n)&&(t=n),n=n.get("parent")}return d(t)?t:null},_getSpanSubviewAgent:function(e,t,n){if(!t||!n)return null;var r=h.getSubview(t),i=h.getSubview(n);if(r===i)return d(t)?t:null;for(;null!=i&&r!==i;)i=h.getSubview(i);if(r===i)return t;var a=[];a.push(t);for(var o=t.get("parent");d(o)&&!mn.isDescendantOf(n,o);)a.unshift(o),o=o.get("parent");for(var s=a.length,l=0;l<s;l++){var c=a[l];if(u(c)&&!0==!e.isExpanded(c))return c;if(_(c))return c}return t}},r={isPointsNode:function(e){e=e.getType();return"path"===e||"heatmap"===e},getSizeProperty:function(e,t,n){var r="node_"+n;if(e&&e.hasDataViewProperty(t,n,r))return e.getDataViewProperty(t,n,r);if("image"===t.getType()){var i=t.getProperty("image");if(i){i=me.get(i);if(i)return i[n]}}return e?e.getDataViewProperty(t,n,r):t.getProperty(n)},setPosition:function(e,t,n){null!=n&&(r.isPointsNode(t)?r._updateNodePointsByPosition(e,t,n):(t.setProperty("x",n.x),t.setProperty("y",n.y)))},_updateNodePointsByPosition:function(e,t,n){e=t.getBounds(e);r._updateNodePointsByOffset(t,n.x-e.x,n.y-e.y)},_updateNodePointsByOffset:function(e,t,n){var r=[];(e.get("points")||[]).forEach(function(e){r.push(lt(e,{x:e.x+t,y:e.y+n}))}),e.set("points",r)},setSize:function(e,t,n){null!=n&&(t.setProperty("width",n.width),t.setProperty("height",n.height))}},g=function(e,t,n,r,i,a,o){var s,l,r=-(n.indexOf(t)-(n.length/2-.5))*r;return e.same_direction?(s=e.from,l=e.to):(s=e.to,l=e.from,r=-r),e=_e(s,l),0<o?[s,ye.calcRotatedPoint(s,{x:s.x+o,y:s.y+r},e),ye.calcRotatedPoint(l,{x:l.x-o,y:l.y+r},e),l]:[ye.calcRotatedPoint(s,{x:s.x,y:s.y+r},e),ye.calcRotatedPoint(l,{x:l.x,y:l.y+r},e)]},p=function(e,t,n){var r,i=e.x,a=e.y,o=e.width,s=e.height,l=i+o/2,c=a+s/2,h=t.x,d=t.y,u=h+t.width/2,_=d+t.height/2;switch(n="edge_center"===n?45<(t=_e({x:l,y:c},{x:u,y:_}))&&t<135?"bottom":135<=t&&t<=225?"left":225<t&&t<315?"top":"right":n){case"center":r={x:l,y:c};break;case"top":r={x:l,y:a};break;case"right":r={x:i+o,y:c};break;case"bottom":r={x:l,y:a+s};break;case"left":r={x:i,y:c};break;case"v_center":r=c<_?{x:l,y:a+s}:{x:l,y:a};break;case"h_center":r=l<u?{x:i+o,y:c}:{x:i,y:c};break;default:r=ge.calcRectLineIntersection(e,{x:u,y:_},{x:l,y:c},!0)[0]}return r=null==r?{x:l,y:c}:r},y=function(e,t,n,r){t=t.indexOf(e),e=r.x+r.width,r=r.y,t=n+t*n,n=.551915024494*t;return[{x:e-t,y:r,seg:"ct"},{x:e-t,y:r-n},{x:e-n,y:r-t},{x:e,y:r-t,seg:"ct"},{x:e+n,y:r-t},{x:e+t,y:r-n},{x:e+t,y:r,seg:"ct"},{x:e+t,y:r+n},{x:e+n,y:r+t},{x:e,y:r+t}]},v={calcLinkRAPath:function(e,t,n,r,i,a,o){switch(e){case"ra_hv":return v.calcLinkRAHVPath(t,n,r,i,a);case"ra_vh":return v.calcLinkRAVHPath(t,n,r,i,a);case"ra_hvh":return v.calcLinkRAHVHPath(t,n,r,i,a,o);case"ra_vhv":return v.calcLinkRAVHVPath(t,n,r,i,a,o);case"ra_top":return v.calcLinkRATopPath(t,n,r,i,a);case"ra_bottom":return v.calcLinkRABottomPath(t,n,r,i,a);case"ra_left":return v.calcLinkRALeftPath(t,n,r,i,a);case"ra_right":return v.calcLinkRARightPath(t,n,r,i,a)}},calcLinkRABottomPath:function(e,t,n,r,i){var a,o,s,l=t.indexOf(e),c=t.length/2,h=r.y+r.height,d=i.y+i.height,e=r.x+r.width/2,t=i.x+i.width/2,r=je(2*n,6),i=l*n,i=je(h,d)+r+i,n=(c-.5)*n-l*n,i=e<t?(o={x:(a={x:e+n,y:h}).x,y:i},{x:(s={x:t-n,y:d}).x,y:i}):(o={x:(a={x:e-n,y:h}).x,y:i},{x:(s={x:t+n,y:d}).x,y:i});return[a,o,i,s]},calcLinkRAHVPath:function(e,t,n,r,i){var a,o,s=t.indexOf(e),l=t.length/2,c=r.y+r.height/2,h=i.y+i.height/2,d=r.x+r.width/2,u=i.x+i.width/2,e=r.x,t=r.x+r.width,r=i.y,i=i.y+i.height,n=(l-.5)*n-s*n,n=d<u?{x:(o=c<h?{x:u+n,y:r}:{x:u-n,y:i}).x,y:(a={x:t,y:c-n}).y}:{x:(o=c<h?{x:u-n,y:r}:{x:u+n,y:i}).x,y:(a={x:e,y:c-n}).y};return[a,n,o]},calcLinkRAHVHPath:function(e,t,n,r,i,a){var o,s=t.indexOf(e),l=t.length,c=l/2,h=r.y+r.height/2,d=i.y+i.height/2,u=r.x+r.width/2,_=i.x+i.width/2,p=r.x,f=r.x+r.width,g=i.x,e=i.x+i.width,t=(c-.5)*n-s*n,r=(c-.5)*n*2,i=u<_?(o={x:f,y:h-t},{x:g,y:d-t}):(o={x:p,y:h-t},{x:e,y:d-t}),c=Ge(o.x-i.x),f=a.from_corner_distance,g=a.to_corner_distance,p=-1,e=-1;0<g&&g<c&&(e=g<1?c*g:g);var y,v,C,a=!0,g=!0;return-1!==(p=0<f&&f<c?f<1?c*f:f:p)&&-1!==e?p+e<c-r&&(g=a=!1):(-1!==e&&e<c-r&&(g=!1),-1!==p&&p<c-r&&(a=!1)),!0!==a&&!0!==g||(y=u<_?h<d?(o.x+i.x)/2+t:(o.x+i.x)/2-t:h<d?(o.x+i.x)/2-t:(o.x+i.x)/2+t),!1===a&&(u<_?(v=o.x+p,v+=h<d?(l-s-1)*n:s*n):(v=o.x-p,v-=h<d?(l-s-1)*n:s*n)),!1===g&&(u<_?(C=i.x-e,C-=h<d?s*n:(l-s-1)*n):(C=i.x+e,C+=h<d?s*n:(l-s-1)*n)),!1===a?!0===g&&(C=v):v=!1===g?C:C=y,[o,{x:v,y:o.y},{x:C,y:i.y},i]},calcLinkRALeftPath:function(e,t,n,r,i){var a,o,s,l=t.indexOf(e),c=t.length/2,h=r.x,d=i.x,e=r.y+r.height/2,t=i.y+i.height/2,r=je(2*n,6),i=l*n,i=qe(h,d)-r-i,n=(c-.5)*n-l*n,n=e<t?(o={x:i,y:(a={x:h,y:e+n}).y},{x:i,y:(s={x:d,y:t-n}).y}):(o={x:i,y:(a={x:h,y:e-n}).y},{x:i,y:(s={x:d,y:t+n}).y});return[a,o,n,s]},calcLinkRARightPath:function(e,t,n,r,i){var a,o,s,l=t.indexOf(e),c=t.length/2,h=r.x+r.width,d=i.x+i.width,e=r.y+r.height/2,t=i.y+i.height/2,r=je(2*n,6),i=l*n,i=je(h,d)+r+i,n=(c-.5)*n-l*n,n=e<t?(o={x:i,y:(a={x:h,y:e+n}).y},{x:i,y:(s={x:d,y:t-n}).y}):(o={x:i,y:(a={x:h,y:e-n}).y},{x:i,y:(s={x:d,y:t+n}).y});return[a,o,n,s]},calcLinkRATopPath:function(e,t,n,r,i){var a,o,s,l=t.indexOf(e),c=t.length/2,h=r.y,d=i.y,e=r.x+r.width/2,t=i.x+i.width/2,r=je(2*n,6),i=l*n,i=qe(h,d)-r-i,n=(c-.5)*n-l*n,i=e<t?(o={x:(a={x:e+n,y:h}).x,y:i},{x:(s={x:t-n,y:d}).x,y:i}):(o={x:(a={x:e-n,y:h}).x,y:i},{x:(s={x:t+n,y:d}).x,y:i});return[a,o,i,s]},calcLinkRAVHPath:function(e,t,n,r,i){var a,o=t.indexOf(e),s=t.length/2,l=r.y+r.height/2,c=i.y+i.height/2,h=r.x+r.width/2,d=i.x+i.width/2,e=r.y,t=r.y+r.height,r=i.x,i=i.x+i.width,n=(s-.5)*n-o*n,n=(c=h<d?l<c?(a={x:h-n,y:t},{x:r,y:c+n}):(a={x:h-n,y:e},{x:r,y:c-n}):l<c?(a={x:h-n,y:t},{x:i,y:c-n}):(a={x:h-n,y:e},{x:i,y:c+n}),{x:a.x,y:c.y});return[a,n,c]},calcLinkRAVHVPath:function(e,t,n,r,i,a){var o,s=t.indexOf(e),l=t.length,c=l/2,h=r.y+r.height/2,d=i.y+i.height/2,u=r.x+r.width/2,_=i.x+i.width/2,p=r.y,f=r.y+r.height,g=i.y,e=i.y+i.height,t=(c-.5)*n-s*n,r=(c-.5)*n*2,i=h<d?(o={x:u-t,y:f},{x:_-t,y:g}):(o={x:u-t,y:p},{x:_-t,y:e}),c=Ge(o.y-i.y),f=a.from_corner_distance,g=a.to_corner_distance,p=-1,e=-1;0<g&&g<c&&(e=g<1?c*g:g);var y,v,C,a=!0,g=!0;return-1!==(p=0<f&&f<c?f<1?c*f:f:p)&&-1!==e?p+e<c-r&&(g=a=!1):(-1!==e&&e<c-r&&(g=!1),-1!==p&&p<c-r&&(a=!1)),!0!==a&&!0!==g||(y=h<d?u<_?(o.y+i.y)/2+t:(o.y+i.y)/2-t:u<_?(o.y+i.y)/2-t:(o.y+i.y)/2+t),!1===a&&(h<d?(v=o.y+p,v+=u<_?(l-s-1)*n:s*n):(v=o.y-p,v-=u<_?(l-s-1)*n:s*n)),!1===g&&(h<d?(C=i.y-e,C-=u<_?s*n:(l-s-1)*n):(C=i.y+e,C+=u<_?s*n:(l-s-1)*n)),!1===a?!0===g&&(C=v):v=!1===g?C:C=y,[o,{x:o.x,y:v},{x:i.x,y:C},i]}},C={calcLinkCurvePath:function(e,t,n,r,i,a,o,s){switch(e){case"quadratic":return C.calcLinkQuadraticPath(t,n,r,i,a,o,s);case"cubic":return C.calcLinkCubicPath(t,n,r,i,a,o,s)}},calcLinkCubicPath:function(e,t,n,r,i,a,o){t=g(e,t,n,r,i,a);if(0===o)return t;n=t[0],r=t[1],i=_e(n,r),a=ue(n,r),t=a*o,o=n.x+a/2,a=ye.calcRotatedPoint(n,{x:o,y:n.y-t},i),i=ye.calcRotatedPoint(n,{x:o,y:n.y+t},i);return n.seg="ct",[n,a,i,r]},calcLinkQuadraticPath:function(e,t,n,r,i,a,o){n=g(e,t,n,r,i,a);if(0===o)return n;r=n[0],i=n[1],a=_e(r,i),n=ue(r,i),o*=n,n=r.x+n/2,a=ye.calcRotatedPoint(r,{x:n,y:r.y+o},a);return r.seg="qt",[r,a,i]}},m={calcArrowRenderProperties:function(e,t,n,r,i,a,o){return 0!==i&&(n=ge.calcOffsetPointOnLine(n,t,i)),m._calcShapeArrow(e,t,n,a,o)||m._calcPathArrow(e,t,n,r,o)},calcArrowSizeLength:function(e,t){return t=Fe(t),e=Fe(e)+2,$e(e*(t*t/32+t/16+1.9))+1},_calcShapeArrow:function(e,t,n,r,i){var a=i*=.8,i=i;if(-1<["rect","circle","roundrect","triangle","pentagon","hexagon","star","parallelogram","cloud","ellipse","diamond"].indexOf(e)){t=_e(t,n);"circle"===e?t=0:"ellipse"!==e&&"diamond"!==e||(a*=1.2);i={x:n.x-a/2,y:n.y-i/2,width:a,height:i};return{type:"shape",shape:e,shape_bounds:i,rotation:t,bounds:Ce.calcRotatedRect(i,t)}}},_calcPathArrow:function(e,t,n,r,i){r=m._calcArrowPoints(e,t,n,i,r,0);if(r)return{type:"path",shape:e,points:r,bounds:ye.calcPointsBounds(r)}},_calcArrowPoints:function(e,t,n,r,i,a){null!=a&&0!==a&&(n=ge.calcOffsetPointOnLine(n,t,a));var o,s=m._calcArrowAllPoints(t,n,r,i);switch(e){case"open_arrow":o=s.slice(0,3);break;case"stealth_arrow":o=s;break;case"arrow":o=s.slice(0,3)}return o},_calcArrowAllPoints:function(e,t,n,r){var i=e.x,a=e.y,o={x:i+ue(e,t),y:a},i=de(r/2),r=n*ne(i),n=n*re(i),i={x:o.x-r,y:o.y-n},n={x:o.x-r,y:o.y+n},a={x:o.x-2*r/3,y:a},t=_e(e,t);return[i=ye.calcRotatedPoint(e,i,t),o=ye.calcRotatedPoint(e,o,t),n=ye.calcRotatedPoint(e,n,t),a=ye.calcRotatedPoint(e,a,t)]}},x={calcGroupBounds:function(e,t,n,r){r=x.calcGroupRenderProperties(e,t,n,r);if(r)return r.bounds_render},calcGroupRenderProperties:function(e,t,n,r){var i,a,o,s,l,c,h=x._calcGroupExpandRenderProps(e,t);if(null==(i=h?h.bounds:i))return R.calcNodeRenderProperties(e,t,r);o=n?i:(a=(o=R.calcNodeBodyBounds(e,t)).width,o=o.height,{x:i.x+i.width/2-a/2,y:i.y+i.height/2-o/2,width:a,height:o}),!0!==r&&(s=R._calcNodeOutlineBounds(e,t,o),(l=w.calcNodeLabelRenderProperties(e,t,o))&&(d=l.bounds),c=R._calcNodeBorderBounds(e,t,o,s));var r=it([o,s,d],function(e){return null!=e}),d=Ce.calcRectsUnion(r),r=0;n||(r=0|b.getNodeViewProperty(e,t,"rotation"));t=Ce.getRectCenter(o);return{is_group:!0,expand_render_props:h,body_bounds:o,body_bounds_render:Ce.calcRotatedRect(o,r,t),outline_bounds:s,outline_bounds_render:Ce.calcRotatedRect(s,r,t),border_bounds:Ce.calcRotatedRect(c,r,t),label_render_props:l,bounds:d,bounds_render:Ce.calcRotatedRect(d,r,t)}},_calcGroupExpandRenderProps:function(e,t){var n=x._calcGroupedChildrenPoints(e,t);if(0===n.length)return null;var r,i=ye.calcPointsBounds(n),a={x:i.x+i.width/2,y:i.y+i.height/2},o="shape";switch(b.getGroupViewProperty(e,t,"expand_shape")){case"rect":l=i;break;case"circle":var s=ue({x:i.x,y:i.y},a),l={x:a.x-s,y:a.y-s,width:2*s,height:2*s};break;case"ellipse":var s=te(2)/2*i.width,c=te(2)/2*i.height;l={x:a.x-s,y:a.y-c,width:2*s,height:2*c};break;case"roundrect":c=b.getGroupViewProperty(e,t,"expand_roundrect_radius");0<c&&c<1&&(c=qe(i.width,i.height)/2*c),l=Ce.createGrowRect(i,c);break;case"parallelogram":o="path",r=ye.calcParallelogramPoints(n,0|b.getGroupViewProperty(e,t,"expand_parallelogram_angle"));break;default:o="path",r=fe.convexHull(n),r=ve.roundPath(r,0|b.getGroupViewProperty(e,t,"expand_padding"),!0)}return{type:o,bounds:l="path"===o?ye.calcPointsBounds(r):l,points:r}},_calcGroupedChildrenPoints:function(t,e){var n=a.getGroupVisibleNodes(t,e),r=b.getGroupViewProperty(t,e,"expand_padding");r|=0;var i=[];return n.forEach(function(e){e=e.getBounds(t,!0);e&&(i.push({x:e.x-r,y:e.y-r}),i.push({x:e.x-r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y+e.height+r}),i.push({x:e.x+e.width+r,y:e.y-r}))}),i}},w={calcNodeLabelRenderProperties:function(e,t,n){var r=w._calcLabelSize(e,t);if(null==r)return null;var i,a,o,s,l=r.width,c=r.height,h=n.x,d=n.y,u=n.width,_=n.height,p=b.getDataViewLabelProperty(e,t,"label_gap"),f=b.getDataViewLabelProperty(e,t,"label_x_offset"),g=b.getDataViewLabelProperty(e,t,"label_y_offset"),n=b.getDataViewLabelProperty(e,t,"label_position"),y=b.getDataViewLabelProperty(e,t,"label_direction"),v=0,C=0;switch(n){case"top":i=h+u/2,a=d,"top"===(y=y||"top")&&(C=-p);break;case"left":i=h,a=d+_/2,"left"===(y=y||"left")&&(v=-p);break;case"right":i=h+u,a=d+_/2,"right"===(y=y||"right")&&(v=p);break;case"center":i=h+u/2,a=d+_/2,y=y||"center";break;default:i=h+u/2,a=d+_,"bottom"===(y=y||"bottom")&&(C=p)}switch(i+=v+f,a+=C+g,y){case"top":o=i-l/2,s=a-c;break;case"bottom":o=i-l/2,s=a;break;case"left":o=i-l,s=a-c/2;break;case"right":o=i,s=a-c/2;break;case"left_top":o=i-l,s=a-c;break;case"left_bottom":o=i-l,s=a;break;case"right_top":o=i,s=a-c;break;case"right_bottom":o=i,s=a;break;default:o=i-l/2,s=a-c/2}var m,f={x:o,y:s,width:l,height:c},g=0|b.getNodeViewProperty(e,t,"label_rotation"),r={label:{size:r,bounds:f,bounds_render:Ce.calcRotatedRect(f,g),render_props:{point:{x:o+l/2,y:s+c/2},direction:"center_middle",bounds:f,rotation:g}}};return null==b.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==b.getDataViewLabelProperty(e,t,"label_box_fill")||(m=Ce.createGrowRect(f,b.getDataViewLabelProperty(e,t,"label_box_padding")||0),r.label_box={bounds:m,bounds_render:Ce.calcRotatedRect(m,g),render_props:{bounds:m,rotation:g}}),m?(r.bounds=r.label_box.bounds,r.bounds_render=r.label_box.bounds_render):(r.bounds=r.label.bounds,r.bounds_render=r.label.bounds_render),r},calcLinkLabelRenderProperties:function(e,t,n){var r,i=w._calcLabelSize(e,t);if(null==i)return null;if(!(r=t.isLoop()?{x:(s=ve.calcPathBounds(n)).x+s.width/2,y:s.y,angle:0}:w._calcPathLabelCenter(n)))return null;var a=r.x,o=r.y,s=b.getLinkViewProperty(e,t,"label_rotation");a+=0|b.getDataViewLabelProperty(e,t,"label_x_offset"),o+=0|b.getDataViewLabelProperty(e,t,"label_y_offset");n=0;!0===s&&(n=90<(c=r.angle)&&c<=270?pe(c-180):c);var l,c={x:a,y:o},o={x:a-i.width/2,y:o-i.height/2,width:i.width,height:i.height},i={label:{size:i,bounds:o,bounds_render:Ce.calcRotatedRect(o,n)}};return i.label.render_props={rotation:n,point:c,direction:"center",bounds:o},null==b.getDataViewLabelProperty(e,t,"label_box_stroke")&&null==b.getDataViewLabelProperty(e,t,"label_box_fill")||(l=Ce.createGrowRect(o,b.getDataViewLabelProperty(e,t,"label_box_padding")||0),i.label_box={bounds:l,bounds_render:Ce.calcRotatedRect(l,n),render_props:{bounds:l,rotation:n}}),l?(i.bounds=i.label_box.bounds,i.bounds_render=i.label_box.bounds_render):(i.bounds=i.label.bounds,i.bounds_render=i.label.bounds),i},_calcPathLabelCenter:function(e){var t=(e=e||[]).length;return t<2?null:t%2==0?w._calcEvenPathLabelCenter(e):w._calcOddPathLabelCenter(e)},_calcEvenPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n-1],i=e[n],a=e[n-2],n=e[1+n],i=a&&"ct"===a.seg&&n?(t=ve.calcOffsetPointOnPath([a,r,i,n],.5,!0)).angle:(t=ge.calcOffsetPointOnLine(r,i,.5,!0),_e(r,i));return t.angle=i,t},_calcOddPathLabelCenter:function(e){var t,n=e.length/2|0,r=e[n],i=e[n-1],n=e[1+n];return r="qt"===i.seg?(t=ve.calcOffsetPointOnPath([i,r,n],.5,!0)).angle:(n=Ge(i.y-r.y)<Ge(n.y-r.y)?i:n,t=ge.calcOffsetPointOnLine(r,n,.5,!0),_e(n,r)),t.angle=r,t},_calcLabelSize:function(e,t){var n=b.getDataViewVisibleLabel(e,t);if(null!=n)return yn.calcTextSize(b.getFont(b.getDataViewLabelProperty(e,t,"label_font")),n)}},P={calcLinkBounds:function(e,t,n){n=P.calcLinkRenderProperties(e,t,n);if(n)return n.bounds},calcLinkPathPoints:function(e,t){t=P._calcLinkPathPoints(e,t);if(t)return t.points},calcLinkRenderProperties:function(e,t,n){var r,i,a=P._calcLinkPathPoints(e,t);if(a&&(r=a.draw_points,i=a.points),i&&1<i.length){var o,s,l,a=ve.calcPathBounds(i);a&&!0!==n&&((o=P._calcLinkArrowRenderProps(e,t,i))&&(s=o.bounds),(l=w.calcLinkLabelRenderProperties(e,t,i))&&(c=l.bounds));var c=it([a,s,c],function(e){return null!=e});return{body_bounds:a,points:i,draw_points:r,label_render_props:l,arrow_render_props:o,bounds:Ce.calcRectsUnion(c)}}return null},_calcLinkPathPoints:function(t,e){var n=e.getProperty("from"),r=e.getProperty("to");if(null==n||null==r)return null;var i,a=t?t.getProperty("link_gap"):16;if(e.getPath)c=e.getPath();else if(e.isLoop())p=f.getLoopSibling(t,e),c=y(e,p,a,n.getBounds(t));else{if(n=f.getFromNodeAgent(t,e),r=f.getToNodeAgent(t,e),null==n||null==r)return null;var o,s,l,c,h=P._calcLinkEdgeBounds(t,e,n,r),d=h.from,u=h.to,_=b.getLinkViewProperty(t,e,"type"),h=P._isSameDirectionLinkType(_),p=f.getSiblingByType(t,e,h);_&&((c=v.calcLinkRAPath(_,e,p,a,d,u,{from_corner_distance:b.getLinkViewProperty(t,e,"from_corner_distance"),to_corner_distance:b.getLinkViewProperty(t,e,"to_corner_distance")}))||("quadratic"===_&&(h=p[0],o=f.getFromNodeAgent(t,h),s=[],l=[],p.forEach(function(e){(f.getFromNodeAgent(t,e)===o?s:l).push(e)}),p=nt(s,l)),c=C.calcLinkCurvePath(_,P._calcRefLinkPathConfig(t,e,p,n,r,d,u),e,p,a,d,u,b.getLinkViewProperty(t,e,"curvature")))),(c=null==c?g(P._calcRefLinkPathConfig(t,e,p,n,r,d,u),e,p,a,d,u,0|b.getLinkViewProperty(t,e,"corner_offset")):c)&&(i=ve.roundPath(c,0|b.getLinkViewProperty(t,e,"corner_radius")))}return{points:c,draw_points:i||c}},_isSameDirectionLinkType:function(e){return-1<["ra_hv","ra_vh"].indexOf(e)},_calcLinkEdgeBounds:function(e,t,n,r){var i=n.getBounds(e),a=r.getBounds(e),o=0|b.getLinkViewProperty(e,t,"from_offset"),s=0|b.getLinkViewProperty(e,t,"to_offset"),l=0|b.getLinkViewProperty(e,t,"from_offset_x"),c=0|b.getLinkViewProperty(e,t,"from_offset_y"),n=0|b.getLinkViewProperty(e,t,"to_offset_x"),r=0|b.getLinkViewProperty(e,t,"to_offset_y"),e={x:i.x+i.width/2,y:i.y+i.height/2},t={x:a.x+a.width/2,y:a.y+a.height/2};return 0!=o&&(e=ye.calcPointOnCircle(e,o,_e(e,t))),0!=s&&(t=ye.calcPointOnCircle(t,s,_e(t,e))),e.x+=l,e.y+=c,t.x+=n,t.y+=r,{from:{x:e.x-i.width/2,y:e.y-i.height/2,width:i.width,height:i.height},to:{x:t.x-a.width/2,y:t.y-a.height/2,width:a.width,height:a.height}}},_calcRefLinkPathConfig:function(e,t,n,r,i,a,o){var s,l,c,h,d,u=n[0],n=u!==t?f.getFromNodeAgent(e,u):r,t=r===n,o=t?(_=i,s=a,o):(_=r,s=o,a),a="path"===n.getType(),_="path"===_.getType();return a&&_&&(_=a=!1),a&&(h={x:(l=ve.calcPointToPathClosestPoint(Ce.getRectCenter(o),n.get("points"))).x,y:l.y,width:0,height:0}),_&&(d={x:(c=ve.calcPointToPathClosestPoint(Ce.getRectCenter(n),i.get("points"))).x,y:c.y,width:0,height:0}),{from:l=!a?p(s,d||o,b.getLinkViewProperty(e,u,"from_position")):l,to:c=!_?p(o,h||s,b.getLinkViewProperty(e,u,"to_position")):c,same_direction:t}},_calcLinkArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return{};var r,i,a,o,s=b.getLinkViewProperty(e,t,"stroke_line_width"),l=b.getLinkViewProperty(e,t,"from_arrow_shape"),c=b.getLinkViewProperty(e,t,"to_arrow_shape");l&&(i=b.getLinkViewProperty(e,t,"from_arrow_offset"),(i=ve.calcOffsetPointOnPath(n,i,!0))&&(a=ye.calcPointOnCircle(i,2,i.angle),r=m.calcArrowRenderProperties(l,a,i,b.getLinkViewProperty(e,t,"from_arrow_angle"),0,s,m.calcArrowSizeLength(s,b.getLinkViewProperty(e,t,"from_arrow_size"))))),c&&(a=(a=b.getLinkViewProperty(e,t,"to_arrow_offset"))<=1&&0<=a?1-a:(i=ve.calcPathLength(n),je(i-a,0)),(a=ve.calcOffsetPointOnPath(n,a,!0))&&(o=ye.calcPointOnCircle(a,2,a.angle+180),o=m.calcArrowRenderProperties(c,o,a,b.getLinkViewProperty(e,t,"to_arrow_angle"),0,s,m.calcArrowSizeLength(s,b.getLinkViewProperty(e,t,"to_arrow_size")))));t=[];return r&&t.push(r.bounds),o&&t.push(o.bounds),{from:r,to:o,bounds:Ce.calcRectsUnion(t)}}},R={calcNodeBounds:function(e,t,n){n=R.calcNodeRenderProperties(e,t,n);if(n)return n.bounds_render},calcNodeRenderProperties:function(e,t,n){var r,i,a,o,s,l=R.calcNodeBodyBounds(e,t);if(null==l)return null;!0!==n&&("path"!==t.getType()||(r=R._calcPathArrowRenderProps(e,t,R._getNodePoints(t)))&&(i=r.bounds),a=R._calcNodeOutlineBounds(e,t,l),(o=w.calcNodeLabelRenderProperties(e,t,l))&&(c=o.bounds),s=R._calcNodeBorderBounds(e,t,l,a));var c=it([l,i,a,c],function(e){return null!=e}),c=Ce.calcRectsUnion(c),e=0|b.getNodeViewProperty(e,t,"rotation"),t=Ce.getRectCenter(l);return{body_bounds:l,body_bounds_render:Ce.calcRotatedRect(l,e,t),outline_bounds:a,outline_bounds_render:Ce.calcRotatedRect(a,e,t),border_bounds:Ce.calcRotatedRect(s,e,t),label_render_props:o,path_arrow_render_props:r,bounds:c,bounds_render:Ce.calcRotatedRect(c,e,t)}},_calcNodeBorderBounds:function(e,t,n,r){n=r||n;if(n&&(0<n.width||0<n.height))return n=Ce.createGrowRect(n,(0|b.getNodeViewProperty(e,t,"select_border_padding","select_border_padding"))+(0|b.getNodeViewProperty(e,t,"select_border_stroke_line_width","select_border_stroke_line_width")))},_calcNodeOutlineBounds:function(e,t,n){if(n&&0<n.width&&0<n.height&&b.getNodeViewProperty(e,t,"outline_stroke"))return Ce.createGrowRect(n,(0|b.getNodeViewProperty(e,t,"outline_padding"))+(0|b.getNodeViewProperty(e,t,"outline_stroke_line_width")))},calcNodeBodyBounds:function(e,t){var n=t.getType();return"path"===n?ve.calcPathBounds(R._getNodePoints(t)):"heatmap"===n?(n=b.getNodeViewProperty(e,t,"heatmap_radius"),S.calcHMPointsBounds(R._getNodePoints(t),n)):R._getShapeAndImageNodeBounds(e,t)},_getShapeAndImageNodeBounds:function(e,t){e=R._getShapeAndImageNodeSize(e,t);return{x:t.getProperty("x"),y:t.getProperty("y"),width:e.width,height:e.height}},_getShapeAndImageNodeSize:function(e,t){return{width:r.getSizeProperty(e,t,"width"),height:r.getSizeProperty(e,t,"height")}},_calcPathArrowRenderProps:function(e,t,n){if((n=n||[]).length<2)return null;var r,i=b.getNodeViewProperty(e,t,"stroke_line_width"),a=b.getNodeViewProperty(e,t,"begin_arrow_shape");a&&(o=b.getNodeViewProperty(e,t,"begin_arrow_offset"),(o=ve.calcOffsetPointOnPath(n,o,!0))&&(s=ye.calcPointOnCircle(o,2,o.angle),r=m.calcArrowRenderProperties(a,s,o,b.getNodeViewProperty(e,t,"begin_arrow_angle"),0,i,m.calcArrowSizeLength(i,b.getNodeViewProperty(e,t,"begin_arrow_size")))));var o,s,l,a=b.getNodeViewProperty(e,t,"end_arrow_shape");a&&(s=(s=b.getNodeViewProperty(e,t,"end_arrow_offset"))<=1&&0<=s?1-s:(o=ve.calcPathLength(n),je(o-s,0)),(s=ve.calcOffsetPointOnPath(n,s,!0))&&(l=ye.calcPointOnCircle(s,2,s.angle+180),l=m.calcArrowRenderProperties(a,l,s,b.getNodeViewProperty(e,t,"end_arrow_angle"),0,i,m.calcArrowSizeLength(i,b.getNodeViewProperty(e,t,"end_arrow_size")))));t=[];return r&&t.push(r.bounds),l&&t.push(l.bounds),{begin:r,end:l,bounds:Ce.calcRectsUnion(t)}},_getNodePoints:function(e){return e.getProperty("points")||[]}},s={_getArrowProperties:function(n,r){var i={};return r=r||{},ct(lt({arrow_shape:null,arrow_size:null,arrow_offset:null,arrow_angle:null},s._getStyleProperties("arrow",{},!0)),function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStyleProperties:function(e,t,n){return lt(s._getFillProperties(e,t),s._getStokeProperties(e,t,n))},_getFillProperties:function(n,r){r=r||{};var i={};return ct({fill:null,fill_gradient_colors:null,fill_gradient_direction:null,fill_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getStokeProperties:function(n,r,e){r=r||{};var i={};return ct({stroke:null,stroke_gradient_colors:null,stroke_gradient_direction:null,stroke_pattern_image:null},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),!0===e&&ct({stroke_line_width:1,stroke_line_dash:null,stroke_line_dash_offset:0},function(e,t){e=s._getPropertyKey(n,e),i[e]=r.hasOwnProperty(e)?r[e]:t}),i},_getPropertyKey:function(e,t){var n=[];return t&&n.unshift(t),e&&n.unshift(e),n.join("_")},_getProperties:function(e,n,r){if(r){var i={};return n=n||{},ct(e,function(e,t){e=r+"_"+e,n.hasOwnProperty(e)&&(t=n[e]),i[e]=t}),i}return lt({},e,n)}};lt(s,{LabelProperties:lt({label_rotation:null,label_font:null,label_box_padding:null,label_gap:null,label_align:null,label_position:null,label_direction:null,label_x_offset:0,label_y_offset:0},s._getStyleProperties("label",{},!0),s._getStyleProperties("label_box",{},!0)),SelectStyleProperties:lt({select_style:null,select_border_padding:null,select_shadow_blur:null,select_shadow_color:null,select_shadow_offset:null},s._getStokeProperties("select_border",{},!0)),NodeProperties:lt({shape:null,roundrect_radius:null},s._getStyleProperties(null,{},!0),s._getArrowProperties("begin"),s._getArrowProperties("end")),OutlineProperties:lt({outline_padding:null},s._getStokeProperties("outline",{},!0)),GroupProperties:lt({expand_shape:null,expand_padding:null,expand_parallelogram_angle:null,expand_roundrect_radius:null},s._getStyleProperties("expand",{},!0)),LinkProperties:lt({from_position:null,to_position:null,from_offset:null,to_offset:null,from_offset_x:null,from_offset_y:null,to_offset_x:null,to_offset_y:null,corner_offset:null,curvature:null,corner_radius:null,from_corner_distance:null,to_corner_distance:null},s._getStokeProperties(null,{stroke:"#000"},!0),s._getArrowProperties("from"),s._getArrowProperties("to")),getLabelProperties:function(e,t){return s._getProperties(s.LabelProperties,e,t)},getSelectStyleProperties:function(e,t){return s._getProperties(s.SelectStyleProperties,e,t)},getNodeStyleProperties:function(e,t){return s._getProperties(s.NodeProperties,e,t)},getOutlineProperties:function(e,t){return s._getProperties(s.OutlineProperties,e,t)},getGroupProperties:function(e,t){return s._getProperties(s.GroupProperties,e,t)},getLinkProperties:function(e,t){return s._getProperties(s.LinkProperties,e,t)},HeatMapProperties:{heatmap_blur:null,heatmap_colors:null,heatmap_opacity:null,heatmap_max_opacity:null,heatmap_min_opacity:null,heatmap_radius:null,heatmap_min_value:null,heatmap_max_value:null},getHeatMapProperties:function(e,t){return s._getProperties(s.HeatMapProperties,e,t)}});var n=function(){n.superClass.constructor.apply(this,arguments)};_t(n,Rn,{___zdefaults_:lt({alpha:1,style:null,hover_style:{shadowColor:"#888",shadowBlur:6}},s.getLabelProperties({label_rotation:0,label_gap:0,label_align:"center",label_fill:"#000"}),s.getSelectStyleProperties({select_style:"border",select_border_stroke:"#0EB29A",select_border_stroke_line_width:1,select_shadow_color:"#0EB29A",select_shadow_blur:6,select_shadow_offset:{x:0,y:0}})),draw:function(e){},getBounds:function(e,t,n){var r=arguments[0];return!0!==r&&!1!==r||(e=null,t=r,n=arguments[1]),this._getBounds(e,t,n)},_getBounds:function(e,t,n){}});var i=function(e){if(!(this instanceof i))return ut.createInstance(i,arguments);this._linkArray=[],this._fromLinkArray=[],this._toLinkArray=[],i.superClass.constructor.apply(this,arguments)};_t(i,n,lt({__toTypeString_Node_$:function(){return ae},__className_:"Node",___zdefaults_:lt({x:0,y:0,image:null,rotation:0,width:32,height:32,label_gap:3,label_position:"bottom",select_border_padding:2},s.getNodeStyleProperties({shape:"circle",roundrect_radius:.12,fill:"#1982c8",stroke:"#1982c8",stroke_line_width:1,begin_arrow_size:2,begin_arrow_offset:0,begin_arrow_angle:46,end_arrow_size:2,end_arrow_offset:0,end_arrow_angle:46}),s.getOutlineProperties({outline_padding:2,outline_stroke_line_width:1}),s.getHeatMapProperties({heatmap_blur:.85,heatmap_colors:{.25:"rgb(0,0,255)",.55:"rgb(0,255,0)",.85:"yellow",1:"rgb(255,0,0)"},heatmap_opacity:0,heatmap_max_opacity:1,heatmap_min_opacity:0,heatmap_radius:30})),getType:function(){var e=this.get("type");return e||(this.get("image")?"image":this.get("points")?"path":"shape")},getRendererClass:function(e){return U}},{getLinks:function(e){return!1===e?this._linkArray:nt([],this._linkArray)},getFromLinks:function(e){return!1===e?this._fromLinkArray:nt([],this._fromLinkArray)},getToLinks:function(e){return!1===e?this._toLinkArray:nt([],this._toLinkArray)},getLinksTo:function(e){var t=e.getToLinks(!1);return it(this.getFromLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksFrom:function(e){var t=e.getFromLinks(!1);return it(this.getToLinks(!1),function(e){return-1<t.indexOf(e)})},getLinksBetween:function(e){var t=e.getLinks(!1);return it(this.getLinks(!1),function(e){return-1<t.indexOf(e)})},_addFromLink:function(e){this._fromLinkArray.push(e),this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeFromLink:function(e){ot(this._fromLinkArray,e),ot(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_addToLink:function(e){this._toLinkArray.push(e),this._linkArray.push(e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)},_removeToLink:function(e){ot(this._toLinkArray,e),ot(this._linkArray,e),this.dispatchChangeEvent("links",this._linkArray,this._linkArray)}},{beforeSetProperty:function(e,t,n){"host"===e&&n&&n.removeChangeListener(this._onHostChange,this),i.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"host"===e&&t&&t.addChangeListener(this._onHostChange,this),i.superClass.afterSetProperty.apply(this,arguments)},_onHostChange:function(e){var t,n,r=e.property;"x"!==r&&"y"!==r||!0!==this.__isUpdatingFromHost&&!0!==this.__isUpdatingFollower&&(this.__isUpdatingFromHost=!0,t=e.source,u(t)||(n=(e.new_value||0)-(e.old_value||0),t.__isUpdatingFollower=!0,e=this.get(r),this.set(r,e+n),delete t.__isUpdatingFollower,delete this.__isUpdatingFromHost))}},{setPosition:function(e){r.setPosition(null,this,he.getArgsPoint.apply(null,arguments))},getPosition:function(){if(!r.isPointsNode(this))return{x:this.getProperty("x"),y:this.getProperty("y")};var e=this.getBounds();return e?{x:e.x,y:e.y}:void 0},setCenter:function(e){if(null!=(e=he.getArgsPoint.apply(null,arguments))){var t;if(r.isPointsNode(this)){var n=this.getBounds();if(!n)return;t=n.width,n=n.height}else t=this.getProperty("width"),n=this.getProperty("height");this.setPosition({x:e.x-t/2,y:e.y-n/2})}},getCenter:function(){if(!r.isPointsNode(this))return{x:this.getProperty("x")+this.getProperty("width")/2,y:this.getProperty("y")+this.getProperty("height")/2};var e=this.getBounds();return e?{x:e.x+e.width/2,y:e.y+e.height/2}:void 0},getSize:function(){if(!r.isPointsNode(this))return{width:this.getProperty("width"),height:this.getProperty("height")};var e=this.getBounds();return e?{width:e.width,height:e.height}:void 0},setSize:function(e){r.setSize(null,this,he.getArgsSize.apply(null,arguments))},_getBounds:function(e,t){return R.calcNodeBounds(e,this,!0!==t)}}));var c=function(e,t,n){if(!(this instanceof c))return ut.createInstance(c,arguments);var r,i,a=arguments.length;1===a?o=e:2===a?(r=e,i=t):3===a&&(r=e,i=t,o=n);var o=Qe(o)?[o]:[];c.superClass.constructor.apply(this,o),r&&this.set("from",r),i&&this.set("to",i)};_t(c,n,{__toTypeString_Link_$:function(){return oe},__className_:"Link",___zdefaults_:lt({type:null,from:null,to:null,label_rotation:!0},s.getLinkProperties({stroke:"#1982c8",stroke_line_width:1,from_offset:0,to_offset:0,corner_radius:0,curvature:.15,from_arrow_size:2,from_arrow_offset:0,from_arrow_angle:46,to_arrow_size:2,to_arrow_offset:0,to_arrow_angle:46})),isLoop:function(){var e=this.getProperty("from"),t=this.getProperty("to");return null!=e&&e===t},beforeSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!n||("from"===e?n._removeFromLink(this):"to"===e&&n._removeToLink(this)),c.superClass.beforeSetProperty.apply(this,arguments)},afterSetProperty:function(e,t,n){"from"!==e&&"to"!==e||!t||("from"===e?t._addFromLink(this):"to"===e&&t._addToLink(this)),c.superClass.afterSetProperty.apply(this,arguments)},_getBounds:function(e,t){return P.calcLinkBounds(e,this,!0!==t)},getPathPoints:function(e){return P.calcLinkPathPoints(e,this)},getRendererClass:function(e){return H}});var D=function(){if(!(this instanceof D))return ut.createInstance(D,arguments);D.superClass.constructor.apply(this,arguments)};_t(D,i,{__toTypeString_Group_$:function(){return se},__className_:"Group",___zdefaults_:lt({shape:"hexagon"},s.getGroupProperties({width:36,height:36,expand_padding:10,expand_shape:"covexhull",expand_roundrect_radius:.12,expand_parallelogram_angle:78,expand_fill:"rgba(50,100,200,0.1)",expand_stroke:"#1982c8",expand_stroke_line_width:1})),setPosition:function(e){a.setPosition(null,this,he.getArgsPoint.apply(null,arguments))},_getBounds:function(e,t,n){return e&&null==n&&(n=e.isExpanded(this)),x.calcGroupBounds(e,this,n,!0!==t)},getGroupChildren:function(){return this.getChildren(!1)},getRendererClass:function(){return W}});var k=function(){if(!(this instanceof k))return ut.createInstance(k,arguments);k.superClass.constructor.apply(this,arguments)};_t(k,i,{__toTypeString_Subview_$:function(){return le},__className_:"subview",___zdefaults_:{shape:"cloud",width:60,height:36}});var A=function(){if(!(this instanceof A))return ut.createInstance(A,arguments);A.superClass.constructor.apply(this,arguments)};_t(A,c,{__toTypeString_Link_$:function(){return oe},__toTypeString_Subview_$:function(){return le},__toTypeString_LinkSubview_$:function(){return ce},__className_:"LinkSubview"});var S={_point_templates:{},calcHMPointsValues:function(e){var t=0,n=0;return e.forEach(function(e){e=e.value;null!=e&&(t=qe(t,e),n=je(n,e))}),{min:t||0,max:n||0}},calcHMPointsBounds:function(e,r){if(null==e||0===e.length)return null;r|=0;var i=null,a=null,o=null,s=null;return e.forEach(function(e,t){var n=e.hasOwnProperty("radius")?0|e.radius:r;s=0===t?(i=e.x-n,a=e.y-n,o=e.x+n,e.y+n):(i=qe(e.x-n,i),a=qe(e.y-n,a),o=je(e.x+n,o),je(e.y+n,s))}),{x:i,y:a,width:o-i,height:s-a}},drawHM:function(e,t,n){var r=S._getShadowCtx(n.width,n.height);S._updateAlphaCtx(r,e.getRenderConfig("points"),n,e.getRenderConfig("heatmap_min_value"),e.getRenderConfig("heatmap_max_value"),e.getRenderConfig("heatmap_radius"),e.getRenderConfig("heatmap_blur")),S._colorize(r,n,e.getRenderConfig("heatmap_opacity"),e.getRenderConfig("heatmap_min_opacity"),e.getRenderConfig("heatmap_max_opacity"),e.getRenderConfig("heatmap_colors")),t.drawImage(S._shadowCVS,n.x,n.y)},_updateAlphaCtx:function(i,e,t,a,o,s,n){var l=1-n,c=t.x,h=t.y;e.forEach(function(e){var t=e.x-c,n=e.y-h,r=e.hasOwnProperty("radius")?0|e.radius:s;0<r&&(null!=(e=e.value)&&(e=je(a,qe(e,o)),i.globalAlpha=o!==a?(e-a)/(o-a):1),t=t-r,n=n-r,i.drawImage(S._getPointTemplate(r,l),t,n))})},_colorize:function(e,t,n,r,i,a){n=255*n|0,i=255*i|0,r=255*r|0;for(var t=e.getImageData(0,0,t.width,t.height),o=t.data,s=o.length,l=S._getColorPalette(a),c=3;c<s;c+=4){var h=o[c],d=4*h;d&&(h=0<n?n:h<i?h<r?r:h:i,o[c-3]=l[d],o[c-2]=l[1+d],o[c-1]=l[2+d],o[c]=h)}e.putImageData(t,0,0)},_getColorPalette:function(e){var t=Ot("canvas"),n=t.getContext("2d");t.setAttribute("width",256),t.setAttribute("height",1);var r=n.createLinearGradient(0,0,256,1);return ct(e||{},function(e,t){r.addColorStop(e,t)}),n.fillStyle=r,n.fillRect(0,0,256,1),n.getImageData(0,0,256,1).data},_getShadowCtx:function(e,t){return S._shadowCVS||(S._shadowCVS=Ot("canvas"),S._shadowCTX=S._shadowCVS.getContext("2d")),S._shadowCVS.setAttribute("width",e),S._shadowCVS.setAttribute("height",t),S._shadowCTX},_getPointTemplate:function(e,t){var n=e+"$"+t;if(S._point_templates[n])return S._point_templates[n];var r=Ot("canvas"),i=r.getContext("2d"),a=e,o=e,s=2*e;r.setAttribute("width",s),r.setAttribute("height",s);s={x:0,y:0,width:s,height:s};return 1===t?gn.render(i,s,"circle",{fill:"rgba(0,0,0,1)"}):((e=i.createRadialGradient(a,o,e*t,a,o,e)).addColorStop(0,"rgba(0,0,0,1)"),e.addColorStop(1,"rgba(0,0,0,0)"),gn.render(i,s,"rect",{fill:e})),S._point_templates[n]=r}},T={getCalcRenderProperty:function(e,t){e=e.getRenderConfig(I.CALC_RENDER_PROPS);if(e)return e[t]},getCalcRenderBodyBounds:function(e){return T.getCalcRenderProperty(e,"body_bounds")},getCalcRenderLabelProperty:function(e){e=T.getCalcRenderProperty(e,"label_render_props");if(e)return e.label},getCalcRenderLabelBoxProperty:function(e){e=T.getCalcRenderProperty(e,"label_render_props");if(e)return e.label_box},isRenderBodyVisible:function(e){e=T.getCalcRenderBodyBounds(e);return e&&0<e.width&&0<e.height},updateLabelConfig:function(e,t,n,r){null!=e.getRenderConfig("label")&&(T.updatePropertiesRenderConfig(e,t,n,r,s.LabelProperties),r.label_font=b.getFont(r.label_font))},updateSelectedConfig:function(e,t,n,r){!0===e.getRenderConfig("selected")&&T.updatePropertiesRenderConfig(e,t,n,r,s.SelectStyleProperties)},updatePropertiesRenderConfig:function(e,r,i,a,t,o){ct(t,function(e,t){var n;o&&(n=o+"_"+e),a[e]=r.getDataViewProperty(i,e,n)})}},L={updateNodeConfig:function(e,t,n,r){var i=R.calcNodeRenderProperties(t,n);null!=i&&(r[I.CALC_RENDER_PROPS]=i,i=n.getType(),r.type=i,r.rotation=0|b.getNodeViewProperty(t,n,"rotation"),T.updatePropertiesRenderConfig(e,t,n,r,s.NodeProperties,"node"),"image"===i?L._updateNodeImageConfig(e,t,n,r):"path"===i?L._updateNodePathConfig(e,t,n,r):"heatmap"===i?L._updateNodeHeatMapConfig(e,t,n,r):L._updateNodeShapeConfig(e,t,n,r),L.updateNodeOutlineConfig(e,t,n,r))},_updateNodeImageConfig:function(e,t,n,r){var i;T.isRenderBodyVisible(e)&&(i=b.getNodeViewProperty(t,n,"image"),(r.image=i)&&(!(e=me.get(i,e.updateData,e))||(t=b.getNodeViewProperty(t,n,"image_color"))&&((n=e.$_color_map=e.$_color_map||{})[t]=n[t]||me.getColorImage(e,t,"canvas"),e=n[t]),r[I.NODE_IMAGE]=e))},_updateNodePathConfig:function(e,t,n,r){r.points=n.getProperty("points")||[]},_updateNodeHeatMapConfig:function(e,t,n,r){var i=n.getProperty("points")||[];0!==(r.points=i).length&&(T.updatePropertiesRenderConfig(e,t,n,r,s.HeatMapProperties,"node"),t=r.heatmap_min_value,n=r.heatmap_max_value,null!=t&&null!=n||(i=S.calcHMPointsValues(i),null==t&&(r.heatmap_min_value=i.min),null==n&&(r.heatmap_max_value=i.max)))},_updateNodeShapeConfig:function(e,t,n,r){},updateNodeOutlineConfig:function(e,t,n,r){T.getCalcRenderProperty(e,"outline_bounds")&&T.updatePropertiesRenderConfig(e,t,n,r,s.OutlineProperties,"node")}},E=function(e,t,n,r){var i=P.calcLinkRenderProperties(t,n);null!=i&&(r[I.CALC_RENDER_PROPS]=i,T.updatePropertiesRenderConfig(e,t,n,r,s.LinkProperties,"link"),r.type=n.get("type"),r.loop=n.isLoop(),r.from=n.get("from"),r.to=n.get("to"),r.link_gap=e.getViewRenderConfig("link_gap"),r.from_agent=f.getFromNodeAgent(t,n),r.to_agent=f.getToNodeAgent(t,n),r.label_rotation=t.getDataViewProperty(n,"label_rotation","link_label_rotation"))},V=function(e,t,n,r){var i=t.isExpanded(n);r.expand=i;var a,o=x.calcGroupRenderProperties(t,n,i);null!=o&&((r[I.CALC_RENDER_PROPS]=o).is_group&&i&&(a={},T.updatePropertiesRenderConfig(e,t,n,a,s.GroupProperties,"group"),ct(a,function(e,t){r[e.substring(7)]=a[e]}),o=(i=o.expand_render_props).type,"path"===(r.type=o)&&(r.points=i.points)),L.updateNodeOutlineConfig(e,t,n,r))},O={drawNodePathArrow:function(e,t){var n,r,i=T.getCalcRenderProperty(e,"path_arrow_render_props");i&&((r=i.begin)&&("shape"===(n=r.type)?O._drawShapeArrow(e,t,r,"begin_arrow","stroke"):"path"===n&&O._drawPathArrow(e,t,r,"begin_arrow","stroke")),(r=i.end)&&("shape"===(i=r.type)?O._drawShapeArrow(e,t,r,"end_arrow","stroke"):"path"===i&&O._drawPathArrow(e,t,r,"end_arrow","stroke")))},drawLinkArrow:function(e,t){var n,r,i=T.getCalcRenderProperty(e,"arrow_render_props");i&&((r=i.from)&&("shape"===(n=r.type)?O._drawShapeArrow(e,t,r,"from_arrow","stroke"):"path"===n&&O._drawPathArrow(e,t,r,"from_arrow","stroke")),(r=i.to)&&("shape"===(i=r.type)?O._drawShapeArrow(e,t,r,"to_arrow","stroke"):"path"===i&&O._drawPathArrow(e,t,r,"to_arrow","stroke")))},_drawShapeArrow:function(r,e,i,a,o){var s=i.shape_bounds,t=s.x+s.width/2,n=s.y+s.height/2,l=i.rotation;cn(e,l,{x:t,y:n},function(e){var t=i.shape,n=z.getStrokeOpt(r,s,a+"_stroke");ln(e,n.attr,function(){gn.render(e,s,t,{fill:z.getStyle(r,s,a+"_fill")||z.getStyle(r,s,o),stroke:n.stroke},{radius:.2})})})},_drawPathArrow:function(e,t,n,r,i){var a,o=n.shape,s=n.bounds,l=z.getStrokeOpt(e,s,r+"_stroke"),c=l.stroke,l=l.attr;"open_arrow"!==o?a=z.getStyle(e,s,r+"_fill")||z.getStyle(e,s,i):null!=c&&null!=l||(i=z.getStrokeOpt(e,s,i),c=c||i.stroke,l=l||i.attr),ln(t,l,function(){_n.render(t,n.points,{fill:a,stroke:c})})}},z={getStrokeAttr:function(e,t){return{lineWidth:e.getRenderConfig(t+"_line_width"),lineDash:e.getRenderConfig(t+"_line_dash"),lineDashOffset:e.getRenderConfig(t+"_line_dash_offset")}},getStrokeOpt:function(e,t,n){var r,t=z.getStyle(e,t,n);return{stroke:t,attr:r=t?z.getStrokeAttr(e,n):r}},getStyle:function(e,t,n){var r=e.getRenderConfig(n);return t={x:t.x,y:t.y,width:je(1,t.width),height:je(1,t.height)},"linear_gradient"===r?un.createRectDirectionLinearGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"radial_gradient"===r?un.createRectDirectionRadialGradient(t,e.getRenderConfig(n+"_gradient_direction"),e.getRenderConfig(n+"_gradient_colors")):"pattern"===r?fn.createPattern(e.getRenderConfig(n+"_pattern_image")):r},drawLabel:function(e,t){var n,r,i,a=T.getCalcRenderLabelProperty(e);!a||(n=a.render_props)&&(r=n.bounds,i=z.getStrokeOpt(e,r,"label_stroke"),ln(t,i.attr,function(){yn.render(t,e.getRenderConfig("label"),n.point,{fill:z.getStyle(e,r,"label_fill"),stroke:i.stroke},n.direction,{align:e.getRenderConfig("label_align"),font:e.getRenderConfig("label_font"),text_size:n.size,rotation:n.rotation})}))},drawLabelBox:function(n,r){var i,e,t=T.getCalcRenderLabelBoxProperty(n);!t||(e=t.render_props)&&(i=e.bounds,t=0|e.rotation,e={x:i.x+i.width/2,y:i.y+i.height/2},cn(r,t,e,function(){var e=z.getStrokeOpt(n,i,"label_box_stroke"),t=z.getStyle(n,i,"label_box_fill");ln(r,e.attr,function(){gn.render(r,i,"rect",{fill:t,stroke:e.stroke})})}))}},M={draw:function(e,t){var n,r=T.getCalcRenderBodyBounds(e);r&&("image"===(n=e.getRenderConfig("type"))?M._drawImage(e,t,r):"path"===n?M._drawPath(e,t,r):"heatmap"===n?M._drawHeatMap(e,t,r):M._drawShape(e,t,r),M._drawOutline(e,t,r))},_drawImage:function(e,t,n){e=e.getRenderConfig(I.NODE_IMAGE);e?t.drawImage(e,n.x,n.y,n.width,n.height):gn.render(t,n,"rect",{strokeStyle:"#ccc",fillStyle:"#eee"})},_drawPath:function(e,t,n){var r=z.getStrokeOpt(e,n,"stroke");ln(t,r.attr,function(){_n.render(t,e.getRenderConfig("points"),{fill:z.getStyle(e,n,"fill"),stroke:r.stroke})}),O.drawNodePathArrow(e,t)},_drawHeatMap:function(e,t,n){S.drawHM(e,t,n)},_drawShape:function(e,t,n){var r,i=e.getRenderConfig("shape");i&&(r=z.getStrokeOpt(e,n,"stroke"),ln(t,r.attr,function(){gn.render(t,n,i,{fill:z.getStyle(e,n,"fill"),stroke:r.stroke},{radius:e.getRenderConfig("roundrect_radius")})}))},_drawOutline:function(e,t,n){var r,i=T.getCalcRenderProperty(e,"outline_bounds");!i||(r=z.getStrokeOpt(e,n,"outline_stroke")).stroke&&ln(t,r.attr,function(){gn.render(t,i,"rect",{stroke:r.stroke})})},drawSelectBorder:function(e,t){var n,r;"border"===e.getRenderConfig("select_style")&&(!(n=T.getCalcRenderProperty(e,"border_bounds"))||(r=z.getStrokeOpt(e,n,"select_border_stroke")).stroke&&ln(t,r.attr,function(){gn.render(t,n,"rect",{stroke:r.stroke})}))}},B={draw:function(e,t){var n,r,i=T.getCalcRenderProperty(e,"draw_points");null==i||i.length<2||(B._drawSelectBorder(e,t,i),r=T.getCalcRenderBodyBounds(e),n=z.getStrokeOpt(e,r,"stroke"),(r=B._getLinkLinearGradientStroke(e,i))&&(n.stroke=r),ln(t,n.attr,function(){_n.render(t,i,{stroke:n.stroke})}),O.drawLinkArrow(e,t))},_getLinkLinearGradientStroke:function(e,t){if(1<t.length&&"linear_gradient"===e.getRenderConfig("stroke"))return un.createLinearGradient(t[0],t[t.length-1],e.getRenderConfig("stroke_gradient_colors"))},_drawSelectBorder:function(e,t,n){var r,i,a;"border"===e.getRenderConfig("select_style")&&(r=T.getCalcRenderBodyBounds(e),i=0|e.getRenderConfig("stroke_line_width"),(a=z.getStrokeOpt(e,r,"select_border_stroke")).attr=a.attr||{},a.attr.lineWidth=i+je(2*(0|a.attr.lineWidth),2),ln(t,a.attr,function(){_n.render(t,n,{stroke:a.stroke})}))}},I={CALC_RENDER_PROPS:"calc_render_props_$",NODE_IMAGE:"node_image_$",NODE_SELECT_BORDER_BOUNDS:"node_select_border_bounds_$"},N=function(){N.superClass.constructor.apply(this,arguments)};_t(N,Wn,{updateRenderConfig:function(e,t,n){N.superClass.updateRenderConfig.apply(this,arguments),n.alpha=e.getDataViewProperty(t,"alpha","data_alpha"),n.style=e.getDataViewProperty(t,"style","data_style"),T.updateLabelConfig(this,e,t,n),T.updateSelectedConfig(this,e,t,n)},doDraw:function(e,t){N.superClass.doDraw.apply(this,arguments);var n,r={globalAlpha:this.getRenderConfig("alpha")},i=this.getRenderConfig("style");i&&(r=lt(r,i)),!0!==t&&((n=this.getRenderConfig("hover_style"))&&(r=lt(r,n)),null!=(i=this.getRenderConfig("select_style"))&&("shadow"===i?(r.shadowBlur=this.getRenderConfig("select_shadow_blur"),r.shadowColor=this.getRenderConfig("select_shadow_color"),n=this.getRenderConfig("select_shadow_offset"),r.shadowOffsetX=n.x,r.shadowOffsetY=n.y):Qe(i)&&(r=lt(r,i)))),ln(e,r,function(){this._drawBody(e),!0!==t&&this.drawLabel(e)},this)},_drawBody:function(e){var t=this._data.drawBody;t&&!1===t.apply(this._data,[e,this._data,this._view,this])||this.drawBody(e)},drawBody:function(e){},drawLabel:function(e){z.drawLabelBox(this,e),z.drawLabel(this,e)},hits:function(e){var t=T.getCalcRenderProperty(this,"bounds");return null!=t&&(t=Ce.createGrowRect(t,10,10),!1!==ye.rectContainsPoint(t,e)&&N.superClass.hits.apply(this,arguments))}});var U=function(){U.superClass.constructor.apply(this,arguments)};_t(U,N,{updateRenderConfig:function(e,t,n){U.superClass.updateRenderConfig.apply(this,arguments),L.updateNodeConfig(this,e,t,n)},doDraw:function(e,t){var n=this.getRenderConfig("rotation");0===n?U.superClass.doDraw.apply(this,arguments):cn(e,n,Ce.getRectCenter(T.getCalcRenderBodyBounds(this)),function(e){U.superClass.doDraw.apply(this,[e,t])},this),M.drawSelectBorder(this,e)},drawBody:function(e){U.superClass.drawBody.apply(this,arguments),M.draw(this,e)},getBounds:function(e){return!0===e&&T.getCalcRenderProperty(this,"body_bounds_render"),T.getCalcRenderProperty(this,"bounds_render")}});var H=function(){H.superClass.constructor.apply(this,arguments)};_t(H,N,{updateRenderConfig:function(e,t,n){H.superClass.updateRenderConfig.apply(this,arguments),E(this,e,t,n)},drawBody:function(e){H.superClass.drawBody.apply(this,arguments),B.draw(this,e)},getBounds:function(){return T.getCalcRenderProperty(this,"bounds")}});var W=function(){W.superClass.constructor.apply(this,arguments)};_t(W,U,{updateRenderConfig:function(e,t,n){W.superClass.updateRenderConfig.apply(this,arguments),V(this,e,t,n)}});var F=function(e,t){kt(e.getViewRoot(),"cursor",t||"default")},G=function(){G.superClass.constructor.apply(this,arguments)};_t(G,In,{getViewDefaultTypes:function(){return["mousedown"]},isDraggable:function(e,t){return!1},onDragStart:function(e,t){},onDragEnd:function(e,t){},onDrag:function(e,t){},getDragCursor:function(e){},reset:function(e,t){},handle_mousedown:function(e,t){this.isDraggable(e,t)&&(this._mousedown_point=this.getView().getEventRelativePoint(e),this._addDragListener(),this.onDragStart(e,t))},handle_drag_mousemove:function(e){null!=this._mousedown_point&&(e.preventDefault(),!0!==this._drag_cursor_set&&(this._drag_cursor_set=!0),F(this,this.getDragCursor()),this.onDrag(e,this.getView()))},handle_drag_mouseup:function(e){var t=this.getView();this.onDragEnd(e,t),this._removeDragListener(),this._reset(e,t)},_reset:function(e,t){F(this,"default"),delete this._mousedown_point,delete this._drag_cursor_set,this.reset(e,t)},_addDragListener:function(){!0!==this._drag_listener_added&&(this._drag_listener_added=!0,qt(e,"mousemove",this.handle_drag_mousemove,this),qt(e,"mouseup",this.handle_drag_mouseup,this))},_removeDragListener:function(){!0===this._drag_listener_added&&(this._drag_listener_added=!1,$t(e,"mousemove",this.handle_drag_mousemove,this),$t(e,"mouseup",this.handle_drag_mouseup,this))}});var j=function(){j.superClass.constructor.apply(this,arguments)};_t(j,G,{getViewDefaultTypes:function(){return["wheel","mousedown"]},handle_wheel:function(e,t){e.preventDefault();var n=t.getProperty("zoom_factor"),r=t.getProperty("zoom");Yt.isWheelDown(e)?r/=n:r*=n,t.zoomByPoint(r,t.getEventRelativePoint(e))},isDraggable:function(e,t){return!e.ctrlKey&&!t.getDataAt(e)},onDragStart:function(e,t){this._mousedown_translate_x=t.getProperty("translate_x"),this._mousedown_translate_y=t.getProperty("translate_y")},onDrag:function(e,t){var n;null!=this._mousedown_translate_x&&(e=(n=t.getEventRelativePoint(e)).x-this._mousedown_point.x,n=n.y-this._mousedown_point.y,e=this._mousedown_translate_x+e,n=this._mousedown_translate_y+n,t.translate(e,n))},getDragCursor:function(){return"grabbing"},reset:function(e,t){this._mousedown_translate_x=null,this._mousedown_translate_y=null}});var q=function(){q.superClass.constructor.apply(this,arguments)};_t(q,In,{getViewDefaultTypes:function(){return["click","dblclick","contextmenu"]},handle_contextmenu:function(e,t){e.preventDefault()},handle_click:function(e,t){var n=t.getDataAt(e);n&&(t._isDisabled(n)||t._onDataClick(n,e))},handle_dblclick:function(e,t){e.stopPropagation();var n=t.getDataAt(e);n?t._isDisabled(n)||(_(n)?t.setCurrentSubview(n):u(n)&&t._isExpandable(n)&&t.toggleExpand(n),t._onDataDblClick(n,e)):(e=t.getCurrentSubview())&&t.setCurrentSubview(e.getProperty("parent"))}});var $=function(){$.superClass.constructor.apply(this,arguments)};_t($,G,{getViewDefaultTypes:function(){return["mousedown"]},_isMultipleSelect:function(){return"multiple"===this.getView().getSelectMode()},isDraggable:function(e,t){return e.ctrlKey&&!t.getDataAt(e)&&this._isMultipleSelect()},getDragCursor:function(){return"crosshair"},reset:function(e,t){!(this._mousemove_point=null)===this._drag_draw_added&&(this._drag_draw_added=!1,t.removeControllerDraw(this.drawAreaSelect,this))},handle_mousedown:function(e,t){var n=t.getDataAt(e);return n?t._isDisabled(n)||!t.isSelectable(n)?void 0:void(e.ctrlKey?t.isSelected(n)?t.removeSelect(n):this._isMultipleSelect()?t.addSelect(n):t.setSelect(n):t.isSelected(n)||t.setSelect(n)):this.isDraggable(e,t)?$.superClass.handle_mousedown.apply(this,arguments):void(n||t.clearSelect())},onDrag:function(e,t){this._mousemove_point=t.getEventRelativePoint(e),t.updateControllerCanvas()},onDragStart:function(e,t){!0!==this._drag_draw_added&&(this._drag_draw_added=!0,t.addControllerDraw(this.drawAreaSelect,this))},onDragEnd:function(e,t){var n=this._getSelectRect();n&&(n=t.getDataArrayAtRect(n),e.ctrlKey?n.forEach(function(e){t.isSelected(e)?t.removeSelect(e):t.addSelect(e)}):t.setSelect(n))},drawAreaSelect:function(e){var t=this._getSelectRect();t&&on.saveAndSet2DAttributes(e,{lineWidth:.6},function(){gn.render(e,t,"rect",{fill:"rgba(51,153,255,0.2)",stroke:"#3399ff"})})},_getSelectRect:function(){var e=this._mousedown_point,t=this._mousemove_point;if(null==e||null==t)return null;var n=qe(e.x,t.x),r=qe(e.y,t.y);return{x:n,y:r,width:je(e.x,t.x)-n,height:je(e.y,t.y)-r,intersect:n<t.x&&r<t.y}}});var X=function(){X.superClass.constructor.apply(this,arguments)};_t(X,G,{isDraggable:function(e,t){e=t.getDataAt(e);return null!=e&&!t._isDisabled(e)},onDragStart:function(e,t){this._mousemove_point=t.getTransformedPoint(e)},reset:function(){delete this._move_node_arr},onDrag:function(e,n){var r,i,e=n.getTransformedPoint(e);null==this._move_node_arr&&(r=[],(i=n.getSelected(!1)).forEach(function(e){var t;d(e)&&!n._isDisabled(e)&&n._isMovable(e)&&(t=h.getSameSubviewAncestorArray(e),at(t,function(e){return-1<i.indexOf(e)})||(u(e)?nt(r,this._getGroupChildren(e,n)):r.push(e)))},this),this._move_node_arr=r),this._move(e.x-this._mousemove_point.x,e.y-this._mousemove_point.y),this._mousemove_point=e},_getGroupChildren:function(e,t){return it(mn.getAddedDescendantArray(t.getProvider(),e),function(e){return d(e)&&!u(e)})},_move:function(n,r){this._move_node_arr.forEach(function(e){var t=e.getPosition();e.setPosition(t.x+n,t.y+r)},this)}});var K=function(e,t){vn.isGView(e)||1!==arguments.length||(t=arguments[0],e=null),this._gView=e,this._is_updating=!1,K.superClass.constructor.apply(this,[t]),this._updateStartOnChange()};_t(K,be,{___zdefaults_:{movable_on_selected:!1,stop_on_complete:!1,start_on_change:!1},afterSetProperty:function(e,t,n){Vn.superClass.afterSetProperty.apply(this,arguments),"start_on_change"===e&&this._updateStartOnChange()},_updateStartOnChange:function(){this._gView&&(!0===this.get("start_on_change")?this._addChangeListener():this._removeChangeListener())},_addChangeListener:function(){!0!==this._on_model_change&&(this._on_model_change=!0,this._gView.onModelChange(this._handleModelChange,this))},_removeChangeListener:function(){!0!==this._on_model_change&&this._gView.offModelChange(this._handleModelChange,this)},_handleModelChange:function(e){var t;!0!==this._is_updating&&"data"===e.type&&(e=(t=e.event).data,"x"!==(t=t.property)&&"y"!==t||!this._isLayoutNode(e)||this.start())},start:function(){},stop:function(){},layout:function(){},rebuild:function(){},step:function(){},onComplete:function(){},getProvider:function(){return this._gView.getProvider()},getNodeBounds:function(e){return e.getBounds(this._gView)},isSelected:function(e){return!!this._gView&&this._gView.isSelected(e)},isVisible:function(e){return!this._gView||this._gView._isVisible(e)},_isLayoutNode:function(e){return!!Ue.type.isNode(e)&&(!Ue.type.isGroup(e)||!!this._gView&&!this._gView.isExpanded(e))},_getLayoutNodes:function(e){var t=this,n=this.getGView();return(e=null==e&&n?n.getDataArray():e)?Ue.util.filterArray(e,function(e){return t.isVisible(e)&&t._isLayoutNode(e)}):[]},isMovable:function(e){return!this._gView||!1!==this._gView.isMovable(e)&&((!1!==this.get("movable_on_selected")||!this.isSelected(e))&&(!!d(e)&&(!u(e)||!this._gView.isExpanded(e))))},getGView:function(){return this._gView}});var J=function(e,t){this._damper=1,this._maxMotion=0,this._motionRatio=0,this._sNodeMap={},this._sNodeArr=[],this._sLinkArr=[],J.superClass.constructor.apply(this,arguments)};_t(J,K,{___zdefaults_:{start_on_change:!0,stop_on_complete:!0,node_repulsion:.8,link_repulsion:.2,link_limit:30,limit_bounds:null,motion_limit:.01},start:function(){this._damper=1,this._timer||(this._hasFix=!1,this._timer=yt(this._step,this))},stop:function(){this._timer&&(pt.cancelCallRAFInterval(this._timer),this._timer=null),this._hasFix=!1},layout:function(){for(this._damper=1;"complete"!==this._step(););},_step:function(){if(this._rebuild(),this._doRelax(),this._updatePosition(),this.step(),this._isComplete())return!0===this.get("stop_on_complete")&&this.stop(),this.onComplete(),"complete"},_isComplete:function(){return this._damper<.1&&this._maxMotion<this.get("motion_limit")},_doRelax:function(){for(var e=0;e<8;e++){var t=this._sNodeArr.length;this._sLinkArr.forEach(this._relaxLink,this);for(var n=0;n<t;n++)for(var r=0;r<t;r++){var i=this._sNodeArr[n],a=this._sNodeArr[r];i!==a&&this._relaxNodePair(i,a)}this._adjustNodes()}},_updatePosition:function(){var e=this._sNodeArr.length;this._is_updating=!0;for(var t=0;t<e;t++){var n=this._sNodeArr[t];n.fix||n.data.setPosition(n.x,n.y)}this._is_updating=!1},_adjustNodes:function(){var i,a,o,s,l=this,e=this._maxMotion,c=0,h=this.get("limit_bounds");h&&(i=h.x,a=h.y,o=h.x+h.width,s=h.y+h.height),this._sNodeArr.forEach(function(e){var t=e.dx,n=e.dy;t*=l._damper,n*=l._damper,e.dx=t/2,e.dy=n/2;var r=Q.sqrt(t*t+n*n);e.fix||(e.x=e.x+Q.max(-30,Q.min(30,t)),e.y=e.y+Q.max(-30,Q.min(30,n)),h?(e.x<i&&(e.x=i,l._adjustLocation(1,0)),e.y<a&&(e.y=a,l._adjustLocation(0,1)),(n=l.getNodeBounds(e.data))&&(e.x+n.width>o&&(e.x=o-n.width,l._adjustLocation(-1,0)),e.y+n.height>s&&(e.y=s-n.height,l._adjustLocation(0,-1)))):!0!==l._hasFix&&(e.x<1&&l._adjustLocation(1,0),e.y<1&&l._adjustLocation(0,1))),c=Q.max(r,c)}),this._maxMotion=c,0<this._maxMotion?this._motionRatio=e/this._maxMotion-1:this._motionRatio=0,this._damp()},_damp:function(){this._motionRatio<=.001&&((this._maxMotion<.2||1<this._maxMotion&&this._damper<.9)&&.01<this._damper?this._damper-=.01:this._maxMotion<.4&&.003<this._damper?this._damper-=.003:1e-4<this._damper&&(this._damper-=1e-4)),this._maxMotion<this.get("motion_limit")&&(this._damper=0)},_relaxLink:function(e){var t=e.to.x-e.from.x,n=e.to.y-e.from.y,r=Q.sqrt(t*t+n*n),i=100*e.length,t=.25*t/i,i=.25*n/i;e.to.dx=e.to.dx-t*r,e.to.dy=e.to.dy-i*r,e.from.dx=e.from.dx+t*r,e.from.dy=e.from.dy+i*r},_relaxNodePair:function(e,t){var n=0,r=0,i=e.x-t.x,a=e.y-t.y,o=i*i+a*a;0==o?(n=Q.random(),r=Q.random()):o<36e4&&(n=i/o,r=a/o);o=e.repulsion*t.repulsion/400;e.dx+=n*o,e.dy+=r*o,t.dx-=n*o,t.dy-=r*o},_rebuild:function(){var n=this._sNodeMap={},r=this._sNodeArr=[],t=this._sLinkArr=[],i=this.getGView(),a=this,o=[],s=[];i.eachData(function(e){i._isVisible(e)&&(d(e)?u(e)&&i.isExpanded(e)||o.push(e):l(e)&&s.push(e))}),o.forEach(function(e){var t=a._createNode(e);n[e.id()]=t,r.push(t)}),s.forEach(function(e){e=a._createLink(e);e&&t.push(e)})},_createLink:function(e){if(!e.isLoop()){var t=f.getFromNodeAgent(this._gView,e),n=f.getToNodeAgent(this._gView,e);if(t&&n){var r=this._sNodeMap[t.id()],i=this._sNodeMap[n.id()];if(r&&i){i={data:e,from:r,to:i},t=this.getNodeBounds(t),n=this.getNodeBounds(n),n=t.width+n.width,t=t.height+t.height,t=Q.floor(Q.sqrt(n*n+t*t)*this.get("link_repulsion"));return t<=this.get("link_limit")&&(t=this.get("link_limit")),i.length=t,i}}}},_createNode:function(e){var t=e.getPosition(),e={data:e,x:t.x,y:t.y,dx:0,dy:0,fix:!this.isMovable(e),repulsion:this._getRepulsion(e)};return this._hasFix=e.fix||this._hasFix,e},_getRepulsion:function(e){var t,e=this.getNodeBounds(e);return t=!e||(t=Q.floor(Q.sqrt(e.width*e.width+e.height*e.height)*this.get("node_repulsion")))<=0?100:t},_adjustLocation:function(e,t){for(var n=this.get("limit_bounds"),r=0,i=this._sNodeArr.length;r<i;r++){var a=this._sNodeArr[r],o=this.getNodeBounds(a.data);if(!o)return;0!==e&&(0<e?(null==n||a.x+o.width+e<n.x+n.width)&&(a.x+=e):(null==n||a.x+e>n.x)&&(a.x+=e)),0!==t&&(0<t?(null==n||a.y+o.height+t<n.y+n.height)&&(a.y+=t):(null==n||a.y+t>n.y)&&(a.y+=t))}}});var Y,Z=function(){if(!(this instanceof Z))return ut.createInstance(Z,arguments);this._subViewTransform={},Z.superClass.constructor.apply(this,arguments),this._initControllerCanvas(),this.addController(new q),this.addController(new j),this.addController(new $),this.addController(new X)};_t(Z,Fn,lt({__toTypeString_GView_$:function(){return ie},__className_:"GView",___zdefaults_:{link_gap:16,hit_padding:2,movable:!0,select_mode:"multiple"},getDrawDataArray:function(){return nt(o.getDrawGroupArray(this),it(this.getDataArray(!1),function(e){return l(e)}),o.getDrawNodeArray(this))},translateCenter:function(e){!0===e?gt(function(){this._transformFit(!0)},this):this._transformFit(!0)},zoomFit:function(e){!0===e?gt(this._transformFit,this):this._transformFit()},_transformFit:function(e){var t,n,r,i,a,o,s=b.getVisibleDataBounds(this);s&&(o=s.width,a=s.height,r=this.getRootSize(),t=qe(60,qe(r.width,r.height)/10),n=r.width-2*t,r=r.height-2*t,0<o&&0<a&&0<n&&0<r&&(!0===e?i=this.get("zoom"):(i=qe(n/o,r/a),(i=(e=this.get("max_zoom"))<i?e:i)<(e=this.get("min_zoom"))&&(i=e)),a=a*i,o=t+(n-o*i)/2-s.x*i,s=t+(r-a)/2-s.y*i,this.set("zoom",i),this.translate(o,s)))},getDataRendererClass:function(e){return e.getRendererClass()},toImage:function(e){var t=new Image;return t.src=b.toDataURL(this,e),t},eachNode:function(e,t,n){var r=this.filterData(function(e){return(!0!==n||!u(e))&&d(e)});0<r.length&&rt(r,e,t)},eachLink:function(e,t){var n=this.filterData(function(e){return l(e)});0<n.length&&rt(n,e,t)}},(Y=Z,lt({_isSuperVisible:function(e){return Y.superClass._isVisible.apply(this,arguments)},_isVisible:function(e){if(!1===this._isVisible_(e))return!1;if(l(e)){var t=f.getFromNodeAgent(this,e);if(null==t||!1===this._isVisible(t))return!1;var n=f.getToNodeAgent(this,e);if(null==n||!1===this._isVisible(n))return!1;if(t===n&&(e.get("from")!==t||e.get("from")!==n))return!1}if(this.getCurrentSubview()!=h.getSubview(e))return!1;var n=h.getGroupAncestorArray(e),r=!0;if(n.forEach(function(e){r=r&&this.isExpanded(e)},this),!0!==r)return!1;var e=h.getSameSubviewAncestorArray(e),i=!0;return e.forEach(function(e){i=i&&this._isVisible(e)},this),!0===i}},{afterSetProperty:function(e,t,n){Y.superClass.afterSetProperty.apply(this,arguments),"current_subview"===e&&this._updateSubviewTransform(t,n)},setCurrentSubview:function(e){null!=e&&!_(e)||this.setProperty("current_subview",e)},getCurrentSubview:function(){return this.getProperty("current_subview")},_updateSubviewTransform:function(e,t){var n=null,n=t?t.id():"default";this._subViewTransform[n]={zoom:this.get("zoom"),translate_x:this.get("translate_x"),translate_y:this.get("translate_y")};n=null,n=e?e.id():"default",n=this._subViewTransform[n];null==n&&(n={zoom:1,translate_x:0,translate_y:0}),this.set(n)}},Tn(),{expandAll:function(e){var t=this.getDataArray(!1);return!1!==e&&(t=it(t,this._isVisible_,this)),this._expandProvider.set(this._filterExpandableData(t))},_isExpandable:function(e){return!!u(e)&&this.isExpandable.apply(this,arguments)},_addExpandNeedUpdateData:function(e){this._addNeedUpdateData(e,!0,!0)}},{_getDataRelatedDataArray:function(e,t,n){var r=[];return d(e)?(r=nt(r,mn.getAddedDescendantArray(this.getProvider(),e),mn.getAncestorArray(e)),r=nt(r,f.getNodeAgentLinks(this,e))):l(e)&&(r=f.getSibling(this,e)),r.forEach(function(e){d(e)&&r.push.apply(r,f.getNodeAgentLinks(this,e))},this),r}})))),Ue.gv={GView:Z,Node:i,Link:c,Group:D,Subview:k,LinkSubview:A,isNode:d,isLink:l,isGroup:u,isSubview:_,isLinkSubview:t,layout:{Layout:K,ForceLayout:J}},lt(Ue.type,{isNode:d,isLink:l,isGroup:u,isSubview:_,isLinkSubview:t})}(s)}(window),"undefined"!=typeof module&&module.exports&&(module.exports=z);
//# sourceMappingURL=source_map/focus-ui.js.map